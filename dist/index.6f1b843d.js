let e;function t(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var n,r,i,a,o,s,l,u,c=globalThis;function f(e){return e&&e.__esModule?e.default:e}var h={},d={},p=c.parcelRequire186f;null==p&&((p=function(e){if(e in h)return h[e].exports;if(e in d){var t=d[e];delete d[e];var n={id:e,exports:{}};return h[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){d[e]=t},c.parcelRequire186f=p);var m=p.register;m("acw62",function(e,t){e.exports=p("2pUnB")}),m("2pUnB",function(e,n){t(e.exports,"Children",()=>r,e=>r=e),t(e.exports,"Component",()=>i,e=>i=e),t(e.exports,"Fragment",()=>a,e=>a=e),t(e.exports,"Profiler",()=>o,e=>o=e),t(e.exports,"PureComponent",()=>s,e=>s=e),t(e.exports,"StrictMode",()=>l,e=>l=e),t(e.exports,"Suspense",()=>u,e=>u=e),t(e.exports,"__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED",()=>c,e=>c=e),t(e.exports,"cloneElement",()=>f,e=>f=e),t(e.exports,"createContext",()=>h,e=>h=e),t(e.exports,"createElement",()=>d,e=>d=e),t(e.exports,"createFactory",()=>m,e=>m=e),t(e.exports,"createRef",()=>g,e=>g=e),t(e.exports,"forwardRef",()=>v,e=>v=e),t(e.exports,"isValidElement",()=>y,e=>y=e),t(e.exports,"lazy",()=>_,e=>_=e),t(e.exports,"memo",()=>x,e=>x=e),t(e.exports,"useCallback",()=>b,e=>b=e),t(e.exports,"useContext",()=>S,e=>S=e),t(e.exports,"useDebugValue",()=>E,e=>E=e),t(e.exports,"useEffect",()=>w,e=>w=e),t(e.exports,"useImperativeHandle",()=>M,e=>M=e),t(e.exports,"useLayoutEffect",()=>T,e=>T=e),t(e.exports,"useMemo",()=>A,e=>A=e),t(e.exports,"useReducer",()=>C,e=>C=e),t(e.exports,"useRef",()=>P,e=>P=e),t(e.exports,"useState",()=>R,e=>R=e),t(e.exports,"version",()=>L,e=>L=e);var r,i,a,o,s,l,u,c,f,h,d,m,g,v,y,_,x,b,S,E,w,M,T,A,C,P,R,L,O=p("8coUR"),I="function"==typeof Symbol&&Symbol.for,U=I?Symbol.for("react.element"):60103,N=I?Symbol.for("react.portal"):60106,D=I?Symbol.for("react.fragment"):60107,k=I?Symbol.for("react.strict_mode"):60108,F=I?Symbol.for("react.profiler"):60114,z=I?Symbol.for("react.provider"):60109,B=I?Symbol.for("react.context"):60110,V=I?Symbol.for("react.forward_ref"):60112,H=I?Symbol.for("react.suspense"):60113,G=I?Symbol.for("react.memo"):60115,W=I?Symbol.for("react.lazy"):60116,j="function"==typeof Symbol&&Symbol.iterator;function X(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y={};function $(e,t,n){this.props=e,this.context=t,this.refs=Y,this.updater=n||q}function K(){}function Z(e,t,n){this.props=e,this.context=t,this.refs=Y,this.updater=n||q}$.prototype.isReactComponent={},$.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(X(85));this.updater.enqueueSetState(this,e,t,"setState")},$.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},K.prototype=$.prototype;var J=Z.prototype=new K;J.constructor=Z,O(J,$.prototype),J.isPureReactComponent=!0;var Q={current:null},ee=Object.prototype.hasOwnProperty,et={key:!0,ref:!0,__self:!0,__source:!0};function en(e,t,n){var r,i={},a=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)ee.call(t,r)&&!et.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:U,type:e,key:a,ref:o,props:i,_owner:Q.current}}function er(e){return"object"==typeof e&&null!==e&&e.$$typeof===U}var ei=/\/+/g,ea=[];function eo(e,t,n,r){if(ea.length){var i=ea.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function es(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>ea.length&&ea.push(e)}function el(e,t,n){return null==e?0:function e(t,n,r,i){var a=typeof t;("undefined"===a||"boolean"===a)&&(t=null);var o=!1;if(null===t)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case U:case N:o=!0}}if(o)return r(i,t,""===n?"."+eu(t,0):n),1;if(o=0,n=""===n?".":n+":",Array.isArray(t))for(var s=0;s<t.length;s++){var l=n+eu(a=t[s],s);o+=e(a,l,r,i)}else if("function"==typeof(l=null===t||"object"!=typeof t?null:"function"==typeof(l=j&&t[j]||t["@@iterator"])?l:null))for(t=l.call(t),s=0;!(a=t.next()).done;)l=n+eu(a=a.value,s++),o+=e(a,l,r,i);else if("object"===a)throw Error(X(31,"[object Object]"==(r=""+t)?"object with keys {"+Object.keys(t).join(", ")+"}":r,""));return o}(e,"",t,n)}function eu(e,t){var n,r;return"object"==typeof e&&null!==e&&null!=e.key?(n=e.key,r={"=":"=0",":":"=2"},"$"+(""+n).replace(/[=:]/g,function(e){return r[e]})):t.toString(36)}function ec(e,t){e.func.call(e.context,t,e.count++)}function ef(e,t,n){var r,i,a=e.result,o=e.keyPrefix;Array.isArray(e=e.func.call(e.context,t,e.count++))?eh(e,a,n,function(e){return e}):null!=e&&(er(e)&&(r=e,i=o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(ei,"$&/")+"/")+n,e={$$typeof:U,type:r.type,key:i,ref:r.ref,props:r.props,_owner:r._owner}),a.push(e))}function eh(e,t,n,r,i){var a="";null!=n&&(a=(""+n).replace(ei,"$&/")+"/"),el(e,ef,t=eo(t,a,r,i)),es(t)}var ed={current:null};function ep(){var e=ed.current;if(null===e)throw Error(X(321));return e}r={map:function(e,t,n){if(null==e)return e;var r=[];return eh(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;el(e,ec,t=eo(null,null,t,n)),es(t)},count:function(e){return el(e,function(){return null},null)},toArray:function(e){var t=[];return eh(e,t,null,function(e){return e}),t},only:function(e){if(!er(e))throw Error(X(143));return e}},i=$,a=D,o=F,s=Z,l=k,u=H,c={ReactCurrentDispatcher:ed,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:Q,IsSomeRendererActing:{current:!1},assign:O},f=function(e,t,n){if(null==e)throw Error(X(267,e));var r=O({},e.props),i=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=Q.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)ee.call(t,l)&&!et.hasOwnProperty(l)&&(r[l]=void 0===t[l]&&void 0!==s?s[l]:t[l])}var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:U,type:e.type,key:i,ref:a,props:r,_owner:o}},h=function(e,t){return void 0===t&&(t=null),(e={$$typeof:B,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:z,_context:e},e.Consumer=e},d=en,m=function(e){var t=en.bind(null,e);return t.type=e,t},g=function(){return{current:null}},v=function(e){return{$$typeof:V,render:e}},y=er,_=function(e){return{$$typeof:W,_ctor:e,_status:-1,_result:null}},x=function(e,t){return{$$typeof:G,type:e,compare:void 0===t?null:t}},b=function(e,t){return ep().useCallback(e,t)},S=function(e,t){return ep().useContext(e,t)},E=function(){},w=function(e,t){return ep().useEffect(e,t)},M=function(e,t,n){return ep().useImperativeHandle(e,t,n)},T=function(e,t){return ep().useLayoutEffect(e,t)},A=function(e,t){return ep().useMemo(e,t)},C=function(e,t,n){return ep().useReducer(e,t,n)},P=function(e){return ep().useRef(e)},R=function(e){return ep().useState(e)},L="16.13.1"}),m("8coUR",function(e,t){/* eslint-disable no-unused-vars */var n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=!function(){try{if(!Object.assign)return!1;// Detect buggy property enumeration order in older V8 versions.
// https://bugs.chromium.org/p/v8/issues/detail?id=4118
var e=new String("abc");// eslint-disable-line no-new-wrappers
if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;// https://bugs.chromium.org/p/v8/issues/detail?id=3056
var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;// https://bugs.chromium.org/p/v8/issues/detail?id=3056
var i={};if("abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},i)).join(""))return!1;return!0}catch(e){// We don't expect any of the above to throw, but better to be safe.
return!1}}()?function(e,t){for(var a,o,s=function(e){if(null==e)throw TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var u in a=Object(arguments[l]))r.call(a,u)&&(s[u]=a[u]);if(n){o=n(a);for(var c=0;c<o.length;c++)i.call(a,o[c])&&(s[o[c]]=a[o[c]])}}return s}:Object.assign}),m("Xw6Mv",function(e,t){var n,r,i,a,o,s,l,u=p("acw62"),c=p("8coUR"),f=p("fO90s");function h(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!u)throw Error(h(227));function d(e,t,n,r,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}var m=!1,g=null,v=!1,y=null,_={onError:function(e){m=!0,g=e}};function x(e,t,n,r,i,a,o,s,l){m=!1,g=null,d.apply(_,arguments)}var b=null,S=null,E=null;function w(e,t,n){var r=e.type||"unknown-event";e.currentTarget=E(n),function(e,t,n,r,i,a,o,s,l){if(x.apply(this,arguments),m){if(m){var u=g;m=!1,g=null}else throw Error(h(198));v||(v=!0,y=u)}}(r,t,void 0,e),e.currentTarget=null}var M=null,T={};function A(){if(M)for(var e in T){var t=T[e],n=M.indexOf(e);if(!(-1<n))throw Error(h(96,e));if(!P[n]){if(!t.extractEvents)throw Error(h(97,e));for(var r in P[n]=t,n=t.eventTypes){var i=void 0,a=n[r];if(R.hasOwnProperty(r))throw Error(h(99,r));R[r]=a;var o=a.phasedRegistrationNames;if(o){for(i in o)o.hasOwnProperty(i)&&C(o[i],t,r);i=!0}else a.registrationName?(C(a.registrationName,t,r),i=!0):i=!1;if(!i)throw Error(h(98,r,e))}}}}function C(e,t,n){if(L[e])throw Error(h(100,e));L[e]=t,O[e]=t.eventTypes[n].dependencies}var P=[],R={},L={},O={};function I(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!T.hasOwnProperty(t)||T[t]!==r){if(T[t])throw Error(h(102,t));T[t]=r,n=!0}}n&&A()}var U=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),N=null,D=null,k=null;function F(e){if(e=S(e)){if("function"!=typeof N)throw Error(h(280));var t=e.stateNode;t&&(t=b(t),N(e.stateNode,e.type,t))}}function z(e){D?k?k.push(e):k=[e]:D=e}function B(){if(D){var e=D,t=k;if(k=D=null,F(e),t)for(e=0;e<t.length;e++)F(t[e])}}function V(e,t){return e(t)}function H(e,t,n,r,i){return e(t,n,r,i)}function G(){}var W=V,j=!1,X=!1;function q(){(null!==D||null!==k)&&(G(),B())}function Y(e,t,n){if(X)return e(t,n);X=!0;try{return W(e,t,n)}finally{X=!1,q()}}var $=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,K=Object.prototype.hasOwnProperty,Z={},J={};function Q(e,t,n,r,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a}var ee={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ee[e]=new Q(e,0,!1,e,null,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ee[t]=new Q(t,1,!1,e[1],null,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){ee[e]=new Q(e,2,!1,e.toLowerCase(),null,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ee[e]=new Q(e,2,!1,e,null,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ee[e]=new Q(e,3,!1,e.toLowerCase(),null,!1)}),["checked","multiple","muted","selected"].forEach(function(e){ee[e]=new Q(e,3,!0,e,null,!1)}),["capture","download"].forEach(function(e){ee[e]=new Q(e,4,!1,e,null,!1)}),["cols","rows","size","span"].forEach(function(e){ee[e]=new Q(e,6,!1,e,null,!1)}),["rowSpan","start"].forEach(function(e){ee[e]=new Q(e,5,!1,e.toLowerCase(),null,!1)});var et=/[\-:]([a-z])/g;function en(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(et,en);ee[t]=new Q(t,1,!1,e,null,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(et,en);ee[t]=new Q(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(et,en);ee[t]=new Q(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)}),["tabIndex","crossOrigin"].forEach(function(e){ee[e]=new Q(e,1,!1,e.toLowerCase(),null,!1)}),ee.xlinkHref=new Q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach(function(e){ee[e]=new Q(e,1,!1,e.toLowerCase(),null,!0)});var er=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function ei(e,t,n,r){var i,a=ee.hasOwnProperty(t)?ee[t]:null;(null!==a?0===a.type:!r&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":if(r)return!1;if(null!==n)return!n.acceptsBooleans;return"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e;default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?(i=t,(!!K.call(J,i)||!K.call(Z,i)&&($.test(i)?J[i]=!0:(Z[i]=!0,!1)))&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n))):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}er.hasOwnProperty("ReactCurrentDispatcher")||(er.ReactCurrentDispatcher={current:null}),er.hasOwnProperty("ReactCurrentBatchConfig")||(er.ReactCurrentBatchConfig={suspense:null});var ea=/^(.*)[\\\/]/,eo="function"==typeof Symbol&&Symbol.for,es=eo?Symbol.for("react.element"):60103,el=eo?Symbol.for("react.portal"):60106,eu=eo?Symbol.for("react.fragment"):60107,ec=eo?Symbol.for("react.strict_mode"):60108,ef=eo?Symbol.for("react.profiler"):60114,eh=eo?Symbol.for("react.provider"):60109,ed=eo?Symbol.for("react.context"):60110,ep=eo?Symbol.for("react.concurrent_mode"):60111,em=eo?Symbol.for("react.forward_ref"):60112,eg=eo?Symbol.for("react.suspense"):60113,ev=eo?Symbol.for("react.suspense_list"):60120,ey=eo?Symbol.for("react.memo"):60115,e_=eo?Symbol.for("react.lazy"):60116,ex=eo?Symbol.for("react.block"):60121,eb="function"==typeof Symbol&&Symbol.iterator;function eS(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=eb&&e[eb]||e["@@iterator"])?e:null}function eE(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case eu:return"Fragment";case el:return"Portal";case ef:return"Profiler";case ec:return"StrictMode";case eg:return"Suspense";case ev:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case ed:return"Context.Consumer";case eh:return"Context.Provider";case em:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case ey:return eE(e.type);case ex:return eE(e.render);case e_:if(e=1===e._status?e._result:null)return eE(e)}return null}function ew(e){var t="";do{switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break;default:var r=e._debugOwner,i=e._debugSource,a=eE(e.type);n=null,r&&(n=eE(r.type)),r=a,a="",i?a=" (at "+i.fileName.replace(ea,"")+":"+i.lineNumber+")":n&&(a=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+a}t+=n,e=e.return}while(e)return t}function eM(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function eT(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function eA(e){e._valueTracker||(e._valueTracker=function(e){var t=eT(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function eC(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=eT(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function eP(e,t){var n=t.checked;return c({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function eR(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=eM(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function eL(e,t){null!=(t=t.checked)&&ei(e,"checked",t,!1)}function eO(e,t){eL(e,t);var n=eM(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r){e.removeAttribute("value");return}t.hasOwnProperty("value")?eU(e,t.type,n):t.hasOwnProperty("defaultValue")&&eU(e,t.type,eM(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function eI(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function eU(e,t,n){("number"!==t||e.ownerDocument.activeElement!==e)&&(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function eN(e,t){var n,r;return e=c({children:void 0},t),n=t.children,r="",u.Children.forEach(n,function(e){null!=e&&(r+=e)}),(t=r)&&(e.children=t),e}function eD(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(i=0,n=""+eM(n),t=null;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ek(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(h(91));return c({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function eF(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(h(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(h(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:eM(n)}}function ez(e,t){var n=eM(t.value),r=eM(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function eB(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function eV(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function eH(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?eV(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var eG,eW,ej=(eG=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((eW=eW||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=eW.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return eG(e,t,n,r)})}:eG);function eX(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType){n.nodeValue=t;return}}e.textContent=t}function eq(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var eY={animationend:eq("Animation","AnimationEnd"),animationiteration:eq("Animation","AnimationIteration"),animationstart:eq("Animation","AnimationStart"),transitionend:eq("Transition","TransitionEnd")},e$={},eK={};function eZ(e){if(e$[e])return e$[e];if(!eY[e])return e;var t,n=eY[e];for(t in n)if(n.hasOwnProperty(t)&&t in eK)return e$[e]=n[t];return e}U&&(eK=document.createElement("div").style,"AnimationEvent"in window||(delete eY.animationend.animation,delete eY.animationiteration.animation,delete eY.animationstart.animation),"TransitionEvent"in window||delete eY.transitionend.transition);var eJ=eZ("animationend"),eQ=eZ("animationiteration"),e0=eZ("animationstart"),e1=eZ("transitionend"),e2="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),e3=new("function"==typeof WeakMap?WeakMap:Map);function e4(e){var t=e3.get(e);return void 0===t&&(t=new Map,e3.set(e,t)),t}function e5(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do 0!=(1026&(t=e).effectTag)&&(n=t.return),e=t.return;while(e)}return 3===t.tag?n:null}function e6(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function e8(e){if(e5(e)!==e)throw Error(h(188))}function e7(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=e5(e)))throw Error(h(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return e8(i),e;if(a===r)return e8(i),t;a=a.sibling}throw Error(h(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,s=i.child;s;){if(s===n){o=!0,n=i,r=a;break}if(s===r){o=!0,r=i,n=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===n){o=!0,n=a,r=i;break}if(s===r){o=!0,r=a,n=i;break}s=s.sibling}if(!o)throw Error(h(189))}}if(n.alternate!==r)throw Error(h(190))}if(3!==n.tag)throw Error(h(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function e9(e,t){if(null==t)throw Error(h(30));return null==e?t:Array.isArray(e)?(Array.isArray(t)?e.push.apply(e,t):e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function te(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var tt=null;function tn(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)w(e,t[r],n[r]);else t&&w(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function tr(e){if(null!==e&&(tt=e9(tt,e)),e=tt,tt=null,e){if(te(e,tn),tt)throw Error(h(95));if(v)throw e=y,v=!1,y=null,e}}function ti(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ta(e){if(!U)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}var to=[];function ts(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>to.length&&to.push(e)}function tl(e,t,n,r){if(to.length){var i=to.pop();return i.topLevelType=e,i.eventSystemFlags=r,i.nativeEvent=t,i.targetInst=n,i}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function tu(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=nf(r)}while(n)for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=ti(e.nativeEvent);r=e.topLevelType;var a=e.nativeEvent,o=e.eventSystemFlags;0===n&&(o|=64);for(var s=null,l=0;l<P.length;l++){var u=P[l];u&&(u=u.extractEvents(r,t,a,i,o))&&(s=e9(s,u))}tr(s)}}function tc(e,t,n){if(!n.has(e)){switch(e){case"scroll":tG(t,"scroll",!0);break;case"focus":case"blur":tG(t,"focus",!0),tG(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ta(e)&&tG(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===e2.indexOf(e)&&tH(e,t)}n.set(e,null)}}var tf,th,td,tp=!1,tm=[],tg=null,tv=null,ty=null,t_=new Map,tx=new Map,tb=[],tS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),tE="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function tw(e,t,n,r,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i,container:r}}function tM(e,t){switch(e){case"focus":case"blur":tg=null;break;case"dragenter":case"dragleave":tv=null;break;case"mouseover":case"mouseout":ty=null;break;case"pointerover":case"pointerout":t_.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":tx.delete(t.pointerId)}}function tT(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=tw(t,n,r,i,a),null!==t&&null!==(t=nh(t))&&th(t)):e.eventSystemFlags|=r,e}function tA(e){if(null!==e.blockedOn)return!1;var t=tq(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=nh(t);return null!==n&&th(n),e.blockedOn=t,!1}return!0}function tC(e,t,n){tA(e)&&n.delete(t)}function tP(){for(tp=!1;0<tm.length;){var e=tm[0];if(null!==e.blockedOn){null!==(e=nh(e.blockedOn))&&tf(e);break}var t=tq(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:tm.shift()}null!==tg&&tA(tg)&&(tg=null),null!==tv&&tA(tv)&&(tv=null),null!==ty&&tA(ty)&&(ty=null),t_.forEach(tC),tx.forEach(tC)}function tR(e,t){e.blockedOn===t&&(e.blockedOn=null,tp||(tp=!0,f.unstable_scheduleCallback(f.unstable_NormalPriority,tP)))}function tL(e){function t(t){return tR(t,e)}if(0<tm.length){tR(tm[0],e);for(var n=1;n<tm.length;n++){var r=tm[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==tg&&tR(tg,e),null!==tv&&tR(tv,e),null!==ty&&tR(ty,e),t_.forEach(t),tx.forEach(t),n=0;n<tb.length;n++)(r=tb[n]).blockedOn===e&&(r.blockedOn=null);for(;0<tb.length&&null===(n=tb[0]).blockedOn;)(function(e){var t=nf(e.target);if(null!==t){var n=e5(t);if(null!==n){if(13===(t=n.tag)){if(null!==(t=e6(n))){e.blockedOn=t,f.unstable_runWithPriority(e.priority,function(){td(n)});return}}else if(3===t&&n.stateNode.hydrate){e.blockedOn=3===n.tag?n.stateNode.containerInfo:null;return}}}e.blockedOn=null})(n),null===n.blockedOn&&tb.shift()}var tO={},tI=new Map,tU=new Map,tN=["abort","abort",eJ,"animationEnd",eQ,"animationIteration",e0,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",e1,"transitionEnd","waiting","waiting"];function tD(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],a="on"+(i[0].toUpperCase()+i.slice(1));a={phasedRegistrationNames:{bubbled:a,captured:a+"Capture"},dependencies:[r],eventPriority:t},tU.set(r,t),tI.set(r,a),tO[i]=a}}tD("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),tD("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),tD(tN,2);for(var tk="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),tF=0;tF<tk.length;tF++)tU.set(tk[tF],0);var tz=f.unstable_UserBlockingPriority,tB=f.unstable_runWithPriority,tV=!0;function tH(e,t){tG(t,e,!1)}function tG(e,t,n){var r=tU.get(t);switch(void 0===r?2:r){case 0:r=tW.bind(null,t,1,e);break;case 1:r=tj.bind(null,t,1,e);break;default:r=tX.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function tW(e,t,n,r){j||G();var i=j;j=!0;try{H(tX,e,t,n,r)}finally{(j=i)||q()}}function tj(e,t,n,r){tB(tz,tX.bind(null,e,t,n,r))}function tX(e,t,n,r){if(tV){if(0<tm.length&&-1<tS.indexOf(e))e=tw(null,e,t,n,r),tm.push(e);else{var i=tq(e,t,n,r);if(null===i)tM(e,r);else if(-1<tS.indexOf(e))e=tw(i,e,t,n,r),tm.push(e);else if(!function(e,t,n,r,i){switch(t){case"focus":return tg=tT(tg,e,t,n,r,i),!0;case"dragenter":return tv=tT(tv,e,t,n,r,i),!0;case"mouseover":return ty=tT(ty,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return t_.set(a,tT(t_.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,tx.set(a,tT(tx.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r)){tM(e,r),e=tl(e,r,null,t);try{Y(tu,e)}finally{ts(e)}}}}}function tq(e,t,n,r){if(null!==(n=nf(n=ti(r)))){var i=e5(n);if(null===i)n=null;else{var a=i.tag;if(13===a){if(null!==(n=e6(i)))return n;n=null}else if(3===a){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}e=tl(e,r,n,t);try{Y(tu,e)}finally{ts(e)}return null}var tY={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},t$=["Webkit","ms","Moz","O"];function tK(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||tY.hasOwnProperty(e)&&tY[e]?(""+t).trim():t+"px"}function tZ(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=tK(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(tY).forEach(function(e){t$.forEach(function(t){tY[t=t+e.charAt(0).toUpperCase()+e.substring(1)]=tY[e]})});var tJ=c({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tQ(e,t){if(t){if(tJ[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(h(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(h(60));if(!("object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML))throw Error(h(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(h(62,""))}}function t0(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var t1="http://www.w3.org/1999/xhtml";function t2(e,t){var n=e4(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=O[t];for(var r=0;r<t.length;r++)tc(t[r],e,n)}function t3(){}function t4(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function t5(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function t6(e,t){var n,r=t5(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=t5(r)}}function t8(){for(var e=window,t=t4();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(n)e=t.contentWindow;else break;t=t4(e.document)}return t}function t7(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var t9=null,ne=null;function nt(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function nn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var nr="function"==typeof setTimeout?setTimeout:void 0,ni="function"==typeof clearTimeout?clearTimeout:void 0;function na(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function no(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ns=Math.random().toString(36).slice(2),nl="__reactInternalInstance$"+ns,nu="__reactEventHandlers$"+ns,nc="__reactContainere$"+ns;function nf(e){var t=e[nl];if(t)return t;for(var n=e.parentNode;n;){if(t=n[nc]||n[nl]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=no(e);null!==e;){if(n=e[nl])return n;e=no(e)}return t}n=(e=n).parentNode}return null}function nh(e){return(e=e[nl]||e[nc])&&(5===e.tag||6===e.tag||13===e.tag||3===e.tag)?e:null}function nd(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(h(33))}function np(e){return e[nu]||null}function nm(e){do e=e.return;while(e&&5!==e.tag)return e||null}function ng(e,t){var n=e.stateNode;if(!n)return null;var r=b(n);if(!r)return null;switch(n=r[t],t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(h(231,t,typeof n));return n}function nv(e,t,n){(t=ng(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=e9(n._dispatchListeners,t),n._dispatchInstances=e9(n._dispatchInstances,e))}function ny(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=nm(t);for(t=n.length;0<t--;)nv(n[t],"captured",e);for(t=0;t<n.length;t++)nv(n[t],"bubbled",e)}}function n_(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=ng(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=e9(n._dispatchListeners,t),n._dispatchInstances=e9(n._dispatchInstances,e))}function nx(e){e&&e.dispatchConfig.registrationName&&n_(e._targetInst,null,e)}function nb(e){te(e,ny)}var nS=null,nE=null,nw=null;function nM(){if(nw)return nw;var e,t,n=nE,r=n.length,i="value"in nS?nS.value:nS.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nw=i.slice(e,1<t?1-t:void 0)}function nT(){return!0}function nA(){return!1}function nC(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?nT:nA,this.isPropagationStopped=nA,this}function nP(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function nR(e){if(!(e instanceof this))throw Error(h(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function nL(e){e.eventPool=[],e.getPooled=nP,e.release=nR}c(nC.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nT)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nT)},persist:function(){this.isPersistent=nT},isPersistent:nA,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=nA,this._dispatchInstances=this._dispatchListeners=null}}),nC.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},nC.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var i=new t;return c(i,n.prototype),n.prototype=i,n.prototype.constructor=n,n.Interface=c({},r.Interface,e),n.extend=r.extend,nL(n),n},nL(nC);var nO=nC.extend({data:null}),nI=nC.extend({data:null}),nU=[9,13,27,32],nN=U&&"CompositionEvent"in window,nD=null;U&&"documentMode"in document&&(nD=document.documentMode);var nk=U&&"TextEvent"in window&&!nD,nF=U&&(!nN||nD&&8<nD&&11>=nD),nz={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},nB=!1;function nV(e,t){switch(e){case"keyup":return -1!==nU.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function nH(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var nG=!1,nW={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nj(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!nW[e.type]:"textarea"===t}var nX={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function nq(e,t,n){return(e=nC.getPooled(nX.change,e,t,n)).type="change",z(n),nb(e),e}var nY=null,n$=null;function nK(e){tr(e)}function nZ(e){if(eC(nd(e)))return e}function nJ(e,t){if("change"===e)return t}var nQ=!1;function n0(){nY&&(nY.detachEvent("onpropertychange",n1),n$=nY=null)}function n1(e){if("value"===e.propertyName&&nZ(n$)){if(e=nq(n$,e,ti(e)),j)tr(e);else{j=!0;try{V(nK,e)}finally{j=!1,q()}}}}function n2(e,t,n){"focus"===e?(n0(),nY=t,n$=n,nY.attachEvent("onpropertychange",n1)):"blur"===e&&n0()}function n3(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return nZ(n$)}function n4(e,t){if("click"===e)return nZ(t)}function n5(e,t){if("input"===e||"change"===e)return nZ(t)}U&&(nQ=ta("input")&&(!document.documentMode||9<document.documentMode));var n6={eventTypes:nX,_isInputEventSupported:nQ,extractEvents:function(e,t,n,r){var i=t?nd(t):window,a=i.nodeName&&i.nodeName.toLowerCase();if("select"===a||"input"===a&&"file"===i.type)var o=nJ;else if(nj(i)){if(nQ)o=n5;else{o=n3;var s=n2}}else(a=i.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=n4);if(o&&(o=o(e,t)))return nq(o,n,r);s&&s(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&eU(i,"number",i.value)}},n8=nC.extend({view:null,detail:null}),n7={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function n9(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=n7[e])&&!!t[e]}function re(){return n9}var rt=0,rn=0,rr=!1,ri=!1,ra=n8.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:re,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=rt;return rt=e.screenX,rr?"mousemove"===e.type?e.screenX-t:0:(rr=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=rn;return rn=e.screenY,ri?"mousemove"===e.type?e.screenY-t:0:(ri=!0,0)}}),ro=ra.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),rs={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},rl="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},ru=Object.prototype.hasOwnProperty;function rc(e,t){if(rl(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ru.call(t,n[r])||!rl(e[n[r]],t[n[r]]))return!1;return!0}var rf=U&&"documentMode"in document&&11>=document.documentMode,rh={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},rd=null,rp=null,rm=null,rg=!1;function rv(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return rg||null==rd||rd!==t4(n)?null:(n="selectionStart"in(n=rd)&&t7(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},rm&&rc(rm,n)?null:(rm=n,(e=nC.getPooled(rh.select,rp,e,t)).type="select",e.target=rd,nb(e),e))}var ry=nC.extend({animationName:null,elapsedTime:null,pseudoElement:null}),r_=nC.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),rx=n8.extend({relatedTarget:null});function rb(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var rS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rw=n8.extend({key:function(e){if(e.key){var t=rS[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rb(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?rE[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:re,charCode:function(e){return"keypress"===e.type?rb(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rb(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),rM=ra.extend({dataTransfer:null}),rT=n8.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:re}),rA=nC.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),rC=ra.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null});if(M)throw Error(h(101));M=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),A(),b=np,S=nh,E=nd,I({SimpleEventPlugin:{eventTypes:tO,extractEvents:function(e,t,n,r){var i=tI.get(e);if(!i)return null;switch(e){case"keypress":if(0===rb(n))return null;case"keydown":case"keyup":e=rw;break;case"blur":case"focus":e=rx;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=ra;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=rM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=rT;break;case eJ:case eQ:case e0:e=ry;break;case e1:e=rA;break;case"scroll":e=n8;break;case"wheel":e=rC;break;case"copy":case"cut":case"paste":e=r_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=ro;break;default:e=nC}return nb(t=e.getPooled(i,t,n,r)),t}},EnterLeaveEventPlugin:{eventTypes:rs,extractEvents:function(e,t,n,r,i){var a="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(a&&0==(32&i)&&(n.relatedTarget||n.fromElement)||!o&&!a)return null;if(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,o){if(o=t,null!==(t=(t=n.relatedTarget||n.toElement)?nf(t):null)){var s=e5(t);(t!==s||5!==t.tag&&6!==t.tag)&&(t=null)}}else o=null;if(o===t)return null;if("mouseout"===e||"mouseover"===e)var l=ra,u=rs.mouseLeave,c=rs.mouseEnter,f="mouse";else("pointerout"===e||"pointerover"===e)&&(l=ro,u=rs.pointerLeave,c=rs.pointerEnter,f="pointer");if(e=null==o?a:nd(o),a=null==t?a:nd(t),(u=l.getPooled(u,o,n,r)).type=f+"leave",u.target=e,u.relatedTarget=a,(n=l.getPooled(c,t,n,r)).type=f+"enter",n.target=a,n.relatedTarget=e,r=o,f=t,r&&f)e:{for(l=r,c=f,o=0,e=l;e;e=nm(e))o++;for(e=0,t=c;t;t=nm(t))e++;for(;0<o-e;)l=nm(l),o--;for(;0<e-o;)c=nm(c),e--;for(;o--;){if(l===c||l===c.alternate)break e;l=nm(l),c=nm(c)}l=null}else l=null;for(c=l,l=[];r&&r!==c&&(null===(o=r.alternate)||o!==c);)l.push(r),r=nm(r);for(r=[];f&&f!==c&&(null===(o=f.alternate)||o!==c);)r.push(f),f=nm(f);for(f=0;f<l.length;f++)n_(l[f],"bubbled",u);for(f=r.length;0<f--;)n_(r[f],"captured",n);return 0==(64&i)?[u]:[u,n]}},ChangeEventPlugin:n6,SelectEventPlugin:{eventTypes:rh,extractEvents:function(e,t,n,r,i,a){if(!(a=!(i=a||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{i=e4(i),a=O.onSelect;for(var o=0;o<a.length;o++)if(!i.has(a[o])){i=!1;break e}i=!0}a=!i}if(a)return null;switch(i=t?nd(t):window,e){case"focus":(nj(i)||"true"===i.contentEditable)&&(rd=i,rp=t,rm=null);break;case"blur":rm=rp=rd=null;break;case"mousedown":rg=!0;break;case"contextmenu":case"mouseup":case"dragend":return rg=!1,rv(n,r);case"selectionchange":if(rf)break;case"keydown":case"keyup":return rv(n,r)}return null}},BeforeInputEventPlugin:{eventTypes:nz,extractEvents:function(e,t,n,r){var i;if(nN)t:{switch(e){case"compositionstart":var a=nz.compositionStart;break t;case"compositionend":a=nz.compositionEnd;break t;case"compositionupdate":a=nz.compositionUpdate;break t}a=void 0}else nG?nV(e,n)&&(a=nz.compositionEnd):"keydown"===e&&229===n.keyCode&&(a=nz.compositionStart);return a?(nF&&"ko"!==n.locale&&(nG||a!==nz.compositionStart?a===nz.compositionEnd&&nG&&(i=nM()):(nE="value"in(nS=r)?nS.value:nS.textContent,nG=!0)),a=nO.getPooled(a,t,n,r),i?a.data=i:null!==(i=nH(n))&&(a.data=i),nb(a),i=a):i=null,(e=nk?function(e,t){switch(e){case"compositionend":return nH(t);case"keypress":if(32!==t.which)return null;return nB=!0," ";case"textInput":return" "===(e=t.data)&&nB?null:e;default:return null}}(e,n):function(e,t){if(nG)return"compositionend"===e||!nN&&nV(e,t)?(e=nM(),nw=nE=nS=null,nG=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return nF&&"ko"!==t.locale?null:t.data}}(e,n))?((t=nI.getPooled(nz.beforeInput,t,n,r)).data=e,nb(t)):t=null,null===i?t:null===t?i:[i,t]}}});var rP=[],rR=-1;function rL(e){0>rR||(e.current=rP[rR],rP[rR]=null,rR--)}function rO(e,t){rP[++rR]=e.current,e.current=t}var rI={},rU={current:rI},rN={current:!1},rD=rI;function rk(e,t){var n=e.type.contextTypes;if(!n)return rI;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function rF(e){return null!=(e=e.childContextTypes)}function rz(){rL(rN),rL(rU)}function rB(e,t,n){if(rU.current!==rI)throw Error(h(168));rO(rU,t),rO(rN,n)}function rV(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(h(108,eE(t)||"Unknown",i));return c({},n,{},r)}function rH(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||rI,rD=rU.current,rO(rU,e),rO(rN,rN.current),!0}function rG(e,t,n){var r=e.stateNode;if(!r)throw Error(h(169));n?(e=rV(e,t,rD),r.__reactInternalMemoizedMergedChildContext=e,rL(rN),rL(rU),rO(rU,e)):rL(rN),rO(rN,n)}var rW=f.unstable_runWithPriority,rj=f.unstable_scheduleCallback,rX=f.unstable_cancelCallback,rq=f.unstable_requestPaint,rY=f.unstable_now,r$=f.unstable_getCurrentPriorityLevel,rK=f.unstable_ImmediatePriority,rZ=f.unstable_UserBlockingPriority,rJ=f.unstable_NormalPriority,rQ=f.unstable_LowPriority,r0=f.unstable_IdlePriority,r1={},r2=f.unstable_shouldYield,r3=void 0!==rq?rq:function(){},r4=null,r5=null,r6=!1,r8=rY(),r7=1e4>r8?rY:function(){return rY()-r8};function r9(){switch(r$()){case rK:return 99;case rZ:return 98;case rJ:return 97;case rQ:return 96;case r0:return 95;default:throw Error(h(332))}}function ie(e){switch(e){case 99:return rK;case 98:return rZ;case 97:return rJ;case 96:return rQ;case 95:return r0;default:throw Error(h(332))}}function it(e,t){return rW(e=ie(e),t)}function ir(e){return null===r4?(r4=[e],r5=rj(rK,ia)):r4.push(e),r1}function ii(){if(null!==r5){var e=r5;r5=null,rX(e)}ia()}function ia(){if(!r6&&null!==r4){r6=!0;var e=0;try{var t=r4;it(99,function(){for(;e<t.length;e++){var n=t[e];do n=n(!0);while(null!==n)}}),r4=null}catch(t){throw null!==r4&&(r4=r4.slice(e+1)),rj(rK,ii),t}finally{r6=!1}}}function io(e,t,n){return 1073741821-(((1073741821-e+t/10)/(n/=10)|0)+1)*n}function is(e,t){if(e&&e.defaultProps)for(var n in t=c({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var il={current:null},iu=null,ic=null,ih=null;function id(){ih=ic=iu=null}function ip(e){var t=il.current;rL(il),e.type._context._currentValue=t}function im(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else if(null!==n&&n.childExpirationTime<t)n.childExpirationTime=t;else break;e=e.return}}function ig(e,t){iu=e,ih=ic=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(aI=!0),e.firstContext=null)}function iv(e,t){if(ih!==e&&!1!==t&&0!==t){if(("number"!=typeof t||1073741823===t)&&(ih=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ic){if(null===iu)throw Error(h(308));ic=t,iu.dependencies={expirationTime:0,firstContext:t,responders:null}}else ic=ic.next=t}return e._currentValue}var iy=!1;function i_(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function ix(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function ib(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function iS(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function iE(e,t){var n=e.alternate;null!==n&&ix(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function iw(e,t,n,r){var i=e.updateQueue;iy=!1;var a=i.baseQueue,o=i.shared.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}a=o,i.shared.pending=null,null!==(s=e.alternate)&&null!==(s=s.updateQueue)&&(s.baseQueue=o)}if(null!==a){s=a.next;var l=i.baseState,u=0,f=null,h=null,d=null;if(null!==s)for(var p=s;;){if((o=p.expirationTime)<r){var m={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===d?(h=d=m,f=l):d=d.next=m,o>u&&(u=o)}else{null!==d&&(d=d.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),oB(o,p.suspenseConfig);e:{var g=e,v=p;switch(o=t,m=n,v.tag){case 1:if("function"==typeof(g=v.payload)){l=g.call(m,l,o);break e}l=g;break e;case 3:g.effectTag=-4097&g.effectTag|64;case 0:if(null==(o="function"==typeof(g=v.payload)?g.call(m,l,o):g))break e;l=c({},l,o);break e;case 2:iy=!0}}null!==p.callback&&(e.effectTag|=32,null===(o=i.effects)?i.effects=[p]:o.push(p))}if(null===(p=p.next)||p===s){if(null===(o=i.shared.pending))break;p=a.next=o.next,o.next=s,i.baseQueue=a=o,i.shared.pending=null}}null===d?f=l:d.next=h,i.baseState=f,i.baseQueue=d,oV(u),e.expirationTime=u,e.memoizedState=l}}function iM(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!=typeof r)throw Error(h(191,r));r.call(i)}}}var iT=er.ReactCurrentBatchConfig,iA=(new u.Component).refs;function iC(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:c({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var iP={isMounted:function(e){return!!(e=e._reactInternalFiber)&&e5(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=oA(),i=iT.suspense;(i=ib(r=oC(r,e,i),i)).payload=t,null!=n&&(i.callback=n),iS(e,i),oP(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=oA(),i=iT.suspense;(i=ib(r=oC(r,e,i),i)).tag=1,i.payload=t,null!=n&&(i.callback=n),iS(e,i),oP(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=oA(),r=iT.suspense;(r=ib(n=oC(n,e,r),r)).tag=2,null!=t&&(r.callback=t),iS(e,r),oP(e,n)}};function iR(e,t,n,r,i,a,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||!rc(n,r)||!rc(i,a)}function iL(e,t,n){var r=!1,i=rI,a=t.contextType;return"object"==typeof a&&null!==a?a=iv(a):(i=rF(t)?rD:rU.current,a=(r=null!=(r=t.contextTypes))?rk(e,i):rI),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=iP,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function iO(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&iP.enqueueReplaceState(t,t.state,null)}function iI(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=iA,i_(e);var a=t.contextType;"object"==typeof a&&null!==a?i.context=iv(a):(a=rF(t)?rD:rU.current,i.context=rk(e,a)),iw(e,n,i,r),i.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(iC(e,t,a,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&iP.enqueueReplaceState(i,i.state,null),iw(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}var iU=Array.isArray;function iN(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(h(309));var r=n.stateNode}if(!r)throw Error(h(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===iA&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(h(284));if(!n._owner)throw Error(h(290,e))}return e}function iD(e,t){if("textarea"!==e.type)throw Error(h(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function ik(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=o4(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return(t.index=r,e)?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function o(t){return e&&null===t.alternate&&(t.effectTag=2),t}function s(e,t,n,r){return null===t||6!==t.tag?(t=o8(n,e.mode,r)).return=e:(t=i(t,n)).return=e,t}function l(e,t,n,r){return null!==t&&t.elementType===n.type?(r=i(t,n.props)).ref=iN(e,t,n):(r=o5(n.type,n.key,n.props,null,e.mode,r)).ref=iN(e,t,n),r.return=e,r}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=o7(n,e.mode,r)).return=e:(t=i(t,n.children||[])).return=e,t}function c(e,t,n,r,a){return null===t||7!==t.tag?(t=o6(n,e.mode,r,a)).return=e:(t=i(t,n)).return=e,t}function f(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=o8(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case es:return(n=o5(t.type,t.key,t.props,null,e.mode,n)).ref=iN(e,null,t),n.return=e,n;case el:return(t=o7(t,e.mode,n)).return=e,t}if(iU(t)||eS(t))return(t=o6(t,e.mode,n,null)).return=e,t;iD(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case es:return n.key===i?n.type===eu?c(e,t,n.props.children,r,i):l(e,t,n,r):null;case el:return n.key===i?u(e,t,n,r):null}if(iU(n)||eS(n))return null!==i?null:c(e,t,n,r,null);iD(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case es:return e=e.get(null===r.key?n:r.key)||null,r.type===eu?c(t,e,r.props.children,i,r.key):l(t,e,r,i);case el:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(iU(r)||eS(r))return c(t,e=e.get(n)||null,r,i,null);iD(t,r)}return null}return function(s,l,u,c){var m="object"==typeof u&&null!==u&&u.type===eu&&null===u.key;m&&(u=u.props.children);var g="object"==typeof u&&null!==u;if(g)switch(u.$$typeof){case es:e:{for(g=u.key,m=l;null!==m;){if(m.key===g){if(7===m.tag){if(u.type===eu){n(s,m.sibling),(l=i(m,u.props.children)).return=s,s=l;break e}}else if(m.elementType===u.type){n(s,m.sibling),(l=i(m,u.props)).ref=iN(s,m,u),l.return=s,s=l;break e}n(s,m);break}t(s,m),m=m.sibling}u.type===eu?((l=o6(u.props.children,s.mode,c,u.key)).return=s,s=l):((c=o5(u.type,u.key,u.props,null,s.mode,c)).ref=iN(s,l,u),c.return=s,s=c)}return o(s);case el:e:{for(m=u.key;null!==l;){if(l.key===m){if(4===l.tag&&l.stateNode.containerInfo===u.containerInfo&&l.stateNode.implementation===u.implementation){n(s,l.sibling),(l=i(l,u.children||[])).return=s,s=l;break e}n(s,l);break}t(s,l),l=l.sibling}(l=o7(u,s.mode,c)).return=s,s=l}return o(s)}if("string"==typeof u||"number"==typeof u)return u=""+u,null!==l&&6===l.tag?(n(s,l.sibling),(l=i(l,u)).return=s):(n(s,l),(l=o8(u,s.mode,c)).return=s),o(s=l);if(iU(u))return function(i,o,s,l){for(var u=null,c=null,h=o,m=o=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=d(i,h,s[m],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),o=a(v,o,m),null===c?u=v:c.sibling=v,c=v,h=g}if(m===s.length)return n(i,h),u;if(null===h){for(;m<s.length;m++)null!==(h=f(i,s[m],l))&&(o=a(h,o,m),null===c?u=h:c.sibling=h,c=h);return u}for(h=r(i,h);m<s.length;m++)null!==(g=p(h,i,m,s[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=a(g,o,m),null===c?u=g:c.sibling=g,c=g);return e&&h.forEach(function(e){return t(i,e)}),u}(s,l,u,c);if(eS(u))return function(i,o,s,l){var u=eS(s);if("function"!=typeof u)throw Error(h(150));if(null==(s=u.call(s)))throw Error(h(151));for(var c=u=null,m=o,g=o=0,v=null,y=s.next();null!==m&&!y.done;g++,y=s.next()){m.index>g?(v=m,m=null):v=m.sibling;var _=d(i,m,y.value,l);if(null===_){null===m&&(m=v);break}e&&m&&null===_.alternate&&t(i,m),o=a(_,o,g),null===c?u=_:c.sibling=_,c=_,m=v}if(y.done)return n(i,m),u;if(null===m){for(;!y.done;g++,y=s.next())null!==(y=f(i,y.value,l))&&(o=a(y,o,g),null===c?u=y:c.sibling=y,c=y);return u}for(m=r(i,m);!y.done;g++,y=s.next())null!==(y=p(m,i,g,y.value,l))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),o=a(y,o,g),null===c?u=y:c.sibling=y,c=y);return e&&m.forEach(function(e){return t(i,e)}),u}(s,l,u,c);if(g&&iD(s,u),void 0===u&&!m)switch(s.tag){case 1:case 0:throw Error(h(152,(s=s.type).displayName||s.name||"Component"))}return n(s,l)}}var iF=ik(!0),iz=ik(!1),iB={},iV={current:iB},iH={current:iB},iG={current:iB};function iW(e){if(e===iB)throw Error(h(174));return e}function ij(e,t){switch(rO(iG,t),rO(iH,e),rO(iV,iB),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:eH(null,"");break;default:t=eH(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}rL(iV),rO(iV,t)}function iX(){rL(iV),rL(iH),rL(iG)}function iq(e){iW(iG.current);var t=iW(iV.current),n=eH(t,e.type);t!==n&&(rO(iH,e),rO(iV,n))}function iY(e){iH.current===e&&(rL(iV),rL(iH))}var i$={current:0};function iK(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function iZ(e,t){return{responder:e,props:t}}var iJ=er.ReactCurrentDispatcher,iQ=er.ReactCurrentBatchConfig,i0=0,i1=null,i2=null,i3=null,i4=!1;function i5(){throw Error(h(321))}function i6(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!rl(e[n],t[n]))return!1;return!0}function i8(e,t,n,r,i,a){if(i0=a,i1=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,iJ.current=null===e||null===e.memoizedState?ax:ab,e=n(r,i),t.expirationTime===i0){a=0;do{if(t.expirationTime=0,!(25>a))throw Error(h(301));a+=1,i3=i2=null,t.updateQueue=null,iJ.current=aS,e=n(r,i)}while(t.expirationTime===i0)}if(iJ.current=a_,t=null!==i2&&null!==i2.next,i0=0,i3=i2=i1=null,i4=!1,t)throw Error(h(300));return e}function i7(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===i3?i1.memoizedState=i3=e:i3=i3.next=e,i3}function i9(){if(null===i2){var e=i1.alternate;e=null!==e?e.memoizedState:null}else e=i2.next;var t=null===i3?i1.memoizedState:i3.next;if(null!==t)i3=t,i2=e;else{if(null===e)throw Error(h(310));e={memoizedState:(i2=e).memoizedState,baseState:i2.baseState,baseQueue:i2.baseQueue,queue:i2.queue,next:null},null===i3?i1.memoizedState=i3=e:i3=i3.next=e}return i3}function ae(e,t){return"function"==typeof t?t(e):t}function at(e){var t=i9(),n=t.queue;if(null===n)throw Error(h(311));n.lastRenderedReducer=e;var r=i2,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=o=a=null,l=i;do{var u=l.expirationTime;if(u<i0){var c={expirationTime:l.expirationTime,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===s?(o=s=c,a=r):s=s.next=c,u>i1.expirationTime&&(i1.expirationTime=u,oV(u))}else null!==s&&(s=s.next={expirationTime:1073741823,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),oB(u,l.suspenseConfig),r=l.eagerReducer===e?l.eagerState:e(r,l.action);l=l.next}while(null!==l&&l!==i)null===s?a=r:s.next=o,rl(r,t.memoizedState)||(aI=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function an(e){var t=i9(),n=t.queue;if(null===n)throw Error(h(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i)rl(a,t.memoizedState)||(aI=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ar(e){var t=i7();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ae,lastRenderedState:e}).dispatch=ay.bind(null,i1,e),[t.memoizedState,e]}function ai(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=i1.updateQueue)?(t={lastEffect:null},i1.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function aa(){return i9().memoizedState}function ao(e,t,n,r){var i=i7();i1.effectTag|=e,i.memoizedState=ai(1|t,n,void 0,void 0===r?null:r)}function as(e,t,n,r){var i=i9();r=void 0===r?null:r;var a=void 0;if(null!==i2){var o=i2.memoizedState;if(a=o.destroy,null!==r&&i6(r,o.deps)){ai(t,n,a,r);return}}i1.effectTag|=e,i.memoizedState=ai(1|t,n,a,r)}function al(e,t){return ao(516,4,e,t)}function au(e,t){return as(516,4,e,t)}function ac(e,t){return as(4,2,e,t)}function af(e,t){return"function"==typeof t?(t(e=e()),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ah(e,t,n){return n=null!=n?n.concat([e]):null,as(4,2,af.bind(null,t,e),n)}function ad(){}function ap(e,t){return i7().memoizedState=[e,void 0===t?null:t],e}function am(e,t){var n=i9();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&i6(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ag(e,t){var n=i9();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&i6(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function av(e,t,n){var r=r9();it(98>r?98:r,function(){e(!0)}),it(97<r?97:r,function(){var r=iQ.suspense;iQ.suspense=void 0===t?null:t;try{e(!1),n()}finally{iQ.suspense=r}})}function ay(e,t,n){var r=oA(),i=iT.suspense;i={expirationTime:r=oC(r,e,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var a=t.pending;if(null===a?i.next=i:(i.next=a.next,a.next=i),t.pending=i,a=e.alternate,e===i1||null!==a&&a===i1)i4=!0,i.expirationTime=i0,i1.expirationTime=i0;else{if(0===e.expirationTime&&(null===a||0===a.expirationTime)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.eagerReducer=a,i.eagerState=s,rl(s,o))return}catch(e){}finally{}oP(e,r)}}var a_={readContext:iv,useCallback:i5,useContext:i5,useEffect:i5,useImperativeHandle:i5,useLayoutEffect:i5,useMemo:i5,useReducer:i5,useRef:i5,useState:i5,useDebugValue:i5,useResponder:i5,useDeferredValue:i5,useTransition:i5},ax={readContext:iv,useCallback:ap,useContext:iv,useEffect:al,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ao(4,2,af.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ao(4,2,e,t)},useMemo:function(e,t){var n=i7();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=i7();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=ay.bind(null,i1,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},i7().memoizedState=e},useState:ar,useDebugValue:ad,useResponder:iZ,useDeferredValue:function(e,t){var n=ar(e),r=n[0],i=n[1];return al(function(){var n=iQ.suspense;iQ.suspense=void 0===t?null:t;try{i(e)}finally{iQ.suspense=n}},[e,t]),r},useTransition:function(e){var t=ar(!1),n=t[0];return t=t[1],[ap(av.bind(null,t,e),[t,e]),n]}},ab={readContext:iv,useCallback:am,useContext:iv,useEffect:au,useImperativeHandle:ah,useLayoutEffect:ac,useMemo:ag,useReducer:at,useRef:aa,useState:function(){return at(ae)},useDebugValue:ad,useResponder:iZ,useDeferredValue:function(e,t){var n=at(ae),r=n[0],i=n[1];return au(function(){var n=iQ.suspense;iQ.suspense=void 0===t?null:t;try{i(e)}finally{iQ.suspense=n}},[e,t]),r},useTransition:function(e){var t=at(ae),n=t[0];return t=t[1],[am(av.bind(null,t,e),[t,e]),n]}},aS={readContext:iv,useCallback:am,useContext:iv,useEffect:au,useImperativeHandle:ah,useLayoutEffect:ac,useMemo:ag,useReducer:an,useRef:aa,useState:function(){return an(ae)},useDebugValue:ad,useResponder:iZ,useDeferredValue:function(e,t){var n=an(ae),r=n[0],i=n[1];return au(function(){var n=iQ.suspense;iQ.suspense=void 0===t?null:t;try{i(e)}finally{iQ.suspense=n}},[e,t]),r},useTransition:function(e){var t=an(ae),n=t[0];return t=t[1],[am(av.bind(null,t,e),[t,e]),n]}},aE=null,aw=null,aM=!1;function aT(e,t){var n=o2(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function aA(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function aC(e){if(aM){var t=aw;if(t){var n=t;if(!aA(e,t)){if(!(t=na(n.nextSibling))||!aA(e,t)){e.effectTag=-1025&e.effectTag|2,aM=!1,aE=e;return}aT(aE,n)}aE=e,aw=na(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,aM=!1,aE=e}}function aP(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;aE=e}function aR(e){if(e!==aE)return!1;if(!aM)return aP(e),aM=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!nn(t,e.memoizedProps))for(t=aw;t;)aT(e,t),t=na(t.nextSibling);if(aP(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(h(317));e:{for(t=0,e=e.nextSibling;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){aw=na(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}aw=null}}else aw=aE?na(e.stateNode.nextSibling):null;return!0}function aL(){aw=aE=null,aM=!1}var aO=er.ReactCurrentOwner,aI=!1;function aU(e,t,n,r){t.child=null===e?iz(t,null,n,r):iF(t,e.child,n,r)}function aN(e,t,n,r,i){n=n.render;var a=t.ref;return(ig(t,i),r=i8(e,t,n,r,a,i),null===e||aI)?(t.effectTag|=1,aU(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),aY(e,t,i))}function aD(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!=typeof o||o3(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=o5(n.type,null,r,null,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,ak(e,t,o,r,i,a))}return(o=e.child,i<a&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:rc)(i,r)&&e.ref===t.ref))?aY(e,t,a):(t.effectTag|=1,(e=o4(o,r)).ref=t.ref,e.return=t,t.child=e)}function ak(e,t,n,r,i,a){return null!==e&&rc(e.memoizedProps,r)&&e.ref===t.ref&&(aI=!1,i<a)?(t.expirationTime=e.expirationTime,aY(e,t,a)):az(e,t,n,r,a)}function aF(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function az(e,t,n,r,i){var a=rF(n)?rD:rU.current;return(a=rk(t,a),ig(t,i),n=i8(e,t,n,r,a,i),null===e||aI)?(t.effectTag|=1,aU(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),aY(e,t,i))}function aB(e,t,n,r,i){if(rF(n)){var a=!0;rH(t)}else a=!1;if(ig(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),iL(t,n,r),iI(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=n.contextType;u="object"==typeof u&&null!==u?iv(u):rk(t,u=rF(n)?rD:rU.current);var c=n.getDerivedStateFromProps,f="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;f||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==r||l!==u)&&iO(t,o,r,u),iy=!1;var h=t.memoizedState;o.state=h,iw(t,r,o,i),l=t.memoizedState,s!==r||h!==l||rN.current||iy?("function"==typeof c&&(iC(t,n,c,r),l=t.memoizedState),(s=iy||iR(t,n,s,r,h,l,u))?(f||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.effectTag|=4)):("function"==typeof o.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):("function"==typeof o.componentDidMount&&(t.effectTag|=4),r=!1)}else o=t.stateNode,ix(e,t),s=t.memoizedProps,o.props=t.type===t.elementType?s:is(t.type,s),l=o.context,u="object"==typeof(u=n.contextType)&&null!==u?iv(u):rk(t,u=rF(n)?rD:rU.current),(f="function"==typeof(c=n.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==r||l!==u)&&iO(t,o,r,u),iy=!1,l=t.memoizedState,o.state=l,iw(t,r,o,i),h=t.memoizedState,s!==r||l!==h||rN.current||iy?("function"==typeof c&&(iC(t,n,c,r),h=t.memoizedState),(c=iy||iR(t,n,s,r,l,h,u))?(f||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,h,u),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,h,u)),"function"==typeof o.componentDidUpdate&&(t.effectTag|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=h),o.props=r,o.state=h,o.context=u,r=c):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),r=!1);return aV(e,t,n,r,a,i)}function aV(e,t,n,r,i,a){aF(e,t);var o=0!=(64&t.effectTag);if(!r&&!o)return i&&rG(t,n,!1),aY(e,t,a);r=t.stateNode,aO.current=t;var s=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&o?(t.child=iF(t,e.child,null,a),t.child=iF(t,null,s,a)):aU(e,t,s,a),t.memoizedState=r.state,i&&rG(t,n,!0),t.child}function aH(e){var t=e.stateNode;t.pendingContext?rB(e,t.pendingContext,t.pendingContext!==t.context):t.context&&rB(e,t.context,!1),ij(e,t.containerInfo)}var aG={dehydrated:null,retryTime:0};function aW(e,t,n){var r,i=t.mode,a=t.pendingProps,o=i$.current,s=!1;if((r=0!=(64&t.effectTag))||(r=0!=(2&o)&&(null===e||null!==e.memoizedState)),r?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(o|=1),rO(i$,1&o),null===e){if(void 0!==a.fallback&&aC(t),s){if(s=a.fallback,(a=o6(null,i,0,null)).return=t,0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,a.child=e;null!==e;)e.return=a,e=e.sibling;return(n=o6(s,i,n,null)).return=t,a.sibling=n,t.memoizedState=aG,t.child=a,n}return i=a.children,t.memoizedState=null,t.child=iz(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,s){if(a=a.fallback,(n=o4(e,e.pendingProps)).return=t,0==(2&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(i=o4(i,a)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=aG,t.child=n,i}return n=iF(t,e.child,a.children,n),t.memoizedState=null,t.child=n}if(e=e.child,s){if(s=a.fallback,(a=o6(null,i,0,null)).return=t,a.child=e,null!==e&&(e.return=a),0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,a.child=e;null!==e;)e.return=a,e=e.sibling;return(n=o6(s,i,n,null)).return=t,a.sibling=n,n.effectTag|=2,a.childExpirationTime=0,t.memoizedState=aG,t.child=a,n}return t.memoizedState=null,t.child=iF(t,e,a.children,n)}function aj(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),im(e.return,t)}function aX(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailExpiration=0,o.tailMode=i,o.lastEffect=a)}function aq(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(aU(e,t,r.children,n),0!=(2&(r=i$.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&aj(e,n);else if(19===e.tag)aj(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(rO(i$,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(i=null,n=t.child;null!==n;)null!==(e=n.alternate)&&null===iK(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),aX(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===iK(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}aX(t,!0,n,null,a,t.lastEffect);break;case"together":aX(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function aY(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&oV(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(h(153));if(null!==t.child){for(n=o4(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=o4(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function a$(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function aK(e,t){return{value:e,source:t,stack:ew(t)}}i=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},a=function(){},o=function(e,t,n,r,i){var a=e.memoizedProps;if(a!==r){var o,s,l=t.stateNode;switch(iW(iV.current),e=null,n){case"input":a=eP(l,a),r=eP(l,r),e=[];break;case"option":a=eN(l,a),r=eN(l,r),e=[];break;case"select":a=c({},a,{value:void 0}),r=c({},r,{value:void 0}),e=[];break;case"textarea":a=ek(l,a),r=ek(l,r),e=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(l.onclick=t3)}for(o in tQ(n,r),n=null,a)if(!r.hasOwnProperty(o)&&a.hasOwnProperty(o)&&null!=a[o]){if("style"===o)for(s in l=a[o])l.hasOwnProperty(s)&&(n||(n={}),n[s]="");else"dangerouslySetInnerHTML"!==o&&"children"!==o&&"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(L.hasOwnProperty(o)?e||(e=[]):(e=e||[]).push(o,null))}for(o in r){var u=r[o];if(l=null!=a?a[o]:void 0,r.hasOwnProperty(o)&&u!==l&&(null!=u||null!=l)){if("style"===o){if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(e||(e=[]),e.push(o,n)),n=u}else"dangerouslySetInnerHTML"===o?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(e=e||[]).push(o,u)):"children"===o?l===u||"string"!=typeof u&&"number"!=typeof u||(e=e||[]).push(o,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&(L.hasOwnProperty(o)?(null!=u&&t2(i,o),e||l===u||(e=[])):(e=e||[]).push(o,u))}}n&&(e=e||[]).push("style",n),i=e,(t.updateQueue=i)&&(t.effectTag|=4)}},s=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var aZ="function"==typeof WeakSet?WeakSet:Set;function aJ(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=ew(n)),null!==n&&eE(n.type),t=t.value,null!==e&&1===e.tag&&eE(e.type);try{console.error(t)}catch(e){setTimeout(function(){throw e})}}function aQ(e){var t=e.ref;if(null!==t){if("function"==typeof t)try{t(null)}catch(t){oK(e,t)}else t.current=null}}function a0(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function a1(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function a2(e,t,n){switch("function"==typeof o0&&o0(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;it(97<n?97:n,function(){var e=r;do{var n=e.destroy;if(void 0!==n)try{n()}catch(e){oK(t,e)}e=e.next}while(e!==r)})}break;case 1:aQ(t),"function"==typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){oK(e,t)}}(t,n);break;case 5:aQ(t);break;case 4:a5(e,t,n)}}function a3(e){return 5===e.tag||3===e.tag||4===e.tag}function a4(e){e:{for(var t=e.return;null!==t;){if(a3(t)){var n=t;break e}t=t.return}throw Error(h(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(h(161))}16&n.effectTag&&(eX(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||a3(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag||null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?function e(t,n,r){var i=t.tag,a=5===i||6===i;if(a)t=a?t.stateNode:t.stateNode.instance,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode).insertBefore(t,r):(n=r).appendChild(t),null!=(r=r._reactRootContainer)||null!==n.onclick||(n.onclick=t3));else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t):function e(t,n,r){var i=t.tag,a=5===i||6===i;if(a)t=a?t.stateNode:t.stateNode.instance,n?r.insertBefore(t,n):r.appendChild(t);else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t)}function a5(e,t,n){for(var r,i,a=t,o=!1;;){if(!o){o=a.return;e:for(;;){if(null===o)throw Error(h(160));switch(r=o.stateNode,o.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}o=o.return}o=!0}if(5===a.tag||6===a.tag){e:for(var s=e,l=a,u=l;;)if(a2(s,u,n),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===l)break;for(;null===u.sibling;){if(null===u.return||u.return===l)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}i?(s=r,l=a.stateNode,8===s.nodeType?s.parentNode.removeChild(l):s.removeChild(l)):r.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){r=a.stateNode.containerInfo,i=!0,a.child.return=a,a=a.child;continue}}else if(a2(e,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(o=!1)}a.sibling.return=a.return,a=a.sibling}}function a6(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:a0(3,t);return;case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[nu]=r,"input"===e&&"radio"===r.type&&null!=r.name&&eL(n,r),t0(e,i),t=t0(e,r),i=0;i<a.length;i+=2){var o=a[i],s=a[i+1];"style"===o?tZ(n,s):"dangerouslySetInnerHTML"===o?ej(n,s):"children"===o?eX(n,s):ei(n,o,s,t)}switch(e){case"input":eO(n,r);break;case"textarea":ez(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?eD(n,!!r.multiple,e,!1):!!r.multiple!==t&&(null!=r.defaultValue?eD(n,!!r.multiple,r.defaultValue,!0):eD(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(h(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:(t=t.stateNode).hydrate&&(t.hydrate=!1,tL(t.containerInfo));return;case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,om=r7()),null!==n)e:for(e=n;;){if(5===e.tag)a=e.stateNode,r?"function"==typeof(a=a.style).setProperty?a.setProperty("display","none","important"):a.display="none":(a=e.stateNode,i=null!=(i=e.memoizedProps.style)&&i.hasOwnProperty("display")?i.display:null,a.style.display=tK("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(a=e.child.sibling).return=e,e=a;continue}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a8(t);return;case 19:a8(t);return}throw Error(h(163))}function a8(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new aZ),t.forEach(function(t){var r=oJ.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}var a7="function"==typeof WeakMap?WeakMap:Map;function a9(e,t,n){(n=ib(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ov||(ov=!0,oy=r),aJ(e,t)},n}function oe(e,t,n){(n=ib(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return aJ(e,t),r(i)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===o_?o_=new Set([this]):o_.add(this),aJ(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var ot=Math.ceil,on=er.ReactCurrentDispatcher,or=er.ReactCurrentOwner,oi=0,oa=null,oo=null,os=0,ol=0,ou=null,oc=1073741823,of=1073741823,oh=null,od=0,op=!1,om=0,og=null,ov=!1,oy=null,o_=null,ox=!1,ob=null,oS=90,oE=null,ow=0,oM=null,oT=0;function oA(){return(48&oi)!=0?1073741821-(r7()/10|0):0!==oT?oT:oT=1073741821-(r7()/10|0)}function oC(e,t,n){if(0==(2&(t=t.mode)))return 1073741823;var r=r9();if(0==(4&t))return 99===r?1073741823:1073741822;if((16&oi)!=0)return os;if(null!==n)e=io(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=io(e,150,100);break;case 97:case 96:e=io(e,5e3,250);break;case 95:e=2;break;default:throw Error(h(326))}return null!==oa&&e===os&&--e,e}function oP(e,t){if(50<ow)throw ow=0,oM=null,Error(h(185));if(null!==(e=oR(e,t))){var n=r9();1073741823===t?(8&oi)!=0&&(48&oi)==0?oU(e):(oO(e),0===oi&&ii()):oO(e),(4&oi)==0||98!==n&&99!==n||(null===oE?oE=new Map([[e,t]]):(void 0===(n=oE.get(e))||n>t)&&oE.set(e,t))}}function oR(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(oa===i&&(oV(t),4===ol&&st(i,os)),sn(i,t)),i}function oL(e){var t=e.lastExpiredTime;if(0!==t||(t=e.firstPendingTime,!se(e,t)))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function oO(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=ir(oU.bind(null,e));else{var t=oL(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r,i,a,o=oA();if(o=1073741823===t?99:1===t||2===t?95:0>=(o=10*(1073741821-t)-10*(1073741821-o))?99:250>=o?98:5250>=o?97:95,null!==n){var s=e.callbackPriority;if(e.callbackExpirationTime===t&&s>=o)return;n!==r1&&rX(n)}e.callbackExpirationTime=t,e.callbackPriority=o,t=1073741823===t?ir(oU.bind(null,e)):(r=o,i=oI.bind(null,e),a={timeout:10*(1073741821-t)-r7()},rj(r=ie(r),i,a)),e.callbackNode=t}}}function oI(e,t){if(oT=0,t)return sr(e,t=oA()),oO(e),null;var n=oL(e);if(0!==n){if(t=e.callbackNode,(48&oi)!=0)throw Error(h(327));if(oq(),e===oa&&n===os||ok(e,n),null!==oo){var r=oi;oi|=16;for(var i=oz();;)try{(function(){for(;null!==oo&&!r2();)oo=oH(oo)})();break}catch(t){oF(e,t)}if(id(),oi=r,on.current=i,1===ol)throw t=ou,ok(e,n),st(e,n),oO(e),t;if(null===oo)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,oa=null,r=ol){case 0:case 1:throw Error(h(345));case 2:sr(e,2<n?2:n);break;case 3:if(st(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=oW(i)),1073741823===oc&&10<(i=om+500-r7())){if(op){var a=e.lastPingedTime;if(0===a||a>=n){e.lastPingedTime=n,ok(e,n);break}}if(0!==(a=oL(e))&&a!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=nr(oj.bind(null,e),i);break}oj(e);break;case 4:if(st(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=oW(i)),op&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,ok(e,n);break}if(0!==(i=oL(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==of?r=10*(1073741821-of)-r7():1073741823===oc?r=0:(r=10*(1073741821-oc)-5e3,n=10*(1073741821-n)-(i=r7()),0>(r=i-r)&&(r=0),n<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ot(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=nr(oj.bind(null,e),r);break}oj(e);break;case 5:if(1073741823!==oc&&null!==oh){a=oc;var o=oh;if(0>=(r=0|o.busyMinDurationMs)?r=0:(i=0|o.busyDelayMs,r=(a=r7()-(10*(1073741821-a)-(0|o.timeoutMs||5e3)))<=i?0:i+r-a),10<r){st(e,n),e.timeoutHandle=nr(oj.bind(null,e),r);break}}oj(e);break;default:throw Error(h(329))}if(oO(e),e.callbackNode===t)return oI.bind(null,e)}}return null}function oU(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,(48&oi)!=0)throw Error(h(327));if(oq(),e===oa&&t===os||ok(e,t),null!==oo){var n=oi;oi|=16;for(var r=oz();;)try{(function(){for(;null!==oo;)oo=oH(oo)})();break}catch(t){oF(e,t)}if(id(),oi=n,on.current=r,1===ol)throw n=ou,ok(e,t),st(e,t),oO(e),n;if(null!==oo)throw Error(h(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,oa=null,oj(e),oO(e)}return null}function oN(e,t){var n=oi;oi|=1;try{return e(t)}finally{0===(oi=n)&&ii()}}function oD(e,t){var n=oi;oi&=-2,oi|=8;try{return e(t)}finally{0===(oi=n)&&ii()}}function ok(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ni(n)),null!==oo)for(n=oo.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&rz();break;case 3:iX(),rL(rN),rL(rU);break;case 5:iY(r);break;case 4:iX();break;case 13:case 19:rL(i$);break;case 10:ip(r)}n=n.return}oa=e,oo=o4(e.current,null),os=t,ol=0,ou=null,of=oc=1073741823,oh=null,od=0,op=!1}function oF(e,t){for(;;){try{if(id(),iJ.current=a_,i4)for(var n=i1.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(i0=0,i3=i2=i1=null,i4=!1,null===oo||null===oo.return)return ol=1,ou=t,oo=null;e:{var i=oo.return,a=oo,o=t;if(t=os,a.effectTag|=2048,a.firstEffect=a.lastEffect=null,null!==o&&"object"==typeof o&&"function"==typeof o.then){var s,l=o;if(0==(2&a.mode)){var u=a.alternate;u?(a.updateQueue=u.updateQueue,a.memoizedState=u.memoizedState,a.expirationTime=u.expirationTime):(a.updateQueue=null,a.memoizedState=null)}var c=0!=(1&i$.current),f=i;do{if(s=13===f.tag){var h=f.memoizedState;if(null!==h)s=null!==h.dehydrated;else{var d=f.memoizedProps;s=void 0!==d.fallback&&(!0!==d.unstable_avoidThisFallback||!c)}}if(s){var p=f.updateQueue;if(null===p){var m=new Set;m.add(l),f.updateQueue=m}else p.add(l);if(0==(2&f.mode)){if(f.effectTag|=64,a.effectTag&=-2981,1===a.tag){if(null===a.alternate)a.tag=17;else{var g=ib(1073741823,null);g.tag=2,iS(a,g)}}a.expirationTime=1073741823;break e}o=void 0,a=t;var v=e.pingCache;if(null===v?(v=e.pingCache=new a7,o=new Set,v.set(l,o)):(o=v.get(l),void 0===o&&(o=new Set,v.set(l,o))),!o.has(a)){o.add(a);var y=oZ.bind(null,e,l,a);l.then(y,y)}f.effectTag|=4096,f.expirationTime=t;break e}f=f.return}while(null!==f)o=Error((eE(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ew(a))}5!==ol&&(ol=2),o=aK(o,a),f=i;do{switch(f.tag){case 3:l=o,f.effectTag|=4096,f.expirationTime=t;var _=a9(f,l,t);iE(f,_);break e;case 1:l=o;var x=f.type,b=f.stateNode;if(0==(64&f.effectTag)&&("function"==typeof x.getDerivedStateFromError||null!==b&&"function"==typeof b.componentDidCatch&&(null===o_||!o_.has(b)))){f.effectTag|=4096,f.expirationTime=t;var S=oe(f,l,t);iE(f,S);break e}}f=f.return}while(null!==f)}oo=oG(oo)}catch(e){t=e;continue}break}}function oz(){var e=on.current;return on.current=a_,null===e?a_:e}function oB(e,t){e<oc&&2<e&&(oc=e),null!==t&&e<of&&2<e&&(of=e,oh=t)}function oV(e){e>od&&(od=e)}function oH(e){var t=l(e.alternate,e,os);return e.memoizedProps=e.pendingProps,null===t&&(t=oG(e)),or.current=null,t}function oG(e){oo=e;do{var t=oo.alternate;if(e=oo.return,0==(2048&oo.effectTag)){if(t=function(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return rF(t.type)&&rz(),null;case 3:return iX(),rL(rN),rL(rU),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(null===e||null===e.child)&&aR(t)&&(t.effectTag|=4),a(t),null;case 5:iY(t),n=iW(iG.current);var l=t.type;if(null!==e&&null!=t.stateNode)o(e,t,l,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(h(166));return null}if(e=iW(iV.current),aR(t)){r=t.stateNode,l=t.type;var u=t.memoizedProps;switch(r[nl]=t,r[nu]=u,l){case"iframe":case"object":case"embed":tH("load",r);break;case"video":case"audio":for(e=0;e<e2.length;e++)tH(e2[e],r);break;case"source":tH("error",r);break;case"img":case"image":case"link":tH("error",r),tH("load",r);break;case"form":tH("reset",r),tH("submit",r);break;case"details":tH("toggle",r);break;case"input":eR(r,u),tH("invalid",r),t2(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!u.multiple},tH("invalid",r),t2(n,"onChange");break;case"textarea":eF(r,u),tH("invalid",r),t2(n,"onChange")}for(var f in tQ(l,u),e=null,u)if(u.hasOwnProperty(f)){var d=u[f];"children"===f?"string"==typeof d?r.textContent!==d&&(e=["children",d]):"number"==typeof d&&r.textContent!==""+d&&(e=["children",""+d]):L.hasOwnProperty(f)&&null!=d&&t2(n,f)}switch(l){case"input":eA(r),eI(r,u,!0);break;case"textarea":eA(r),eB(r);break;case"select":case"option":break;default:"function"==typeof u.onClick&&(r.onclick=t3)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(f=9===n.nodeType?n:n.ownerDocument,e===t1&&(e=eV(l)),e===t1?"script"===l?((e=f.createElement("div")).innerHTML="<script></script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=f.createElement(l,{is:r.is}):(e=f.createElement(l),"select"===l&&(f=e,r.multiple?f.multiple=!0:r.size&&(f.size=r.size))):e=f.createElementNS(e,l),e[nl]=t,e[nu]=r,i(e,t,!1,!1),t.stateNode=e,f=t0(l,r),l){case"iframe":case"object":case"embed":tH("load",e),d=r;break;case"video":case"audio":for(d=0;d<e2.length;d++)tH(e2[d],e);d=r;break;case"source":tH("error",e),d=r;break;case"img":case"image":case"link":tH("error",e),tH("load",e),d=r;break;case"form":tH("reset",e),tH("submit",e),d=r;break;case"details":tH("toggle",e),d=r;break;case"input":eR(e,r),d=eP(e,r),tH("invalid",e),t2(n,"onChange");break;case"option":d=eN(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},d=c({},r,{value:void 0}),tH("invalid",e),t2(n,"onChange");break;case"textarea":eF(e,r),d=ek(e,r),tH("invalid",e),t2(n,"onChange");break;default:d=r}tQ(l,d);var p=d;for(u in p)if(p.hasOwnProperty(u)){var m=p[u];"style"===u?tZ(e,m):"dangerouslySetInnerHTML"===u?null!=(m=m?m.__html:void 0)&&ej(e,m):"children"===u?"string"==typeof m?("textarea"!==l||""!==m)&&eX(e,m):"number"==typeof m&&eX(e,""+m):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(L.hasOwnProperty(u)?null!=m&&t2(n,u):null!=m&&ei(e,u,m,f))}switch(l){case"input":eA(e),eI(e,r,!1);break;case"textarea":eA(e),eB(e);break;case"option":null!=r.value&&e.setAttribute("value",""+eM(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?eD(e,!!r.multiple,n,!1):null!=r.defaultValue&&eD(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof d.onClick&&(e.onclick=t3)}nt(l,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)s(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(h(166));n=iW(iG.current),iW(iV.current),aR(t)?(n=t.stateNode,r=t.memoizedProps,n[nl]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[nl]=t,t.stateNode=n)}return null;case 13:if(rL(i$),r=t.memoizedState,0!=(64&t.effectTag))return t.expirationTime=n,t;return n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&aR(t):(r=null!==(l=e.memoizedState),n||null===l||null!==(l=e.child.sibling)&&(null!==(u=t.firstEffect)?(t.firstEffect=l,l.nextEffect=u):(t.firstEffect=t.lastEffect=l,l.nextEffect=null),l.effectTag=8)),n&&!r&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&i$.current)?0===ol&&(ol=3):((0===ol||3===ol)&&(ol=4),0!==od&&null!==oa&&(st(oa,os),sn(oa,od)))),(n||r)&&(t.effectTag|=4),null;case 4:return iX(),a(t),null;case 10:return ip(t),null;case 19:if(rL(i$),null===(r=t.memoizedState))return null;if(l=0!=(64&t.effectTag),null===(u=r.rendering)){if(l)a$(r,!1);else if(0!==ol||null!==e&&0!=(64&e.effectTag))for(u=t.child;null!==u;){if(null!==(e=iK(u))){for(t.effectTag|=64,a$(r,!1),null!==(l=e.updateQueue)&&(t.updateQueue=l,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)l=r,u=n,l.effectTag&=2,l.nextEffect=null,l.firstEffect=null,l.lastEffect=null,null===(e=l.alternate)?(l.childExpirationTime=0,l.expirationTime=u,l.child=null,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null):(l.childExpirationTime=e.childExpirationTime,l.expirationTime=e.expirationTime,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,u=e.dependencies,l.dependencies=null===u?null:{expirationTime:u.expirationTime,firstContext:u.firstContext,responders:u.responders}),r=r.sibling;return rO(i$,1&i$.current|2),t.child}u=u.sibling}}else{if(!l){if(null!==(e=iK(u))){if(t.effectTag|=64,l=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),a$(r,!0),null===r.tail&&"hidden"===r.tailMode&&!u.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*r7()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,l=!0,a$(r,!1),t.expirationTime=t.childExpirationTime=n-1)}r.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=r.last)?n.sibling=u:t.child=u,r.last=u)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=r7()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=r7(),n.sibling=null,t=i$.current,rO(i$,l?1&t|2:1&t),n):null}throw Error(h(156,t.tag))}(t,oo,os),1===os||1!==oo.childExpirationTime){for(var n=0,r=oo.child;null!==r;){var l=r.expirationTime,u=r.childExpirationTime;l>n&&(n=l),u>n&&(n=u),r=r.sibling}oo.childExpirationTime=n}if(null!==t)return t;null!==e&&0==(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=oo.firstEffect),null!==oo.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=oo.firstEffect),e.lastEffect=oo.lastEffect),1<oo.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=oo:e.firstEffect=oo,e.lastEffect=oo))}else{if(null!==(t=function(e){switch(e.tag){case 1:rF(e.type)&&rz();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(iX(),rL(rN),rL(rU),0!=(64&(t=e.effectTag)))throw Error(h(285));return e.effectTag=-4097&t|64,e;case 5:return iY(e),null;case 13:return rL(i$),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return rL(i$),null;case 4:return iX(),null;case 10:return ip(e),null;default:return null}}(oo)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=oo.sibling))return t;oo=e}while(null!==oo)return 0===ol&&(ol=5),null}function oW(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function oj(e){return it(99,oX.bind(null,e,r9())),null}function oX(e,t){do oq();while(null!==ob)if((48&oi)!=0)throw Error(h(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(h(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=oW(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===oa&&(oo=oa=null,os=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var a=oi;oi|=32,or.current=null,t9=tV;var o=t8();if(t7(o)){if("selectionStart"in o)var s={start:o.selectionStart,end:o.selectionEnd};else e:{var l=(s=(s=o.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(l&&0!==l.rangeCount){s=l.anchorNode;var u,c=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{s.nodeType,f.nodeType}catch(e){s=null;break e}var d=0,p=-1,m=-1,g=0,v=0,y=o,_=null;t:for(;;){for(;y!==s||0!==c&&3!==y.nodeType||(p=d+c),y!==f||0!==l&&3!==y.nodeType||(m=d+l),3===y.nodeType&&(d+=y.nodeValue.length),null!==(u=y.firstChild);)_=y,y=u;for(;;){if(y===o)break t;if(_===s&&++g===c&&(p=d),_===f&&++v===l&&(m=d),null!==(u=y.nextSibling))break;_=(y=_).parentNode}y=u}s=-1===p||-1===m?null:{start:p,end:m}}else s=null}s=s||{start:0,end:0}}else s=null;ne={activeElementDetached:null,focusedElem:o,selectionRange:s},tV=!1,og=i;do try{(function(){for(;null!==og;){var e,t,n=og.effectTag;0!=(256&n)&&function(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 3:case 5:case 6:case 4:case 17:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:is(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return}throw Error(h(163))}(og.alternate,og),0==(512&n)||ox||(ox=!0,e=97,t=function(){return oq(),null},rj(e=ie(e),t,void 0)),og=og.nextEffect}})()}catch(e){if(null===og)throw Error(h(330));oK(og,e),og=og.nextEffect}while(null!==og)og=i;do try{for(o=e,s=t;null!==og;){var x=og.effectTag;if(16&x&&eX(og.stateNode,""),128&x){var b=og.alternate;if(null!==b){var S=b.ref;null!==S&&("function"==typeof S?S(null):S.current=null)}}switch(1038&x){case 2:a4(og),og.effectTag&=-3;break;case 6:a4(og),og.effectTag&=-3,a6(og.alternate,og);break;case 1024:og.effectTag&=-1025;break;case 1028:og.effectTag&=-1025,a6(og.alternate,og);break;case 4:a6(og.alternate,og);break;case 8:c=og,a5(o,c,s),function e(t){var n=t.alternate;t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.alternate=null,t.firstEffect=null,t.lastEffect=null,t.pendingProps=null,t.memoizedProps=null,t.stateNode=null,null!==n&&e(n)}(c)}og=og.nextEffect}}catch(e){if(null===og)throw Error(h(330));oK(og,e),og=og.nextEffect}while(null!==og)if(S=ne,b=t8(),x=S.focusedElem,s=S.selectionRange,b!==x&&x&&x.ownerDocument&&function e(t,n){return!!t&&!!n&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(x.ownerDocument.documentElement,x)){for(null!==s&&t7(x)&&(b=s.start,void 0===(S=s.end)&&(S=b),("selectionStart"in x)?(x.selectionStart=b,x.selectionEnd=Math.min(S,x.value.length)):(S=(b=x.ownerDocument||document)&&b.defaultView||window).getSelection&&(S=S.getSelection(),c=x.textContent.length,o=Math.min(s.start,c),s=void 0===s.end?o:Math.min(s.end,c),!S.extend&&o>s&&(c=s,s=o,o=c),c=t6(x,o),f=t6(x,s),c&&f&&(1!==S.rangeCount||S.anchorNode!==c.node||S.anchorOffset!==c.offset||S.focusNode!==f.node||S.focusOffset!==f.offset)&&((b=b.createRange()).setStart(c.node,c.offset),S.removeAllRanges(),o>s?(S.addRange(b),S.extend(f.node,f.offset)):(b.setEnd(f.node,f.offset),S.addRange(b))))),b=[],S=x;S=S.parentNode;)1===S.nodeType&&b.push({element:S,left:S.scrollLeft,top:S.scrollTop});for("function"==typeof x.focus&&x.focus(),x=0;x<b.length;x++)(S=b[x]).element.scrollLeft=S.left,S.element.scrollTop=S.top}tV=!!t9,ne=t9=null,e.current=n,og=i;do try{for(x=e;null!==og;){var E=og.effectTag;if(36&E&&function(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:a1(3,n);return;case 1:if(e=n.stateNode,4&n.effectTag){if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:is(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}}null!==(t=n.updateQueue)&&iM(n,t,e);return;case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}iM(n,t,e)}return;case 5:e=n.stateNode,null===t&&4&n.effectTag&&nt(n.type,n.memoizedProps)&&e.focus();return;case 6:case 4:case 12:case 19:case 17:case 20:case 21:return;case 13:null===n.memoizedState&&null!==(n=n.alternate)&&null!==(n=n.memoizedState)&&null!==(n=n.dehydrated)&&tL(n);return}throw Error(h(163))}(x,og.alternate,og),128&E){b=void 0;var w=og.ref;if(null!==w){var M=og.stateNode;og.tag,b=M,"function"==typeof w?w(b):w.current=b}}og=og.nextEffect}}catch(e){if(null===og)throw Error(h(330));oK(og,e),og=og.nextEffect}while(null!==og)og=null,r3(),oi=a}else e.current=n;if(ox)ox=!1,ob=e,oS=t;else for(og=i;null!==og;)t=og.nextEffect,og.nextEffect=null,og=t;if(0===(t=e.firstPendingTime)&&(o_=null),1073741823===t?e===oM?ow++:(ow=0,oM=e):ow=0,"function"==typeof oQ&&oQ(n.stateNode,r),oO(e),ov)throw ov=!1,e=oy,oy=null,e;return(8&oi)!=0||ii(),null}function oq(){if(90!==oS){var e=97<oS?97:oS;return oS=90,it(e,oY)}}function oY(){if(null===ob)return!1;var e=ob;if(ob=null,(48&oi)!=0)throw Error(h(331));var t=oi;for(oi|=32,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:a0(5,n),a1(5,n)}}catch(t){if(null===e)throw Error(h(330));oK(e,t)}n=e.nextEffect,e.nextEffect=null,e=n}return oi=t,ii(),!0}function o$(e,t,n){t=a9(e,t=aK(n,t),1073741823),iS(e,t),null!==(e=oR(e,1073741823))&&oO(e)}function oK(e,t){if(3===e.tag)o$(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){o$(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===o_||!o_.has(r))){e=oe(n,e=aK(t,e),1073741823),iS(n,e),null!==(n=oR(n,1073741823))&&oO(n);break}}n=n.return}}function oZ(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),oa===e&&os===n?4===ol||3===ol&&1073741823===oc&&r7()-om<500?ok(e,os):op=!0:se(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,oO(e)))}function oJ(e,t){var n=e.stateNode;null!==n&&n.delete(t),0==(t=0)&&(t=oC(t=oA(),e,null)),null!==(e=oR(e,t))&&oO(e)}l=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||rN.current)aI=!0;else{if(r<n){switch(aI=!1,t.tag){case 3:aH(t),aL();break;case 5:if(iq(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:rF(t.type)&&rH(t);break;case 4:ij(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,rO(il,(i=t.type._context)._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState){if(0!==(r=t.child.childExpirationTime)&&r>=n)return aW(e,t,n);return rO(i$,1&i$.current),null!==(t=aY(e,t,n))?t.sibling:null}rO(i$,1&i$.current);break;case 19:if(r=t.childExpirationTime>=n,0!=(64&e.effectTag)){if(r)return aq(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),rO(i$,i$.current),!r)return null}return aY(e,t,n)}aI=!1}}else aI=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=rk(t,rU.current),ig(t,n),i=i8(null,t,r,e,i,n),t.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,rF(r)){var a=!0;rH(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i_(t);var o=r.getDerivedStateFromProps;"function"==typeof o&&iC(t,r,o,e),i.updater=iP,t.stateNode=i,i._reactInternalFiber=t,iI(t,r,e,n),t=aV(null,t,r,!0,a,n)}else t.tag=0,aU(null,t,i,n),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)})}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,a=t.tag=function(e){if("function"==typeof e)return o3(e)?1:0;if(null!=e){if((e=e.$$typeof)===em)return 11;if(e===ey)return 14}return 2}(i),e=is(i,e),a){case 0:t=az(null,t,i,e,n);break e;case 1:t=aB(null,t,i,e,n);break e;case 11:t=aN(null,t,i,e,n);break e;case 14:t=aD(null,t,i,is(i.type,e),r,n);break e}throw Error(h(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:is(r,i),az(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:is(r,i),aB(e,t,r,i,n);case 3:if(aH(t),r=t.updateQueue,null===e||null===r)throw Error(h(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ix(e,t),iw(t,r,null,n),(r=t.memoizedState.element)===i)aL(),t=aY(e,t,n);else{if((i=t.stateNode.hydrate)&&(aw=na(t.stateNode.containerInfo.firstChild),aE=t,i=aM=!0),i)for(n=iz(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else aU(e,t,r,n),aL();t=t.child}return t;case 5:return iq(t),null===e&&aC(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,nn(r,i)?o=null:null!==a&&nn(r,a)&&(t.effectTag|=16),aF(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(aU(e,t,o,n),t=t.child),t;case 6:return null===e&&aC(t),null;case 13:return aW(e,t,n);case 4:return ij(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=iF(t,null,r,n):aU(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:is(r,i),aN(e,t,r,i,n);case 7:return aU(e,t,t.pendingProps,n),t.child;case 8:case 12:return aU(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value;var s=t.type._context;if(rO(il,s._currentValue),s._currentValue=a,null!==o){if(0==(a=rl(s=o.value,a)?0:("function"==typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823)|0)){if(o.children===i.children&&!rN.current){t=aY(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){o=s.child;for(var u=l.firstContext;null!==u;){if(u.context===r&&0!=(u.observedBits&a)){1===s.tag&&((u=ib(n,null)).tag=2,iS(s,u)),s.expirationTime<n&&(s.expirationTime=n),null!==(u=s.alternate)&&u.expirationTime<n&&(u.expirationTime=n),im(s.return,n),l.expirationTime<n&&(l.expirationTime=n);break}u=u.next}}else o=10===s.tag&&s.type===t.type?null:s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}}aU(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,ig(t,n),r=r(i=iv(i,a.unstable_observedBits)),t.effectTag|=1,aU(e,t,r,n),t.child;case 14:return a=is(i=t.type,t.pendingProps),a=is(i.type,a),aD(e,t,i,a,r,n);case 15:return ak(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:is(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,rF(r)?(e=!0,rH(t)):e=!1,ig(t,n),iL(t,r,i),iI(t,r,i,n),aV(null,t,r,!0,e,n);case 19:return aq(e,t,n)}throw Error(h(156,t.tag))};var oQ=null,o0=null;function o1(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function o2(e,t,n,r){return new o1(e,t,n,r)}function o3(e){return!(!(e=e.prototype)||!e.isReactComponent)}function o4(e,t){var n=e.alternate;return null===n?((n=o2(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function o5(e,t,n,r,i,a){var o=2;if(r=e,"function"==typeof e)o3(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case eu:return o6(n.children,i,a,t);case ep:o=8,i|=7;break;case ec:o=8,i|=1;break;case ef:return(e=o2(12,n,t,8|i)).elementType=ef,e.type=ef,e.expirationTime=a,e;case eg:return(e=o2(13,n,t,i)).type=eg,e.elementType=eg,e.expirationTime=a,e;case ev:return(e=o2(19,n,t,i)).elementType=ev,e.expirationTime=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case eh:o=10;break e;case ed:o=9;break e;case em:o=11;break e;case ey:o=14;break e;case e_:o=16,r=null;break e;case ex:o=22;break e}throw Error(h(130,null==e?e:typeof e,""))}return(t=o2(o,n,t,i)).elementType=e,t.type=r,t.expirationTime=a,t}function o6(e,t,n,r){return(e=o2(7,e,r,t)).expirationTime=n,e}function o8(e,t,n){return(e=o2(6,e,null,t)).expirationTime=n,e}function o7(e,t,n){return(t=o2(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function o9(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function se(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function st(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function sn(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function sr(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function si(e,t,n,r){var i=t.current,a=oA(),o=iT.suspense;a=oC(a,i,o);e:if(n){n=n._reactInternalFiber;t:{if(e5(n)!==n||1!==n.tag)throw Error(h(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(rF(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s)throw Error(h(171))}if(1===n.tag){var l=n.type;if(rF(l)){n=rV(n,l,s);break e}}n=s}else n=rI;return null===t.context?t.context=n:t.pendingContext=n,(t=ib(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),iS(i,t),oP(i,a),a}function sa(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function so(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function ss(e,t){so(e,t),(e=e.alternate)&&so(e,t)}function sl(e,t,n){n=null!=n&&!0===n.hydrate;var r,i,a=new o9(e,t,n),o=o2(3,null,null,2===t?7:1===t?3:0);a.current=o,o.stateNode=a,i_(o),e[nc]=a.current,n&&0!==t&&(i=e4(r=9===e.nodeType?e:e.ownerDocument),tS.forEach(function(e){tc(e,r,i)}),tE.forEach(function(e){tc(e,r,i)})),this._internalRoot=a}function su(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function sc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"==typeof i){var s=i;i=function(){var e=sa(o);s.call(e)}}si(t,o,e,i)}else{if(o=(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new sl(e,0,t?{hydrate:!0}:void 0)}(n,r))._internalRoot,"function"==typeof i){var l=i;i=function(){var e=sa(o);l.call(e)}}oD(function(){si(t,o,e,i)})}return sa(o)}function sf(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!su(t))throw Error(h(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:el,key:null==r?null:""+r,children:e,containerInfo:t,implementation:null}}(e,t,null,n)}sl.prototype.render=function(e){si(e,this._internalRoot,null,null)},sl.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;si(null,e,null,function(){t[nc]=null})},tf=function(e){if(13===e.tag){var t=io(oA(),150,100);oP(e,t),ss(e,t)}},th=function(e){13===e.tag&&(oP(e,3),ss(e,3))},td=function(e){if(13===e.tag){var t=oA();t=oC(t,e,null),oP(e,t),ss(e,t)}},N=function(e,t,n){switch(t){case"input":if(eO(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=np(r);if(!i)throw Error(h(90));eC(r),eO(r,i)}}}break;case"textarea":ez(e,n);break;case"select":null!=(t=n.value)&&eD(e,!!n.multiple,t,!1)}},V=oN,H=function(e,t,n,r,i){var a=oi;oi|=4;try{return it(98,e.bind(null,t,n,r,i))}finally{0===(oi=a)&&ii()}},G=function(){(49&oi)==0&&(function(){if(null!==oE){var e=oE;oE=null,e.forEach(function(e,t){sr(t,e),oO(t)}),ii()}}(),oq())},W=function(e,t){var n=oi;oi|=2;try{return e(t)}finally{0===(oi=n)&&ii()}},r=(n={findFiberByHostInstance:nf,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return 0;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!t.isDisabled&&t.supportsFiber)try{var n=t.inject(e);oQ=function(e){try{t.onCommitFiberRoot(n,e,void 0,64==(64&e.current.effectTag))}catch(e){}},o0=function(e){try{t.onCommitFiberUnmount(n,e)}catch(e){}}}catch(e){}}(c({},n,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:er.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=e7(e))?null:e.stateNode},findFiberByHostInstance:function(e){return r?r(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null})),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED={Events:[nh,nd,np,I,R,nb,function(e){te(e,nx)},z,B,tX,tr,oq,{current:!1}]},t.createPortal=sf,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw Error(h(188));throw Error(h(268,Object.keys(e)))}return e=null===(e=e7(t))?null:e.stateNode},t.flushSync=function(e,t){if((48&oi)!=0)throw Error(h(187));var n=oi;oi|=1;try{return it(99,e.bind(null,t))}finally{oi=n,ii()}},t.hydrate=function(e,t,n){if(!su(t))throw Error(h(200));return sc(null,e,t,!0,n)},t.render=function(e,t,n){if(!su(t))throw Error(h(200));return sc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!su(e))throw Error(h(40));return!!e._reactRootContainer&&(oD(function(){sc(null,null,e,!1,function(){e._reactRootContainer=null,e[nc]=null})}),!0)},t.unstable_batchedUpdates=oN,t.unstable_createPortal=function(e,t){return sf(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!su(n))throw Error(h(200));if(null==e||void 0===e._reactInternalFiber)throw Error(h(38));return sc(e,t,n,!1,r)},t.version="16.13.1"}),m("fO90s",function(e,t){e.exports=p("gcnCG")}),m("gcnCG",function(e,n){if(t(e.exports,"unstable_now",()=>r,e=>r=e),t(e.exports,"unstable_forceFrameRate",()=>i,e=>i=e),t(e.exports,"unstable_IdlePriority",()=>a,e=>a=e),t(e.exports,"unstable_ImmediatePriority",()=>o,e=>o=e),t(e.exports,"unstable_LowPriority",()=>s,e=>s=e),t(e.exports,"unstable_NormalPriority",()=>l,e=>l=e),t(e.exports,"unstable_Profiling",()=>u,e=>u=e),t(e.exports,"unstable_UserBlockingPriority",()=>c,e=>c=e),t(e.exports,"unstable_cancelCallback",()=>f,e=>f=e),t(e.exports,"unstable_continueExecution",()=>h,e=>h=e),t(e.exports,"unstable_getCurrentPriorityLevel",()=>d,e=>d=e),t(e.exports,"unstable_getFirstCallbackNode",()=>p,e=>p=e),t(e.exports,"unstable_next",()=>m,e=>m=e),t(e.exports,"unstable_pauseExecution",()=>g,e=>g=e),t(e.exports,"unstable_requestPaint",()=>v,e=>v=e),t(e.exports,"unstable_runWithPriority",()=>y,e=>y=e),t(e.exports,"unstable_scheduleCallback",()=>_,e=>_=e),t(e.exports,"unstable_shouldYield",()=>x,e=>x=e),t(e.exports,"unstable_wrapCallback",()=>b,e=>b=e),"undefined"==typeof window||"function"!=typeof MessageChannel){var r,i,a,o,s,l,u,c,f,h,d,p,m,g,v,y,_,x,b,S,E,w,M,T,A=null,C=null,P=function(){if(null!==A)try{var e=r();A(!0,e),A=null}catch(e){throw setTimeout(P,0),e}},R=Date.now();r=function(){return Date.now()-R},S=function(e){null!==A?setTimeout(S,0,e):(A=e,setTimeout(P,0))},E=function(e,t){C=setTimeout(e,t)},w=function(){clearTimeout(C)},M=function(){return!1},T=i=function(){}}else{var L=window.performance,O=window.Date,I=window.setTimeout,U=window.clearTimeout;if("undefined"!=typeof console){var N=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof N&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof L&&"function"==typeof L.now)r=function(){return L.now()};else{var D=O.now();r=function(){return O.now()-D}}var k=!1,F=null,z=-1,B=5,V=0;M=function(){return r()>=V},T=function(){},i=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):B=0<e?Math.floor(1e3/e):5};var H=new MessageChannel,G=H.port2;H.port1.onmessage=function(){if(null!==F){var e=r();V=e+B;try{F(!0,e)?G.postMessage(null):(k=!1,F=null)}catch(e){throw G.postMessage(null),e}}else k=!1},S=function(e){F=e,k||(k=!0,G.postMessage(null))},E=function(e,t){z=I(function(){e(r())},t)},w=function(){U(z),z=-1}}function W(e,t){var n=e.length;for(e.push(t);;){var r=n-1>>>1,i=e[r];if(void 0!==i&&0<q(i,t))e[r]=t,e[n]=i,n=r;else break}}function j(e){return void 0===(e=e[0])?null:e}function X(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],s=a+1,l=e[s];if(void 0!==o&&0>q(o,n))void 0!==l&&0>q(l,o)?(e[r]=l,e[s]=n,r=s):(e[r]=o,e[a]=n,r=a);else if(void 0!==l&&0>q(l,n))e[r]=l,e[s]=n,r=s;else break}}return t}return null}function q(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var Y=[],$=[],K=1,Z=null,J=3,Q=!1,ee=!1,et=!1;function en(e){for(var t=j($);null!==t;){if(null===t.callback)X($);else if(t.startTime<=e)X($),t.sortIndex=t.expirationTime,W(Y,t);else break;t=j($)}}function er(e){if(et=!1,en(e),!ee){if(null!==j(Y))ee=!0,S(ei);else{var t=j($);null!==t&&E(er,t.startTime-e)}}}function ei(e,t){ee=!1,et&&(et=!1,w()),Q=!0;var n=J;try{for(en(t),Z=j(Y);null!==Z&&(!(Z.expirationTime>t)||e&&!M());){var i=Z.callback;if(null!==i){Z.callback=null,J=Z.priorityLevel;var a=i(Z.expirationTime<=t);t=r(),"function"==typeof a?Z.callback=a:Z===j(Y)&&X(Y),en(t)}else X(Y);Z=j(Y)}if(null!==Z)var o=!0;else{var s=j($);null!==s&&E(er,s.startTime-t),o=!1}return o}finally{Z=null,J=n,Q=!1}}function ea(e){switch(e){case 1:return -1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var eo=T;a=5,o=1,s=4,l=3,u=null,c=2,f=function(e){e.callback=null},h=function(){ee||Q||(ee=!0,S(ei))},d=function(){return J},p=function(){return j(Y)},m=function(e){switch(J){case 1:case 2:case 3:var t=3;break;default:t=J}var n=J;J=t;try{return e()}finally{J=n}},g=function(){},v=eo,y=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=J;J=e;try{return t()}finally{J=n}},_=function(e,t,n){var i=r();if("object"==typeof n&&null!==n){var a=n.delay;a="number"==typeof a&&0<a?i+a:i,n="number"==typeof n.timeout?n.timeout:ea(e)}else n=ea(e),a=i;return n=a+n,e={id:K++,callback:t,priorityLevel:e,startTime:a,expirationTime:n,sortIndex:-1},a>i?(e.sortIndex=a,W($,e),null===j(Y)&&e===j($)&&(et?w():et=!0,E(er,a-i))):(e.sortIndex=n,W(Y,e),ee||Q||(ee=!0,S(ei))),e},x=function(){var e=r();en(e);var t=j(Y);return t!==Z&&null!==Z&&null!==t&&null!==t.callback&&t.startTime<=e&&t.expirationTime<Z.expirationTime||M()},b=function(e){var t=J;return function(){var n=J;J=t;try{return e.apply(this,arguments)}finally{J=n}}}}),m("bc5yV",function(e,t){var n=function(e){var t;return!!e&&"object"==typeof e&&"[object RegExp]"!==(t=Object.prototype.toString.call(e))&&"[object Date]"!==t&&e.$$typeof!==r},r="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function i(e,t){return!1!==t.clone&&t.isMergeableObject(e)?l(Array.isArray(e)?[]:{},e,t):e}function a(e,t,n){return e.concat(t).map(function(e){return i(e,n)})}function o(e){return Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return e.propertyIsEnumerable(t)}):[])}function s(e,t){try{return t in e}catch(e){return!1}}function l(e,t,r){(r=r||{}).arrayMerge=r.arrayMerge||a,r.isMergeableObject=r.isMergeableObject||n,// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()
// implementations can use it. The caller may not replace it.
r.cloneUnlessOtherwiseSpecified=i;var u,c,f=Array.isArray(t);return f!==Array.isArray(e)?i(t,r):f?r.arrayMerge(e,t,r):(c={},(u=r).isMergeableObject(e)&&o(e).forEach(function(t){c[t]=i(e[t],u)}),o(t).forEach(function(n){s(e,n)// Properties are safe to merge if they don't exist in the target yet,
&&!(Object.hasOwnProperty.call(e,n)// unsafe if they exist up the prototype chain,
&&Object.propertyIsEnumerable.call(e,n)// and also unsafe if they're nonenumerable.
)||(s(e,n)&&u.isMergeableObject(t[n])?c[n]=(function(e,t){if(!t.customMerge)return l;var n=t.customMerge(e);return"function"==typeof n?n:l})(n,u)(e[n],t[n],u):c[n]=i(t[n],u))}),c)}l.all=function(e,t){if(!Array.isArray(e))throw Error("first argument should be an array");return e.reduce(function(e,n){return l(e,n,t)},{})},e.exports=l}),m("jk22o",function(e,n){function r(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}Object.defineProperty(e.exports,"__esModule",{value:!0,configurable:!0}),t(e.exports,"default",()=>i);var i=function(e,t){void 0===t&&(t=r);var n,i,a=[],o=!1;return function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];return o&&n===this&&t(r,a)||(i=e.apply(this,r),o=!0,n=this,a=r),i}}}),m("ai2Pb",function(e,t){/* global Map:readonly, Set:readonly, ArrayBuffer:readonly */var n="undefined"!=typeof Element,r="function"==typeof Map,i="function"==typeof Set,a="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;// end fast-deep-equal
e.exports=function(e,t){try{return(// Note: We **don't** need `envHasBigInt64Array` in fde es6/index.js
function e(t,o){// START: fast-deep-equal es6/index.js 3.1.1
if(t===o)return!0;if(t&&o&&"object"==typeof t&&"object"==typeof o){var s,l,u,c;if(t.constructor!==o.constructor)return!1;if(Array.isArray(t)){if((s=t.length)!=o.length)return!1;for(l=s;0!=l--;)if(!e(t[l],o[l]))return!1;return!0}if(r&&t instanceof Map&&o instanceof Map){if(t.size!==o.size)return!1;for(c=t.entries();!(l=c.next()).done;)if(!o.has(l.value[0]))return!1;for(c=t.entries();!(l=c.next()).done;)if(!e(l.value[1],o.get(l.value[0])))return!1;return!0}if(i&&t instanceof Set&&o instanceof Set){if(t.size!==o.size)return!1;for(c=t.entries();!(l=c.next()).done;)if(!o.has(l.value[0]))return!1;return!0}// END: Modifications
if(a&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(o)){if((s=t.length)!=o.length)return!1;for(l=s;0!=l--;)if(t[l]!==o[l])return!1;return!0}if(t.constructor===RegExp)return t.source===o.source&&t.flags===o.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===o.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===o.toString();if((s=(u=Object.keys(t)).length)!==Object.keys(o).length)return!1;for(l=s;0!=l--;)if(!Object.prototype.hasOwnProperty.call(o,u[l]))return!1;// END: fast-deep-equal
// START: react-fast-compare
// custom handling for DOM elements
if(n&&t instanceof Element)return!1;// custom handling for React/Preact
for(l=s;0!=l--;)if(("_owner"!==u[l]&&"__v"!==u[l]&&"__o"!==u[l]||!t.$$typeof)&&!e(t[u[l]],o[u[l]]))return!1;// END: react-fast-compare
// START: fast-deep-equal
return!0}return t!=t&&o!=o}(e,t))}catch(e){if((e.message||"").match(/stack|recursion/i))return(// warn on circular references, don't crash
// browsers give this different errors name and messages:
// chrome/safari: "RangeError", "Maximum call stack size exceeded"
// firefox: "InternalError", too much recursion"
// edge: "Error", "Out of stack space"
console.warn("react-fast-compare cannot handle circular refs"),!1);// some other error. we should definitely know about these
throw e}}}),m("c9Z8w",function(e,t){// By explicitly using `prop-types` you are opting into new production behavior.
// http://fb.me/prop-types-in-prod
e.exports=p("hOzOt")()}),m("hOzOt",function(e,t){var n=p("kZO5c");function r(){}function i(){}i.resetWarningCache=r,e.exports=function(){function e(e,t,r,i,a,o){if(o!==n){var s=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;// Important!
// Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.
var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:r};return a.PropTypes=a,a}}),m("kZO5c",function(e,t){e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}),m("ccybn",function(e,t){function n(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){// this.onload = null here is necessary
// because even IE9 works not like others
this.onerror=this.onload=null,t(Error("Failed to load "+this.src),e)}}e.exports=function(e,t,r){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("script");"function"==typeof t&&(r=t,t={}),t=t||{},r=r||function(){},a.type=t.type||"text/javascript",a.charset=t.charset||"utf8",a.async=!("async"in t)||!!t.async,a.src=e,t.attrs&&function(e,t){for(var n in t)e.setAttribute(n,t[n])}(a,t.attrs),t.text&&(a.text=""+t.text),("onload"in a?n:function(e,t){e.onreadystatechange=function(){("complete"==this.readyState||"loaded"==this.readyState)&&(this.onreadystatechange=null,t(null,e)// there is no way to catch loading errors in IE8
)}})(a,r),a.onload||n(a,r),i.appendChild(a)}}),m("lTdXI",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var n,r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(p("acw62")),i=(n=p("ai2Pb"))&&n.__esModule?n:{default:n},a=p("fri5W");function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=/*#__PURE__*/function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(p,e);var t,n,a,o=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n,r=h(p);if(t){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(e=n)&&("object"===s(e)||"function"==typeof e)?e:f(this)});function p(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,p);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return d(f(e=o.call.apply(o,[this].concat(n))),"mounted",!1),d(f(e),"isReady",!1),d(f(e),"isPlaying",!1),d(f(e),"isLoading",!0),d(f(e),"loadOnReady",null),d(f(e),"startOnPlay",!0),d(f(e),"seekOnPlay",null),d(f(e),"onDurationCalled",!1),d(f(e),"handlePlayerMount",function(t){e.player=t,e.player.load(e.props.url),e.progress()}),d(f(e),"getInternalPlayer",function(t){return e.player?e.player[t]:null}),d(f(e),"progress",function(){if(e.props.url&&e.player&&e.isReady){var t=e.getCurrentTime()||0,n=e.getSecondsLoaded(),r=e.getDuration();if(r){var i={playedSeconds:t,played:t/r};null!==n&&(i.loadedSeconds=n,i.loaded=n/r),(i.playedSeconds!==e.prevPlayed||i.loadedSeconds!==e.prevLoaded)&&e.props.onProgress(i),e.prevPlayed=i.playedSeconds,e.prevLoaded=i.loadedSeconds}}e.progressTimeout=setTimeout(e.progress,e.props.progressFrequency||e.props.progressInterval)}),d(f(e),"handleReady",function(){if(e.mounted){e.isReady=!0,e.isLoading=!1;var t=e.props,n=t.onReady,r=t.playing,i=t.volume,a=t.muted;n(),a||null===i||e.player.setVolume(i),e.loadOnReady?(e.player.load(e.loadOnReady,!0),e.loadOnReady=null):r&&e.player.play(),e.handleDurationCheck()}}),d(f(e),"handlePlay",function(){e.isPlaying=!0,e.isLoading=!1;var t=e.props,n=t.onStart,r=t.onPlay,i=t.playbackRate;e.startOnPlay&&(e.player.setPlaybackRate&&1!==i&&e.player.setPlaybackRate(i),n(),e.startOnPlay=!1),r(),e.seekOnPlay&&(e.seekTo(e.seekOnPlay),e.seekOnPlay=null),e.handleDurationCheck()}),d(f(e),"handlePause",function(t){e.isPlaying=!1,e.isLoading||e.props.onPause(t)}),d(f(e),"handleEnded",function(){var t=e.props,n=t.activePlayer,r=t.loop,i=t.onEnded;n.loopOnEnded&&r&&e.seekTo(0),r||(e.isPlaying=!1,i())}),d(f(e),"handleError",function(){var t;e.isLoading=!1,(t=e.props).onError.apply(t,arguments)}),d(f(e),"handleDurationCheck",function(){clearTimeout(e.durationCheckTimeout);var t=e.getDuration();t?e.onDurationCalled||(e.props.onDuration(t),e.onDurationCalled=!0):e.durationCheckTimeout=setTimeout(e.handleDurationCheck,100)}),d(f(e),"handleLoaded",function(){// Sometimes we know loading has stopped but onReady/onPlay are never called
// so this provides a way for players to avoid getting stuck
e.isLoading=!1}),e}return n=[{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillUnmount",value:function(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}},{key:"componentDidUpdate",value:function(e){var t=this;// If there isnt a player available, dont do anything
if(this.player){// Invoke player methods based on changed props
var n=this.props,r=n.url,a=n.playing,o=n.volume,s=n.muted,l=n.playbackRate,u=n.pip,c=n.loop,f=n.activePlayer;if(!(0,i.default)(e.url,r)){if(this.isLoading&&!f.forceLoad){console.warn("ReactPlayer: the attempt to load ".concat(r," is being deferred until the player has loaded")),this.loadOnReady=r;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(r,this.isReady)}e.playing||!a||this.isPlaying||this.player.play(),e.playing&&!a&&this.isPlaying&&this.player.pause(),!e.pip&&u&&this.player.enablePIP&&this.player.enablePIP(),e.pip&&!u&&this.player.disablePIP&&this.player.disablePIP(),e.volume!==o&&null!==o&&this.player.setVolume(o),e.muted!==s&&(s?this.player.mute():(this.player.unmute(),null!==o&&setTimeout(function(){return t.player.setVolume(o)}))),e.playbackRate!==l&&this.player.setPlaybackRate&&this.player.setPlaybackRate(l),e.loop!==c&&this.player.setLoop&&this.player.setLoop(c)}}},{key:"getDuration",value:function(){return this.isReady?this.player.getDuration():null}},{key:"getCurrentTime",value:function(){return this.isReady?this.player.getCurrentTime():null}},{key:"getSecondsLoaded",value:function(){return this.isReady?this.player.getSecondsLoaded():null}},{key:"seekTo",value:function(e,t){var n=this;// When seeking before player is ready, store value and seek later
if(!this.isReady&&0!==e){this.seekOnPlay=e,setTimeout(function(){n.seekOnPlay=null},5e3);return}if(t?"fraction"===t:e>0&&e<1){// Convert fraction to seconds based on duration
var r=this.player.getDuration();if(!r){console.warn("ReactPlayer: could not seek using fraction \xa0duration not yet available");return}this.player.seekTo(r*e);return}this.player.seekTo(e)}},{key:"render",value:function(){var e=this.props.activePlayer;return e?/*#__PURE__*/r.default.createElement(e,l({},this.props,{onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError})):null}}],u(p.prototype,n),a&&u(p,a),p}(r.Component);e.exports.default=m,d(m,"displayName","Player"),d(m,"propTypes",a.propTypes),d(m,"defaultProps",a.defaultProps)}),m("fri5W",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.defaultProps=e.exports.propTypes=void 0;var n,r=(n=p("c9Z8w"))&&n.__esModule?n:{default:n},i=r.default.string,a=r.default.bool,o=r.default.number,s=r.default.array,l=r.default.oneOfType,u=r.default.shape,c=r.default.object,f=r.default.func,h=r.default.node,d={url:l([i,s,c]),playing:a,loop:a,controls:a,volume:o,muted:a,playbackRate:o,width:l([i,o]),height:l([i,o]),style:c,progressInterval:o,playsinline:a,pip:a,stopOnUnmount:a,light:l([a,i]),playIcon:h,wrapper:l([i,f,u({render:f.isRequired})]),config:u({soundcloud:u({options:c}),youtube:u({playerVars:c,embedOptions:c,onUnstarted:f}),facebook:u({appId:i,version:i,playerId:i,attributes:c}),dailymotion:u({params:c}),vimeo:u({playerOptions:c}),file:u({attributes:c,tracks:s,forceVideo:a,forceAudio:a,forceHLS:a,forceDASH:a,forceFLV:a,hlsOptions:c,hlsVersion:i,dashVersion:i,flvVersion:i}),wistia:u({options:c,playerId:i}),mixcloud:u({options:c}),twitch:u({options:c,playerId:i}),vidyard:u({options:c})}),onReady:f,onStart:f,onPlay:f,onPause:f,onBuffer:f,onBufferEnd:f,onEnded:f,onError:f,onDuration:f,onSeek:f,onProgress:f,onEnablePIP:f,onDisablePIP:f};e.exports.propTypes=d;var m=function(){};e.exports.defaultProps={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,wrapper:"div",config:{soundcloud:{options:{visual:!0,// Undocumented, but makes player fill container and look better
buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:m},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1}},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"0.14.16",dashVersion:"3.1.3",flvVersion:"1.5.0"},wistia:{options:{},playerId:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:m,onStart:m,onPlay:m,onPause:m,onBuffer:m,onBufferEnd:m,onEnded:m,onError:m,onDuration:m,onSeek:m,onProgress:m,onEnablePIP:m,onDisablePIP:m}}),m("7Iwfb",function(e,t){var n=p("Gr8vk");e.exports=n("dB0Hl").then(()=>p("MTexj"))}),m("Gr8vk",function(e,t){e.exports=function(e){// eslint-disable-next-line no-undef
return import(p("27Lyk").resolve(e))}}),m("f1q41",function(e,t){(function(){/** Error message constants. */var n,r="Expected a function",i="__lodash_hash_undefined__",a="__lodash_placeholder__",o=1/0,s=0/0,l=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],u="[object Arguments]",f="[object Array]",h="[object Boolean]",d="[object Date]",p="[object Error]",m="[object Function]",g="[object GeneratorFunction]",v="[object Map]",y="[object Number]",_="[object Object]",x="[object Promise]",b="[object RegExp]",S="[object Set]",E="[object String]",w="[object Symbol]",M="[object WeakMap]",T="[object ArrayBuffer]",A="[object DataView]",C="[object Float32Array]",P="[object Float64Array]",R="[object Int8Array]",L="[object Int16Array]",O="[object Int32Array]",I="[object Uint8Array]",U="[object Uint8ClampedArray]",N="[object Uint16Array]",D="[object Uint32Array]",k=/\b__p \+= '';/g,F=/\b(__p \+=) '' \+/g,z=/(__e\(.*?\)|\b__t\)) \+\n'';/g,B=/&(?:amp|lt|gt|quot|#39);/g,V=/[&<>"']/g,H=RegExp(B.source),G=RegExp(V.source),W=/<%-([\s\S]+?)%>/g,j=/<%([\s\S]+?)%>/g,X=/<%=([\s\S]+?)%>/g,q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Y=/^\w*$/,$=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,K=/[\\^$.*+?()[\]{}|]/g,Z=RegExp(K.source),J=/^\s+/,Q=/\s/,ee=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,et=/\{\n\/\* \[wrapped with (.+)\] \*/,en=/,? & /,er=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ei=/[()=,{}\[\]\/\s]/,ea=/\\(\\)?/g,eo=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,es=/\w*$/,el=/^[-+]0x[0-9a-f]+$/i,eu=/^0b[01]+$/i,ec=/^\[object .+?Constructor\]$/,ef=/^0o[0-7]+$/i,eh=/^(?:0|[1-9]\d*)$/,ed=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ep=/($^)/,em=/['\n\r\u2028\u2029\\]/g,eg="\ud800-\udfff",ev="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ey="\\u2700-\\u27bf",e_="a-z\\xdf-\\xf6\\xf8-\\xff",ex="A-Z\\xc0-\\xd6\\xd8-\\xde",eb="\\ufe0e\\ufe0f",eS="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",eE="[']",ew="["+eS+"]",eM="["+ev+"]",eT="["+e_+"]",eA="[^"+eg+eS+"\\d+"+ey+e_+ex+"]",eC="\ud83c[\udffb-\udfff]",eP="[^"+eg+"]",eR="(?:\ud83c[\udde6-\uddff]){2}",eL="[\ud800-\udbff][\udc00-\udfff]",eO="["+ex+"]",eI="\\u200d",eU="(?:"+eT+"|"+eA+")",eN="(?:"+eE+"(?:d|ll|m|re|s|t|ve))?",eD="(?:"+eE+"(?:D|LL|M|RE|S|T|VE))?",ek="(?:"+eM+"|"+eC+")?",eF="["+eb+"]?",ez="(?:"+eI+"(?:"+[eP,eR,eL].join("|")+")"+eF+ek+")*",eB=eF+ek+ez,eV="(?:"+["["+ey+"]",eR,eL].join("|")+")"+eB,eH="(?:"+[eP+eM+"?",eM,eR,eL,"["+eg+"]"].join("|")+")",eG=RegExp(eE,"g"),eW=RegExp(eM,"g"),ej=RegExp(eC+"(?="+eC+")|"+eH+eB,"g"),eX=RegExp([eO+"?"+eT+"+"+eN+"(?="+[ew,eO,"$"].join("|")+")","(?:"+eO+"|"+eA+")+"+eD+"(?="+[ew,eO+eU,"$"].join("|")+")",eO+"?"+eU+"+"+eN,eO+"+"+eD,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",eV].join("|"),"g"),eq=RegExp("["+eI+eg+ev+eb+"]"),eY=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,e$=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],eK=-1,eZ={};eZ[C]=eZ[P]=eZ[R]=eZ[L]=eZ[O]=eZ[I]=eZ[U]=eZ[N]=eZ[D]=!0,eZ[u]=eZ[f]=eZ[T]=eZ[h]=eZ[A]=eZ[d]=eZ[p]=eZ[m]=eZ[v]=eZ[y]=eZ[_]=eZ[b]=eZ[S]=eZ[E]=eZ[M]=!1;/** Used to identify `toStringTag` values supported by `_.clone`. */var eJ={};eJ[u]=eJ[f]=eJ[T]=eJ[A]=eJ[h]=eJ[d]=eJ[C]=eJ[P]=eJ[R]=eJ[L]=eJ[O]=eJ[v]=eJ[y]=eJ[_]=eJ[b]=eJ[S]=eJ[E]=eJ[w]=eJ[I]=eJ[U]=eJ[N]=eJ[D]=!0,eJ[p]=eJ[m]=eJ[M]=!1;/** Used to escape characters for inclusion in compiled string literals. */var eQ={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},e0=parseFloat,e1=parseInt,e2="object"==typeof c&&c&&c.Object===Object&&c,e3="object"==typeof self&&self&&self.Object===Object&&self,e4=e2||e3||Function("return this")(),e5=t&&!t.nodeType&&t,e6=e5&&e&&!e.nodeType&&e,e8=e6&&e6.exports===e5,e7=e8&&e2.process,e9=function(){try{// Use `util.types` for Node.js 10+.
var e=e6&&e6.require&&e6.require("util").types;if(e)return e;// Legacy `process.binding('util')` for Node.js < 10.
return e7&&e7.binding&&e7.binding("util")}catch(e){}}(),te=e9&&e9.isArrayBuffer,tt=e9&&e9.isDate,tn=e9&&e9.isMap,tr=e9&&e9.isRegExp,ti=e9&&e9.isSet,ta=e9&&e9.isTypedArray;/*--------------------------------------------------------------------------*//**
   * A faster alternative to `Function#apply`, this function invokes `func`
   * with the `this` binding of `thisArg` and the arguments of `args`.
   *
   * @private
   * @param {Function} func The function to invoke.
   * @param {*} thisArg The `this` binding of `func`.
   * @param {Array} args The arguments to invoke `func` with.
   * @returns {*} Returns the result of `func`.
   */function to(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}/**
   * A specialized version of `baseAggregator` for arrays.
   *
   * @private
   * @param {Array} [array] The array to iterate over.
   * @param {Function} setter The function to set `accumulator` values.
   * @param {Function} iteratee The iteratee to transform keys.
   * @param {Object} accumulator The initial aggregated object.
   * @returns {Function} Returns `accumulator`.
   */function ts(e,t,n,r){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(r,o,n(o),e)}return r}/**
   * A specialized version of `_.forEach` for arrays without support for
   * iteratee shorthands.
   *
   * @private
   * @param {Array} [array] The array to iterate over.
   * @param {Function} iteratee The function invoked per iteration.
   * @returns {Array} Returns `array`.
   */function tl(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}/**
   * A specialized version of `_.every` for arrays without support for
   * iteratee shorthands.
   *
   * @private
   * @param {Array} [array] The array to iterate over.
   * @param {Function} predicate The function invoked per iteration.
   * @returns {boolean} Returns `true` if all elements pass the predicate check,
   *  else `false`.
   */function tu(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}/**
   * A specialized version of `_.filter` for arrays without support for
   * iteratee shorthands.
   *
   * @private
   * @param {Array} [array] The array to iterate over.
   * @param {Function} predicate The function invoked per iteration.
   * @returns {Array} Returns the new filtered array.
   */function tc(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}/**
   * A specialized version of `_.includes` for arrays without support for
   * specifying an index to search from.
   *
   * @private
   * @param {Array} [array] The array to inspect.
   * @param {*} target The value to search for.
   * @returns {boolean} Returns `true` if `target` is found, else `false`.
   */function tf(e,t){return!!(null==e?0:e.length)&&tb(e,t,0)>-1}/**
   * This function is like `arrayIncludes` except that it accepts a comparator.
   *
   * @private
   * @param {Array} [array] The array to inspect.
   * @param {*} target The value to search for.
   * @param {Function} comparator The comparator invoked per element.
   * @returns {boolean} Returns `true` if `target` is found, else `false`.
   */function th(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}/**
   * A specialized version of `_.map` for arrays without support for iteratee
   * shorthands.
   *
   * @private
   * @param {Array} [array] The array to iterate over.
   * @param {Function} iteratee The function invoked per iteration.
   * @returns {Array} Returns the new mapped array.
   */function td(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}/**
   * Appends the elements of `values` to `array`.
   *
   * @private
   * @param {Array} array The array to modify.
   * @param {Array} values The values to append.
   * @returns {Array} Returns `array`.
   */function tp(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}/**
   * A specialized version of `_.reduce` for arrays without support for
   * iteratee shorthands.
   *
   * @private
   * @param {Array} [array] The array to iterate over.
   * @param {Function} iteratee The function invoked per iteration.
   * @param {*} [accumulator] The initial value.
   * @param {boolean} [initAccum] Specify using the first element of `array` as
   *  the initial value.
   * @returns {*} Returns the accumulated value.
   */function tm(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}/**
   * A specialized version of `_.reduceRight` for arrays without support for
   * iteratee shorthands.
   *
   * @private
   * @param {Array} [array] The array to iterate over.
   * @param {Function} iteratee The function invoked per iteration.
   * @param {*} [accumulator] The initial value.
   * @param {boolean} [initAccum] Specify using the last element of `array` as
   *  the initial value.
   * @returns {*} Returns the accumulated value.
   */function tg(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}/**
   * A specialized version of `_.some` for arrays without support for iteratee
   * shorthands.
   *
   * @private
   * @param {Array} [array] The array to iterate over.
   * @param {Function} predicate The function invoked per iteration.
   * @returns {boolean} Returns `true` if any element passes the predicate check,
   *  else `false`.
   */function tv(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}/**
   * Gets the size of an ASCII `string`.
   *
   * @private
   * @param {string} string The string inspect.
   * @returns {number} Returns the string size.
   */var ty=tM("length");/**
   * The base implementation of methods like `_.findKey` and `_.findLastKey`,
   * without support for iteratee shorthands, which iterates over `collection`
   * using `eachFunc`.
   *
   * @private
   * @param {Array|Object} collection The collection to inspect.
   * @param {Function} predicate The function invoked per iteration.
   * @param {Function} eachFunc The function to iterate over `collection`.
   * @returns {*} Returns the found element or its key, else `undefined`.
   */function t_(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}/**
   * The base implementation of `_.findIndex` and `_.findLastIndex` without
   * support for iteratee shorthands.
   *
   * @private
   * @param {Array} array The array to inspect.
   * @param {Function} predicate The function invoked per iteration.
   * @param {number} fromIndex The index to search from.
   * @param {boolean} [fromRight] Specify iterating from right to left.
   * @returns {number} Returns the index of the matched value, else `-1`.
   */function tx(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return -1}/**
   * The base implementation of `_.indexOf` without `fromIndex` bounds checks.
   *
   * @private
   * @param {Array} array The array to inspect.
   * @param {*} value The value to search for.
   * @param {number} fromIndex The index to search from.
   * @returns {number} Returns the index of the matched value, else `-1`.
   */function tb(e,t,n){return t==t?/**
   * A specialized version of `_.indexOf` which performs strict equality
   * comparisons of values, i.e. `===`.
   *
   * @private
   * @param {Array} array The array to inspect.
   * @param {*} value The value to search for.
   * @param {number} fromIndex The index to search from.
   * @returns {number} Returns the index of the matched value, else `-1`.
   */function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return -1}(e,t,n):tx(e,tE,n)}/**
   * This function is like `baseIndexOf` except that it accepts a comparator.
   *
   * @private
   * @param {Array} array The array to inspect.
   * @param {*} value The value to search for.
   * @param {number} fromIndex The index to search from.
   * @param {Function} comparator The comparator invoked per element.
   * @returns {number} Returns the index of the matched value, else `-1`.
   */function tS(e,t,n,r){for(var i=n-1,a=e.length;++i<a;)if(r(e[i],t))return i;return -1}/**
   * The base implementation of `_.isNaN` without support for number objects.
   *
   * @private
   * @param {*} value The value to check.
   * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.
   */function tE(e){return e!=e}/**
   * The base implementation of `_.mean` and `_.meanBy` without support for
   * iteratee shorthands.
   *
   * @private
   * @param {Array} array The array to iterate over.
   * @param {Function} iteratee The function invoked per iteration.
   * @returns {number} Returns the mean.
   */function tw(e,t){var n=null==e?0:e.length;return n?tC(e,t)/n:s}/**
   * The base implementation of `_.property` without support for deep paths.
   *
   * @private
   * @param {string} key The key of the property to get.
   * @returns {Function} Returns the new accessor function.
   */function tM(e){return function(t){return null==t?n:t[e]}}/**
   * The base implementation of `_.propertyOf` without support for deep paths.
   *
   * @private
   * @param {Object} object The object to query.
   * @returns {Function} Returns the new accessor function.
   */function tT(e){return function(t){return null==e?n:e[t]}}/**
   * The base implementation of `_.reduce` and `_.reduceRight`, without support
   * for iteratee shorthands, which iterates over `collection` using `eachFunc`.
   *
   * @private
   * @param {Array|Object} collection The collection to iterate over.
   * @param {Function} iteratee The function invoked per iteration.
   * @param {*} accumulator The initial value.
   * @param {boolean} initAccum Specify using the first or last element of
   *  `collection` as the initial value.
   * @param {Function} eachFunc The function to iterate over `collection`.
   * @returns {*} Returns the accumulated value.
   */function tA(e,t,n,r,i){return i(e,function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)}),n}/**
   * The base implementation of `_.sum` and `_.sumBy` without support for
   * iteratee shorthands.
   *
   * @private
   * @param {Array} array The array to iterate over.
   * @param {Function} iteratee The function invoked per iteration.
   * @returns {number} Returns the sum.
   */function tC(e,t){for(var r,i=-1,a=e.length;++i<a;){var o=t(e[i]);o!==n&&(r=r===n?o:r+o)}return r}/**
   * The base implementation of `_.times` without support for iteratee shorthands
   * or max array length checks.
   *
   * @private
   * @param {number} n The number of times to invoke `iteratee`.
   * @param {Function} iteratee The function invoked per iteration.
   * @returns {Array} Returns the array of results.
   */function tP(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}/**
   * The base implementation of `_.trim`.
   *
   * @private
   * @param {string} string The string to trim.
   * @returns {string} Returns the trimmed string.
   */function tR(e){return e?e.slice(0,tX(e)+1).replace(J,""):e}/**
   * The base implementation of `_.unary` without support for storing metadata.
   *
   * @private
   * @param {Function} func The function to cap arguments for.
   * @returns {Function} Returns the new capped function.
   */function tL(e){return function(t){return e(t)}}/**
   * The base implementation of `_.values` and `_.valuesIn` which creates an
   * array of `object` property values corresponding to the property names
   * of `props`.
   *
   * @private
   * @param {Object} object The object to query.
   * @param {Array} props The property names to get values for.
   * @returns {Object} Returns the array of property values.
   */function tO(e,t){return td(t,function(t){return e[t]})}/**
   * Checks if a `cache` value for `key` exists.
   *
   * @private
   * @param {Object} cache The cache to query.
   * @param {string} key The key of the entry to check.
   * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
   */function tI(e,t){return e.has(t)}/**
   * Used by `_.trim` and `_.trimStart` to get the index of the first string symbol
   * that is not found in the character symbols.
   *
   * @private
   * @param {Array} strSymbols The string symbols to inspect.
   * @param {Array} chrSymbols The character symbols to find.
   * @returns {number} Returns the index of the first unmatched string symbol.
   */function tU(e,t){for(var n=-1,r=e.length;++n<r&&tb(t,e[n],0)>-1;);return n}/**
   * Used by `_.trim` and `_.trimEnd` to get the index of the last string symbol
   * that is not found in the character symbols.
   *
   * @private
   * @param {Array} strSymbols The string symbols to inspect.
   * @param {Array} chrSymbols The character symbols to find.
   * @returns {number} Returns the index of the last unmatched string symbol.
   */function tN(e,t){for(var n=e.length;n--&&tb(t,e[n],0)>-1;);return n}/**
   * Used by `_.deburr` to convert Latin-1 Supplement and Latin Extended-A
   * letters to basic Latin letters.
   *
   * @private
   * @param {string} letter The matched letter to deburr.
   * @returns {string} Returns the deburred letter.
   */var tD=tT({// Latin-1 Supplement block.
:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",// Latin Extended-A block.
:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),tk=tT({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});/**
   * Used by `_.template` to escape characters for inclusion in compiled string literals.
   *
   * @private
   * @param {string} chr The matched character to escape.
   * @returns {string} Returns the escaped character.
   */function tF(e){return"\\"+eQ[e]}/**
   * Checks if `string` contains Unicode symbols.
   *
   * @private
   * @param {string} string The string to inspect.
   * @returns {boolean} Returns `true` if a symbol is found, else `false`.
   */function tz(e){return eq.test(e)}/**
   * Converts `map` to its key-value pairs.
   *
   * @private
   * @param {Object} map The map to convert.
   * @returns {Array} Returns the key-value pairs.
   */function tB(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}/**
   * Creates a unary function that invokes `func` with its argument transformed.
   *
   * @private
   * @param {Function} func The function to wrap.
   * @param {Function} transform The argument transform.
   * @returns {Function} Returns the new function.
   */function tV(e,t){return function(n){return e(t(n))}}/**
   * Replaces all `placeholder` elements in `array` with an internal placeholder
   * and returns an array of their indexes.
   *
   * @private
   * @param {Array} array The array to modify.
   * @param {*} placeholder The placeholder to replace.
   * @returns {Array} Returns the new array of placeholder indexes.
   */function tH(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n];(s===t||s===a)&&(e[n]=a,o[i++]=n)}return o}/**
   * Converts `set` to an array of its values.
   *
   * @private
   * @param {Object} set The set to convert.
   * @returns {Array} Returns the values.
   */function tG(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}/**
   * Gets the number of symbols in `string`.
   *
   * @private
   * @param {string} string The string to inspect.
   * @returns {number} Returns the string size.
   */function tW(e){return tz(e)?/**
   * Gets the size of a Unicode `string`.
   *
   * @private
   * @param {string} string The string inspect.
   * @returns {number} Returns the string size.
   */function(e){for(var t=ej.lastIndex=0;ej.test(e);)++t;return t}(e):ty(e)}/**
   * Converts `string` to an array.
   *
   * @private
   * @param {string} string The string to convert.
   * @returns {Array} Returns the converted array.
   */function tj(e){return tz(e)?e.match(ej)||[]:e.split("")}/**
   * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace
   * character of `string`.
   *
   * @private
   * @param {string} string The string to inspect.
   * @returns {number} Returns the index of the last non-whitespace character.
   */function tX(e){for(var t=e.length;t--&&Q.test(e.charAt(t)););return t}/**
   * Used by `_.unescape` to convert HTML entities to characters.
   *
   * @private
   * @param {string} chr The matched character to unescape.
   * @returns {string} Returns the unescaped character.
   */var tq=tT({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),tY=function e(t){/** Built-in constructor references. */var c,Q,eg,ev,ey=(t=null==t?e4:tY.defaults(e4.Object(),t,tY.pick(e4,e$))).Array,e_=t.Date,ex=t.Error,eb=t.Function,eS=t.Math,eE=t.Object,ew=t.RegExp,eM=t.String,eT=t.TypeError,eA=ey.prototype,eC=eb.prototype,eP=eE.prototype,eR=t["__core-js_shared__"],eL=eC.toString,eO=eP.hasOwnProperty,eI=0,eU=(c=/[^.]+$/.exec(eR&&eR.keys&&eR.keys.IE_PROTO||""))?"Symbol(src)_1."+c:"",eN=eP.toString,eD=eL.call(eE),ek=e4._,eF=ew("^"+eL.call(eO).replace(K,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ez=e8?t.Buffer:n,eB=t.Symbol,eV=t.Uint8Array,eH=ez?ez.allocUnsafe:n,ej=tV(eE.getPrototypeOf,eE),eq=eE.create,eQ=eP.propertyIsEnumerable,e2=eA.splice,e3=eB?eB.isConcatSpreadable:n,e5=eB?eB.iterator:n,e6=eB?eB.toStringTag:n,e7=function(){try{var e=ip(eE,"defineProperty");return e({},"",{}),e}catch(e){}}(),e9=t.clearTimeout!==e4.clearTimeout&&t.clearTimeout,ty=e_&&e_.now!==e4.Date.now&&e_.now,tT=t.setTimeout!==e4.setTimeout&&t.setTimeout,t$=eS.ceil,tK=eS.floor,tZ=eE.getOwnPropertySymbols,tJ=ez?ez.isBuffer:n,tQ=t.isFinite,t0=eA.join,t1=tV(eE.keys,eE),t2=eS.max,t3=eS.min,t4=e_.now,t5=t.parseInt,t6=eS.random,t8=eA.reverse,t7=ip(t,"DataView"),t9=ip(t,"Map"),ne=ip(t,"Promise"),nt=ip(t,"Set"),nn=ip(t,"WeakMap"),nr=ip(eE,"create"),ni=nn&&new nn,na={},no=iz(t7),ns=iz(t9),nl=iz(ne),nu=iz(nt),nc=iz(nn),nf=eB?eB.prototype:n,nh=nf?nf.valueOf:n,nd=nf?nf.toString:n;/*------------------------------------------------------------------------*//**
     * Creates a `lodash` object which wraps `value` to enable implicit method
     * chain sequences. Methods that operate on and return arrays, collections,
     * and functions can be chained together. Methods that retrieve a single value
     * or may return a primitive value will automatically end the chain sequence
     * and return the unwrapped value. Otherwise, the value must be unwrapped
     * with `_#value`.
     *
     * Explicit chain sequences, which must be unwrapped with `_#value`, may be
     * enabled using `_.chain`.
     *
     * The execution of chained methods is lazy, that is, it's deferred until
     * `_#value` is implicitly or explicitly called.
     *
     * Lazy evaluation allows several methods to support shortcut fusion.
     * Shortcut fusion is an optimization to merge iteratee calls; this avoids
     * the creation of intermediate arrays and can greatly reduce the number of
     * iteratee executions. Sections of a chain sequence qualify for shortcut
     * fusion if the section is applied to an array and iteratees accept only
     * one argument. The heuristic for whether a section qualifies for shortcut
     * fusion is subject to change.
     *
     * Chaining is supported in custom builds as long as the `_#value` method is
     * directly or indirectly included in the build.
     *
     * In addition to lodash methods, wrappers have `Array` and `String` methods.
     *
     * The wrapper `Array` methods are:
     * `concat`, `join`, `pop`, `push`, `shift`, `sort`, `splice`, and `unshift`
     *
     * The wrapper `String` methods are:
     * `replace` and `split`
     *
     * The wrapper methods that support shortcut fusion are:
     * `at`, `compact`, `drop`, `dropRight`, `dropWhile`, `filter`, `find`,
     * `findLast`, `head`, `initial`, `last`, `map`, `reject`, `reverse`, `slice`,
     * `tail`, `take`, `takeRight`, `takeRightWhile`, `takeWhile`, and `toArray`
     *
     * The chainable wrapper methods are:
     * `after`, `ary`, `assign`, `assignIn`, `assignInWith`, `assignWith`, `at`,
     * `before`, `bind`, `bindAll`, `bindKey`, `castArray`, `chain`, `chunk`,
     * `commit`, `compact`, `concat`, `conforms`, `constant`, `countBy`, `create`,
     * `curry`, `debounce`, `defaults`, `defaultsDeep`, `defer`, `delay`,
     * `difference`, `differenceBy`, `differenceWith`, `drop`, `dropRight`,
     * `dropRightWhile`, `dropWhile`, `extend`, `extendWith`, `fill`, `filter`,
     * `flatMap`, `flatMapDeep`, `flatMapDepth`, `flatten`, `flattenDeep`,
     * `flattenDepth`, `flip`, `flow`, `flowRight`, `fromPairs`, `functions`,
     * `functionsIn`, `groupBy`, `initial`, `intersection`, `intersectionBy`,
     * `intersectionWith`, `invert`, `invertBy`, `invokeMap`, `iteratee`, `keyBy`,
     * `keys`, `keysIn`, `map`, `mapKeys`, `mapValues`, `matches`, `matchesProperty`,
     * `memoize`, `merge`, `mergeWith`, `method`, `methodOf`, `mixin`, `negate`,
     * `nthArg`, `omit`, `omitBy`, `once`, `orderBy`, `over`, `overArgs`,
     * `overEvery`, `overSome`, `partial`, `partialRight`, `partition`, `pick`,
     * `pickBy`, `plant`, `property`, `propertyOf`, `pull`, `pullAll`, `pullAllBy`,
     * `pullAllWith`, `pullAt`, `push`, `range`, `rangeRight`, `rearg`, `reject`,
     * `remove`, `rest`, `reverse`, `sampleSize`, `set`, `setWith`, `shuffle`,
     * `slice`, `sort`, `sortBy`, `splice`, `spread`, `tail`, `take`, `takeRight`,
     * `takeRightWhile`, `takeWhile`, `tap`, `throttle`, `thru`, `toArray`,
     * `toPairs`, `toPairsIn`, `toPath`, `toPlainObject`, `transform`, `unary`,
     * `union`, `unionBy`, `unionWith`, `uniq`, `uniqBy`, `uniqWith`, `unset`,
     * `unshift`, `unzip`, `unzipWith`, `update`, `updateWith`, `values`,
     * `valuesIn`, `without`, `wrap`, `xor`, `xorBy`, `xorWith`, `zip`,
     * `zipObject`, `zipObjectDeep`, and `zipWith`
     *
     * The wrapper methods that are **not** chainable by default are:
     * `add`, `attempt`, `camelCase`, `capitalize`, `ceil`, `clamp`, `clone`,
     * `cloneDeep`, `cloneDeepWith`, `cloneWith`, `conformsTo`, `deburr`,
     * `defaultTo`, `divide`, `each`, `eachRight`, `endsWith`, `eq`, `escape`,
     * `escapeRegExp`, `every`, `find`, `findIndex`, `findKey`, `findLast`,
     * `findLastIndex`, `findLastKey`, `first`, `floor`, `forEach`, `forEachRight`,
     * `forIn`, `forInRight`, `forOwn`, `forOwnRight`, `get`, `gt`, `gte`, `has`,
     * `hasIn`, `head`, `identity`, `includes`, `indexOf`, `inRange`, `invoke`,
     * `isArguments`, `isArray`, `isArrayBuffer`, `isArrayLike`, `isArrayLikeObject`,
     * `isBoolean`, `isBuffer`, `isDate`, `isElement`, `isEmpty`, `isEqual`,
     * `isEqualWith`, `isError`, `isFinite`, `isFunction`, `isInteger`, `isLength`,
     * `isMap`, `isMatch`, `isMatchWith`, `isNaN`, `isNative`, `isNil`, `isNull`,
     * `isNumber`, `isObject`, `isObjectLike`, `isPlainObject`, `isRegExp`,
     * `isSafeInteger`, `isSet`, `isString`, `isUndefined`, `isTypedArray`,
     * `isWeakMap`, `isWeakSet`, `join`, `kebabCase`, `last`, `lastIndexOf`,
     * `lowerCase`, `lowerFirst`, `lt`, `lte`, `max`, `maxBy`, `mean`, `meanBy`,
     * `min`, `minBy`, `multiply`, `noConflict`, `noop`, `now`, `nth`, `pad`,
     * `padEnd`, `padStart`, `parseInt`, `pop`, `random`, `reduce`, `reduceRight`,
     * `repeat`, `result`, `round`, `runInContext`, `sample`, `shift`, `size`,
     * `snakeCase`, `some`, `sortedIndex`, `sortedIndexBy`, `sortedLastIndex`,
     * `sortedLastIndexBy`, `startCase`, `startsWith`, `stubArray`, `stubFalse`,
     * `stubObject`, `stubString`, `stubTrue`, `subtract`, `sum`, `sumBy`,
     * `template`, `times`, `toFinite`, `toInteger`, `toJSON`, `toLength`,
     * `toLower`, `toNumber`, `toSafeInteger`, `toString`, `toUpper`, `trim`,
     * `trimEnd`, `trimStart`, `truncate`, `unescape`, `uniqueId`, `upperCase`,
     * `upperFirst`, `value`, and `words`
     *
     * @name _
     * @constructor
     * @category Seq
     * @param {*} value The value to wrap in a `lodash` instance.
     * @returns {Object} Returns the new `lodash` wrapper instance.
     * @example
     *
     * function square(n) {
     *   return n * n;
     * }
     *
     * var wrapped = _([1, 2, 3]);
     *
     * // Returns an unwrapped value.
     * wrapped.reduce(_.add);
     * // => 6
     *
     * // Returns a wrapped value.
     * var squares = wrapped.map(square);
     *
     * _.isArray(squares);
     * // => false
     *
     * _.isArray(squares.value());
     * // => true
     */function np(e){if(aX(e)&&!aN(e)&&!(e instanceof ny)){if(e instanceof nv)return e;if(eO.call(e,"__wrapped__"))return iB(e)}return new nv(e)}/**
     * The base implementation of `_.create` without support for assigning
     * properties to the created object.
     *
     * @private
     * @param {Object} proto The object to inherit from.
     * @returns {Object} Returns the new object.
     */var nm=function(){function e(){}return function(t){if(!aj(t))return{};if(eq)return eq(t);e.prototype=t;var r=new e;return e.prototype=n,r}}();/**
     * The function whose prototype chain sequence wrappers inherit from.
     *
     * @private
     */function ng(){// No operation performed.
}/**
     * The base constructor for creating `lodash` wrapper objects.
     *
     * @private
     * @param {*} value The value to wrap.
     * @param {boolean} [chainAll] Enable explicit method chain sequences.
     */function nv(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}/*------------------------------------------------------------------------*//**
     * Creates a lazy wrapper object which wraps `value` to enable lazy evaluation.
     *
     * @private
     * @constructor
     * @param {*} value The value to wrap.
     */function ny(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}/*------------------------------------------------------------------------*//**
     * Creates a hash object.
     *
     * @private
     * @constructor
     * @param {Array} [entries] The key-value pairs to cache.
     */function n_(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}/*------------------------------------------------------------------------*//**
     * Creates an list cache object.
     *
     * @private
     * @constructor
     * @param {Array} [entries] The key-value pairs to cache.
     */function nx(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}/*------------------------------------------------------------------------*//**
     * Creates a map cache object to store key-value pairs.
     *
     * @private
     * @constructor
     * @param {Array} [entries] The key-value pairs to cache.
     */function nb(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}/*------------------------------------------------------------------------*//**
     *
     * Creates an array cache object to store unique values.
     *
     * @private
     * @constructor
     * @param {Array} [values] The values to cache.
     */function nS(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new nb;++t<n;)this.add(e[t])}/*------------------------------------------------------------------------*//**
     * Creates a stack cache object to store key-value pairs.
     *
     * @private
     * @constructor
     * @param {Array} [entries] The key-value pairs to cache.
     */function nE(e){var t=this.__data__=new nx(e);this.size=t.size}/*------------------------------------------------------------------------*//**
     * Creates an array of the enumerable property names of the array-like `value`.
     *
     * @private
     * @param {*} value The value to query.
     * @param {boolean} inherited Specify returning inherited property names.
     * @returns {Array} Returns the array of property names.
     */function nw(e,t){var n=aN(e),r=!n&&aU(e),i=!n&&!r&&az(e),a=!n&&!r&&!i&&a0(e),o=n||r||i||a,s=o?tP(e.length,eM):[],l=s.length;for(var u in e)(t||eO.call(e,u))&&!(o&&// Safari 9 has enumerable `arguments.length` in strict mode.
("length"==u||// Node.js 0.10 has enumerable non-index properties on buffers.
i&&("offset"==u||"parent"==u)||// PhantomJS 2 has enumerable non-index properties on typed arrays.
a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||// Skip index properties.
ib(u,l)))&&s.push(u);return s}/**
     * A specialized version of `_.sample` for arrays.
     *
     * @private
     * @param {Array} array The array to sample.
     * @returns {*} Returns the random element.
     */function nM(e){var t=e.length;return t?e[ru(0,t-1)]:n}/**
     * This function is like `assignValue` except that it doesn't assign
     * `undefined` values.
     *
     * @private
     * @param {Object} object The object to modify.
     * @param {string} key The key of the property to assign.
     * @param {*} value The value to assign.
     */function nT(e,t,r){(r===n||aL(e[t],r))&&(r!==n||t in e)||nL(e,t,r)}/**
     * Assigns `value` to `key` of `object` if the existing value is not equivalent
     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
     * for equality comparisons.
     *
     * @private
     * @param {Object} object The object to modify.
     * @param {string} key The key of the property to assign.
     * @param {*} value The value to assign.
     */function nA(e,t,r){var i=e[t];eO.call(e,t)&&aL(i,r)&&(r!==n||t in e)||nL(e,t,r)}/**
     * Gets the index at which the `key` is found in `array` of key-value pairs.
     *
     * @private
     * @param {Array} array The array to inspect.
     * @param {*} key The key to search for.
     * @returns {number} Returns the index of the matched value, else `-1`.
     */function nC(e,t){for(var n=e.length;n--;)if(aL(e[n][0],t))return n;return -1}/**
     * Aggregates elements of `collection` on `accumulator` with keys transformed
     * by `iteratee` and values set by `setter`.
     *
     * @private
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} setter The function to set `accumulator` values.
     * @param {Function} iteratee The iteratee to transform keys.
     * @param {Object} accumulator The initial aggregated object.
     * @returns {Function} Returns `accumulator`.
     */function nP(e,t,n,r){return nF(e,function(e,i,a){t(r,e,n(e),a)}),r}/**
     * The base implementation of `_.assign` without support for multiple sources
     * or `customizer` functions.
     *
     * @private
     * @param {Object} object The destination object.
     * @param {Object} source The source object.
     * @returns {Object} Returns `object`.
     */function nR(e,t){return e&&rV(t,oh(t),e)}/**
     * The base implementation of `assignValue` and `assignMergeValue` without
     * value checks.
     *
     * @private
     * @param {Object} object The object to modify.
     * @param {string} key The key of the property to assign.
     * @param {*} value The value to assign.
     */function nL(e,t,n){"__proto__"==t&&e7?e7(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}/**
     * The base implementation of `_.at` without support for individual paths.
     *
     * @private
     * @param {Object} object The object to iterate over.
     * @param {string[]} paths The property paths to pick.
     * @returns {Array} Returns the picked elements.
     */function nO(e,t){for(var r=-1,i=t.length,a=ey(i),o=null==e;++r<i;)a[r]=o?n:os(e,t[r]);return a}/**
     * The base implementation of `_.clamp` which doesn't coerce arguments.
     *
     * @private
     * @param {number} number The number to clamp.
     * @param {number} [lower] The lower bound.
     * @param {number} upper The upper bound.
     * @returns {number} Returns the clamped number.
     */function nI(e,t,r){return e==e&&(r!==n&&(e=e<=r?e:r),t!==n&&(e=e>=t?e:t)),e}/**
     * The base implementation of `_.clone` and `_.cloneDeep` which tracks
     * traversed objects.
     *
     * @private
     * @param {*} value The value to clone.
     * @param {boolean} bitmask The bitmask flags.
     *  1 - Deep clone
     *  2 - Flatten inherited properties
     *  4 - Clone symbols
     * @param {Function} [customizer] The function to customize cloning.
     * @param {string} [key] The key of `value`.
     * @param {Object} [object] The parent object of `value`.
     * @param {Object} [stack] Tracks traversed objects and their clone counterparts.
     * @returns {*} Returns the cloned value.
     */function nU(e,t,r,i,a,o){var s,l=1&t,c=2&t,f=4&t;if(r&&(s=a?r(e,i,a,o):r(e)),s!==n)return s;if(!aj(e))return e;var p=aN(e);if(p){if(x=e.length,M=new e.constructor(x),x&&"string"==typeof e[0]&&eO.call(e,"index")&&(M.index=e.index,M.input=e.input),s=M,!l)return rB(e,s)}else{var x,M,k,F,z,B=iv(e),V=B==m||B==g;if(az(e))return rU(e,l);if(B==_||B==u||V&&!a){if(s=c||V?{}:i_(e),!l)return c?(k=(z=s)&&rV(e,od(e),z),rV(e,ig(e),k)):(F=nR(s,e),rV(e,im(e),F))}else{if(!eJ[B])return a?e:{};s=/**
     * Initializes an object clone based on its `toStringTag`.
     *
     * **Note:** This function only supports cloning values with tags of
     * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.
     *
     * @private
     * @param {Object} object The object to clone.
     * @param {string} tag The `toStringTag` of the object to clone.
     * @param {boolean} [isDeep] Specify a deep clone.
     * @returns {Object} Returns the initialized clone.
     */function(e,t,n){var r,i,a=e.constructor;switch(t){case T:return rN(e);case h:case d:return new a(+e);case A:return r=n?rN(e.buffer):e.buffer,new e.constructor(r,e.byteOffset,e.byteLength);case C:case P:case R:case L:case O:case I:case U:case N:case D:return rD(e,n);case v:return new a;case y:case E:return new a(e);case b:return(i=new e.constructor(e.source,es.exec(e))).lastIndex=e.lastIndex,i;case S:return new a;case w:return nh?eE(nh.call(e)):{}}}(e,B,l)}}// Check for circular references and return its corresponding clone.
o||(o=new nE);var H=o.get(e);if(H)return H;o.set(e,s),aZ(e)?e.forEach(function(n){s.add(nU(n,t,r,n,e,o))}):aq(e)&&e.forEach(function(n,i){s.set(i,nU(n,t,r,i,e,o))});var G=f?c?io:ia:c?od:oh,W=p?n:G(e);return tl(W||e,function(n,i){W&&(n=e[i=n]),// Recursively populate clone (susceptible to call stack limits).
nA(s,i,nU(n,t,r,i,e,o))}),s}/**
     * The base implementation of `_.conformsTo` which accepts `props` to check.
     *
     * @private
     * @param {Object} object The object to inspect.
     * @param {Object} source The object of property predicates to conform to.
     * @returns {boolean} Returns `true` if `object` conforms, else `false`.
     */function nN(e,t,r){var i=r.length;if(null==e)return!i;for(e=eE(e);i--;){var a=r[i],o=t[a],s=e[a];if(s===n&&!(a in e)||!o(s))return!1}return!0}/**
     * The base implementation of `_.delay` and `_.defer` which accepts `args`
     * to provide to `func`.
     *
     * @private
     * @param {Function} func The function to delay.
     * @param {number} wait The number of milliseconds to delay invocation.
     * @param {Array} args The arguments to provide to `func`.
     * @returns {number|Object} Returns the timer id or timeout object.
     */function nD(e,t,i){if("function"!=typeof e)throw new eT(r);return iO(function(){e.apply(n,i)},t)}/**
     * The base implementation of methods like `_.difference` without support
     * for excluding multiple arrays or iteratee shorthands.
     *
     * @private
     * @param {Array} array The array to inspect.
     * @param {Array} values The values to exclude.
     * @param {Function} [iteratee] The iteratee invoked per element.
     * @param {Function} [comparator] The comparator invoked per element.
     * @returns {Array} Returns the new array of filtered values.
     */function nk(e,t,n,r){var i=-1,a=tf,o=!0,s=e.length,l=[],u=t.length;if(!s)return l;n&&(t=td(t,tL(n))),r?(a=th,o=!1):t.length>=200&&(a=tI,o=!1,t=new nS(t));n:for(;++i<s;){var c=e[i],f=null==n?c:n(c);if(c=r||0!==c?c:0,o&&f==f){for(var h=u;h--;)if(t[h]===f)continue n;l.push(c)}else a(t,f,r)||l.push(c)}return l}/**
     * By default, the template delimiters used by lodash are like those in
     * embedded Ruby (ERB) as well as ES2015 template strings. Change the
     * following template settings to use alternative delimiters.
     *
     * @static
     * @memberOf _
     * @type {Object}
     */np.templateSettings={/**
       * Used to detect `data` property values to be HTML-escaped.
       *
       * @memberOf _.templateSettings
       * @type {RegExp}
       */escape:W,/**
       * Used to detect code to be evaluated.
       *
       * @memberOf _.templateSettings
       * @type {RegExp}
       */evaluate:j,/**
       * Used to detect `data` property values to inject.
       *
       * @memberOf _.templateSettings
       * @type {RegExp}
       */interpolate:X,/**
       * Used to reference the data object in the template text.
       *
       * @memberOf _.templateSettings
       * @type {string}
       */variable:"",/**
       * Used to import variables into the compiled template.
       *
       * @memberOf _.templateSettings
       * @type {Object}
       */imports:{/**
         * A reference to the `lodash` function.
         *
         * @memberOf _.templateSettings.imports
         * @type {Function}
         */_:np}},// Ensure wrappers are instances of `baseLodash`.
np.prototype=ng.prototype,np.prototype.constructor=np,nv.prototype=nm(ng.prototype),nv.prototype.constructor=nv,// Ensure `LazyWrapper` is an instance of `baseLodash`.
ny.prototype=nm(ng.prototype),ny.prototype.constructor=ny,// Add methods to `Hash`.
n_.prototype.clear=/**
     * Removes all key-value entries from the hash.
     *
     * @private
     * @name clear
     * @memberOf Hash
     */function(){this.__data__=nr?nr(null):{},this.size=0},n_.prototype.delete=/**
     * Removes `key` and its value from the hash.
     *
     * @private
     * @name delete
     * @memberOf Hash
     * @param {Object} hash The hash to modify.
     * @param {string} key The key of the value to remove.
     * @returns {boolean} Returns `true` if the entry was removed, else `false`.
     */function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},n_.prototype.get=/**
     * Gets the hash value for `key`.
     *
     * @private
     * @name get
     * @memberOf Hash
     * @param {string} key The key of the value to get.
     * @returns {*} Returns the entry value.
     */function(e){var t=this.__data__;if(nr){var r=t[e];return r===i?n:r}return eO.call(t,e)?t[e]:n},n_.prototype.has=/**
     * Checks if a hash value for `key` exists.
     *
     * @private
     * @name has
     * @memberOf Hash
     * @param {string} key The key of the entry to check.
     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
     */function(e){var t=this.__data__;return nr?t[e]!==n:eO.call(t,e)},n_.prototype.set=/**
     * Sets the hash `key` to `value`.
     *
     * @private
     * @name set
     * @memberOf Hash
     * @param {string} key The key of the value to set.
     * @param {*} value The value to set.
     * @returns {Object} Returns the hash instance.
     */function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=nr&&t===n?i:t,this},// Add methods to `ListCache`.
nx.prototype.clear=/**
     * Removes all key-value entries from the list cache.
     *
     * @private
     * @name clear
     * @memberOf ListCache
     */function(){this.__data__=[],this.size=0},nx.prototype.delete=/**
     * Removes `key` and its value from the list cache.
     *
     * @private
     * @name delete
     * @memberOf ListCache
     * @param {string} key The key of the value to remove.
     * @returns {boolean} Returns `true` if the entry was removed, else `false`.
     */function(e){var t=this.__data__,n=nC(t,e);return!(n<0)&&(n==t.length-1?t.pop():e2.call(t,n,1),--this.size,!0)},nx.prototype.get=/**
     * Gets the list cache value for `key`.
     *
     * @private
     * @name get
     * @memberOf ListCache
     * @param {string} key The key of the value to get.
     * @returns {*} Returns the entry value.
     */function(e){var t=this.__data__,r=nC(t,e);return r<0?n:t[r][1]},nx.prototype.has=/**
     * Checks if a list cache value for `key` exists.
     *
     * @private
     * @name has
     * @memberOf ListCache
     * @param {string} key The key of the entry to check.
     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
     */function(e){return nC(this.__data__,e)>-1},nx.prototype.set=/**
     * Sets the list cache `key` to `value`.
     *
     * @private
     * @name set
     * @memberOf ListCache
     * @param {string} key The key of the value to set.
     * @param {*} value The value to set.
     * @returns {Object} Returns the list cache instance.
     */function(e,t){var n=this.__data__,r=nC(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},// Add methods to `MapCache`.
nb.prototype.clear=/**
     * Removes all key-value entries from the map.
     *
     * @private
     * @name clear
     * @memberOf MapCache
     */function(){this.size=0,this.__data__={hash:new n_,map:new(t9||nx),string:new n_}},nb.prototype.delete=/**
     * Removes `key` and its value from the map.
     *
     * @private
     * @name delete
     * @memberOf MapCache
     * @param {string} key The key of the value to remove.
     * @returns {boolean} Returns `true` if the entry was removed, else `false`.
     */function(e){var t=ih(this,e).delete(e);return this.size-=t?1:0,t},nb.prototype.get=/**
     * Gets the map value for `key`.
     *
     * @private
     * @name get
     * @memberOf MapCache
     * @param {string} key The key of the value to get.
     * @returns {*} Returns the entry value.
     */function(e){return ih(this,e).get(e)},nb.prototype.has=/**
     * Checks if a map value for `key` exists.
     *
     * @private
     * @name has
     * @memberOf MapCache
     * @param {string} key The key of the entry to check.
     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
     */function(e){return ih(this,e).has(e)},nb.prototype.set=/**
     * Sets the map `key` to `value`.
     *
     * @private
     * @name set
     * @memberOf MapCache
     * @param {string} key The key of the value to set.
     * @param {*} value The value to set.
     * @returns {Object} Returns the map cache instance.
     */function(e,t){var n=ih(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},// Add methods to `SetCache`.
nS.prototype.add=nS.prototype.push=/**
     * Adds `value` to the array cache.
     *
     * @private
     * @name add
     * @memberOf SetCache
     * @alias push
     * @param {*} value The value to cache.
     * @returns {Object} Returns the cache instance.
     */function(e){return this.__data__.set(e,i),this},nS.prototype.has=/**
     * Checks if `value` is in the array cache.
     *
     * @private
     * @name has
     * @memberOf SetCache
     * @param {*} value The value to search for.
     * @returns {number} Returns `true` if `value` is found, else `false`.
     */function(e){return this.__data__.has(e)},// Add methods to `Stack`.
nE.prototype.clear=/**
     * Removes all key-value entries from the stack.
     *
     * @private
     * @name clear
     * @memberOf Stack
     */function(){this.__data__=new nx,this.size=0},nE.prototype.delete=/**
     * Removes `key` and its value from the stack.
     *
     * @private
     * @name delete
     * @memberOf Stack
     * @param {string} key The key of the value to remove.
     * @returns {boolean} Returns `true` if the entry was removed, else `false`.
     */function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},nE.prototype.get=/**
     * Gets the stack value for `key`.
     *
     * @private
     * @name get
     * @memberOf Stack
     * @param {string} key The key of the value to get.
     * @returns {*} Returns the entry value.
     */function(e){return this.__data__.get(e)},nE.prototype.has=/**
     * Checks if a stack value for `key` exists.
     *
     * @private
     * @name has
     * @memberOf Stack
     * @param {string} key The key of the entry to check.
     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
     */function(e){return this.__data__.has(e)},nE.prototype.set=/**
     * Sets the stack `key` to `value`.
     *
     * @private
     * @name set
     * @memberOf Stack
     * @param {string} key The key of the value to set.
     * @param {*} value The value to set.
     * @returns {Object} Returns the stack cache instance.
     */function(e,t){var n=this.__data__;if(n instanceof nx){var r=n.__data__;if(!t9||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new nb(r)}return n.set(e,t),this.size=n.size,this};/**
     * The base implementation of `_.forEach` without support for iteratee shorthands.
     *
     * @private
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Array|Object} Returns `collection`.
     */var nF=rW(nX),nz=rW(nq,!0);/**
     * The base implementation of `_.every` without support for iteratee shorthands.
     *
     * @private
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} predicate The function invoked per iteration.
     * @returns {boolean} Returns `true` if all elements pass the predicate check,
     *  else `false`
     */function nB(e,t){var n=!0;return nF(e,function(e,r,i){return n=!!t(e,r,i)}),n}/**
     * The base implementation of methods like `_.max` and `_.min` which accepts a
     * `comparator` to determine the extremum value.
     *
     * @private
     * @param {Array} array The array to iterate over.
     * @param {Function} iteratee The iteratee invoked per iteration.
     * @param {Function} comparator The comparator used to compare values.
     * @returns {*} Returns the extremum value.
     */function nV(e,t,r){for(var i=-1,a=e.length;++i<a;){var o=e[i],s=t(o);if(null!=s&&(l===n?s==s&&!aQ(s):r(s,l)))var l=s,u=o}return u}/**
     * The base implementation of `_.filter` without support for iteratee shorthands.
     *
     * @private
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} predicate The function invoked per iteration.
     * @returns {Array} Returns the new filtered array.
     */function nH(e,t){var n=[];return nF(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}/**
     * The base implementation of `_.flatten` with support for restricting flattening.
     *
     * @private
     * @param {Array} array The array to flatten.
     * @param {number} depth The maximum recursion depth.
     * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.
     * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.
     * @param {Array} [result=[]] The initial result value.
     * @returns {Array} Returns the new flattened array.
     */function nG(e,t,n,r,i){var a=-1,o=e.length;for(n||(n=ix),i||(i=[]);++a<o;){var s=e[a];t>0&&n(s)?t>1?nG(s,t-1,n,r,i):tp(i,s):r||(i[i.length]=s)}return i}/**
     * The base implementation of `baseForOwn` which iterates over `object`
     * properties returned by `keysFunc` and invokes `iteratee` for each property.
     * Iteratee functions may exit iteration early by explicitly returning `false`.
     *
     * @private
     * @param {Object} object The object to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @param {Function} keysFunc The function to get the keys of `object`.
     * @returns {Object} Returns `object`.
     */var nW=rj(),nj=rj(!0);/**
     * The base implementation of `_.forOwn` without support for iteratee shorthands.
     *
     * @private
     * @param {Object} object The object to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Object} Returns `object`.
     */function nX(e,t){return e&&nW(e,t,oh)}/**
     * The base implementation of `_.forOwnRight` without support for iteratee shorthands.
     *
     * @private
     * @param {Object} object The object to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Object} Returns `object`.
     */function nq(e,t){return e&&nj(e,t,oh)}/**
     * The base implementation of `_.functions` which creates an array of
     * `object` function property names filtered from `props`.
     *
     * @private
     * @param {Object} object The object to inspect.
     * @param {Array} props The property names to filter.
     * @returns {Array} Returns the function names.
     */function nY(e,t){return tc(t,function(t){return aH(e[t])})}/**
     * The base implementation of `_.get` without support for default values.
     *
     * @private
     * @param {Object} object The object to query.
     * @param {Array|string} path The path of the property to get.
     * @returns {*} Returns the resolved value.
     */function n$(e,t){t=rL(t,e);for(var r=0,i=t.length;null!=e&&r<i;)e=e[iF(t[r++])];return r&&r==i?e:n}/**
     * The base implementation of `getAllKeys` and `getAllKeysIn` which uses
     * `keysFunc` and `symbolsFunc` to get the enumerable property names and
     * symbols of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @param {Function} keysFunc The function to get the keys of `object`.
     * @param {Function} symbolsFunc The function to get the symbols of `object`.
     * @returns {Array} Returns the array of property names and symbols.
     */function nK(e,t,n){var r=t(e);return aN(e)?r:tp(r,n(e))}/**
     * The base implementation of `getTag` without fallbacks for buggy environments.
     *
     * @private
     * @param {*} value The value to query.
     * @returns {string} Returns the `toStringTag`.
     */function nZ(e){return null==e?e===n?"[object Undefined]":"[object Null]":e6&&e6 in eE(e)?/**
     * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.
     *
     * @private
     * @param {*} value The value to query.
     * @returns {string} Returns the raw `toStringTag`.
     */function(e){var t=eO.call(e,e6),r=e[e6];try{e[e6]=n;var i=!0}catch(e){}var a=eN.call(e);return i&&(t?e[e6]=r:delete e[e6]),a}(e):eN.call(e)}/**
     * The base implementation of `_.gt` which doesn't coerce arguments.
     *
     * @private
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @returns {boolean} Returns `true` if `value` is greater than `other`,
     *  else `false`.
     */function nJ(e,t){return e>t}/**
     * The base implementation of `_.has` without support for deep paths.
     *
     * @private
     * @param {Object} [object] The object to query.
     * @param {Array|string} key The key to check.
     * @returns {boolean} Returns `true` if `key` exists, else `false`.
     */function nQ(e,t){return null!=e&&eO.call(e,t)}/**
     * The base implementation of `_.hasIn` without support for deep paths.
     *
     * @private
     * @param {Object} [object] The object to query.
     * @param {Array|string} key The key to check.
     * @returns {boolean} Returns `true` if `key` exists, else `false`.
     */function n0(e,t){return null!=e&&t in eE(e)}/**
     * The base implementation of methods like `_.intersection`, without support
     * for iteratee shorthands, that accepts an array of arrays to inspect.
     *
     * @private
     * @param {Array} arrays The arrays to inspect.
     * @param {Function} [iteratee] The iteratee invoked per element.
     * @param {Function} [comparator] The comparator invoked per element.
     * @returns {Array} Returns the new array of shared values.
     */function n1(e,t,r){for(var i=r?th:tf,a=e[0].length,o=e.length,s=o,l=ey(o),u=1/0,c=[];s--;){var f=e[s];s&&t&&(f=td(f,tL(t))),u=t3(f.length,u),l[s]=!r&&(t||a>=120&&f.length>=120)?new nS(s&&f):n}f=e[0];var h=-1,d=l[0];n:for(;++h<a&&c.length<u;){var p=f[h],m=t?t(p):p;if(p=r||0!==p?p:0,!(d?tI(d,m):i(c,m,r))){for(s=o;--s;){var g=l[s];if(!(g?tI(g,m):i(e[s],m,r)))continue n}d&&d.push(m),c.push(p)}}return c}/**
     * The base implementation of `_.invoke` without support for individual
     * method arguments.
     *
     * @private
     * @param {Object} object The object to query.
     * @param {Array|string} path The path of the method to invoke.
     * @param {Array} args The arguments to invoke the method with.
     * @returns {*} Returns the result of the invoked method.
     */function n2(e,t,r){t=rL(t,e);var i=null==(e=iP(e,t))?e:e[iF(iZ(t))];return null==i?n:to(i,e,r)}/**
     * The base implementation of `_.isArguments`.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is an `arguments` object,
     */function n3(e){return aX(e)&&nZ(e)==u}/**
     * The base implementation of `_.isEqual` which supports partial comparisons
     * and tracks traversed objects.
     *
     * @private
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @param {boolean} bitmask The bitmask flags.
     *  1 - Unordered comparison
     *  2 - Partial comparison
     * @param {Function} [customizer] The function to customize comparisons.
     * @param {Object} [stack] Tracks traversed `value` and `other` objects.
     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
     */function n4(e,t,r,i,a){return e===t||(null!=e&&null!=t&&(aX(e)||aX(t))?/**
     * A specialized version of `baseIsEqual` for arrays and objects which performs
     * deep comparisons and tracks traversed objects enabling objects with circular
     * references to be compared.
     *
     * @private
     * @param {Object} object The object to compare.
     * @param {Object} other The other object to compare.
     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.
     * @param {Function} customizer The function to customize comparisons.
     * @param {Function} equalFunc The function to determine equivalents of values.
     * @param {Object} [stack] Tracks traversed `object` and `other` objects.
     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
     */function(e,t,r,i,a,o){var s=aN(e),l=aN(t),c=s?f:iv(e),m=l?f:iv(t);c=c==u?_:c,m=m==u?_:m;var g=c==_,x=m==_,M=c==m;if(M&&az(e)){if(!az(t))return!1;s=!0,g=!1}if(M&&!g)return o||(o=new nE),s||a0(e)?ir(e,t,r,i,a,o):/**
     * A specialized version of `baseIsEqualDeep` for comparing objects of
     * the same `toStringTag`.
     *
     * **Note:** This function only supports comparing values with tags of
     * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.
     *
     * @private
     * @param {Object} object The object to compare.
     * @param {Object} other The other object to compare.
     * @param {string} tag The `toStringTag` of the objects to compare.
     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.
     * @param {Function} customizer The function to customize comparisons.
     * @param {Function} equalFunc The function to determine equivalents of values.
     * @param {Object} stack Tracks traversed `object` and `other` objects.
     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
     */function(e,t,n,r,i,a,o){switch(n){case A:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case T:if(e.byteLength!=t.byteLength||!a(new eV(e),new eV(t)))break;return!0;case h:case d:case y:// Coerce booleans to `1` or `0` and dates to milliseconds.
// Invalid dates are coerced to `NaN`.
return aL(+e,+t);case p:return e.name==t.name&&e.message==t.message;case b:case E:// Coerce regexes to strings and treat strings, primitives and objects,
// as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring
// for more details.
return e==t+"";case v:var s=tB;case S:var l=1&r;if(s||(s=tG),e.size!=t.size&&!l)break;// Assume cyclic values are equal.
var u=o.get(e);if(u)return u==t;r|=2,// Recursively compare objects (susceptible to call stack limits).
o.set(e,t);var c=ir(s(e),s(t),r,i,a,o);return o.delete(e),c;case w:if(nh)return nh.call(e)==nh.call(t)}return!1}(e,t,c,r,i,a,o);if(!(1&r)){var C=g&&eO.call(e,"__wrapped__"),P=x&&eO.call(t,"__wrapped__");if(C||P){var R=C?e.value():e,L=P?t.value():t;return o||(o=new nE),a(R,L,r,i,o)}}return!!M&&(o||(o=new nE),/**
     * A specialized version of `baseIsEqualDeep` for objects with support for
     * partial deep comparisons.
     *
     * @private
     * @param {Object} object The object to compare.
     * @param {Object} other The other object to compare.
     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.
     * @param {Function} customizer The function to customize comparisons.
     * @param {Function} equalFunc The function to determine equivalents of values.
     * @param {Object} stack Tracks traversed `object` and `other` objects.
     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
     */function(e,t,r,i,a,o){var s=1&r,l=ia(e),u=l.length;if(u!=ia(t).length&&!s)return!1;for(var c=u;c--;){var f=l[c];if(!(s?f in t:eO.call(t,f)))return!1}// Check that cyclic values are equal.
var h=o.get(e),d=o.get(t);if(h&&d)return h==t&&d==e;var p=!0;o.set(e,t),o.set(t,e);for(var m=s;++c<u;){var g=e[f=l[c]],v=t[f];if(i)var y=s?i(v,g,f,t,e,o):i(g,v,f,e,t,o);// Recursively compare objects (susceptible to call stack limits).
if(!(y===n?g===v||a(g,v,r,i,o):y)){p=!1;break}m||(m="constructor"==f)}if(p&&!m){var _=e.constructor,x=t.constructor;_!=x&&"constructor"in e&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x)&&(p=!1)}return o.delete(e),o.delete(t),p}(e,t,r,i,a,o))}(e,t,r,i,n4,a):e!=e&&t!=t)}/**
     * The base implementation of `_.isMatch` without support for iteratee shorthands.
     *
     * @private
     * @param {Object} object The object to inspect.
     * @param {Object} source The object of property values to match.
     * @param {Array} matchData The property names, values, and compare flags to match.
     * @param {Function} [customizer] The function to customize comparisons.
     * @returns {boolean} Returns `true` if `object` is a match, else `false`.
     */function n5(e,t,r,i){var a=r.length,o=a,s=!i;if(null==e)return!o;for(e=eE(e);a--;){var l=r[a];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<o;){var u=(l=r[a])[0],c=e[u],f=l[1];if(s&&l[2]){if(c===n&&!(u in e))return!1}else{var h=new nE;if(i)var d=i(c,f,u,e,t,h);if(!(d===n?n4(f,c,3,i,h):d))return!1}}return!0}/**
     * The base implementation of `_.isNative` without bad shim checks.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a native function,
     *  else `false`.
     */function n6(e){return!(!aj(e)||eU&&eU in e)&&(aH(e)?eF:ec).test(iz(e))}/**
     * The base implementation of `_.iteratee`.
     *
     * @private
     * @param {*} [value=_.identity] The value to convert to an iteratee.
     * @returns {Function} Returns the iteratee.
     */function n8(e){return(// Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.
// See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.
"function"==typeof e?e:null==e?oF:"object"==typeof e?aN(e)?rn(e[0],e[1]):rt(e):oq(e))}/**
     * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property names.
     */function n7(e){if(!iT(e))return t1(e);var t=[];for(var n in eE(e))eO.call(e,n)&&"constructor"!=n&&t.push(n);return t}/**
     * The base implementation of `_.lt` which doesn't coerce arguments.
     *
     * @private
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @returns {boolean} Returns `true` if `value` is less than `other`,
     *  else `false`.
     */function n9(e,t){return e<t}/**
     * The base implementation of `_.map` without support for iteratee shorthands.
     *
     * @private
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} iteratee The function invoked per iteration.
     * @returns {Array} Returns the new mapped array.
     */function re(e,t){var n=-1,r=ak(e)?ey(e.length):[];return nF(e,function(e,i,a){r[++n]=t(e,i,a)}),r}/**
     * The base implementation of `_.matches` which doesn't clone `source`.
     *
     * @private
     * @param {Object} source The object of property values to match.
     * @returns {Function} Returns the new spec function.
     */function rt(e){var t=id(e);return 1==t.length&&t[0][2]?iA(t[0][0],t[0][1]):function(n){return n===e||n5(n,e,t)}}/**
     * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.
     *
     * @private
     * @param {string} path The path of the property to get.
     * @param {*} srcValue The value to match.
     * @returns {Function} Returns the new spec function.
     */function rn(e,t){var r;return iE(e)&&(r=t)==r&&!aj(r)?iA(iF(e),t):function(r){var i=os(r,e);return i===n&&i===t?ol(r,e):n4(t,i,3)}}/**
     * The base implementation of `_.merge` without support for multiple sources.
     *
     * @private
     * @param {Object} object The destination object.
     * @param {Object} source The source object.
     * @param {number} srcIndex The index of `source`.
     * @param {Function} [customizer] The function to customize merged values.
     * @param {Object} [stack] Tracks traversed source values and their merged
     *  counterparts.
     */function rr(e,t,r,i,a){e!==t&&nW(t,function(o,s){if(a||(a=new nE),aj(o))/**
     * A specialized version of `baseMerge` for arrays and objects which performs
     * deep merges and tracks traversed objects enabling objects with circular
     * references to be merged.
     *
     * @private
     * @param {Object} object The destination object.
     * @param {Object} source The source object.
     * @param {string} key The key of the value to merge.
     * @param {number} srcIndex The index of `source`.
     * @param {Function} mergeFunc The function to merge values.
     * @param {Function} [customizer] The function to customize assigned values.
     * @param {Object} [stack] Tracks traversed source values and their merged
     *  counterparts.
     */(function(e,t,r,i,a,o,s){var l=iR(e,r),u=iR(t,r),c=s.get(u);if(c){nT(e,r,c);return}var f=o?o(l,u,r+"",e,t,s):n,h=f===n;if(h){var d=aN(u),p=!d&&az(u),m=!d&&!p&&a0(u);f=u,d||p||m?aN(l)?f=l:aF(l)?f=rB(l):p?(h=!1,f=rU(u,!0)):m?(h=!1,f=rD(u,!0)):f=[]:a$(u)||aU(u)?(f=l,aU(l)?f=a7(l):(!aj(l)||aH(l))&&(f=i_(u))):h=!1}h&&(// Recursively merge objects and arrays (susceptible to call stack limits).
s.set(u,f),a(f,u,i,o,s),s.delete(u)),nT(e,r,f)})(e,t,s,r,rr,i,a);else{var l=i?i(iR(e,s),o,s+"",e,t,a):n;l===n&&(l=o),nT(e,s,l)}},od)}/**
     * The base implementation of `_.nth` which doesn't coerce arguments.
     *
     * @private
     * @param {Array} array The array to query.
     * @param {number} n The index of the element to return.
     * @returns {*} Returns the nth element of `array`.
     */function ri(e,t){var r=e.length;if(r)return ib(t+=t<0?r:0,r)?e[t]:n}/**
     * The base implementation of `_.orderBy` without param guards.
     *
     * @private
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.
     * @param {string[]} orders The sort orders of `iteratees`.
     * @returns {Array} Returns the new sorted array.
     */function ra(e,t,n){t=t.length?td(t,function(e){return aN(e)?function(t){return n$(t,1===e.length?e[0]:e)}:e}):[oF];var r=-1;return t=td(t,tL(ic())),/**
   * The base implementation of `_.sortBy` which uses `comparer` to define the
   * sort order of `array` and replaces criteria objects with their corresponding
   * values.
   *
   * @private
   * @param {Array} array The array to sort.
   * @param {Function} comparer The function to define sort order.
   * @returns {Array} Returns `array`.
   */function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(re(e,function(e,n,i){return{criteria:td(t,function(t){return t(e)}),index:++r,value:e}}),function(e,t){return(/**
     * Used by `_.orderBy` to compare multiple properties of a value to another
     * and stable sort them.
     *
     * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,
     * specify an order of "desc" for descending or "asc" for ascending sort order
     * of corresponding values.
     *
     * @private
     * @param {Object} object The object to compare.
     * @param {Object} other The other object to compare.
     * @param {boolean[]|string[]} orders The order to sort by for each property.
     * @returns {number} Returns the sort order indicator for `object`.
     */function(e,t,n){for(var r=-1,i=e.criteria,a=t.criteria,o=i.length,s=n.length;++r<o;){var l=rk(i[r],a[r]);if(l){if(r>=s)return l;return l*("desc"==n[r]?-1:1)}}// Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications
// that causes it, under certain circumstances, to provide the same value for
// `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247
// for more details.
//
// This also ensures a stable sort in V8 and other engines.
// See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.
return e.index-t.index}(e,t,n))})}/**
     * The base implementation of  `_.pickBy` without support for iteratee shorthands.
     *
     * @private
     * @param {Object} object The source object.
     * @param {string[]} paths The property paths to pick.
     * @param {Function} predicate The function invoked per property.
     * @returns {Object} Returns the new object.
     */function ro(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],s=n$(e,o);n(s,o)&&rh(a,rL(o,e),s)}return a}/**
     * The base implementation of `_.pullAllBy` without support for iteratee
     * shorthands.
     *
     * @private
     * @param {Array} array The array to modify.
     * @param {Array} values The values to remove.
     * @param {Function} [iteratee] The iteratee invoked per element.
     * @param {Function} [comparator] The comparator invoked per element.
     * @returns {Array} Returns `array`.
     */function rs(e,t,n,r){var i=r?tS:tb,a=-1,o=t.length,s=e;for(e===t&&(t=rB(t)),n&&(s=td(e,tL(n)));++a<o;)for(var l=0,u=t[a],c=n?n(u):u;(l=i(s,c,l,r))>-1;)s!==e&&e2.call(s,l,1),e2.call(e,l,1);return e}/**
     * The base implementation of `_.pullAt` without support for individual
     * indexes or capturing the removed elements.
     *
     * @private
     * @param {Array} array The array to modify.
     * @param {number[]} indexes The indexes of elements to remove.
     * @returns {Array} Returns `array`.
     */function rl(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==a){var a=i;ib(i)?e2.call(e,i,1):rE(e,i)}}return e}/**
     * The base implementation of `_.random` without support for returning
     * floating-point numbers.
     *
     * @private
     * @param {number} lower The lower bound.
     * @param {number} upper The upper bound.
     * @returns {number} Returns the random number.
     */function ru(e,t){return e+tK(t6()*(t-e+1))}/**
     * The base implementation of `_.repeat` which doesn't coerce arguments.
     *
     * @private
     * @param {string} string The string to repeat.
     * @param {number} n The number of times to repeat the string.
     * @returns {string} Returns the repeated string.
     */function rc(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;// Leverage the exponentiation by squaring algorithm for a faster repeat.
// See https://en.wikipedia.org/wiki/Exponentiation_by_squaring for more details.
do t%2&&(n+=e),(t=tK(t/2))&&(e+=e);while(t)return n}/**
     * The base implementation of `_.rest` which doesn't validate or coerce arguments.
     *
     * @private
     * @param {Function} func The function to apply a rest parameter to.
     * @param {number} [start=func.length-1] The start position of the rest parameter.
     * @returns {Function} Returns the new function.
     */function rf(e,t){return iI(iC(e,t,oF),e+"")}/**
     * The base implementation of `_.set`.
     *
     * @private
     * @param {Object} object The object to modify.
     * @param {Array|string} path The path of the property to set.
     * @param {*} value The value to set.
     * @param {Function} [customizer] The function to customize path creation.
     * @returns {Object} Returns `object`.
     */function rh(e,t,r,i){if(!aj(e))return e;t=rL(t,e);for(var a=-1,o=t.length,s=o-1,l=e;null!=l&&++a<o;){var u=iF(t[a]),c=r;if("__proto__"===u||"constructor"===u||"prototype"===u)break;if(a!=s){var f=l[u];(c=i?i(f,u,l):n)===n&&(c=aj(f)?f:ib(t[a+1])?[]:{})}nA(l,u,c),l=l[u]}return e}/**
     * The base implementation of `setData` without support for hot loop shorting.
     *
     * @private
     * @param {Function} func The function to associate metadata with.
     * @param {*} data The metadata.
     * @returns {Function} Returns `func`.
     */var rd=ni?function(e,t){return ni.set(e,t),e}:oF,rp=e7?function(e,t){return e7(e,"toString",{configurable:!0,enumerable:!1,value:oN(t),writable:!0})}:oF;/**
     * The base implementation of `_.slice` without an iteratee call guard.
     *
     * @private
     * @param {Array} array The array to slice.
     * @param {number} [start=0] The start position.
     * @param {number} [end=array.length] The end position.
     * @returns {Array} Returns the slice of `array`.
     */function rm(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=ey(i);++r<i;)a[r]=e[r+t];return a}/**
     * The base implementation of `_.some` without support for iteratee shorthands.
     *
     * @private
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} predicate The function invoked per iteration.
     * @returns {boolean} Returns `true` if any element passes the predicate check,
     *  else `false`.
     */function rg(e,t){var n;return nF(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}/**
     * The base implementation of `_.sortedIndex` and `_.sortedLastIndex` which
     * performs a binary search of `array` to determine the index at which `value`
     * should be inserted into `array` in order to maintain its sort order.
     *
     * @private
     * @param {Array} array The sorted array to inspect.
     * @param {*} value The value to evaluate.
     * @param {boolean} [retHighest] Specify returning the highest qualified index.
     * @returns {number} Returns the index at which `value` should be inserted
     *  into `array`.
     */function rv(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var a=r+i>>>1,o=e[a];null!==o&&!aQ(o)&&(n?o<=t:o<t)?r=a+1:i=a}return i}return ry(e,t,oF,n)}/**
     * The base implementation of `_.sortedIndexBy` and `_.sortedLastIndexBy`
     * which invokes `iteratee` for `value` and each element of `array` to compute
     * their sort ranking. The iteratee is invoked with one argument; (value).
     *
     * @private
     * @param {Array} array The sorted array to inspect.
     * @param {*} value The value to evaluate.
     * @param {Function} iteratee The iteratee invoked per element.
     * @param {boolean} [retHighest] Specify returning the highest qualified index.
     * @returns {number} Returns the index at which `value` should be inserted
     *  into `array`.
     */function ry(e,t,r,i){var a=0,o=null==e?0:e.length;if(0===o)return 0;for(var s=(t=r(t))!=t,l=null===t,u=aQ(t),c=t===n;a<o;){var f=tK((a+o)/2),h=r(e[f]),d=h!==n,p=null===h,m=h==h,g=aQ(h);if(s)var v=i||m;else v=c?m&&(i||d):l?m&&d&&(i||!p):u?m&&d&&!p&&(i||!g):!p&&!g&&(i?h<=t:h<t);v?a=f+1:o=f}return t3(o,4294967294)}/**
     * The base implementation of `_.sortedUniq` and `_.sortedUniqBy` without
     * support for iteratee shorthands.
     *
     * @private
     * @param {Array} array The array to inspect.
     * @param {Function} [iteratee] The iteratee invoked per element.
     * @returns {Array} Returns the new duplicate free array.
     */function r_(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n],s=t?t(o):o;if(!n||!aL(s,l)){var l=s;a[i++]=0===o?0:o}}return a}/**
     * The base implementation of `_.toNumber` which doesn't ensure correct
     * conversions of binary, hexadecimal, or octal string values.
     *
     * @private
     * @param {*} value The value to process.
     * @returns {number} Returns the number.
     */function rx(e){return"number"==typeof e?e:aQ(e)?s:+e}/**
     * The base implementation of `_.toString` which doesn't convert nullish
     * values to empty strings.
     *
     * @private
     * @param {*} value The value to process.
     * @returns {string} Returns the string.
     */function rb(e){// Exit early for strings to avoid a performance hit in some environments.
if("string"==typeof e)return e;if(aN(e))return td(e,rb)+"";if(aQ(e))return nd?nd.call(e):"";var t=e+"";return"0"==t&&1/e==-o?"-0":t}/**
     * The base implementation of `_.uniqBy` without support for iteratee shorthands.
     *
     * @private
     * @param {Array} array The array to inspect.
     * @param {Function} [iteratee] The iteratee invoked per element.
     * @param {Function} [comparator] The comparator invoked per element.
     * @returns {Array} Returns the new duplicate free array.
     */function rS(e,t,n){var r=-1,i=tf,a=e.length,o=!0,s=[],l=s;if(n)o=!1,i=th;else if(a>=200){var u=t?null:r6(e);if(u)return tG(u);o=!1,i=tI,l=new nS}else l=t?[]:s;n:for(;++r<a;){var c=e[r],f=t?t(c):c;if(c=n||0!==c?c:0,o&&f==f){for(var h=l.length;h--;)if(l[h]===f)continue n;t&&l.push(f),s.push(c)}else i(l,f,n)||(l!==s&&l.push(f),s.push(c))}return s}/**
     * The base implementation of `_.unset`.
     *
     * @private
     * @param {Object} object The object to modify.
     * @param {Array|string} path The property path to unset.
     * @returns {boolean} Returns `true` if the property is deleted, else `false`.
     */function rE(e,t){return t=rL(t,e),null==(e=iP(e,t))||delete e[iF(iZ(t))]}/**
     * The base implementation of `_.update`.
     *
     * @private
     * @param {Object} object The object to modify.
     * @param {Array|string} path The path of the property to update.
     * @param {Function} updater The function to produce the updated value.
     * @param {Function} [customizer] The function to customize path creation.
     * @returns {Object} Returns `object`.
     */function rw(e,t,n,r){return rh(e,t,n(n$(e,t)),r)}/**
     * The base implementation of methods like `_.dropWhile` and `_.takeWhile`
     * without support for iteratee shorthands.
     *
     * @private
     * @param {Array} array The array to query.
     * @param {Function} predicate The function invoked per iteration.
     * @param {boolean} [isDrop] Specify dropping elements instead of taking them.
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {Array} Returns the slice of `array`.
     */function rM(e,t,n,r){for(var i=e.length,a=r?i:-1;(r?a--:++a<i)&&t(e[a],a,e););return n?rm(e,r?0:a,r?a+1:i):rm(e,r?a+1:0,r?i:a)}/**
     * The base implementation of `wrapperValue` which returns the result of
     * performing a sequence of actions on the unwrapped `value`, where each
     * successive action is supplied the return value of the previous.
     *
     * @private
     * @param {*} value The unwrapped value.
     * @param {Array} actions Actions to perform to resolve the unwrapped value.
     * @returns {*} Returns the resolved value.
     */function rT(e,t){var n=e;return n instanceof ny&&(n=n.value()),tm(t,function(e,t){return t.func.apply(t.thisArg,tp([e],t.args))},n)}/**
     * The base implementation of methods like `_.xor`, without support for
     * iteratee shorthands, that accepts an array of arrays to inspect.
     *
     * @private
     * @param {Array} arrays The arrays to inspect.
     * @param {Function} [iteratee] The iteratee invoked per element.
     * @param {Function} [comparator] The comparator invoked per element.
     * @returns {Array} Returns the new array of values.
     */function rA(e,t,n){var r=e.length;if(r<2)return r?rS(e[0]):[];for(var i=-1,a=ey(r);++i<r;)for(var o=e[i],s=-1;++s<r;)s!=i&&(a[i]=nk(a[i]||o,e[s],t,n));return rS(nG(a,1),t,n)}/**
     * This base implementation of `_.zipObject` which assigns values using `assignFunc`.
     *
     * @private
     * @param {Array} props The property identifiers.
     * @param {Array} values The property values.
     * @param {Function} assignFunc The function to assign values.
     * @returns {Object} Returns the new object.
     */function rC(e,t,r){for(var i=-1,a=e.length,o=t.length,s={};++i<a;){var l=i<o?t[i]:n;r(s,e[i],l)}return s}/**
     * Casts `value` to an empty array if it's not an array like object.
     *
     * @private
     * @param {*} value The value to inspect.
     * @returns {Array|Object} Returns the cast array-like object.
     */function rP(e){return aF(e)?e:[]}/**
     * Casts `value` to `identity` if it's not a function.
     *
     * @private
     * @param {*} value The value to inspect.
     * @returns {Function} Returns cast function.
     */function rR(e){return"function"==typeof e?e:oF}/**
     * Casts `value` to a path array if it's not one.
     *
     * @private
     * @param {*} value The value to inspect.
     * @param {Object} [object] The object to query keys on.
     * @returns {Array} Returns the cast property path array.
     */function rL(e,t){return aN(e)?e:iE(e,t)?[e]:ik(a9(e))}/**
     * Casts `array` to a slice if it's needed.
     *
     * @private
     * @param {Array} array The array to inspect.
     * @param {number} start The start position.
     * @param {number} [end=array.length] The end position.
     * @returns {Array} Returns the cast slice.
     */function rO(e,t,r){var i=e.length;return r=r===n?i:r,!t&&r>=i?e:rm(e,t,r)}/**
     * A simple wrapper around the global [`clearTimeout`](https://mdn.io/clearTimeout).
     *
     * @private
     * @param {number|Object} id The timer id or timeout object of the timer to clear.
     */var rI=e9||function(e){return e4.clearTimeout(e)};/**
     * Creates a clone of  `buffer`.
     *
     * @private
     * @param {Buffer} buffer The buffer to clone.
     * @param {boolean} [isDeep] Specify a deep clone.
     * @returns {Buffer} Returns the cloned buffer.
     */function rU(e,t){if(t)return e.slice();var n=e.length,r=eH?eH(n):new e.constructor(n);return e.copy(r),r}/**
     * Creates a clone of `arrayBuffer`.
     *
     * @private
     * @param {ArrayBuffer} arrayBuffer The array buffer to clone.
     * @returns {ArrayBuffer} Returns the cloned array buffer.
     */function rN(e){var t=new e.constructor(e.byteLength);return new eV(t).set(new eV(e)),t}/**
     * Creates a clone of `typedArray`.
     *
     * @private
     * @param {Object} typedArray The typed array to clone.
     * @param {boolean} [isDeep] Specify a deep clone.
     * @returns {Object} Returns the cloned typed array.
     */function rD(e,t){var n=t?rN(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}/**
     * Compares values to sort them in ascending order.
     *
     * @private
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @returns {number} Returns the sort order indicator for `value`.
     */function rk(e,t){if(e!==t){var r=e!==n,i=null===e,a=e==e,o=aQ(e),s=t!==n,l=null===t,u=t==t,c=aQ(t);if(!l&&!c&&!o&&e>t||o&&s&&u&&!l&&!c||i&&s&&u||!r&&u||!a)return 1;if(!i&&!o&&!c&&e<t||c&&r&&a&&!i&&!o||l&&r&&a||!s&&a||!u)return -1}return 0}/**
     * Creates an array that is the composition of partially applied arguments,
     * placeholders, and provided arguments into a single array of arguments.
     *
     * @private
     * @param {Array} args The provided arguments.
     * @param {Array} partials The arguments to prepend to those provided.
     * @param {Array} holders The `partials` placeholder indexes.
     * @params {boolean} [isCurried] Specify composing for a curried function.
     * @returns {Array} Returns the new array of composed arguments.
     */function rF(e,t,n,r){for(var i=-1,a=e.length,o=n.length,s=-1,l=t.length,u=t2(a-o,0),c=ey(l+u),f=!r;++s<l;)c[s]=t[s];for(;++i<o;)(f||i<a)&&(c[n[i]]=e[i]);for(;u--;)c[s++]=e[i++];return c}/**
     * This function is like `composeArgs` except that the arguments composition
     * is tailored for `_.partialRight`.
     *
     * @private
     * @param {Array} args The provided arguments.
     * @param {Array} partials The arguments to append to those provided.
     * @param {Array} holders The `partials` placeholder indexes.
     * @params {boolean} [isCurried] Specify composing for a curried function.
     * @returns {Array} Returns the new array of composed arguments.
     */function rz(e,t,n,r){for(var i=-1,a=e.length,o=-1,s=n.length,l=-1,u=t.length,c=t2(a-s,0),f=ey(c+u),h=!r;++i<c;)f[i]=e[i];for(var d=i;++l<u;)f[d+l]=t[l];for(;++o<s;)(h||i<a)&&(f[d+n[o]]=e[i++]);return f}/**
     * Copies the values of `source` to `array`.
     *
     * @private
     * @param {Array} source The array to copy values from.
     * @param {Array} [array=[]] The array to copy values to.
     * @returns {Array} Returns `array`.
     */function rB(e,t){var n=-1,r=e.length;for(t||(t=ey(r));++n<r;)t[n]=e[n];return t}/**
     * Copies properties of `source` to `object`.
     *
     * @private
     * @param {Object} source The object to copy properties from.
     * @param {Array} props The property identifiers to copy.
     * @param {Object} [object={}] The object to copy properties to.
     * @param {Function} [customizer] The function to customize copied values.
     * @returns {Object} Returns `object`.
     */function rV(e,t,r,i){var a=!r;r||(r={});for(var o=-1,s=t.length;++o<s;){var l=t[o],u=i?i(r[l],e[l],l,r,e):n;u===n&&(u=e[l]),a?nL(r,l,u):nA(r,l,u)}return r}/**
     * Creates a function like `_.groupBy`.
     *
     * @private
     * @param {Function} setter The function to set accumulator values.
     * @param {Function} [initializer] The accumulator object initializer.
     * @returns {Function} Returns the new aggregator function.
     */function rH(e,t){return function(n,r){var i=aN(n)?ts:nP,a=t?t():{};return i(n,e,ic(r,2),a)}}/**
     * Creates a function like `_.assign`.
     *
     * @private
     * @param {Function} assigner The function to assign values.
     * @returns {Function} Returns the new assigner function.
     */function rG(e){return rf(function(t,r){var i=-1,a=r.length,o=a>1?r[a-1]:n,s=a>2?r[2]:n;for(o=e.length>3&&"function"==typeof o?(a--,o):n,s&&iS(r[0],r[1],s)&&(o=a<3?n:o,a=1),t=eE(t);++i<a;){var l=r[i];l&&e(t,l,i,o)}return t})}/**
     * Creates a `baseEach` or `baseEachRight` function.
     *
     * @private
     * @param {Function} eachFunc The function to iterate over a collection.
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {Function} Returns the new base function.
     */function rW(e,t){return function(n,r){if(null==n)return n;if(!ak(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=eE(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}}/**
     * Creates a base function for methods like `_.forIn` and `_.forOwn`.
     *
     * @private
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {Function} Returns the new base function.
     */function rj(e){return function(t,n,r){for(var i=-1,a=eE(t),o=r(t),s=o.length;s--;){var l=o[e?s:++i];if(!1===n(a[l],l,a))break}return t}}/**
     * Creates a function like `_.lowerFirst`.
     *
     * @private
     * @param {string} methodName The name of the `String` case method to use.
     * @returns {Function} Returns the new case function.
     */function rX(e){return function(t){var r=tz(t=a9(t))?tj(t):n,i=r?r[0]:t.charAt(0),a=r?rO(r,1).join(""):t.slice(1);return i[e]()+a}}/**
     * Creates a function like `_.camelCase`.
     *
     * @private
     * @param {Function} callback The function to combine each word.
     * @returns {Function} Returns the new compounder function.
     */function rq(e){return function(t){return tm(oO(ow(t).replace(eG,"")),e,"")}}/**
     * Creates a function that produces an instance of `Ctor` regardless of
     * whether it was invoked as part of a `new` expression or by `call` or `apply`.
     *
     * @private
     * @param {Function} Ctor The constructor to wrap.
     * @returns {Function} Returns the new wrapped function.
     */function rY(e){return function(){// Use a `switch` statement to work with class constructors. See
// http://ecma-international.org/ecma-262/7.0/#sec-ecmascript-function-objects-call-thisargument-argumentslist
// for more details.
var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=nm(e.prototype),r=e.apply(n,t);// Mimic the constructor's `return` behavior.
// See https://es5.github.io/#x13.2.2 for more details.
return aj(r)?r:n}}/**
     * Creates a `_.find` or `_.findLast` function.
     *
     * @private
     * @param {Function} findIndexFunc The function to find the collection index.
     * @returns {Function} Returns the new find function.
     */function r$(e){return function(t,r,i){var a=eE(t);if(!ak(t)){var o=ic(r,3);t=oh(t),r=function(e){return o(a[e],e,a)}}var s=e(t,r,i);return s>-1?a[o?t[s]:s]:n}}/**
     * Creates a `_.flow` or `_.flowRight` function.
     *
     * @private
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {Function} Returns the new flow function.
     */function rK(e){return ii(function(t){var i=t.length,a=i,o=nv.prototype.thru;for(e&&t.reverse();a--;){var s=t[a];if("function"!=typeof s)throw new eT(r);if(o&&!l&&"wrapper"==il(s))var l=new nv([],!0)}for(a=l?a:i;++a<i;){var u=il(s=t[a]),c="wrapper"==u?is(s):n;l=c&&iw(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?l[il(c[0])].apply(l,c[3]):1==s.length&&iw(s)?l[u]():l.thru(s)}return function(){var e=arguments,n=e[0];if(l&&1==e.length&&aN(n))return l.plant(n).value();for(var r=0,a=i?t[r].apply(this,e):n;++r<i;)a=t[r].call(this,a);return a}})}/**
     * Creates a function that wraps `func` to invoke it with optional `this`
     * binding of `thisArg`, partial application, and currying.
     *
     * @private
     * @param {Function|string} func The function or method name to wrap.
     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.
     * @param {*} [thisArg] The `this` binding of `func`.
     * @param {Array} [partials] The arguments to prepend to those provided to
     *  the new function.
     * @param {Array} [holders] The `partials` placeholder indexes.
     * @param {Array} [partialsRight] The arguments to append to those provided
     *  to the new function.
     * @param {Array} [holdersRight] The `partialsRight` placeholder indexes.
     * @param {Array} [argPos] The argument positions of the new function.
     * @param {number} [ary] The arity cap of `func`.
     * @param {number} [arity] The arity of `func`.
     * @returns {Function} Returns the new wrapped function.
     */function rZ(e,t,r,i,a,o,s,l,u,c){var f=128&t,h=1&t,d=2&t,p=24&t,m=512&t,g=d?n:rY(e);return function v(){for(var y=arguments.length,_=ey(y),x=y;x--;)_[x]=arguments[x];if(p)var b=iu(v),S=/**
   * Gets the number of `placeholder` occurrences in `array`.
   *
   * @private
   * @param {Array} array The array to inspect.
   * @param {*} placeholder The placeholder to search for.
   * @returns {number} Returns the placeholder count.
   */function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(_,b);if(i&&(_=rF(_,i,a,p)),o&&(_=rz(_,o,s,p)),y-=S,p&&y<c){var E=tH(_,b);return r4(e,t,rZ,v.placeholder,r,_,E,l,u,c-y)}var w=h?r:this,M=d?w[e]:e;return y=_.length,l?_=/**
     * Reorder `array` according to the specified indexes where the element at
     * the first index is assigned as the first element, the element at
     * the second index is assigned as the second element, and so on.
     *
     * @private
     * @param {Array} array The array to reorder.
     * @param {Array} indexes The arranged array indexes.
     * @returns {Array} Returns `array`.
     */function(e,t){for(var r=e.length,i=t3(t.length,r),a=rB(e);i--;){var o=t[i];e[i]=ib(o,r)?a[o]:n}return e}(_,l):m&&y>1&&_.reverse(),f&&u<y&&(_.length=u),this&&this!==e4&&this instanceof v&&(M=g||rY(M)),M.apply(w,_)}}/**
     * Creates a function like `_.invertBy`.
     *
     * @private
     * @param {Function} setter The function to set accumulator values.
     * @param {Function} toIteratee The function to resolve iteratees.
     * @returns {Function} Returns the new inverter function.
     */function rJ(e,t){return function(n,r){var i,a;return i=t(r),a={},nX(n,function(t,n,r){e(a,i(t),n,r)}),a}}/**
     * Creates a function that performs a mathematical operation on two values.
     *
     * @private
     * @param {Function} operator The function to perform the operation.
     * @param {number} [defaultValue] The value used for `undefined` arguments.
     * @returns {Function} Returns the new mathematical operation function.
     */function rQ(e,t){return function(r,i){var a;if(r===n&&i===n)return t;if(r!==n&&(a=r),i!==n){if(a===n)return i;"string"==typeof r||"string"==typeof i?(r=rb(r),i=rb(i)):(r=rx(r),i=rx(i)),a=e(r,i)}return a}}/**
     * Creates a function like `_.over`.
     *
     * @private
     * @param {Function} arrayFunc The function to iterate over iteratees.
     * @returns {Function} Returns the new over function.
     */function r0(e){return ii(function(t){return t=td(t,tL(ic())),rf(function(n){var r=this;return e(t,function(e){return to(e,r,n)})})})}/**
     * Creates the padding for `string` based on `length`. The `chars` string
     * is truncated if the number of characters exceeds `length`.
     *
     * @private
     * @param {number} length The padding length.
     * @param {string} [chars=' '] The string used as padding.
     * @returns {string} Returns the padding for `string`.
     */function r1(e,t){var r=(t=t===n?" ":rb(t)).length;if(r<2)return r?rc(t,e):t;var i=rc(t,t$(e/tW(t)));return tz(t)?rO(tj(i),0,e).join(""):i.slice(0,e)}/**
     * Creates a `_.range` or `_.rangeRight` function.
     *
     * @private
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {Function} Returns the new range function.
     */function r2(e){return function(t,r,i){return i&&"number"!=typeof i&&iS(t,r,i)&&(r=i=n),// Ensure the sign of `-0` is preserved.
t=a4(t),r===n?(r=t,t=0):r=a4(r),i=i===n?t<r?1:-1:a4(i),/**
     * The base implementation of `_.range` and `_.rangeRight` which doesn't
     * coerce arguments.
     *
     * @private
     * @param {number} start The start of the range.
     * @param {number} end The end of the range.
     * @param {number} step The value to increment or decrement by.
     * @param {boolean} [fromRight] Specify iterating from right to left.
     * @returns {Array} Returns the range of numbers.
     */function(e,t,n,r){for(var i=-1,a=t2(t$((t-e)/(n||1)),0),o=ey(a);a--;)o[r?a:++i]=e,e+=n;return o}(t,r,i,e)}}/**
     * Creates a function that performs a relational operation on two values.
     *
     * @private
     * @param {Function} operator The function to perform the operation.
     * @returns {Function} Returns the new relational operation function.
     */function r3(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=a8(t),n=a8(n)),e(t,n)}}/**
     * Creates a function that wraps `func` to continue currying.
     *
     * @private
     * @param {Function} func The function to wrap.
     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.
     * @param {Function} wrapFunc The function to create the `func` wrapper.
     * @param {*} placeholder The placeholder value.
     * @param {*} [thisArg] The `this` binding of `func`.
     * @param {Array} [partials] The arguments to prepend to those provided to
     *  the new function.
     * @param {Array} [holders] The `partials` placeholder indexes.
     * @param {Array} [argPos] The argument positions of the new function.
     * @param {number} [ary] The arity cap of `func`.
     * @param {number} [arity] The arity of `func`.
     * @returns {Function} Returns the new wrapped function.
     */function r4(e,t,r,i,a,o,s,l,u,c){var f=8&t,h=f?s:n,d=f?n:s,p=f?o:n,m=f?n:o;t|=f?32:64,4&(t&=~(f?64:32))||(t&=-4);var g=[e,t,a,p,h,m,d,l,u,c],v=r.apply(n,g);return iw(e)&&iL(v,g),v.placeholder=i,iU(v,e,t)}/**
     * Creates a function like `_.round`.
     *
     * @private
     * @param {string} methodName The name of the `Math` method to use when rounding.
     * @returns {Function} Returns the new round function.
     */function r5(e){var t=eS[e];return function(e,n){if(e=a8(e),(n=null==n?0:t3(a5(n),292))&&tQ(e)){// Shift with exponential notation to avoid floating-point issues.
// See [MDN](https://mdn.io/round#Examples) for more details.
var r=(a9(e)+"e").split("e");return+((r=(a9(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}/**
     * Creates a set object of `values`.
     *
     * @private
     * @param {Array} values The values to add to the set.
     * @returns {Object} Returns the new set.
     */var r6=nt&&1/tG(new nt([,-0]))[1]==o?function(e){return new nt(e)}:oG;/**
     * Creates a `_.toPairs` or `_.toPairsIn` function.
     *
     * @private
     * @param {Function} keysFunc The function to get the keys of a given object.
     * @returns {Function} Returns the new pairs function.
     */function r8(e){return function(t){var n,r,i=iv(t);return i==v?tB(t):i==S?(n=-1,r=Array(t.size),t.forEach(function(e){r[++n]=[e,e]}),r):td(e(t),function(e){return[e,t[e]]})}}/**
     * Creates a function that either curries or invokes `func` with optional
     * `this` binding and partially applied arguments.
     *
     * @private
     * @param {Function|string} func The function or method name to wrap.
     * @param {number} bitmask The bitmask flags.
     *    1 - `_.bind`
     *    2 - `_.bindKey`
     *    4 - `_.curry` or `_.curryRight` of a bound function
     *    8 - `_.curry`
     *   16 - `_.curryRight`
     *   32 - `_.partial`
     *   64 - `_.partialRight`
     *  128 - `_.rearg`
     *  256 - `_.ary`
     *  512 - `_.flip`
     * @param {*} [thisArg] The `this` binding of `func`.
     * @param {Array} [partials] The arguments to be partially applied.
     * @param {Array} [holders] The `partials` placeholder indexes.
     * @param {Array} [argPos] The argument positions of the new function.
     * @param {number} [ary] The arity cap of `func`.
     * @param {number} [arity] The arity of `func`.
     * @returns {Function} Returns the new wrapped function.
     */function r7(e,t,i,o,s,l,u,c){var f=2&t;if(!f&&"function"!=typeof e)throw new eT(r);var h=o?o.length:0;if(h||(t&=-97,o=s=n),u=u===n?u:t2(a5(u),0),c=c===n?c:a5(c),h-=s?s.length:0,64&t){var d=o,p=s;o=s=n}var m=f?n:is(e),g=[e,t,i,o,s,d,p,l,u,c];if(m&&/**
     * Merges the function metadata of `source` into `data`.
     *
     * Merging metadata reduces the number of wrappers used to invoke a function.
     * This is possible because methods like `_.bind`, `_.curry`, and `_.partial`
     * may be applied regardless of execution order. Methods like `_.ary` and
     * `_.rearg` modify function arguments, making the order in which they are
     * executed important, preventing the merging of metadata. However, we make
     * an exception for a safe combined case where curried functions have `_.ary`
     * and or `_.rearg` applied.
     *
     * @private
     * @param {Array} data The destination metadata.
     * @param {Array} source The source metadata.
     * @returns {Array} Returns `data`.
     */function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,s=128==r&&8==n||128==r&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;// Exit early if metadata can't be merged.
if(o||s){1&r&&(e[2]=t[2],// Set when currying a bound function.
i|=1&n?0:4);// Compose partial arguments.
var l=t[3];if(l){var u=e[3];e[3]=u?rF(u,l,t[4]):l,e[4]=u?tH(e[3],a):t[4]}// Compose partial right arguments.
(l=t[5])&&(u=e[5],e[5]=u?rz(u,l,t[6]):l,e[6]=u?tH(e[5],a):t[6]),// Use source `argPos` if available.
(l=t[7])&&(e[7]=l),128&r&&(e[8]=null==e[8]?t[8]:t3(e[8],t[8])),null==e[9]&&(e[9]=t[9]),// Use source `func` and merge bitmasks.
e[0]=t[0],e[1]=i}}(g,m),e=g[0],t=g[1],i=g[2],o=g[3],s=g[4],(c=g[9]=g[9]===n?f?0:e.length:t2(g[9]-h,0))||!(24&t)||(t&=-25),t&&1!=t)8==t||16==t?(v=e,y=t,_=c,x=rY(v),O=function e(){for(var t=arguments.length,r=ey(t),i=t,a=iu(e);i--;)r[i]=arguments[i];var o=t<3&&r[0]!==a&&r[t-1]!==a?[]:tH(r,a);return(t-=o.length)<_?r4(v,y,rZ,e.placeholder,n,r,o,n,n,_-t):to(this&&this!==e4&&this instanceof e?x:v,this,r)}):32!=t&&33!=t||s.length?O=rZ.apply(n,g):(b=e,S=t,E=i,w=o,M=1&S,T=rY(b),O=function e(){for(var t=-1,n=arguments.length,r=-1,i=w.length,a=ey(i+n),o=this&&this!==e4&&this instanceof e?T:b;++r<i;)a[r]=w[r];for(;n--;)a[r++]=arguments[++t];return to(o,M?E:this,a)});else var v,y,_,x,b,S,E,w,M,T,A,C,P,R,L,O=(A=e,C=t,P=i,R=1&C,L=rY(A),function e(){return(this&&this!==e4&&this instanceof e?L:A).apply(R?P:this,arguments)});return iU((m?rd:iL)(O,g),e,t)}/**
     * Used by `_.defaults` to customize its `_.assignIn` use to assign properties
     * of source objects to the destination object for all destination properties
     * that resolve to `undefined`.
     *
     * @private
     * @param {*} objValue The destination value.
     * @param {*} srcValue The source value.
     * @param {string} key The key of the property to assign.
     * @param {Object} object The parent object of `objValue`.
     * @returns {*} Returns the value to assign.
     */function r9(e,t,r,i){return e===n||aL(e,eP[r])&&!eO.call(i,r)?t:e}/**
     * Used by `_.defaultsDeep` to customize its `_.merge` use to merge source
     * objects into destination objects that are passed thru.
     *
     * @private
     * @param {*} objValue The destination value.
     * @param {*} srcValue The source value.
     * @param {string} key The key of the property to merge.
     * @param {Object} object The parent object of `objValue`.
     * @param {Object} source The parent object of `srcValue`.
     * @param {Object} [stack] Tracks traversed source values and their merged
     *  counterparts.
     * @returns {*} Returns the value to assign.
     */function ie(e,t,r,i,a,o){return aj(e)&&aj(t)&&(// Recursively merge objects and arrays (susceptible to call stack limits).
o.set(t,e),rr(e,t,n,ie,o),o.delete(t)),e}/**
     * Used by `_.omit` to customize its `_.cloneDeep` use to only clone plain
     * objects.
     *
     * @private
     * @param {*} value The value to inspect.
     * @param {string} key The key of the property to inspect.
     * @returns {*} Returns the uncloned value or `undefined` to defer cloning to `_.cloneDeep`.
     */function it(e){return a$(e)?n:e}/**
     * A specialized version of `baseIsEqualDeep` for arrays with support for
     * partial deep comparisons.
     *
     * @private
     * @param {Array} array The array to compare.
     * @param {Array} other The other array to compare.
     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.
     * @param {Function} customizer The function to customize comparisons.
     * @param {Function} equalFunc The function to determine equivalents of values.
     * @param {Object} stack Tracks traversed `array` and `other` objects.
     * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.
     */function ir(e,t,r,i,a,o){var s=1&r,l=e.length,u=t.length;if(l!=u&&!(s&&u>l))return!1;// Check that cyclic values are equal.
var c=o.get(e),f=o.get(t);if(c&&f)return c==t&&f==e;var h=-1,d=!0,p=2&r?new nS:n;// Ignore non-index properties.
for(o.set(e,t),o.set(t,e);++h<l;){var m=e[h],g=t[h];if(i)var v=s?i(g,m,h,t,e,o):i(m,g,h,e,t,o);if(v!==n){if(v)continue;d=!1;break}// Recursively compare arrays (susceptible to call stack limits).
if(p){if(!tv(t,function(e,t){if(!tI(p,t)&&(m===e||a(m,e,r,i,o)))return p.push(t)})){d=!1;break}}else if(!(m===g||a(m,g,r,i,o))){d=!1;break}}return o.delete(e),o.delete(t),d}/**
     * A specialized version of `baseRest` which flattens the rest array.
     *
     * @private
     * @param {Function} func The function to apply a rest parameter to.
     * @returns {Function} Returns the new function.
     */function ii(e){return iI(iC(e,n,iX),e+"")}/**
     * Creates an array of own enumerable property names and symbols of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property names and symbols.
     */function ia(e){return nK(e,oh,im)}/**
     * Creates an array of own and inherited enumerable property names and
     * symbols of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property names and symbols.
     */function io(e){return nK(e,od,ig)}/**
     * Gets metadata for `func`.
     *
     * @private
     * @param {Function} func The function to query.
     * @returns {*} Returns the metadata for `func`.
     */var is=ni?function(e){return ni.get(e)}:oG;/**
     * Gets the name of `func`.
     *
     * @private
     * @param {Function} func The function to query.
     * @returns {string} Returns the function name.
     */function il(e){for(var t=e.name+"",n=na[t],r=eO.call(na,t)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==e)return i.name}return t}/**
     * Gets the argument placeholder value for `func`.
     *
     * @private
     * @param {Function} func The function to inspect.
     * @returns {*} Returns the placeholder value.
     */function iu(e){return(eO.call(np,"placeholder")?np:e).placeholder}/**
     * Gets the appropriate "iteratee" function. If `_.iteratee` is customized,
     * this function returns the custom method, otherwise it returns `baseIteratee`.
     * If arguments are provided, the chosen function is invoked with them and
     * its result is returned.
     *
     * @private
     * @param {*} [value] The value to convert to an iteratee.
     * @param {number} [arity] The arity of the created iteratee.
     * @returns {Function} Returns the chosen function or its result.
     */function ic(){var e=np.iteratee||oz;return e=e===oz?n8:e,arguments.length?e(arguments[0],arguments[1]):e}/**
     * Gets the data for `map`.
     *
     * @private
     * @param {Object} map The map to query.
     * @param {string} key The reference key.
     * @returns {*} Returns the map data.
     */function ih(e,t){var n,r=e.__data__;return("string"==(n=typeof t)||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t)?r["string"==typeof t?"string":"hash"]:r.map}/**
     * Gets the property names, values, and compare flags of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {Array} Returns the match data of `object`.
     */function id(e){for(var t=oh(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,i==i&&!aj(i)]}return t}/**
     * Gets the native function at `key` of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @param {string} key The key of the method to get.
     * @returns {*} Returns the function if it's native, else `undefined`.
     */function ip(e,t){var r=null==e?n:e[t];return n6(r)?r:n}/**
     * Creates an array of the own enumerable symbols of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of symbols.
     */var im=tZ?function(e){return null==e?[]:tc(tZ(e=eE(e)),function(t){return eQ.call(e,t)})}:oK,ig=tZ?function(e){for(var t=[];e;)tp(t,im(e)),e=ej(e);return t}:oK,iv=nZ;/**
     * Checks if `path` exists on `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @param {Array|string} path The path to check.
     * @param {Function} hasFunc The function to check properties.
     * @returns {boolean} Returns `true` if `path` exists, else `false`.
     */function iy(e,t,n){t=rL(t,e);for(var r=-1,i=t.length,a=!1;++r<i;){var o=iF(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&aW(i)&&ib(o,i)&&(aN(e)||aU(e))}/**
     * Initializes an object clone.
     *
     * @private
     * @param {Object} object The object to clone.
     * @returns {Object} Returns the initialized clone.
     */function i_(e){return"function"!=typeof e.constructor||iT(e)?{}:nm(ej(e))}/**
     * Checks if `value` is a flattenable `arguments` object or array.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.
     */function ix(e){return aN(e)||aU(e)||!!(e3&&e&&e[e3])}/**
     * Checks if `value` is a valid array-like index.
     *
     * @private
     * @param {*} value The value to check.
     * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.
     * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.
     */function ib(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&eh.test(e))&&e>-1&&e%1==0&&e<t}/**
     * Checks if the given arguments are from an iteratee call.
     *
     * @private
     * @param {*} value The potential iteratee value argument.
     * @param {*} index The potential iteratee index or key argument.
     * @param {*} object The potential iteratee object argument.
     * @returns {boolean} Returns `true` if the arguments are from an iteratee call,
     *  else `false`.
     */function iS(e,t,n){if(!aj(n))return!1;var r=typeof t;return("number"==r?!!(ak(n)&&ib(t,n.length)):"string"==r&&t in n)&&aL(n[t],e)}/**
     * Checks if `value` is a property name and not a property path.
     *
     * @private
     * @param {*} value The value to check.
     * @param {Object} [object] The object to query keys on.
     * @returns {boolean} Returns `true` if `value` is a property name, else `false`.
     */function iE(e,t){if(aN(e))return!1;var n=typeof e;return!!("number"==n||"symbol"==n||"boolean"==n||null==e||aQ(e))||Y.test(e)||!q.test(e)||null!=t&&e in eE(t)}/**
     * Checks if `func` has a lazy counterpart.
     *
     * @private
     * @param {Function} func The function to check.
     * @returns {boolean} Returns `true` if `func` has a lazy counterpart,
     *  else `false`.
     */function iw(e){var t=il(e),n=np[t];if("function"!=typeof n||!(t in ny.prototype))return!1;if(e===n)return!0;var r=is(n);return!!r&&e===r[0]}(t7&&iv(new t7(new ArrayBuffer(1)))!=A||t9&&iv(new t9)!=v||ne&&iv(ne.resolve())!=x||nt&&iv(new nt)!=S||nn&&iv(new nn)!=M)&&(iv=function(e){var t=nZ(e),r=t==_?e.constructor:n,i=r?iz(r):"";if(i)switch(i){case no:return A;case ns:return v;case nl:return x;case nu:return S;case nc:return M}return t});/**
     * Checks if `func` is capable of being masked.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `func` is maskable, else `false`.
     */var iM=eR?aH:oZ;/**
     * Checks if `value` is likely a prototype object.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.
     */function iT(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||eP)}/**
     * A specialized version of `matchesProperty` for source values suitable
     * for strict equality comparisons, i.e. `===`.
     *
     * @private
     * @param {string} key The key of the property to get.
     * @param {*} srcValue The value to match.
     * @returns {Function} Returns the new spec function.
     */function iA(e,t){return function(r){return null!=r&&r[e]===t&&(t!==n||e in eE(r))}}/**
     * A specialized version of `baseRest` which transforms the rest array.
     *
     * @private
     * @param {Function} func The function to apply a rest parameter to.
     * @param {number} [start=func.length-1] The start position of the rest parameter.
     * @param {Function} transform The rest array transform.
     * @returns {Function} Returns the new function.
     */function iC(e,t,r){return t=t2(t===n?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=t2(n.length-t,0),o=ey(a);++i<a;)o[i]=n[t+i];i=-1;for(var s=ey(t+1);++i<t;)s[i]=n[i];return s[t]=r(o),to(e,this,s)}}/**
     * Gets the parent value at `path` of `object`.
     *
     * @private
     * @param {Object} object The object to query.
     * @param {Array} path The path to get the parent value of.
     * @returns {*} Returns the parent value.
     */function iP(e,t){return t.length<2?e:n$(e,rm(t,0,-1))}/**
     * Gets the value at `key`, unless `key` is "__proto__" or "constructor".
     *
     * @private
     * @param {Object} object The object to query.
     * @param {string} key The key of the property to get.
     * @returns {*} Returns the property value.
     */function iR(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}/**
     * Sets metadata for `func`.
     *
     * **Note:** If this function becomes hot, i.e. is invoked a lot in a short
     * period of time, it will trip its breaker and transition to an identity
     * function to avoid garbage collection pauses in V8. See
     * [V8 issue 2070](https://bugs.chromium.org/p/v8/issues/detail?id=2070)
     * for more details.
     *
     * @private
     * @param {Function} func The function to associate metadata with.
     * @param {*} data The metadata.
     * @returns {Function} Returns `func`.
     */var iL=iN(rd),iO=tT||function(e,t){return e4.setTimeout(e,t)},iI=iN(rp);/**
     * Sets the `toString` method of `wrapper` to mimic the source of `reference`
     * with wrapper details in a comment at the top of the source body.
     *
     * @private
     * @param {Function} wrapper The function to modify.
     * @param {Function} reference The reference function.
     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.
     * @returns {Function} Returns `wrapper`.
     */function iU(e,t,n){var r,i,a=t+"";return iI(e,/**
     * Inserts wrapper `details` in a comment at the top of the `source` body.
     *
     * @private
     * @param {string} source The source to modify.
     * @returns {Array} details The details to insert.
     * @returns {string} Returns the modified source.
     */function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ee,"{\n/* [wrapped with "+t+"] */\n")}(a,(r=(i=a.match(et))?i[1].split(en):[],tl(l,function(e){var t="_."+e[0];n&e[1]&&!tf(r,t)&&r.push(t)}),r.sort())))}/**
     * Creates a function that'll short out and invoke `identity` instead
     * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`
     * milliseconds.
     *
     * @private
     * @param {Function} func The function to restrict.
     * @returns {Function} Returns the new shortable function.
     */function iN(e){var t=0,r=0;return function(){var i=t4(),a=16-(i-r);if(r=i,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(n,arguments)}}/**
     * A specialized version of `_.shuffle` which mutates and sets the size of `array`.
     *
     * @private
     * @param {Array} array The array to shuffle.
     * @param {number} [size=array.length] The size of `array`.
     * @returns {Array} Returns `array`.
     */function iD(e,t){var r=-1,i=e.length,a=i-1;for(t=t===n?i:t;++r<t;){var o=ru(r,a),s=e[o];e[o]=e[r],e[r]=s}return e.length=t,e}/**
     * Converts `string` to a property path array.
     *
     * @private
     * @param {string} string The string to convert.
     * @returns {Array} Returns the property path array.
     */var ik=(eg=(Q=aM(function(e){var t=[];return 46/* . */===e.charCodeAt(0)&&t.push(""),e.replace($,function(e,n,r,i){t.push(r?i.replace(ea,"$1"):n||e)}),t},function(e){return 500===eg.size&&eg.clear(),e})).cache,Q);/**
     * Converts `value` to a string key if it's not a string or symbol.
     *
     * @private
     * @param {*} value The value to inspect.
     * @returns {string|symbol} Returns the key.
     */function iF(e){if("string"==typeof e||aQ(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}/**
     * Converts `func` to its source code.
     *
     * @private
     * @param {Function} func The function to convert.
     * @returns {string} Returns the source code.
     */function iz(e){if(null!=e){try{return eL.call(e)}catch(e){}try{return e+""}catch(e){}}return""}/**
     * Creates a clone of `wrapper`.
     *
     * @private
     * @param {Object} wrapper The wrapper to clone.
     * @returns {Object} Returns the cloned wrapper.
     */function iB(e){if(e instanceof ny)return e.clone();var t=new nv(e.__wrapped__,e.__chain__);return t.__actions__=rB(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}/**
     * Creates an array of `array` values not included in the other given arrays
     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
     * for equality comparisons. The order and references of result values are
     * determined by the first array.
     *
     * **Note:** Unlike `_.pullAll`, this method returns a new array.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Array
     * @param {Array} array The array to inspect.
     * @param {...Array} [values] The values to exclude.
     * @returns {Array} Returns the new array of filtered values.
     * @see _.without, _.xor
     * @example
     *
     * _.difference([2, 1], [2, 3]);
     * // => [1]
     */var iV=rf(function(e,t){return aF(e)?nk(e,nG(t,1,aF,!0)):[]}),iH=rf(function(e,t){var r=iZ(t);return aF(r)&&(r=n),aF(e)?nk(e,nG(t,1,aF,!0),ic(r,2)):[]}),iG=rf(function(e,t){var r=iZ(t);return aF(r)&&(r=n),aF(e)?nk(e,nG(t,1,aF,!0),n,r):[]});/**
     * This method is like `_.find` except that it returns the index of the first
     * element `predicate` returns truthy for instead of the element itself.
     *
     * @static
     * @memberOf _
     * @since 1.1.0
     * @category Array
     * @param {Array} array The array to inspect.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @param {number} [fromIndex=0] The index to search from.
     * @returns {number} Returns the index of the found element, else `-1`.
     * @example
     *
     * var users = [
     *   { 'user': 'barney',  'active': false },
     *   { 'user': 'fred',    'active': false },
     *   { 'user': 'pebbles', 'active': true }
     * ];
     *
     * _.findIndex(users, function(o) { return o.user == 'barney'; });
     * // => 0
     *
     * // The `_.matches` iteratee shorthand.
     * _.findIndex(users, { 'user': 'fred', 'active': false });
     * // => 1
     *
     * // The `_.matchesProperty` iteratee shorthand.
     * _.findIndex(users, ['active', false]);
     * // => 0
     *
     * // The `_.property` iteratee shorthand.
     * _.findIndex(users, 'active');
     * // => 2
     */function iW(e,t,n){var r=null==e?0:e.length;if(!r)return -1;var i=null==n?0:a5(n);return i<0&&(i=t2(r+i,0)),tx(e,ic(t,3),i)}/**
     * This method is like `_.findIndex` except that it iterates over elements
     * of `collection` from right to left.
     *
     * @static
     * @memberOf _
     * @since 2.0.0
     * @category Array
     * @param {Array} array The array to inspect.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @param {number} [fromIndex=array.length-1] The index to search from.
     * @returns {number} Returns the index of the found element, else `-1`.
     * @example
     *
     * var users = [
     *   { 'user': 'barney',  'active': true },
     *   { 'user': 'fred',    'active': false },
     *   { 'user': 'pebbles', 'active': false }
     * ];
     *
     * _.findLastIndex(users, function(o) { return o.user == 'pebbles'; });
     * // => 2
     *
     * // The `_.matches` iteratee shorthand.
     * _.findLastIndex(users, { 'user': 'barney', 'active': true });
     * // => 0
     *
     * // The `_.matchesProperty` iteratee shorthand.
     * _.findLastIndex(users, ['active', false]);
     * // => 2
     *
     * // The `_.property` iteratee shorthand.
     * _.findLastIndex(users, 'active');
     * // => 0
     */function ij(e,t,r){var i=null==e?0:e.length;if(!i)return -1;var a=i-1;return r!==n&&(a=a5(r),a=r<0?t2(i+a,0):t3(a,i-1)),tx(e,ic(t,3),a,!0)}/**
     * Flattens `array` a single level deep.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Array
     * @param {Array} array The array to flatten.
     * @returns {Array} Returns the new flattened array.
     * @example
     *
     * _.flatten([1, [2, [3, [4]], 5]]);
     * // => [1, 2, [3, [4]], 5]
     */function iX(e){return(null==e?0:e.length)?nG(e,1):[]}/**
     * Gets the first element of `array`.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @alias first
     * @category Array
     * @param {Array} array The array to query.
     * @returns {*} Returns the first element of `array`.
     * @example
     *
     * _.head([1, 2, 3]);
     * // => 1
     *
     * _.head([]);
     * // => undefined
     */function iq(e){return e&&e.length?e[0]:n}/**
     * Creates an array of unique values that are included in all given arrays
     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
     * for equality comparisons. The order and references of result values are
     * determined by the first array.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Array
     * @param {...Array} [arrays] The arrays to inspect.
     * @returns {Array} Returns the new array of intersecting values.
     * @example
     *
     * _.intersection([2, 1], [2, 3]);
     * // => [2]
     */var iY=rf(function(e){var t=td(e,rP);return t.length&&t[0]===e[0]?n1(t):[]}),i$=rf(function(e){var t=iZ(e),r=td(e,rP);return t===iZ(r)?t=n:r.pop(),r.length&&r[0]===e[0]?n1(r,ic(t,2)):[]}),iK=rf(function(e){var t=iZ(e),r=td(e,rP);return(t="function"==typeof t?t:n)&&r.pop(),r.length&&r[0]===e[0]?n1(r,n,t):[]});/**
     * Gets the last element of `array`.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Array
     * @param {Array} array The array to query.
     * @returns {*} Returns the last element of `array`.
     * @example
     *
     * _.last([1, 2, 3]);
     * // => 3
     */function iZ(e){var t=null==e?0:e.length;return t?e[t-1]:n}/**
     * Removes all given values from `array` using
     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
     * for equality comparisons.
     *
     * **Note:** Unlike `_.without`, this method mutates `array`. Use `_.remove`
     * to remove elements from an array by predicate.
     *
     * @static
     * @memberOf _
     * @since 2.0.0
     * @category Array
     * @param {Array} array The array to modify.
     * @param {...*} [values] The values to remove.
     * @returns {Array} Returns `array`.
     * @example
     *
     * var array = ['a', 'b', 'c', 'a', 'b', 'c'];
     *
     * _.pull(array, 'a', 'c');
     * console.log(array);
     * // => ['b', 'b']
     */var iJ=rf(iQ);/**
     * This method is like `_.pull` except that it accepts an array of values to remove.
     *
     * **Note:** Unlike `_.difference`, this method mutates `array`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} array The array to modify.
     * @param {Array} values The values to remove.
     * @returns {Array} Returns `array`.
     * @example
     *
     * var array = ['a', 'b', 'c', 'a', 'b', 'c'];
     *
     * _.pullAll(array, ['a', 'c']);
     * console.log(array);
     * // => ['b', 'b']
     */function iQ(e,t){return e&&e.length&&t&&t.length?rs(e,t):e}/**
     * Removes elements from `array` corresponding to `indexes` and returns an
     * array of removed elements.
     *
     * **Note:** Unlike `_.at`, this method mutates `array`.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Array
     * @param {Array} array The array to modify.
     * @param {...(number|number[])} [indexes] The indexes of elements to remove.
     * @returns {Array} Returns the new array of removed elements.
     * @example
     *
     * var array = ['a', 'b', 'c', 'd'];
     * var pulled = _.pullAt(array, [1, 3]);
     *
     * console.log(array);
     * // => ['a', 'c']
     *
     * console.log(pulled);
     * // => ['b', 'd']
     */var i0=ii(function(e,t){var n=null==e?0:e.length,r=nO(e,t);return rl(e,td(t,function(e){return ib(e,n)?+e:e}).sort(rk)),r});/**
     * Reverses `array` so that the first element becomes the last, the second
     * element becomes the second to last, and so on.
     *
     * **Note:** This method mutates `array` and is based on
     * [`Array#reverse`](https://mdn.io/Array/reverse).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} array The array to modify.
     * @returns {Array} Returns `array`.
     * @example
     *
     * var array = [1, 2, 3];
     *
     * _.reverse(array);
     * // => [3, 2, 1]
     *
     * console.log(array);
     * // => [3, 2, 1]
     */function i1(e){return null==e?e:t8.call(e)}/**
     * Creates an array of unique values, in order, from all given arrays using
     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
     * for equality comparisons.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Array
     * @param {...Array} [arrays] The arrays to inspect.
     * @returns {Array} Returns the new array of combined values.
     * @example
     *
     * _.union([2], [1, 2]);
     * // => [2, 1]
     */var i2=rf(function(e){return rS(nG(e,1,aF,!0))}),i3=rf(function(e){var t=iZ(e);return aF(t)&&(t=n),rS(nG(e,1,aF,!0),ic(t,2))}),i4=rf(function(e){var t=iZ(e);return t="function"==typeof t?t:n,rS(nG(e,1,aF,!0),n,t)});/**
     * This method is like `_.zip` except that it accepts an array of grouped
     * elements and creates an array regrouping the elements to their pre-zip
     * configuration.
     *
     * @static
     * @memberOf _
     * @since 1.2.0
     * @category Array
     * @param {Array} array The array of grouped elements to process.
     * @returns {Array} Returns the new array of regrouped elements.
     * @example
     *
     * var zipped = _.zip(['a', 'b'], [1, 2], [true, false]);
     * // => [['a', 1, true], ['b', 2, false]]
     *
     * _.unzip(zipped);
     * // => [['a', 'b'], [1, 2], [true, false]]
     */function i5(e){if(!(e&&e.length))return[];var t=0;return e=tc(e,function(e){if(aF(e))return t=t2(e.length,t),!0}),tP(t,function(t){return td(e,tM(t))})}/**
     * This method is like `_.unzip` except that it accepts `iteratee` to specify
     * how regrouped values should be combined. The iteratee is invoked with the
     * elements of each group: (...group).
     *
     * @static
     * @memberOf _
     * @since 3.8.0
     * @category Array
     * @param {Array} array The array of grouped elements to process.
     * @param {Function} [iteratee=_.identity] The function to combine
     *  regrouped values.
     * @returns {Array} Returns the new array of regrouped elements.
     * @example
     *
     * var zipped = _.zip([1, 2], [10, 20], [100, 200]);
     * // => [[1, 10, 100], [2, 20, 200]]
     *
     * _.unzipWith(zipped, _.add);
     * // => [3, 30, 300]
     */function i6(e,t){if(!(e&&e.length))return[];var r=i5(e);return null==t?r:td(r,function(e){return to(t,n,e)})}/**
     * Creates an array excluding all given values using
     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
     * for equality comparisons.
     *
     * **Note:** Unlike `_.pull`, this method returns a new array.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Array
     * @param {Array} array The array to inspect.
     * @param {...*} [values] The values to exclude.
     * @returns {Array} Returns the new array of filtered values.
     * @see _.difference, _.xor
     * @example
     *
     * _.without([2, 1, 2, 3], 1, 2);
     * // => [3]
     */var i8=rf(function(e,t){return aF(e)?nk(e,t):[]}),i7=rf(function(e){return rA(tc(e,aF))}),i9=rf(function(e){var t=iZ(e);return aF(t)&&(t=n),rA(tc(e,aF),ic(t,2))}),ae=rf(function(e){var t=iZ(e);return t="function"==typeof t?t:n,rA(tc(e,aF),n,t)}),at=rf(i5),an=rf(function(e){var t=e.length,r=t>1?e[t-1]:n;return r="function"==typeof r?(e.pop(),r):n,i6(e,r)});/*------------------------------------------------------------------------*//**
     * Creates a `lodash` wrapper instance that wraps `value` with explicit method
     * chain sequences enabled. The result of such sequences must be unwrapped
     * with `_#value`.
     *
     * @static
     * @memberOf _
     * @since 1.3.0
     * @category Seq
     * @param {*} value The value to wrap.
     * @returns {Object} Returns the new `lodash` wrapper instance.
     * @example
     *
     * var users = [
     *   { 'user': 'barney',  'age': 36 },
     *   { 'user': 'fred',    'age': 40 },
     *   { 'user': 'pebbles', 'age': 1 }
     * ];
     *
     * var youngest = _
     *   .chain(users)
     *   .sortBy('age')
     *   .map(function(o) {
     *     return o.user + ' is ' + o.age;
     *   })
     *   .head()
     *   .value();
     * // => 'pebbles is 1'
     */function ar(e){var t=np(e);return t.__chain__=!0,t}/**
     * This method is like `_.tap` except that it returns the result of `interceptor`.
     * The purpose of this method is to "pass thru" values replacing intermediate
     * results in a method chain sequence.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Seq
     * @param {*} value The value to provide to `interceptor`.
     * @param {Function} interceptor The function to invoke.
     * @returns {*} Returns the result of `interceptor`.
     * @example
     *
     * _('  abc  ')
     *  .chain()
     *  .trim()
     *  .thru(function(value) {
     *    return [value];
     *  })
     *  .value();
     * // => ['abc']
     */function ai(e,t){return t(e)}/**
     * This method is the wrapper version of `_.at`.
     *
     * @name at
     * @memberOf _
     * @since 1.0.0
     * @category Seq
     * @param {...(string|string[])} [paths] The property paths to pick.
     * @returns {Object} Returns the new `lodash` wrapper instance.
     * @example
     *
     * var object = { 'a': [{ 'b': { 'c': 3 } }, 4] };
     *
     * _(object).at(['a[0].b.c', 'a[1]']).value();
     * // => [3, 4]
     */var aa=ii(function(e){var t=e.length,r=t?e[0]:0,i=this.__wrapped__,a=function(t){return nO(t,e)};return!(t>1)&&!this.__actions__.length&&i instanceof ny&&ib(r)?((i=i.slice(r,+r+(t?1:0))).__actions__.push({func:ai,args:[a],thisArg:n}),new nv(i,this.__chain__).thru(function(e){return t&&!e.length&&e.push(n),e})):this.thru(a)}),ao=rH(function(e,t,n){eO.call(e,n)?++e[n]:nL(e,n,1)}),as=r$(iW),al=r$(ij);/**
     * Iterates over elements of `collection` and invokes `iteratee` for each element.
     * The iteratee is invoked with three arguments: (value, index|key, collection).
     * Iteratee functions may exit iteration early by explicitly returning `false`.
     *
     * **Note:** As with other "Collections" methods, objects with a "length"
     * property are iterated like arrays. To avoid this behavior use `_.forIn`
     * or `_.forOwn` for object iteration.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @alias each
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @returns {Array|Object} Returns `collection`.
     * @see _.forEachRight
     * @example
     *
     * _.forEach([1, 2], function(value) {
     *   console.log(value);
     * });
     * // => Logs `1` then `2`.
     *
     * _.forEach({ 'a': 1, 'b': 2 }, function(value, key) {
     *   console.log(key);
     * });
     * // => Logs 'a' then 'b' (iteration order is not guaranteed).
     */function au(e,t){return(aN(e)?tl:nF)(e,ic(t,3))}/**
     * This method is like `_.forEach` except that it iterates over elements of
     * `collection` from right to left.
     *
     * @static
     * @memberOf _
     * @since 2.0.0
     * @alias eachRight
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @returns {Array|Object} Returns `collection`.
     * @see _.forEach
     * @example
     *
     * _.forEachRight([1, 2], function(value) {
     *   console.log(value);
     * });
     * // => Logs `2` then `1`.
     */function ac(e,t){return(aN(e)?/**
   * A specialized version of `_.forEachRight` for arrays without support for
   * iteratee shorthands.
   *
   * @private
   * @param {Array} [array] The array to iterate over.
   * @param {Function} iteratee The function invoked per iteration.
   * @returns {Array} Returns `array`.
   */function(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}:nz)(e,ic(t,3))}/**
     * Creates an object composed of keys generated from the results of running
     * each element of `collection` thru `iteratee`. The order of grouped values
     * is determined by the order they occur in `collection`. The corresponding
     * value of each key is an array of elements responsible for generating the
     * key. The iteratee is invoked with one argument: (value).
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.
     * @returns {Object} Returns the composed aggregate object.
     * @example
     *
     * _.groupBy([6.1, 4.2, 6.3], Math.floor);
     * // => { '4': [4.2], '6': [6.1, 6.3] }
     *
     * // The `_.property` iteratee shorthand.
     * _.groupBy(['one', 'two', 'three'], 'length');
     * // => { '3': ['one', 'two'], '5': ['three'] }
     */var af=rH(function(e,t,n){eO.call(e,n)?e[n].push(t):nL(e,n,[t])}),ah=rf(function(e,t,n){var r=-1,i="function"==typeof t,a=ak(e)?ey(e.length):[];return nF(e,function(e){a[++r]=i?to(t,e,n):n2(e,t,n)}),a}),ad=rH(function(e,t,n){nL(e,n,t)});/**
     * Creates an array of values by running each element in `collection` thru
     * `iteratee`. The iteratee is invoked with three arguments:
     * (value, index|key, collection).
     *
     * Many lodash methods are guarded to work as iteratees for methods like
     * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.
     *
     * The guarded methods are:
     * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,
     * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,
     * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,
     * `template`, `trim`, `trimEnd`, `trimStart`, and `words`
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @returns {Array} Returns the new mapped array.
     * @example
     *
     * function square(n) {
     *   return n * n;
     * }
     *
     * _.map([4, 8], square);
     * // => [16, 64]
     *
     * _.map({ 'a': 4, 'b': 8 }, square);
     * // => [16, 64] (iteration order is not guaranteed)
     *
     * var users = [
     *   { 'user': 'barney' },
     *   { 'user': 'fred' }
     * ];
     *
     * // The `_.property` iteratee shorthand.
     * _.map(users, 'user');
     * // => ['barney', 'fred']
     */function ap(e,t){return(aN(e)?td:re)(e,ic(t,3))}/**
     * Creates an array of elements split into two groups, the first of which
     * contains elements `predicate` returns truthy for, the second of which
     * contains elements `predicate` returns falsey for. The predicate is
     * invoked with one argument: (value).
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @returns {Array} Returns the array of grouped elements.
     * @example
     *
     * var users = [
     *   { 'user': 'barney',  'age': 36, 'active': false },
     *   { 'user': 'fred',    'age': 40, 'active': true },
     *   { 'user': 'pebbles', 'age': 1,  'active': false }
     * ];
     *
     * _.partition(users, function(o) { return o.active; });
     * // => objects for [['fred'], ['barney', 'pebbles']]
     *
     * // The `_.matches` iteratee shorthand.
     * _.partition(users, { 'age': 1, 'active': false });
     * // => objects for [['pebbles'], ['barney', 'fred']]
     *
     * // The `_.matchesProperty` iteratee shorthand.
     * _.partition(users, ['active', false]);
     * // => objects for [['barney', 'pebbles'], ['fred']]
     *
     * // The `_.property` iteratee shorthand.
     * _.partition(users, 'active');
     * // => objects for [['fred'], ['barney', 'pebbles']]
     */var am=rH(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),ag=rf(function(e,t){if(null==e)return[];var n=t.length;return n>1&&iS(e,t[0],t[1])?t=[]:n>2&&iS(t[0],t[1],t[2])&&(t=[t[0]]),ra(e,nG(t,1),[])}),av=ty||function(){return e4.Date.now()};/**
     * Creates a function that invokes `func`, with up to `n` arguments,
     * ignoring any additional arguments.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Function
     * @param {Function} func The function to cap arguments for.
     * @param {number} [n=func.length] The arity cap.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {Function} Returns the new capped function.
     * @example
     *
     * _.map(['6', '8', '10'], _.ary(parseInt, 1));
     * // => [6, 8, 10]
     */function ay(e,t,r){return t=r?n:t,t=e&&null==t?e.length:t,r7(e,128,n,n,n,n,t)}/**
     * Creates a function that invokes `func`, with the `this` binding and arguments
     * of the created function, while it's called less than `n` times. Subsequent
     * calls to the created function return the result of the last `func` invocation.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Function
     * @param {number} n The number of calls at which `func` is no longer invoked.
     * @param {Function} func The function to restrict.
     * @returns {Function} Returns the new restricted function.
     * @example
     *
     * jQuery(element).on('click', _.before(5, addContactToList));
     * // => Allows adding up to 4 contacts to the list.
     */function a_(e,t){var i;if("function"!=typeof t)throw new eT(r);return e=a5(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=n),i}}/**
     * Creates a function that invokes `func` with the `this` binding of `thisArg`
     * and `partials` prepended to the arguments it receives.
     *
     * The `_.bind.placeholder` value, which defaults to `_` in monolithic builds,
     * may be used as a placeholder for partially applied arguments.
     *
     * **Note:** Unlike native `Function#bind`, this method doesn't set the "length"
     * property of bound functions.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Function
     * @param {Function} func The function to bind.
     * @param {*} thisArg The `this` binding of `func`.
     * @param {...*} [partials] The arguments to be partially applied.
     * @returns {Function} Returns the new bound function.
     * @example
     *
     * function greet(greeting, punctuation) {
     *   return greeting + ' ' + this.user + punctuation;
     * }
     *
     * var object = { 'user': 'fred' };
     *
     * var bound = _.bind(greet, object, 'hi');
     * bound('!');
     * // => 'hi fred!'
     *
     * // Bound with placeholders.
     * var bound = _.bind(greet, object, _, '!');
     * bound('hi');
     * // => 'hi fred!'
     */var ax=rf(function(e,t,n){var r=1;if(n.length){var i=tH(n,iu(ax));r|=32}return r7(e,r,t,n,i)}),ab=rf(function(e,t,n){var r=3;if(n.length){var i=tH(n,iu(ab));r|=32}return r7(t,r,e,n,i)});/**
     * Creates a debounced function that delays invoking `func` until after `wait`
     * milliseconds have elapsed since the last time the debounced function was
     * invoked. The debounced function comes with a `cancel` method to cancel
     * delayed `func` invocations and a `flush` method to immediately invoke them.
     * Provide `options` to indicate whether `func` should be invoked on the
     * leading and/or trailing edge of the `wait` timeout. The `func` is invoked
     * with the last arguments provided to the debounced function. Subsequent
     * calls to the debounced function return the result of the last `func`
     * invocation.
     *
     * **Note:** If `leading` and `trailing` options are `true`, `func` is
     * invoked on the trailing edge of the timeout only if the debounced function
     * is invoked more than once during the `wait` timeout.
     *
     * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred
     * until to the next tick, similar to `setTimeout` with a timeout of `0`.
     *
     * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)
     * for details over the differences between `_.debounce` and `_.throttle`.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Function
     * @param {Function} func The function to debounce.
     * @param {number} [wait=0] The number of milliseconds to delay.
     * @param {Object} [options={}] The options object.
     * @param {boolean} [options.leading=false]
     *  Specify invoking on the leading edge of the timeout.
     * @param {number} [options.maxWait]
     *  The maximum time `func` is allowed to be delayed before it's invoked.
     * @param {boolean} [options.trailing=true]
     *  Specify invoking on the trailing edge of the timeout.
     * @returns {Function} Returns the new debounced function.
     * @example
     *
     * // Avoid costly calculations while the window size is in flux.
     * jQuery(window).on('resize', _.debounce(calculateLayout, 150));
     *
     * // Invoke `sendMail` when clicked, debouncing subsequent calls.
     * jQuery(element).on('click', _.debounce(sendMail, 300, {
     *   'leading': true,
     *   'trailing': false
     * }));
     *
     * // Ensure `batchLog` is invoked once after 1 second of debounced calls.
     * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });
     * var source = new EventSource('/stream');
     * jQuery(source).on('message', debounced);
     *
     * // Cancel the trailing debounced invocation.
     * jQuery(window).on('popstate', debounced.cancel);
     */function aS(e,t,i){var a,o,s,l,u,c,f=0,h=!1,d=!1,p=!0;if("function"!=typeof e)throw new eT(r);function m(t){var r=a,i=o;return a=o=n,f=t,l=e.apply(i,r)}function g(e){var r=e-c,i=e-f;// Either this is the first call, activity has stopped and we're at the
// trailing edge, the system time has gone backwards and we're treating
// it as the trailing edge, or we've hit the `maxWait` limit.
return c===n||r>=t||r<0||d&&i>=s}function v(){var e,n,r,i=av();if(g(i))return y(i);// Restart the timer.
u=iO(v,(e=i-c,n=i-f,r=t-e,d?t3(r,s-n):r))}function y(e){return(// Only invoke if we have `lastArgs` which means `func` has been
// debounced at least once.
(u=n,p&&a)?m(e):(a=o=n,l))}function _(){var e,r=av(),i=g(r);if(a=arguments,o=this,c=r,i){if(u===n)return(// Reset any `maxWait` timer.
f=e=c,// Start the timer for the trailing edge.
u=iO(v,t),h?m(e):l);if(d)return(// Handle invocations in a tight loop.
rI(u),u=iO(v,t),m(c))}return u===n&&(u=iO(v,t)),l}return t=a8(t)||0,aj(i)&&(h=!!i.leading,s=(d="maxWait"in i)?t2(a8(i.maxWait)||0,t):s,p="trailing"in i?!!i.trailing:p),_.cancel=function(){u!==n&&rI(u),f=0,a=c=o=u=n},_.flush=function(){return u===n?l:y(av())},_}/**
     * Defers invoking the `func` until the current call stack has cleared. Any
     * additional arguments are provided to `func` when it's invoked.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Function
     * @param {Function} func The function to defer.
     * @param {...*} [args] The arguments to invoke `func` with.
     * @returns {number} Returns the timer id.
     * @example
     *
     * _.defer(function(text) {
     *   console.log(text);
     * }, 'deferred');
     * // => Logs 'deferred' after one millisecond.
     */var aE=rf(function(e,t){return nD(e,1,t)}),aw=rf(function(e,t,n){return nD(e,a8(t)||0,n)});/**
     * Creates a function that memoizes the result of `func`. If `resolver` is
     * provided, it determines the cache key for storing the result based on the
     * arguments provided to the memoized function. By default, the first argument
     * provided to the memoized function is used as the map cache key. The `func`
     * is invoked with the `this` binding of the memoized function.
     *
     * **Note:** The cache is exposed as the `cache` property on the memoized
     * function. Its creation may be customized by replacing the `_.memoize.Cache`
     * constructor with one whose instances implement the
     * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)
     * method interface of `clear`, `delete`, `get`, `has`, and `set`.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Function
     * @param {Function} func The function to have its output memoized.
     * @param {Function} [resolver] The function to resolve the cache key.
     * @returns {Function} Returns the new memoized function.
     * @example
     *
     * var object = { 'a': 1, 'b': 2 };
     * var other = { 'c': 3, 'd': 4 };
     *
     * var values = _.memoize(_.values);
     * values(object);
     * // => [1, 2]
     *
     * values(other);
     * // => [3, 4]
     *
     * object.a = 2;
     * values(object);
     * // => [1, 2]
     *
     * // Modify the result cache.
     * values.cache.set(object, ['a', 'b']);
     * values(object);
     * // => ['a', 'b']
     *
     * // Replace `_.memoize.Cache`.
     * _.memoize.Cache = WeakMap;
     */function aM(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new eT(r);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(aM.Cache||nb),n}/**
     * Creates a function that negates the result of the predicate `func`. The
     * `func` predicate is invoked with the `this` binding and arguments of the
     * created function.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Function
     * @param {Function} predicate The predicate to negate.
     * @returns {Function} Returns the new negated function.
     * @example
     *
     * function isEven(n) {
     *   return n % 2 == 0;
     * }
     *
     * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));
     * // => [1, 3, 5]
     */function aT(e){if("function"!=typeof e)throw new eT(r);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}// Expose `MapCache`.
aM.Cache=nb;/**
     * Creates a function that invokes `func` with its arguments transformed.
     *
     * @static
     * @since 4.0.0
     * @memberOf _
     * @category Function
     * @param {Function} func The function to wrap.
     * @param {...(Function|Function[])} [transforms=[_.identity]]
     *  The argument transforms.
     * @returns {Function} Returns the new function.
     * @example
     *
     * function doubled(n) {
     *   return n * 2;
     * }
     *
     * function square(n) {
     *   return n * n;
     * }
     *
     * var func = _.overArgs(function(x, y) {
     *   return [x, y];
     * }, [square, doubled]);
     *
     * func(9, 3);
     * // => [81, 6]
     *
     * func(10, 5);
     * // => [100, 10]
     */var aA=rf(function(e,t){var n=(t=1==t.length&&aN(t[0])?td(t[0],tL(ic())):td(nG(t,1),tL(ic()))).length;return rf(function(r){for(var i=-1,a=t3(r.length,n);++i<a;)r[i]=t[i].call(this,r[i]);return to(e,this,r)})}),aC=rf(function(e,t){var r=tH(t,iu(aC));return r7(e,32,n,t,r)}),aP=rf(function(e,t){var r=tH(t,iu(aP));return r7(e,64,n,t,r)}),aR=ii(function(e,t){return r7(e,256,n,n,n,t)});/**
     * Performs a
     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
     * comparison between two values to determine if they are equivalent.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
     * @example
     *
     * var object = { 'a': 1 };
     * var other = { 'a': 1 };
     *
     * _.eq(object, object);
     * // => true
     *
     * _.eq(object, other);
     * // => false
     *
     * _.eq('a', 'a');
     * // => true
     *
     * _.eq('a', Object('a'));
     * // => false
     *
     * _.eq(NaN, NaN);
     * // => true
     */function aL(e,t){return e===t||e!=e&&t!=t}/**
     * Checks if `value` is greater than `other`.
     *
     * @static
     * @memberOf _
     * @since 3.9.0
     * @category Lang
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @returns {boolean} Returns `true` if `value` is greater than `other`,
     *  else `false`.
     * @see _.lt
     * @example
     *
     * _.gt(3, 1);
     * // => true
     *
     * _.gt(3, 3);
     * // => false
     *
     * _.gt(1, 3);
     * // => false
     */var aO=r3(nJ),aI=r3(function(e,t){return e>=t}),aU=n3(function(){return arguments}())?n3:function(e){return aX(e)&&eO.call(e,"callee")&&!eQ.call(e,"callee")},aN=ey.isArray,aD=te?tL(te):/**
     * The base implementation of `_.isArrayBuffer` without Node.js optimizations.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is an array buffer, else `false`.
     */function(e){return aX(e)&&nZ(e)==T};/**
     * Checks if `value` is array-like. A value is considered array-like if it's
     * not a function and has a `value.length` that's an integer greater than or
     * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is array-like, else `false`.
     * @example
     *
     * _.isArrayLike([1, 2, 3]);
     * // => true
     *
     * _.isArrayLike(document.body.children);
     * // => true
     *
     * _.isArrayLike('abc');
     * // => true
     *
     * _.isArrayLike(_.noop);
     * // => false
     */function ak(e){return null!=e&&aW(e.length)&&!aH(e)}/**
     * This method is like `_.isArrayLike` except that it also checks if `value`
     * is an object.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is an array-like object,
     *  else `false`.
     * @example
     *
     * _.isArrayLikeObject([1, 2, 3]);
     * // => true
     *
     * _.isArrayLikeObject(document.body.children);
     * // => true
     *
     * _.isArrayLikeObject('abc');
     * // => false
     *
     * _.isArrayLikeObject(_.noop);
     * // => false
     */function aF(e){return aX(e)&&ak(e)}/**
     * Checks if `value` is a buffer.
     *
     * @static
     * @memberOf _
     * @since 4.3.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.
     * @example
     *
     * _.isBuffer(new Buffer(2));
     * // => true
     *
     * _.isBuffer(new Uint8Array(2));
     * // => false
     */var az=tJ||oZ,aB=tt?tL(tt):/**
     * The base implementation of `_.isDate` without Node.js optimizations.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a date object, else `false`.
     */function(e){return aX(e)&&nZ(e)==d};/**
     * Checks if `value` is an `Error`, `EvalError`, `RangeError`, `ReferenceError`,
     * `SyntaxError`, `TypeError`, or `URIError` object.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is an error object, else `false`.
     * @example
     *
     * _.isError(new Error);
     * // => true
     *
     * _.isError(Error);
     * // => false
     */function aV(e){if(!aX(e))return!1;var t=nZ(e);return t==p||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!a$(e)}/**
     * Checks if `value` is classified as a `Function` object.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a function, else `false`.
     * @example
     *
     * _.isFunction(_);
     * // => true
     *
     * _.isFunction(/abc/);
     * // => false
     */function aH(e){if(!aj(e))return!1;// The use of `Object#toString` avoids issues with the `typeof` operator
// in Safari 9 which returns 'object' for typed arrays and other constructors.
var t=nZ(e);return t==m||t==g||"[object AsyncFunction]"==t||"[object Proxy]"==t}/**
     * Checks if `value` is an integer.
     *
     * **Note:** This method is based on
     * [`Number.isInteger`](https://mdn.io/Number/isInteger).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is an integer, else `false`.
     * @example
     *
     * _.isInteger(3);
     * // => true
     *
     * _.isInteger(Number.MIN_VALUE);
     * // => false
     *
     * _.isInteger(Infinity);
     * // => false
     *
     * _.isInteger('3');
     * // => false
     */function aG(e){return"number"==typeof e&&e==a5(e)}/**
     * Checks if `value` is a valid array-like length.
     *
     * **Note:** This method is loosely based on
     * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.
     * @example
     *
     * _.isLength(3);
     * // => true
     *
     * _.isLength(Number.MIN_VALUE);
     * // => false
     *
     * _.isLength(Infinity);
     * // => false
     *
     * _.isLength('3');
     * // => false
     */function aW(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}/**
     * Checks if `value` is the
     * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
     * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is an object, else `false`.
     * @example
     *
     * _.isObject({});
     * // => true
     *
     * _.isObject([1, 2, 3]);
     * // => true
     *
     * _.isObject(_.noop);
     * // => true
     *
     * _.isObject(null);
     * // => false
     */function aj(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}/**
     * Checks if `value` is object-like. A value is object-like if it's not `null`
     * and has a `typeof` result of "object".
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
     * @example
     *
     * _.isObjectLike({});
     * // => true
     *
     * _.isObjectLike([1, 2, 3]);
     * // => true
     *
     * _.isObjectLike(_.noop);
     * // => false
     *
     * _.isObjectLike(null);
     * // => false
     */function aX(e){return null!=e&&"object"==typeof e}/**
     * Checks if `value` is classified as a `Map` object.
     *
     * @static
     * @memberOf _
     * @since 4.3.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a map, else `false`.
     * @example
     *
     * _.isMap(new Map);
     * // => true
     *
     * _.isMap(new WeakMap);
     * // => false
     */var aq=tn?tL(tn):/**
     * The base implementation of `_.isMap` without Node.js optimizations.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a map, else `false`.
     */function(e){return aX(e)&&iv(e)==v};/**
     * Checks if `value` is classified as a `Number` primitive or object.
     *
     * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are
     * classified as numbers, use the `_.isFinite` method.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a number, else `false`.
     * @example
     *
     * _.isNumber(3);
     * // => true
     *
     * _.isNumber(Number.MIN_VALUE);
     * // => true
     *
     * _.isNumber(Infinity);
     * // => true
     *
     * _.isNumber('3');
     * // => false
     */function aY(e){return"number"==typeof e||aX(e)&&nZ(e)==y}/**
     * Checks if `value` is a plain object, that is, an object created by the
     * `Object` constructor or one with a `[[Prototype]]` of `null`.
     *
     * @static
     * @memberOf _
     * @since 0.8.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     * }
     *
     * _.isPlainObject(new Foo);
     * // => false
     *
     * _.isPlainObject([1, 2, 3]);
     * // => false
     *
     * _.isPlainObject({ 'x': 0, 'y': 0 });
     * // => true
     *
     * _.isPlainObject(Object.create(null));
     * // => true
     */function a$(e){if(!aX(e)||nZ(e)!=_)return!1;var t=ej(e);if(null===t)return!0;var n=eO.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&eL.call(n)==eD}/**
     * Checks if `value` is classified as a `RegExp` object.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.
     * @example
     *
     * _.isRegExp(/abc/);
     * // => true
     *
     * _.isRegExp('/abc/');
     * // => false
     */var aK=tr?tL(tr):/**
     * The base implementation of `_.isRegExp` without Node.js optimizations.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.
     */function(e){return aX(e)&&nZ(e)==b},aZ=ti?tL(ti):/**
     * The base implementation of `_.isSet` without Node.js optimizations.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a set, else `false`.
     */function(e){return aX(e)&&iv(e)==S};/**
     * Checks if `value` is classified as a `String` primitive or object.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a string, else `false`.
     * @example
     *
     * _.isString('abc');
     * // => true
     *
     * _.isString(1);
     * // => false
     */function aJ(e){return"string"==typeof e||!aN(e)&&aX(e)&&nZ(e)==E}/**
     * Checks if `value` is classified as a `Symbol` primitive or object.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.
     * @example
     *
     * _.isSymbol(Symbol.iterator);
     * // => true
     *
     * _.isSymbol('abc');
     * // => false
     */function aQ(e){return"symbol"==typeof e||aX(e)&&nZ(e)==w}/**
     * Checks if `value` is classified as a typed array.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.
     * @example
     *
     * _.isTypedArray(new Uint8Array);
     * // => true
     *
     * _.isTypedArray([]);
     * // => false
     */var a0=ta?tL(ta):/**
     * The base implementation of `_.isTypedArray` without Node.js optimizations.
     *
     * @private
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.
     */function(e){return aX(e)&&aW(e.length)&&!!eZ[nZ(e)]},a1=r3(n9),a2=r3(function(e,t){return e<=t});/**
     * Converts `value` to an array.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Lang
     * @param {*} value The value to convert.
     * @returns {Array} Returns the converted array.
     * @example
     *
     * _.toArray({ 'a': 1, 'b': 2 });
     * // => [1, 2]
     *
     * _.toArray('abc');
     * // => ['a', 'b', 'c']
     *
     * _.toArray(1);
     * // => []
     *
     * _.toArray(null);
     * // => []
     */function a3(e){if(!e)return[];if(ak(e))return aJ(e)?tj(e):rB(e);if(e5&&e[e5])return(/**
   * Converts `iterator` to an array.
   *
   * @private
   * @param {Object} iterator The iterator to convert.
   * @returns {Array} Returns the converted array.
   */function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[e5]()));var t=iv(e);return(t==v?tB:t==S?tG:ob)(e)}/**
     * Converts `value` to a finite number.
     *
     * @static
     * @memberOf _
     * @since 4.12.0
     * @category Lang
     * @param {*} value The value to convert.
     * @returns {number} Returns the converted number.
     * @example
     *
     * _.toFinite(3.2);
     * // => 3.2
     *
     * _.toFinite(Number.MIN_VALUE);
     * // => 5e-324
     *
     * _.toFinite(Infinity);
     * // => 1.7976931348623157e+308
     *
     * _.toFinite('3.2');
     * // => 3.2
     */function a4(e){return e?(e=a8(e))===o||e===-o?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}/**
     * Converts `value` to an integer.
     *
     * **Note:** This method is loosely based on
     * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to convert.
     * @returns {number} Returns the converted integer.
     * @example
     *
     * _.toInteger(3.2);
     * // => 3
     *
     * _.toInteger(Number.MIN_VALUE);
     * // => 0
     *
     * _.toInteger(Infinity);
     * // => 1.7976931348623157e+308
     *
     * _.toInteger('3.2');
     * // => 3
     */function a5(e){var t=a4(e),n=t%1;return t==t?n?t-n:t:0}/**
     * Converts `value` to an integer suitable for use as the length of an
     * array-like object.
     *
     * **Note:** This method is based on
     * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to convert.
     * @returns {number} Returns the converted integer.
     * @example
     *
     * _.toLength(3.2);
     * // => 3
     *
     * _.toLength(Number.MIN_VALUE);
     * // => 0
     *
     * _.toLength(Infinity);
     * // => 4294967295
     *
     * _.toLength('3.2');
     * // => 3
     */function a6(e){return e?nI(a5(e),0,4294967295):0}/**
     * Converts `value` to a number.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to process.
     * @returns {number} Returns the number.
     * @example
     *
     * _.toNumber(3.2);
     * // => 3.2
     *
     * _.toNumber(Number.MIN_VALUE);
     * // => 5e-324
     *
     * _.toNumber(Infinity);
     * // => Infinity
     *
     * _.toNumber('3.2');
     * // => 3.2
     */function a8(e){if("number"==typeof e)return e;if(aQ(e))return s;if(aj(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=aj(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=tR(e);var n=eu.test(e);return n||ef.test(e)?e1(e.slice(2),n?2:8):el.test(e)?s:+e}/**
     * Converts `value` to a plain object flattening inherited enumerable string
     * keyed properties of `value` to own properties of the plain object.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Lang
     * @param {*} value The value to convert.
     * @returns {Object} Returns the converted plain object.
     * @example
     *
     * function Foo() {
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.assign({ 'a': 1 }, new Foo);
     * // => { 'a': 1, 'b': 2 }
     *
     * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));
     * // => { 'a': 1, 'b': 2, 'c': 3 }
     */function a7(e){return rV(e,od(e))}/**
     * Converts `value` to a string. An empty string is returned for `null`
     * and `undefined` values. The sign of `-0` is preserved.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to convert.
     * @returns {string} Returns the converted string.
     * @example
     *
     * _.toString(null);
     * // => ''
     *
     * _.toString(-0);
     * // => '-0'
     *
     * _.toString([1, 2, 3]);
     * // => '1,2,3'
     */function a9(e){return null==e?"":rb(e)}/*------------------------------------------------------------------------*//**
     * Assigns own enumerable string keyed properties of source objects to the
     * destination object. Source objects are applied from left to right.
     * Subsequent sources overwrite property assignments of previous sources.
     *
     * **Note:** This method mutates `object` and is loosely based on
     * [`Object.assign`](https://mdn.io/Object/assign).
     *
     * @static
     * @memberOf _
     * @since 0.10.0
     * @category Object
     * @param {Object} object The destination object.
     * @param {...Object} [sources] The source objects.
     * @returns {Object} Returns `object`.
     * @see _.assignIn
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     * }
     *
     * function Bar() {
     *   this.c = 3;
     * }
     *
     * Foo.prototype.b = 2;
     * Bar.prototype.d = 4;
     *
     * _.assign({ 'a': 0 }, new Foo, new Bar);
     * // => { 'a': 1, 'c': 3 }
     */var oe=rG(function(e,t){if(iT(t)||ak(t)){rV(t,oh(t),e);return}for(var n in t)eO.call(t,n)&&nA(e,n,t[n])}),ot=rG(function(e,t){rV(t,od(t),e)}),on=rG(function(e,t,n,r){rV(t,od(t),e,r)}),or=rG(function(e,t,n,r){rV(t,oh(t),e,r)}),oi=ii(nO),oa=rf(function(e,t){e=eE(e);var r=-1,i=t.length,a=i>2?t[2]:n;for(a&&iS(t[0],t[1],a)&&(i=1);++r<i;)for(var o=t[r],s=od(o),l=-1,u=s.length;++l<u;){var c=s[l],f=e[c];(f===n||aL(f,eP[c])&&!eO.call(e,c))&&(e[c]=o[c])}return e}),oo=rf(function(e){return e.push(n,ie),to(om,n,e)});/**
     * Gets the value at `path` of `object`. If the resolved value is
     * `undefined`, the `defaultValue` is returned in its place.
     *
     * @static
     * @memberOf _
     * @since 3.7.0
     * @category Object
     * @param {Object} object The object to query.
     * @param {Array|string} path The path of the property to get.
     * @param {*} [defaultValue] The value returned for `undefined` resolved values.
     * @returns {*} Returns the resolved value.
     * @example
     *
     * var object = { 'a': [{ 'b': { 'c': 3 } }] };
     *
     * _.get(object, 'a[0].b.c');
     * // => 3
     *
     * _.get(object, ['a', '0', 'b', 'c']);
     * // => 3
     *
     * _.get(object, 'a.b.c', 'default');
     * // => 'default'
     */function os(e,t,r){var i=null==e?n:n$(e,t);return i===n?r:i}/**
     * Checks if `path` is a direct or inherited property of `object`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Object
     * @param {Object} object The object to query.
     * @param {Array|string} path The path to check.
     * @returns {boolean} Returns `true` if `path` exists, else `false`.
     * @example
     *
     * var object = _.create({ 'a': _.create({ 'b': 2 }) });
     *
     * _.hasIn(object, 'a');
     * // => true
     *
     * _.hasIn(object, 'a.b');
     * // => true
     *
     * _.hasIn(object, ['a', 'b']);
     * // => true
     *
     * _.hasIn(object, 'b');
     * // => false
     */function ol(e,t){return null!=e&&iy(e,t,n0)}/**
     * Creates an object composed of the inverted keys and values of `object`.
     * If `object` contains duplicate values, subsequent values overwrite
     * property assignments of previous values.
     *
     * @static
     * @memberOf _
     * @since 0.7.0
     * @category Object
     * @param {Object} object The object to invert.
     * @returns {Object} Returns the new inverted object.
     * @example
     *
     * var object = { 'a': 1, 'b': 2, 'c': 1 };
     *
     * _.invert(object);
     * // => { '1': 'c', '2': 'b' }
     */var ou=rJ(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=eN.call(t)),e[t]=n},oN(oF)),oc=rJ(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=eN.call(t)),eO.call(e,t)?e[t].push(n):e[t]=[n]},ic),of=rf(n2);/**
     * Creates an array of the own enumerable property names of `object`.
     *
     * **Note:** Non-object values are coerced to objects. See the
     * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)
     * for more details.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property names.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.keys(new Foo);
     * // => ['a', 'b'] (iteration order is not guaranteed)
     *
     * _.keys('hi');
     * // => ['0', '1']
     */function oh(e){return ak(e)?nw(e):n7(e)}/**
     * Creates an array of the own and inherited enumerable property names of `object`.
     *
     * **Note:** Non-object values are coerced to objects.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Object
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property names.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.keysIn(new Foo);
     * // => ['a', 'b', 'c'] (iteration order is not guaranteed)
     */function od(e){return ak(e)?nw(e,!0):/**
     * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property names.
     */function(e){if(!aj(e))return(/**
     * This function is like
     * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)
     * except that it includes inherited enumerable properties.
     *
     * @private
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property names.
     */function(e){var t=[];if(null!=e)for(var n in eE(e))t.push(n);return t}(e));var t=iT(e),n=[];for(var r in e)"constructor"==r&&(t||!eO.call(e,r))||n.push(r);return n}(e)}/**
     * This method is like `_.assign` except that it recursively merges own and
     * inherited enumerable string keyed properties of source objects into the
     * destination object. Source properties that resolve to `undefined` are
     * skipped if a destination value exists. Array and plain object properties
     * are merged recursively. Other objects and value types are overridden by
     * assignment. Source objects are applied from left to right. Subsequent
     * sources overwrite property assignments of previous sources.
     *
     * **Note:** This method mutates `object`.
     *
     * @static
     * @memberOf _
     * @since 0.5.0
     * @category Object
     * @param {Object} object The destination object.
     * @param {...Object} [sources] The source objects.
     * @returns {Object} Returns `object`.
     * @example
     *
     * var object = {
     *   'a': [{ 'b': 2 }, { 'd': 4 }]
     * };
     *
     * var other = {
     *   'a': [{ 'c': 3 }, { 'e': 5 }]
     * };
     *
     * _.merge(object, other);
     * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }
     */var op=rG(function(e,t,n){rr(e,t,n)}),om=rG(function(e,t,n,r){rr(e,t,n,r)}),og=ii(function(e,t){var n={};if(null==e)return n;var r=!1;t=td(t,function(t){return t=rL(t,e),r||(r=t.length>1),t}),rV(e,io(e),n),r&&(n=nU(n,7,it));for(var i=t.length;i--;)rE(n,t[i]);return n}),ov=ii(function(e,t){return null==e?{}:ro(e,t,function(t,n){return ol(e,n)})});/**
     * Creates an object composed of the `object` properties `predicate` returns
     * truthy for. The predicate is invoked with two arguments: (value, key).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Object
     * @param {Object} object The source object.
     * @param {Function} [predicate=_.identity] The function invoked per property.
     * @returns {Object} Returns the new object.
     * @example
     *
     * var object = { 'a': 1, 'b': '2', 'c': 3 };
     *
     * _.pickBy(object, _.isNumber);
     * // => { 'a': 1, 'c': 3 }
     */function oy(e,t){if(null==e)return{};var n=td(io(e),function(e){return[e]});return t=ic(t),ro(e,n,function(e,n){return t(e,n[0])})}/**
     * Creates an array of own enumerable string keyed-value pairs for `object`
     * which can be consumed by `_.fromPairs`. If `object` is a map or set, its
     * entries are returned.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @alias entries
     * @category Object
     * @param {Object} object The object to query.
     * @returns {Array} Returns the key-value pairs.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.toPairs(new Foo);
     * // => [['a', 1], ['b', 2]] (iteration order is not guaranteed)
     */var o_=r8(oh),ox=r8(od);/**
     * Creates an array of the own enumerable string keyed property values of `object`.
     *
     * **Note:** Non-object values are coerced to objects.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property values.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.values(new Foo);
     * // => [1, 2] (iteration order is not guaranteed)
     *
     * _.values('hi');
     * // => ['h', 'i']
     */function ob(e){return null==e?[]:tO(e,oh(e))}/*------------------------------------------------------------------------*//**
     * Converts `string` to [camel case](https://en.wikipedia.org/wiki/CamelCase).
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category String
     * @param {string} [string=''] The string to convert.
     * @returns {string} Returns the camel cased string.
     * @example
     *
     * _.camelCase('Foo Bar');
     * // => 'fooBar'
     *
     * _.camelCase('--foo-bar--');
     * // => 'fooBar'
     *
     * _.camelCase('__FOO_BAR__');
     * // => 'fooBar'
     */var oS=rq(function(e,t,n){return t=t.toLowerCase(),e+(n?oE(t):t)});/**
     * Converts the first character of `string` to upper case and the remaining
     * to lower case.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category String
     * @param {string} [string=''] The string to capitalize.
     * @returns {string} Returns the capitalized string.
     * @example
     *
     * _.capitalize('FRED');
     * // => 'Fred'
     */function oE(e){return oL(a9(e).toLowerCase())}/**
     * Deburrs `string` by converting
     * [Latin-1 Supplement](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)
     * and [Latin Extended-A](https://en.wikipedia.org/wiki/Latin_Extended-A)
     * letters to basic Latin letters and removing
     * [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category String
     * @param {string} [string=''] The string to deburr.
     * @returns {string} Returns the deburred string.
     * @example
     *
     * _.deburr('dj vu');
     * // => 'deja vu'
     */function ow(e){return(e=a9(e))&&e.replace(ed,tD).replace(eW,"")}/**
     * Converts `string` to
     * [kebab case](https://en.wikipedia.org/wiki/Letter_case#Special_case_styles).
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category String
     * @param {string} [string=''] The string to convert.
     * @returns {string} Returns the kebab cased string.
     * @example
     *
     * _.kebabCase('Foo Bar');
     * // => 'foo-bar'
     *
     * _.kebabCase('fooBar');
     * // => 'foo-bar'
     *
     * _.kebabCase('__FOO_BAR__');
     * // => 'foo-bar'
     */var oM=rq(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),oT=rq(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),oA=rX("toLowerCase"),oC=rq(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),oP=rq(function(e,t,n){return e+(n?" ":"")+oL(t)}),oR=rq(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),oL=rX("toUpperCase");/**
     * Splits `string` into an array of its words.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category String
     * @param {string} [string=''] The string to inspect.
     * @param {RegExp|string} [pattern] The pattern to match words.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {Array} Returns the words of `string`.
     * @example
     *
     * _.words('fred, barney, & pebbles');
     * // => ['fred', 'barney', 'pebbles']
     *
     * _.words('fred, barney, & pebbles', /[^, ]+/g);
     * // => ['fred', 'barney', '&', 'pebbles']
     */function oO(e,t,r){if(e=a9(e),(t=r?n:t)===n){var i;return(i=e,eY.test(i))?e.match(eX)||[]:e.match(er)||[]}return e.match(t)||[]}/*------------------------------------------------------------------------*//**
     * Attempts to invoke `func`, returning either the result or the caught error
     * object. Any additional arguments are provided to `func` when it's invoked.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Util
     * @param {Function} func The function to attempt.
     * @param {...*} [args] The arguments to invoke `func` with.
     * @returns {*} Returns the `func` result or error object.
     * @example
     *
     * // Avoid throwing errors for invalid selectors.
     * var elements = _.attempt(function(selector) {
     *   return document.querySelectorAll(selector);
     * }, '>_>');
     *
     * if (_.isError(elements)) {
     *   elements = [];
     * }
     */var oI=rf(function(e,t){try{return to(e,n,t)}catch(e){return aV(e)?e:new ex(e)}}),oU=ii(function(e,t){return tl(t,function(t){nL(e,t=iF(t),ax(e[t],e))}),e});/**
     * Creates a function that returns `value`.
     *
     * @static
     * @memberOf _
     * @since 2.4.0
     * @category Util
     * @param {*} value The value to return from the new function.
     * @returns {Function} Returns the new constant function.
     * @example
     *
     * var objects = _.times(2, _.constant({ 'a': 1 }));
     *
     * console.log(objects);
     * // => [{ 'a': 1 }, { 'a': 1 }]
     *
     * console.log(objects[0] === objects[1]);
     * // => true
     */function oN(e){return function(){return e}}/**
     * Creates a function that returns the result of invoking the given functions
     * with the `this` binding of the created function, where each successive
     * invocation is supplied the return value of the previous.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Util
     * @param {...(Function|Function[])} [funcs] The functions to invoke.
     * @returns {Function} Returns the new composite function.
     * @see _.flowRight
     * @example
     *
     * function square(n) {
     *   return n * n;
     * }
     *
     * var addSquare = _.flow([_.add, square]);
     * addSquare(1, 2);
     * // => 9
     */var oD=rK(),ok=rK(!0);/**
     * This method returns the first argument it receives.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Util
     * @param {*} value Any value.
     * @returns {*} Returns `value`.
     * @example
     *
     * var object = { 'a': 1 };
     *
     * console.log(_.identity(object) === object);
     * // => true
     */function oF(e){return e}/**
     * Creates a function that invokes `func` with the arguments of the created
     * function. If `func` is a property name, the created function returns the
     * property value for a given element. If `func` is an array or object, the
     * created function returns `true` for elements that contain the equivalent
     * source properties, otherwise it returns `false`.
     *
     * @static
     * @since 4.0.0
     * @memberOf _
     * @category Util
     * @param {*} [func=_.identity] The value to convert to a callback.
     * @returns {Function} Returns the callback.
     * @example
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36, 'active': true },
     *   { 'user': 'fred',   'age': 40, 'active': false }
     * ];
     *
     * // The `_.matches` iteratee shorthand.
     * _.filter(users, _.iteratee({ 'user': 'barney', 'active': true }));
     * // => [{ 'user': 'barney', 'age': 36, 'active': true }]
     *
     * // The `_.matchesProperty` iteratee shorthand.
     * _.filter(users, _.iteratee(['user', 'fred']));
     * // => [{ 'user': 'fred', 'age': 40 }]
     *
     * // The `_.property` iteratee shorthand.
     * _.map(users, _.iteratee('user'));
     * // => ['barney', 'fred']
     *
     * // Create custom iteratee shorthands.
     * _.iteratee = _.wrap(_.iteratee, function(iteratee, func) {
     *   return !_.isRegExp(func) ? iteratee(func) : function(string) {
     *     return func.test(string);
     *   };
     * });
     *
     * _.filter(['abc', 'def'], /ef/);
     * // => ['def']
     */function oz(e){return n8("function"==typeof e?e:nU(e,1))}/**
     * Creates a function that invokes the method at `path` of a given object.
     * Any additional arguments are provided to the invoked method.
     *
     * @static
     * @memberOf _
     * @since 3.7.0
     * @category Util
     * @param {Array|string} path The path of the method to invoke.
     * @param {...*} [args] The arguments to invoke the method with.
     * @returns {Function} Returns the new invoker function.
     * @example
     *
     * var objects = [
     *   { 'a': { 'b': _.constant(2) } },
     *   { 'a': { 'b': _.constant(1) } }
     * ];
     *
     * _.map(objects, _.method('a.b'));
     * // => [2, 1]
     *
     * _.map(objects, _.method(['a', 'b']));
     * // => [2, 1]
     */var oB=rf(function(e,t){return function(n){return n2(n,e,t)}}),oV=rf(function(e,t){return function(n){return n2(e,n,t)}});/**
     * Adds all own enumerable string keyed function properties of a source
     * object to the destination object. If `object` is a function, then methods
     * are added to its prototype as well.
     *
     * **Note:** Use `_.runInContext` to create a pristine `lodash` function to
     * avoid conflicts caused by modifying the original.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Util
     * @param {Function|Object} [object=lodash] The destination object.
     * @param {Object} source The object of functions to add.
     * @param {Object} [options={}] The options object.
     * @param {boolean} [options.chain=true] Specify whether mixins are chainable.
     * @returns {Function|Object} Returns `object`.
     * @example
     *
     * function vowels(string) {
     *   return _.filter(string, function(v) {
     *     return /[aeiou]/i.test(v);
     *   });
     * }
     *
     * _.mixin({ 'vowels': vowels });
     * _.vowels('fred');
     * // => ['e']
     *
     * _('fred').vowels().value();
     * // => ['e']
     *
     * _.mixin({ 'vowels': vowels }, { 'chain': false });
     * _('fred').vowels();
     * // => ['e']
     */function oH(e,t,n){var r=oh(t),i=nY(t,r);null!=n||aj(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=nY(t,oh(t)));var a=!(aj(n)&&"chain"in n)||!!n.chain,o=aH(e);return tl(i,function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__);return(n.__actions__=rB(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,tp([this.value()],arguments))})}),e}/**
     * This method returns `undefined`.
     *
     * @static
     * @memberOf _
     * @since 2.3.0
     * @category Util
     * @example
     *
     * _.times(2, _.noop);
     * // => [undefined, undefined]
     */function oG(){// No operation performed.
}/**
     * Creates a function that invokes `iteratees` with the arguments it receives
     * and returns their results.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Util
     * @param {...(Function|Function[])} [iteratees=[_.identity]]
     *  The iteratees to invoke.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var func = _.over([Math.max, Math.min]);
     *
     * func(1, 2, 3, 4);
     * // => [4, 1]
     */var oW=r0(td),oj=r0(tu),oX=r0(tv);/**
     * Creates a function that returns the value at `path` of a given object.
     *
     * @static
     * @memberOf _
     * @since 2.4.0
     * @category Util
     * @param {Array|string} path The path of the property to get.
     * @returns {Function} Returns the new accessor function.
     * @example
     *
     * var objects = [
     *   { 'a': { 'b': 2 } },
     *   { 'a': { 'b': 1 } }
     * ];
     *
     * _.map(objects, _.property('a.b'));
     * // => [2, 1]
     *
     * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');
     * // => [1, 2]
     */function oq(e){return iE(e)?tM(iF(e)):function(t){return n$(t,e)}}/**
     * Creates an array of numbers (positive and/or negative) progressing from
     * `start` up to, but not including, `end`. A step of `-1` is used if a negative
     * `start` is specified without an `end` or `step`. If `end` is not specified,
     * it's set to `start` with `start` then set to `0`.
     *
     * **Note:** JavaScript follows the IEEE-754 standard for resolving
     * floating-point values which can produce unexpected results.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Util
     * @param {number} [start=0] The start of the range.
     * @param {number} end The end of the range.
     * @param {number} [step=1] The value to increment or decrement by.
     * @returns {Array} Returns the range of numbers.
     * @see _.inRange, _.rangeRight
     * @example
     *
     * _.range(4);
     * // => [0, 1, 2, 3]
     *
     * _.range(-4);
     * // => [0, -1, -2, -3]
     *
     * _.range(1, 5);
     * // => [1, 2, 3, 4]
     *
     * _.range(0, 20, 5);
     * // => [0, 5, 10, 15]
     *
     * _.range(0, -4, -1);
     * // => [0, -1, -2, -3]
     *
     * _.range(1, 4, 0);
     * // => [1, 1, 1]
     *
     * _.range(0);
     * // => []
     */var oY=r2(),o$=r2(!0);/**
     * This method returns a new empty array.
     *
     * @static
     * @memberOf _
     * @since 4.13.0
     * @category Util
     * @returns {Array} Returns the new empty array.
     * @example
     *
     * var arrays = _.times(2, _.stubArray);
     *
     * console.log(arrays);
     * // => [[], []]
     *
     * console.log(arrays[0] === arrays[1]);
     * // => false
     */function oK(){return[]}/**
     * This method returns `false`.
     *
     * @static
     * @memberOf _
     * @since 4.13.0
     * @category Util
     * @returns {boolean} Returns `false`.
     * @example
     *
     * _.times(2, _.stubFalse);
     * // => [false, false]
     */function oZ(){return!1}/*------------------------------------------------------------------------*//**
     * Adds two numbers.
     *
     * @static
     * @memberOf _
     * @since 3.4.0
     * @category Math
     * @param {number} augend The first number in an addition.
     * @param {number} addend The second number in an addition.
     * @returns {number} Returns the total.
     * @example
     *
     * _.add(6, 4);
     * // => 10
     */var oJ=rQ(function(e,t){return e+t},0),oQ=r5("ceil"),o0=rQ(function(e,t){return e/t},1),o1=r5("floor"),o2=rQ(function(e,t){return e*t},1),o3=r5("round"),o4=rQ(function(e,t){return e-t},0);return(/*------------------------------------------------------------------------*/// Add methods that return wrapped values in chain sequences.
np.after=/*------------------------------------------------------------------------*//**
     * The opposite of `_.before`; this method creates a function that invokes
     * `func` once it's called `n` or more times.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Function
     * @param {number} n The number of calls before `func` is invoked.
     * @param {Function} func The function to restrict.
     * @returns {Function} Returns the new restricted function.
     * @example
     *
     * var saves = ['profile', 'settings'];
     *
     * var done = _.after(saves.length, function() {
     *   console.log('done saving!');
     * });
     *
     * _.forEach(saves, function(type) {
     *   asyncSave({ 'type': type, 'complete': done });
     * });
     * // => Logs 'done saving!' after the two async saves have completed.
     */function(e,t){if("function"!=typeof t)throw new eT(r);return e=a5(e),function(){if(--e<1)return t.apply(this,arguments)}},np.ary=ay,np.assign=oe,np.assignIn=ot,np.assignInWith=on,np.assignWith=or,np.at=oi,np.before=a_,np.bind=ax,np.bindAll=oU,np.bindKey=ab,np.castArray=/*------------------------------------------------------------------------*//**
     * Casts `value` as an array if it's not one.
     *
     * @static
     * @memberOf _
     * @since 4.4.0
     * @category Lang
     * @param {*} value The value to inspect.
     * @returns {Array} Returns the cast array.
     * @example
     *
     * _.castArray(1);
     * // => [1]
     *
     * _.castArray({ 'a': 1 });
     * // => [{ 'a': 1 }]
     *
     * _.castArray('abc');
     * // => ['abc']
     *
     * _.castArray(null);
     * // => [null]
     *
     * _.castArray(undefined);
     * // => [undefined]
     *
     * _.castArray();
     * // => []
     *
     * var array = [1, 2, 3];
     * console.log(_.castArray(array) === array);
     * // => true
     */function(){if(!arguments.length)return[];var e=arguments[0];return aN(e)?e:[e]},np.chain=ar,np.chunk=/*------------------------------------------------------------------------*//**
     * Creates an array of elements split into groups the length of `size`.
     * If `array` can't be split evenly, the final chunk will be the remaining
     * elements.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Array
     * @param {Array} array The array to process.
     * @param {number} [size=1] The length of each chunk
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {Array} Returns the new array of chunks.
     * @example
     *
     * _.chunk(['a', 'b', 'c', 'd'], 2);
     * // => [['a', 'b'], ['c', 'd']]
     *
     * _.chunk(['a', 'b', 'c', 'd'], 3);
     * // => [['a', 'b', 'c'], ['d']]
     */function(e,t,r){t=(r?iS(e,t,r):t===n)?1:t2(a5(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var a=0,o=0,s=ey(t$(i/t));a<i;)s[o++]=rm(e,a,a+=t);return s},np.compact=/**
     * Creates an array with all falsey values removed. The values `false`, `null`,
     * `0`, `""`, `undefined`, and `NaN` are falsey.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Array
     * @param {Array} array The array to compact.
     * @returns {Array} Returns the new array of filtered values.
     * @example
     *
     * _.compact([0, 1, false, 2, '', 3]);
     * // => [1, 2, 3]
     */function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i},np.concat=/**
     * Creates a new array concatenating `array` with any additional arrays
     * and/or values.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} array The array to concatenate.
     * @param {...*} [values] The values to concatenate.
     * @returns {Array} Returns the new concatenated array.
     * @example
     *
     * var array = [1];
     * var other = _.concat(array, 2, [3], [[4]]);
     *
     * console.log(other);
     * // => [1, 2, 3, [4]]
     *
     * console.log(array);
     * // => [1]
     */function(){var e=arguments.length;if(!e)return[];for(var t=ey(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return tp(aN(n)?rB(n):[n],nG(t,1))},np.cond=/**
     * Creates a function that iterates over `pairs` and invokes the corresponding
     * function of the first predicate to return truthy. The predicate-function
     * pairs are invoked with the `this` binding and arguments of the created
     * function.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Util
     * @param {Array} pairs The predicate-function pairs.
     * @returns {Function} Returns the new composite function.
     * @example
     *
     * var func = _.cond([
     *   [_.matches({ 'a': 1 }),           _.constant('matches A')],
     *   [_.conforms({ 'b': _.isNumber }), _.constant('matches B')],
     *   [_.stubTrue,                      _.constant('no match')]
     * ]);
     *
     * func({ 'a': 1, 'b': 2 });
     * // => 'matches A'
     *
     * func({ 'a': 0, 'b': 1 });
     * // => 'matches B'
     *
     * func({ 'a': '1', 'b': '2' });
     * // => 'no match'
     */function(e){var t=null==e?0:e.length,n=ic();return e=t?td(e,function(e){if("function"!=typeof e[1])throw new eT(r);return[n(e[0]),e[1]]}):[],rf(function(n){for(var r=-1;++r<t;){var i=e[r];if(to(i[0],this,n))return to(i[1],this,n)}})},np.conforms=/**
     * Creates a function that invokes the predicate properties of `source` with
     * the corresponding property values of a given object, returning `true` if
     * all predicates return truthy, else `false`.
     *
     * **Note:** The created function is equivalent to `_.conformsTo` with
     * `source` partially applied.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Util
     * @param {Object} source The object of property predicates to conform to.
     * @returns {Function} Returns the new spec function.
     * @example
     *
     * var objects = [
     *   { 'a': 2, 'b': 1 },
     *   { 'a': 1, 'b': 2 }
     * ];
     *
     * _.filter(objects, _.conforms({ 'b': function(n) { return n > 1; } }));
     * // => [{ 'a': 1, 'b': 2 }]
     */function(e){var t,n;return n=oh(t=nU(e,1)),function(e){return nN(e,t,n)}},np.constant=oN,np.countBy=ao,np.create=/**
     * Creates an object that inherits from the `prototype` object. If a
     * `properties` object is given, its own enumerable string keyed properties
     * are assigned to the created object.
     *
     * @static
     * @memberOf _
     * @since 2.3.0
     * @category Object
     * @param {Object} prototype The object to inherit from.
     * @param {Object} [properties] The properties to assign to the object.
     * @returns {Object} Returns the new object.
     * @example
     *
     * function Shape() {
     *   this.x = 0;
     *   this.y = 0;
     * }
     *
     * function Circle() {
     *   Shape.call(this);
     * }
     *
     * Circle.prototype = _.create(Shape.prototype, {
     *   'constructor': Circle
     * });
     *
     * var circle = new Circle;
     * circle instanceof Circle;
     * // => true
     *
     * circle instanceof Shape;
     * // => true
     */function(e,t){var n=nm(e);return null==t?n:nR(n,t)},np.curry=/**
     * Creates a function that accepts arguments of `func` and either invokes
     * `func` returning its result, if at least `arity` number of arguments have
     * been provided, or returns a function that accepts the remaining `func`
     * arguments, and so on. The arity of `func` may be specified if `func.length`
     * is not sufficient.
     *
     * The `_.curry.placeholder` value, which defaults to `_` in monolithic builds,
     * may be used as a placeholder for provided arguments.
     *
     * **Note:** This method doesn't set the "length" property of curried functions.
     *
     * @static
     * @memberOf _
     * @since 2.0.0
     * @category Function
     * @param {Function} func The function to curry.
     * @param {number} [arity=func.length] The arity of `func`.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {Function} Returns the new curried function.
     * @example
     *
     * var abc = function(a, b, c) {
     *   return [a, b, c];
     * };
     *
     * var curried = _.curry(abc);
     *
     * curried(1)(2)(3);
     * // => [1, 2, 3]
     *
     * curried(1, 2)(3);
     * // => [1, 2, 3]
     *
     * curried(1, 2, 3);
     * // => [1, 2, 3]
     *
     * // Curried with placeholders.
     * curried(1)(_, 3)(2);
     * // => [1, 2, 3]
     */function e(t,r,i){r=i?n:r;var a=r7(t,8,n,n,n,n,n,r);return a.placeholder=e.placeholder,a},np.curryRight=/**
     * This method is like `_.curry` except that arguments are applied to `func`
     * in the manner of `_.partialRight` instead of `_.partial`.
     *
     * The `_.curryRight.placeholder` value, which defaults to `_` in monolithic
     * builds, may be used as a placeholder for provided arguments.
     *
     * **Note:** This method doesn't set the "length" property of curried functions.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Function
     * @param {Function} func The function to curry.
     * @param {number} [arity=func.length] The arity of `func`.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {Function} Returns the new curried function.
     * @example
     *
     * var abc = function(a, b, c) {
     *   return [a, b, c];
     * };
     *
     * var curried = _.curryRight(abc);
     *
     * curried(3)(2)(1);
     * // => [1, 2, 3]
     *
     * curried(2, 3)(1);
     * // => [1, 2, 3]
     *
     * curried(1, 2, 3);
     * // => [1, 2, 3]
     *
     * // Curried with placeholders.
     * curried(3)(1, _)(2);
     * // => [1, 2, 3]
     */function e(t,r,i){r=i?n:r;var a=r7(t,16,n,n,n,n,n,r);return a.placeholder=e.placeholder,a},np.debounce=aS,np.defaults=oa,np.defaultsDeep=oo,np.defer=aE,np.delay=aw,np.difference=iV,np.differenceBy=iH,np.differenceWith=iG,np.drop=/**
     * Creates a slice of `array` with `n` elements dropped from the beginning.
     *
     * @static
     * @memberOf _
     * @since 0.5.0
     * @category Array
     * @param {Array} array The array to query.
     * @param {number} [n=1] The number of elements to drop.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.drop([1, 2, 3]);
     * // => [2, 3]
     *
     * _.drop([1, 2, 3], 2);
     * // => [3]
     *
     * _.drop([1, 2, 3], 5);
     * // => []
     *
     * _.drop([1, 2, 3], 0);
     * // => [1, 2, 3]
     */function(e,t,r){var i=null==e?0:e.length;return i?rm(e,(t=r||t===n?1:a5(t))<0?0:t,i):[]},np.dropRight=/**
     * Creates a slice of `array` with `n` elements dropped from the end.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Array
     * @param {Array} array The array to query.
     * @param {number} [n=1] The number of elements to drop.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.dropRight([1, 2, 3]);
     * // => [1, 2]
     *
     * _.dropRight([1, 2, 3], 2);
     * // => [1]
     *
     * _.dropRight([1, 2, 3], 5);
     * // => []
     *
     * _.dropRight([1, 2, 3], 0);
     * // => [1, 2, 3]
     */function(e,t,r){var i=null==e?0:e.length;return i?rm(e,0,(t=i-(t=r||t===n?1:a5(t)))<0?0:t):[]},np.dropRightWhile=/**
     * Creates a slice of `array` excluding elements dropped from the end.
     * Elements are dropped until `predicate` returns falsey. The predicate is
     * invoked with three arguments: (value, index, array).
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Array
     * @param {Array} array The array to query.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * var users = [
     *   { 'user': 'barney',  'active': true },
     *   { 'user': 'fred',    'active': false },
     *   { 'user': 'pebbles', 'active': false }
     * ];
     *
     * _.dropRightWhile(users, function(o) { return !o.active; });
     * // => objects for ['barney']
     *
     * // The `_.matches` iteratee shorthand.
     * _.dropRightWhile(users, { 'user': 'pebbles', 'active': false });
     * // => objects for ['barney', 'fred']
     *
     * // The `_.matchesProperty` iteratee shorthand.
     * _.dropRightWhile(users, ['active', false]);
     * // => objects for ['barney']
     *
     * // The `_.property` iteratee shorthand.
     * _.dropRightWhile(users, 'active');
     * // => objects for ['barney', 'fred', 'pebbles']
     */function(e,t){return e&&e.length?rM(e,ic(t,3),!0,!0):[]},np.dropWhile=/**
     * Creates a slice of `array` excluding elements dropped from the beginning.
     * Elements are dropped until `predicate` returns falsey. The predicate is
     * invoked with three arguments: (value, index, array).
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Array
     * @param {Array} array The array to query.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * var users = [
     *   { 'user': 'barney',  'active': false },
     *   { 'user': 'fred',    'active': false },
     *   { 'user': 'pebbles', 'active': true }
     * ];
     *
     * _.dropWhile(users, function(o) { return !o.active; });
     * // => objects for ['pebbles']
     *
     * // The `_.matches` iteratee shorthand.
     * _.dropWhile(users, { 'user': 'barney', 'active': false });
     * // => objects for ['fred', 'pebbles']
     *
     * // The `_.matchesProperty` iteratee shorthand.
     * _.dropWhile(users, ['active', false]);
     * // => objects for ['pebbles']
     *
     * // The `_.property` iteratee shorthand.
     * _.dropWhile(users, 'active');
     * // => objects for ['barney', 'fred', 'pebbles']
     */function(e,t){return e&&e.length?rM(e,ic(t,3),!0):[]},np.fill=/**
     * Fills elements of `array` with `value` from `start` up to, but not
     * including, `end`.
     *
     * **Note:** This method mutates `array`.
     *
     * @static
     * @memberOf _
     * @since 3.2.0
     * @category Array
     * @param {Array} array The array to fill.
     * @param {*} value The value to fill `array` with.
     * @param {number} [start=0] The start position.
     * @param {number} [end=array.length] The end position.
     * @returns {Array} Returns `array`.
     * @example
     *
     * var array = [1, 2, 3];
     *
     * _.fill(array, 'a');
     * console.log(array);
     * // => ['a', 'a', 'a']
     *
     * _.fill(Array(3), 2);
     * // => [2, 2, 2]
     *
     * _.fill([4, 6, 8, 10], '*', 1, 3);
     * // => [4, '*', '*', 10]
     */function(e,t,r,i){var a=null==e?0:e.length;return a?(r&&"number"!=typeof r&&iS(e,t,r)&&(r=0,i=a),/**
     * The base implementation of `_.fill` without an iteratee call guard.
     *
     * @private
     * @param {Array} array The array to fill.
     * @param {*} value The value to fill `array` with.
     * @param {number} [start=0] The start position.
     * @param {number} [end=array.length] The end position.
     * @returns {Array} Returns `array`.
     */function(e,t,r,i){var a=e.length;for((r=a5(r))<0&&(r=-r>a?0:a+r),(i=i===n||i>a?a:a5(i))<0&&(i+=a),i=r>i?0:a6(i);r<i;)e[r++]=t;return e}(e,t,r,i)):[]},np.filter=/**
     * Iterates over elements of `collection`, returning an array of all elements
     * `predicate` returns truthy for. The predicate is invoked with three
     * arguments: (value, index|key, collection).
     *
     * **Note:** Unlike `_.remove`, this method returns a new array.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @returns {Array} Returns the new filtered array.
     * @see _.reject
     * @example
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36, 'active': true },
     *   { 'user': 'fred',   'age': 40, 'active': false }
     * ];
     *
     * _.filter(users, function(o) { return !o.active; });
     * // => objects for ['fred']
     *
     * // The `_.matches` iteratee shorthand.
     * _.filter(users, { 'age': 36, 'active': true });
     * // => objects for ['barney']
     *
     * // The `_.matchesProperty` iteratee shorthand.
     * _.filter(users, ['active', false]);
     * // => objects for ['fred']
     *
     * // The `_.property` iteratee shorthand.
     * _.filter(users, 'active');
     * // => objects for ['barney']
     *
     * // Combining several predicates using `_.overEvery` or `_.overSome`.
     * _.filter(users, _.overSome([{ 'age': 36 }, ['age', 40]]));
     * // => objects for ['fred', 'barney']
     */function(e,t){return(aN(e)?tc:nH)(e,ic(t,3))},np.flatMap=/**
     * Creates a flattened array of values by running each element in `collection`
     * thru `iteratee` and flattening the mapped results. The iteratee is invoked
     * with three arguments: (value, index|key, collection).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @returns {Array} Returns the new flattened array.
     * @example
     *
     * function duplicate(n) {
     *   return [n, n];
     * }
     *
     * _.flatMap([1, 2], duplicate);
     * // => [1, 1, 2, 2]
     */function(e,t){return nG(ap(e,t),1)},np.flatMapDeep=/**
     * This method is like `_.flatMap` except that it recursively flattens the
     * mapped results.
     *
     * @static
     * @memberOf _
     * @since 4.7.0
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @returns {Array} Returns the new flattened array.
     * @example
     *
     * function duplicate(n) {
     *   return [[[n, n]]];
     * }
     *
     * _.flatMapDeep([1, 2], duplicate);
     * // => [1, 1, 2, 2]
     */function(e,t){return nG(ap(e,t),o)},np.flatMapDepth=/**
     * This method is like `_.flatMap` except that it recursively flattens the
     * mapped results up to `depth` times.
     *
     * @static
     * @memberOf _
     * @since 4.7.0
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {number} [depth=1] The maximum recursion depth.
     * @returns {Array} Returns the new flattened array.
     * @example
     *
     * function duplicate(n) {
     *   return [[[n, n]]];
     * }
     *
     * _.flatMapDepth([1, 2], duplicate, 2);
     * // => [[1, 1], [2, 2]]
     */function(e,t,r){return r=r===n?1:a5(r),nG(ap(e,t),r)},np.flatten=iX,np.flattenDeep=/**
     * Recursively flattens `array`.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Array
     * @param {Array} array The array to flatten.
     * @returns {Array} Returns the new flattened array.
     * @example
     *
     * _.flattenDeep([1, [2, [3, [4]], 5]]);
     * // => [1, 2, 3, 4, 5]
     */function(e){return(null==e?0:e.length)?nG(e,o):[]},np.flattenDepth=/**
     * Recursively flatten `array` up to `depth` times.
     *
     * @static
     * @memberOf _
     * @since 4.4.0
     * @category Array
     * @param {Array} array The array to flatten.
     * @param {number} [depth=1] The maximum recursion depth.
     * @returns {Array} Returns the new flattened array.
     * @example
     *
     * var array = [1, [2, [3, [4]], 5]];
     *
     * _.flattenDepth(array, 1);
     * // => [1, 2, [3, [4]], 5]
     *
     * _.flattenDepth(array, 2);
     * // => [1, 2, 3, [4], 5]
     */function(e,t){return(null==e?0:e.length)?nG(e,t=t===n?1:a5(t)):[]},np.flip=/**
     * Creates a function that invokes `func` with arguments reversed.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Function
     * @param {Function} func The function to flip arguments for.
     * @returns {Function} Returns the new flipped function.
     * @example
     *
     * var flipped = _.flip(function() {
     *   return _.toArray(arguments);
     * });
     *
     * flipped('a', 'b', 'c', 'd');
     * // => ['d', 'c', 'b', 'a']
     */function(e){return r7(e,512)},np.flow=oD,np.flowRight=ok,np.fromPairs=/**
     * The inverse of `_.toPairs`; this method returns an object composed
     * from key-value `pairs`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} pairs The key-value pairs.
     * @returns {Object} Returns the new object.
     * @example
     *
     * _.fromPairs([['a', 1], ['b', 2]]);
     * // => { 'a': 1, 'b': 2 }
     */function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},np.functions=/**
     * Creates an array of function property names from own enumerable properties
     * of `object`.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Object
     * @param {Object} object The object to inspect.
     * @returns {Array} Returns the function names.
     * @see _.functionsIn
     * @example
     *
     * function Foo() {
     *   this.a = _.constant('a');
     *   this.b = _.constant('b');
     * }
     *
     * Foo.prototype.c = _.constant('c');
     *
     * _.functions(new Foo);
     * // => ['a', 'b']
     */function(e){return null==e?[]:nY(e,oh(e))},np.functionsIn=/**
     * Creates an array of function property names from own and inherited
     * enumerable properties of `object`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Object
     * @param {Object} object The object to inspect.
     * @returns {Array} Returns the function names.
     * @see _.functions
     * @example
     *
     * function Foo() {
     *   this.a = _.constant('a');
     *   this.b = _.constant('b');
     * }
     *
     * Foo.prototype.c = _.constant('c');
     *
     * _.functionsIn(new Foo);
     * // => ['a', 'b', 'c']
     */function(e){return null==e?[]:nY(e,od(e))},np.groupBy=af,np.initial=/**
     * Gets all but the last element of `array`.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Array
     * @param {Array} array The array to query.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.initial([1, 2, 3]);
     * // => [1, 2]
     */function(e){return(null==e?0:e.length)?rm(e,0,-1):[]},np.intersection=iY,np.intersectionBy=i$,np.intersectionWith=iK,np.invert=ou,np.invertBy=oc,np.invokeMap=ah,np.iteratee=oz,np.keyBy=ad,np.keys=oh,np.keysIn=od,np.map=ap,np.mapKeys=/**
     * The opposite of `_.mapValues`; this method creates an object with the
     * same values as `object` and keys generated by running each own enumerable
     * string keyed property of `object` thru `iteratee`. The iteratee is invoked
     * with three arguments: (value, key, object).
     *
     * @static
     * @memberOf _
     * @since 3.8.0
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @returns {Object} Returns the new mapped object.
     * @see _.mapValues
     * @example
     *
     * _.mapKeys({ 'a': 1, 'b': 2 }, function(value, key) {
     *   return key + value;
     * });
     * // => { 'a1': 1, 'b2': 2 }
     */function(e,t){var n={};return t=ic(t,3),nX(e,function(e,r,i){nL(n,t(e,r,i),e)}),n},np.mapValues=/**
     * Creates an object with the same keys as `object` and values generated
     * by running each own enumerable string keyed property of `object` thru
     * `iteratee`. The iteratee is invoked with three arguments:
     * (value, key, object).
     *
     * @static
     * @memberOf _
     * @since 2.4.0
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @returns {Object} Returns the new mapped object.
     * @see _.mapKeys
     * @example
     *
     * var users = {
     *   'fred':    { 'user': 'fred',    'age': 40 },
     *   'pebbles': { 'user': 'pebbles', 'age': 1 }
     * };
     *
     * _.mapValues(users, function(o) { return o.age; });
     * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)
     *
     * // The `_.property` iteratee shorthand.
     * _.mapValues(users, 'age');
     * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)
     */function(e,t){var n={};return t=ic(t,3),nX(e,function(e,r,i){nL(n,r,t(e,r,i))}),n},np.matches=/**
     * Creates a function that performs a partial deep comparison between a given
     * object and `source`, returning `true` if the given object has equivalent
     * property values, else `false`.
     *
     * **Note:** The created function is equivalent to `_.isMatch` with `source`
     * partially applied.
     *
     * Partial comparisons will match empty array and empty object `source`
     * values against any array or object value, respectively. See `_.isEqual`
     * for a list of supported value comparisons.
     *
     * **Note:** Multiple values can be checked by combining several matchers
     * using `_.overSome`
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Util
     * @param {Object} source The object of property values to match.
     * @returns {Function} Returns the new spec function.
     * @example
     *
     * var objects = [
     *   { 'a': 1, 'b': 2, 'c': 3 },
     *   { 'a': 4, 'b': 5, 'c': 6 }
     * ];
     *
     * _.filter(objects, _.matches({ 'a': 4, 'c': 6 }));
     * // => [{ 'a': 4, 'b': 5, 'c': 6 }]
     *
     * // Checking for several possible values
     * _.filter(objects, _.overSome([_.matches({ 'a': 1 }), _.matches({ 'a': 4 })]));
     * // => [{ 'a': 1, 'b': 2, 'c': 3 }, { 'a': 4, 'b': 5, 'c': 6 }]
     */function(e){return rt(nU(e,1))},np.matchesProperty=/**
     * Creates a function that performs a partial deep comparison between the
     * value at `path` of a given object to `srcValue`, returning `true` if the
     * object value is equivalent, else `false`.
     *
     * **Note:** Partial comparisons will match empty array and empty object
     * `srcValue` values against any array or object value, respectively. See
     * `_.isEqual` for a list of supported value comparisons.
     *
     * **Note:** Multiple values can be checked by combining several matchers
     * using `_.overSome`
     *
     * @static
     * @memberOf _
     * @since 3.2.0
     * @category Util
     * @param {Array|string} path The path of the property to get.
     * @param {*} srcValue The value to match.
     * @returns {Function} Returns the new spec function.
     * @example
     *
     * var objects = [
     *   { 'a': 1, 'b': 2, 'c': 3 },
     *   { 'a': 4, 'b': 5, 'c': 6 }
     * ];
     *
     * _.find(objects, _.matchesProperty('a', 4));
     * // => { 'a': 4, 'b': 5, 'c': 6 }
     *
     * // Checking for several possible values
     * _.filter(objects, _.overSome([_.matchesProperty('a', 1), _.matchesProperty('a', 4)]));
     * // => [{ 'a': 1, 'b': 2, 'c': 3 }, { 'a': 4, 'b': 5, 'c': 6 }]
     */function(e,t){return rn(e,nU(t,1))},np.memoize=aM,np.merge=op,np.mergeWith=om,np.method=oB,np.methodOf=oV,np.mixin=oH,np.negate=aT,np.nthArg=/**
     * Creates a function that gets the argument at index `n`. If `n` is negative,
     * the nth argument from the end is returned.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Util
     * @param {number} [n=0] The index of the argument to return.
     * @returns {Function} Returns the new pass-thru function.
     * @example
     *
     * var func = _.nthArg(1);
     * func('a', 'b', 'c', 'd');
     * // => 'b'
     *
     * var func = _.nthArg(-2);
     * func('a', 'b', 'c', 'd');
     * // => 'c'
     */function(e){return e=a5(e),rf(function(t){return ri(t,e)})},np.omit=og,np.omitBy=/**
     * The opposite of `_.pickBy`; this method creates an object composed of
     * the own and inherited enumerable string keyed properties of `object` that
     * `predicate` doesn't return truthy for. The predicate is invoked with two
     * arguments: (value, key).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Object
     * @param {Object} object The source object.
     * @param {Function} [predicate=_.identity] The function invoked per property.
     * @returns {Object} Returns the new object.
     * @example
     *
     * var object = { 'a': 1, 'b': '2', 'c': 3 };
     *
     * _.omitBy(object, _.isNumber);
     * // => { 'b': '2' }
     */function(e,t){return oy(e,aT(ic(t)))},np.once=/**
     * Creates a function that is restricted to invoking `func` once. Repeat calls
     * to the function return the value of the first invocation. The `func` is
     * invoked with the `this` binding and arguments of the created function.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Function
     * @param {Function} func The function to restrict.
     * @returns {Function} Returns the new restricted function.
     * @example
     *
     * var initialize = _.once(createApplication);
     * initialize();
     * initialize();
     * // => `createApplication` is invoked once
     */function(e){return a_(2,e)},np.orderBy=/**
     * This method is like `_.sortBy` except that it allows specifying the sort
     * orders of the iteratees to sort by. If `orders` is unspecified, all values
     * are sorted in ascending order. Otherwise, specify an order of "desc" for
     * descending or "asc" for ascending sort order of corresponding values.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Array[]|Function[]|Object[]|string[]} [iteratees=[_.identity]]
     *  The iteratees to sort by.
     * @param {string[]} [orders] The sort orders of `iteratees`.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.
     * @returns {Array} Returns the new sorted array.
     * @example
     *
     * var users = [
     *   { 'user': 'fred',   'age': 48 },
     *   { 'user': 'barney', 'age': 34 },
     *   { 'user': 'fred',   'age': 40 },
     *   { 'user': 'barney', 'age': 36 }
     * ];
     *
     * // Sort by `user` in ascending order and by `age` in descending order.
     * _.orderBy(users, ['user', 'age'], ['asc', 'desc']);
     * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 40]]
     */function(e,t,r,i){return null==e?[]:(aN(t)||(t=null==t?[]:[t]),aN(r=i?n:r)||(r=null==r?[]:[r]),ra(e,t,r))},np.over=oW,np.overArgs=aA,np.overEvery=oj,np.overSome=oX,np.partial=aC,np.partialRight=aP,np.partition=am,np.pick=ov,np.pickBy=oy,np.property=oq,np.propertyOf=/**
     * The opposite of `_.property`; this method creates a function that returns
     * the value at a given path of `object`.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Util
     * @param {Object} object The object to query.
     * @returns {Function} Returns the new accessor function.
     * @example
     *
     * var array = [0, 1, 2],
     *     object = { 'a': array, 'b': array, 'c': array };
     *
     * _.map(['a[2]', 'c[0]'], _.propertyOf(object));
     * // => [2, 0]
     *
     * _.map([['a', '2'], ['c', '0']], _.propertyOf(object));
     * // => [2, 0]
     */function(e){return function(t){return null==e?n:n$(e,t)}},np.pull=iJ,np.pullAll=iQ,np.pullAllBy=/**
     * This method is like `_.pullAll` except that it accepts `iteratee` which is
     * invoked for each element of `array` and `values` to generate the criterion
     * by which they're compared. The iteratee is invoked with one argument: (value).
     *
     * **Note:** Unlike `_.differenceBy`, this method mutates `array`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} array The array to modify.
     * @param {Array} values The values to remove.
     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
     * @returns {Array} Returns `array`.
     * @example
     *
     * var array = [{ 'x': 1 }, { 'x': 2 }, { 'x': 3 }, { 'x': 1 }];
     *
     * _.pullAllBy(array, [{ 'x': 1 }, { 'x': 3 }], 'x');
     * console.log(array);
     * // => [{ 'x': 2 }]
     */function(e,t,n){return e&&e.length&&t&&t.length?rs(e,t,ic(n,2)):e},np.pullAllWith=/**
     * This method is like `_.pullAll` except that it accepts `comparator` which
     * is invoked to compare elements of `array` to `values`. The comparator is
     * invoked with two arguments: (arrVal, othVal).
     *
     * **Note:** Unlike `_.differenceWith`, this method mutates `array`.
     *
     * @static
     * @memberOf _
     * @since 4.6.0
     * @category Array
     * @param {Array} array The array to modify.
     * @param {Array} values The values to remove.
     * @param {Function} [comparator] The comparator invoked per element.
     * @returns {Array} Returns `array`.
     * @example
     *
     * var array = [{ 'x': 1, 'y': 2 }, { 'x': 3, 'y': 4 }, { 'x': 5, 'y': 6 }];
     *
     * _.pullAllWith(array, [{ 'x': 3, 'y': 4 }], _.isEqual);
     * console.log(array);
     * // => [{ 'x': 1, 'y': 2 }, { 'x': 5, 'y': 6 }]
     */function(e,t,r){return e&&e.length&&t&&t.length?rs(e,t,n,r):e},np.pullAt=i0,np.range=oY,np.rangeRight=o$,np.rearg=aR,np.reject=/**
     * The opposite of `_.filter`; this method returns the elements of `collection`
     * that `predicate` does **not** return truthy for.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @returns {Array} Returns the new filtered array.
     * @see _.filter
     * @example
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36, 'active': false },
     *   { 'user': 'fred',   'age': 40, 'active': true }
     * ];
     *
     * _.reject(users, function(o) { return !o.active; });
     * // => objects for ['fred']
     *
     * // The `_.matches` iteratee shorthand.
     * _.reject(users, { 'age': 40, 'active': true });
     * // => objects for ['barney']
     *
     * // The `_.matchesProperty` iteratee shorthand.
     * _.reject(users, ['active', false]);
     * // => objects for ['fred']
     *
     * // The `_.property` iteratee shorthand.
     * _.reject(users, 'active');
     * // => objects for ['barney']
     */function(e,t){return(aN(e)?tc:nH)(e,aT(ic(t,3)))},np.remove=/**
     * Removes all elements from `array` that `predicate` returns truthy for
     * and returns an array of the removed elements. The predicate is invoked
     * with three arguments: (value, index, array).
     *
     * **Note:** Unlike `_.filter`, this method mutates `array`. Use `_.pull`
     * to pull elements from an array by value.
     *
     * @static
     * @memberOf _
     * @since 2.0.0
     * @category Array
     * @param {Array} array The array to modify.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @returns {Array} Returns the new array of removed elements.
     * @example
     *
     * var array = [1, 2, 3, 4];
     * var evens = _.remove(array, function(n) {
     *   return n % 2 == 0;
     * });
     *
     * console.log(array);
     * // => [1, 3]
     *
     * console.log(evens);
     * // => [2, 4]
     */function(e,t){var n=[];if(!(e&&e.length))return n;var r=-1,i=[],a=e.length;for(t=ic(t,3);++r<a;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return rl(e,i),n},np.rest=/**
     * Creates a function that invokes `func` with the `this` binding of the
     * created function and arguments from `start` and beyond provided as
     * an array.
     *
     * **Note:** This method is based on the
     * [rest parameter](https://mdn.io/rest_parameters).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Function
     * @param {Function} func The function to apply a rest parameter to.
     * @param {number} [start=func.length-1] The start position of the rest parameter.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var say = _.rest(function(what, names) {
     *   return what + ' ' + _.initial(names).join(', ') +
     *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);
     * });
     *
     * say('hello', 'fred', 'barney', 'pebbles');
     * // => 'hello fred, barney, & pebbles'
     */function(e,t){if("function"!=typeof e)throw new eT(r);return rf(e,t=t===n?t:a5(t))},np.reverse=i1,np.sampleSize=/**
     * Gets `n` random elements at unique keys from `collection` up to the
     * size of `collection`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Collection
     * @param {Array|Object} collection The collection to sample.
     * @param {number} [n=1] The number of elements to sample.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {Array} Returns the random elements.
     * @example
     *
     * _.sampleSize([1, 2, 3], 2);
     * // => [3, 1]
     *
     * _.sampleSize([1, 2, 3], 4);
     * // => [2, 3, 1]
     */function(e,t,r){return t=(r?iS(e,t,r):t===n)?1:a5(t),(aN(e)?/**
     * A specialized version of `_.sampleSize` for arrays.
     *
     * @private
     * @param {Array} array The array to sample.
     * @param {number} n The number of elements to sample.
     * @returns {Array} Returns the random elements.
     */function(e,t){return iD(rB(e),nI(t,0,e.length))}:/**
     * The base implementation of `_.sampleSize` without param guards.
     *
     * @private
     * @param {Array|Object} collection The collection to sample.
     * @param {number} n The number of elements to sample.
     * @returns {Array} Returns the random elements.
     */function(e,t){var n=ob(e);return iD(n,nI(t,0,n.length))})(e,t)},np.set=/**
     * Sets the value at `path` of `object`. If a portion of `path` doesn't exist,
     * it's created. Arrays are created for missing index properties while objects
     * are created for all other missing properties. Use `_.setWith` to customize
     * `path` creation.
     *
     * **Note:** This method mutates `object`.
     *
     * @static
     * @memberOf _
     * @since 3.7.0
     * @category Object
     * @param {Object} object The object to modify.
     * @param {Array|string} path The path of the property to set.
     * @param {*} value The value to set.
     * @returns {Object} Returns `object`.
     * @example
     *
     * var object = { 'a': [{ 'b': { 'c': 3 } }] };
     *
     * _.set(object, 'a[0].b.c', 4);
     * console.log(object.a[0].b.c);
     * // => 4
     *
     * _.set(object, ['x', '0', 'y', 'z'], 5);
     * console.log(object.x[0].y.z);
     * // => 5
     */function(e,t,n){return null==e?e:rh(e,t,n)},np.setWith=/**
     * This method is like `_.set` except that it accepts `customizer` which is
     * invoked to produce the objects of `path`.  If `customizer` returns `undefined`
     * path creation is handled by the method instead. The `customizer` is invoked
     * with three arguments: (nsValue, key, nsObject).
     *
     * **Note:** This method mutates `object`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Object
     * @param {Object} object The object to modify.
     * @param {Array|string} path The path of the property to set.
     * @param {*} value The value to set.
     * @param {Function} [customizer] The function to customize assigned values.
     * @returns {Object} Returns `object`.
     * @example
     *
     * var object = {};
     *
     * _.setWith(object, '[0][1]', 'a', Object);
     * // => { '0': { '1': 'a' } }
     */function(e,t,r,i){return i="function"==typeof i?i:n,null==e?e:rh(e,t,r,i)},np.shuffle=/**
     * Creates an array of shuffled values, using a version of the
     * [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher-Yates_shuffle).
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Collection
     * @param {Array|Object} collection The collection to shuffle.
     * @returns {Array} Returns the new shuffled array.
     * @example
     *
     * _.shuffle([1, 2, 3, 4]);
     * // => [4, 1, 3, 2]
     */function(e){return(aN(e)?/**
     * A specialized version of `_.shuffle` for arrays.
     *
     * @private
     * @param {Array} array The array to shuffle.
     * @returns {Array} Returns the new shuffled array.
     */function(e){return iD(rB(e))}:/**
     * The base implementation of `_.shuffle`.
     *
     * @private
     * @param {Array|Object} collection The collection to shuffle.
     * @returns {Array} Returns the new shuffled array.
     */function(e){return iD(ob(e))})(e)},np.slice=/**
     * Creates a slice of `array` from `start` up to, but not including, `end`.
     *
     * **Note:** This method is used instead of
     * [`Array#slice`](https://mdn.io/Array/slice) to ensure dense arrays are
     * returned.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Array
     * @param {Array} array The array to slice.
     * @param {number} [start=0] The start position.
     * @param {number} [end=array.length] The end position.
     * @returns {Array} Returns the slice of `array`.
     */function(e,t,r){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&iS(e,t,r)?(t=0,r=i):(t=null==t?0:a5(t),r=r===n?i:a5(r)),rm(e,t,r)):[]},np.sortBy=ag,np.sortedUniq=/**
     * This method is like `_.uniq` except that it's designed and optimized
     * for sorted arrays.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} array The array to inspect.
     * @returns {Array} Returns the new duplicate free array.
     * @example
     *
     * _.sortedUniq([1, 1, 2]);
     * // => [1, 2]
     */function(e){return e&&e.length?r_(e):[]},np.sortedUniqBy=/**
     * This method is like `_.uniqBy` except that it's designed and optimized
     * for sorted arrays.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} array The array to inspect.
     * @param {Function} [iteratee] The iteratee invoked per element.
     * @returns {Array} Returns the new duplicate free array.
     * @example
     *
     * _.sortedUniqBy([1.1, 1.2, 2.3, 2.4], Math.floor);
     * // => [1.1, 2.3]
     */function(e,t){return e&&e.length?r_(e,ic(t,2)):[]},np.split=/**
     * Splits `string` by `separator`.
     *
     * **Note:** This method is based on
     * [`String#split`](https://mdn.io/String/split).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category String
     * @param {string} [string=''] The string to split.
     * @param {RegExp|string} separator The separator pattern to split by.
     * @param {number} [limit] The length to truncate results to.
     * @returns {Array} Returns the string segments.
     * @example
     *
     * _.split('a-b-c', '-', 2);
     * // => ['a', 'b']
     */function(e,t,r){return(r&&"number"!=typeof r&&iS(e,t,r)&&(t=r=n),r=r===n?4294967295:r>>>0)?(e=a9(e))&&("string"==typeof t||null!=t&&!aK(t))&&!(t=rb(t))&&tz(e)?rO(tj(e),0,r):e.split(t,r):[]},np.spread=/**
     * Creates a function that invokes `func` with the `this` binding of the
     * create function and an array of arguments much like
     * [`Function#apply`](http://www.ecma-international.org/ecma-262/7.0/#sec-function.prototype.apply).
     *
     * **Note:** This method is based on the
     * [spread operator](https://mdn.io/spread_operator).
     *
     * @static
     * @memberOf _
     * @since 3.2.0
     * @category Function
     * @param {Function} func The function to spread arguments over.
     * @param {number} [start=0] The start position of the spread.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var say = _.spread(function(who, what) {
     *   return who + ' says ' + what;
     * });
     *
     * say(['fred', 'hello']);
     * // => 'fred says hello'
     *
     * var numbers = Promise.all([
     *   Promise.resolve(40),
     *   Promise.resolve(36)
     * ]);
     *
     * numbers.then(_.spread(function(x, y) {
     *   return x + y;
     * }));
     * // => a Promise of 76
     */function(e,t){if("function"!=typeof e)throw new eT(r);return t=null==t?0:t2(a5(t),0),rf(function(n){var r=n[t],i=rO(n,0,t);return r&&tp(i,r),to(e,this,i)})},np.tail=/**
     * Gets all but the first element of `array`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} array The array to query.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.tail([1, 2, 3]);
     * // => [2, 3]
     */function(e){var t=null==e?0:e.length;return t?rm(e,1,t):[]},np.take=/**
     * Creates a slice of `array` with `n` elements taken from the beginning.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Array
     * @param {Array} array The array to query.
     * @param {number} [n=1] The number of elements to take.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.take([1, 2, 3]);
     * // => [1]
     *
     * _.take([1, 2, 3], 2);
     * // => [1, 2]
     *
     * _.take([1, 2, 3], 5);
     * // => [1, 2, 3]
     *
     * _.take([1, 2, 3], 0);
     * // => []
     */function(e,t,r){return e&&e.length?rm(e,0,(t=r||t===n?1:a5(t))<0?0:t):[]},np.takeRight=/**
     * Creates a slice of `array` with `n` elements taken from the end.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Array
     * @param {Array} array The array to query.
     * @param {number} [n=1] The number of elements to take.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * _.takeRight([1, 2, 3]);
     * // => [3]
     *
     * _.takeRight([1, 2, 3], 2);
     * // => [2, 3]
     *
     * _.takeRight([1, 2, 3], 5);
     * // => [1, 2, 3]
     *
     * _.takeRight([1, 2, 3], 0);
     * // => []
     */function(e,t,r){var i=null==e?0:e.length;return i?rm(e,(t=i-(t=r||t===n?1:a5(t)))<0?0:t,i):[]},np.takeRightWhile=/**
     * Creates a slice of `array` with elements taken from the end. Elements are
     * taken until `predicate` returns falsey. The predicate is invoked with
     * three arguments: (value, index, array).
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Array
     * @param {Array} array The array to query.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * var users = [
     *   { 'user': 'barney',  'active': true },
     *   { 'user': 'fred',    'active': false },
     *   { 'user': 'pebbles', 'active': false }
     * ];
     *
     * _.takeRightWhile(users, function(o) { return !o.active; });
     * // => objects for ['fred', 'pebbles']
     *
     * // The `_.matches` iteratee shorthand.
     * _.takeRightWhile(users, { 'user': 'pebbles', 'active': false });
     * // => objects for ['pebbles']
     *
     * // The `_.matchesProperty` iteratee shorthand.
     * _.takeRightWhile(users, ['active', false]);
     * // => objects for ['fred', 'pebbles']
     *
     * // The `_.property` iteratee shorthand.
     * _.takeRightWhile(users, 'active');
     * // => []
     */function(e,t){return e&&e.length?rM(e,ic(t,3),!1,!0):[]},np.takeWhile=/**
     * Creates a slice of `array` with elements taken from the beginning. Elements
     * are taken until `predicate` returns falsey. The predicate is invoked with
     * three arguments: (value, index, array).
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Array
     * @param {Array} array The array to query.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @returns {Array} Returns the slice of `array`.
     * @example
     *
     * var users = [
     *   { 'user': 'barney',  'active': false },
     *   { 'user': 'fred',    'active': false },
     *   { 'user': 'pebbles', 'active': true }
     * ];
     *
     * _.takeWhile(users, function(o) { return !o.active; });
     * // => objects for ['barney', 'fred']
     *
     * // The `_.matches` iteratee shorthand.
     * _.takeWhile(users, { 'user': 'barney', 'active': false });
     * // => objects for ['barney']
     *
     * // The `_.matchesProperty` iteratee shorthand.
     * _.takeWhile(users, ['active', false]);
     * // => objects for ['barney', 'fred']
     *
     * // The `_.property` iteratee shorthand.
     * _.takeWhile(users, 'active');
     * // => []
     */function(e,t){return e&&e.length?rM(e,ic(t,3)):[]},np.tap=/**
     * This method invokes `interceptor` and returns `value`. The interceptor
     * is invoked with one argument; (value). The purpose of this method is to
     * "tap into" a method chain sequence in order to modify intermediate results.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Seq
     * @param {*} value The value to provide to `interceptor`.
     * @param {Function} interceptor The function to invoke.
     * @returns {*} Returns `value`.
     * @example
     *
     * _([1, 2, 3])
     *  .tap(function(array) {
     *    // Mutate input array.
     *    array.pop();
     *  })
     *  .reverse()
     *  .value();
     * // => [2, 1]
     */function(e,t){return t(e),e},np.throttle=/**
     * Creates a throttled function that only invokes `func` at most once per
     * every `wait` milliseconds. The throttled function comes with a `cancel`
     * method to cancel delayed `func` invocations and a `flush` method to
     * immediately invoke them. Provide `options` to indicate whether `func`
     * should be invoked on the leading and/or trailing edge of the `wait`
     * timeout. The `func` is invoked with the last arguments provided to the
     * throttled function. Subsequent calls to the throttled function return the
     * result of the last `func` invocation.
     *
     * **Note:** If `leading` and `trailing` options are `true`, `func` is
     * invoked on the trailing edge of the timeout only if the throttled function
     * is invoked more than once during the `wait` timeout.
     *
     * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred
     * until to the next tick, similar to `setTimeout` with a timeout of `0`.
     *
     * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)
     * for details over the differences between `_.throttle` and `_.debounce`.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Function
     * @param {Function} func The function to throttle.
     * @param {number} [wait=0] The number of milliseconds to throttle invocations to.
     * @param {Object} [options={}] The options object.
     * @param {boolean} [options.leading=true]
     *  Specify invoking on the leading edge of the timeout.
     * @param {boolean} [options.trailing=true]
     *  Specify invoking on the trailing edge of the timeout.
     * @returns {Function} Returns the new throttled function.
     * @example
     *
     * // Avoid excessively updating the position while scrolling.
     * jQuery(window).on('scroll', _.throttle(updatePosition, 100));
     *
     * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.
     * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });
     * jQuery(element).on('click', throttled);
     *
     * // Cancel the trailing throttled invocation.
     * jQuery(window).on('popstate', throttled.cancel);
     */function(e,t,n){var i=!0,a=!0;if("function"!=typeof e)throw new eT(r);return aj(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),aS(e,t,{leading:i,maxWait:t,trailing:a})},np.thru=ai,np.toArray=a3,np.toPairs=o_,np.toPairsIn=ox,np.toPath=/**
     * Converts `value` to a property path array.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Util
     * @param {*} value The value to convert.
     * @returns {Array} Returns the new property path array.
     * @example
     *
     * _.toPath('a.b.c');
     * // => ['a', 'b', 'c']
     *
     * _.toPath('a[0].b.c');
     * // => ['a', '0', 'b', 'c']
     */function(e){return aN(e)?td(e,iF):aQ(e)?[e]:rB(ik(a9(e)))},np.toPlainObject=a7,np.transform=/**
     * An alternative to `_.reduce`; this method transforms `object` to a new
     * `accumulator` object which is the result of running each of its own
     * enumerable string keyed properties thru `iteratee`, with each invocation
     * potentially mutating the `accumulator` object. If `accumulator` is not
     * provided, a new object with the same `[[Prototype]]` will be used. The
     * iteratee is invoked with four arguments: (accumulator, value, key, object).
     * Iteratee functions may exit iteration early by explicitly returning `false`.
     *
     * @static
     * @memberOf _
     * @since 1.3.0
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [accumulator] The custom accumulator value.
     * @returns {*} Returns the accumulated value.
     * @example
     *
     * _.transform([2, 3, 4], function(result, n) {
     *   result.push(n *= n);
     *   return n % 2 == 0;
     * }, []);
     * // => [4, 9]
     *
     * _.transform({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {
     *   (result[value] || (result[value] = [])).push(key);
     * }, {});
     * // => { '1': ['a', 'c'], '2': ['b'] }
     */function(e,t,n){var r=aN(e),i=r||az(e)||a0(e);if(t=ic(t,4),null==n){var a=e&&e.constructor;n=i?r?new a:[]:aj(e)&&aH(a)?nm(ej(e)):{}}return(i?tl:nX)(e,function(e,r,i){return t(n,e,r,i)}),n},np.unary=/**
     * Creates a function that accepts up to one argument, ignoring any
     * additional arguments.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Function
     * @param {Function} func The function to cap arguments for.
     * @returns {Function} Returns the new capped function.
     * @example
     *
     * _.map(['6', '8', '10'], _.unary(parseInt));
     * // => [6, 8, 10]
     */function(e){return ay(e,1)},np.union=i2,np.unionBy=i3,np.unionWith=i4,np.uniq=/**
     * Creates a duplicate-free version of an array, using
     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
     * for equality comparisons, in which only the first occurrence of each element
     * is kept. The order of result values is determined by the order they occur
     * in the array.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Array
     * @param {Array} array The array to inspect.
     * @returns {Array} Returns the new duplicate free array.
     * @example
     *
     * _.uniq([2, 1, 2]);
     * // => [2, 1]
     */function(e){return e&&e.length?rS(e):[]},np.uniqBy=/**
     * This method is like `_.uniq` except that it accepts `iteratee` which is
     * invoked for each element in `array` to generate the criterion by which
     * uniqueness is computed. The order of result values is determined by the
     * order they occur in the array. The iteratee is invoked with one argument:
     * (value).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} array The array to inspect.
     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
     * @returns {Array} Returns the new duplicate free array.
     * @example
     *
     * _.uniqBy([2.1, 1.2, 2.3], Math.floor);
     * // => [2.1, 1.2]
     *
     * // The `_.property` iteratee shorthand.
     * _.uniqBy([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');
     * // => [{ 'x': 1 }, { 'x': 2 }]
     */function(e,t){return e&&e.length?rS(e,ic(t,2)):[]},np.uniqWith=/**
     * This method is like `_.uniq` except that it accepts `comparator` which
     * is invoked to compare elements of `array`. The order of result values is
     * determined by the order they occur in the array.The comparator is invoked
     * with two arguments: (arrVal, othVal).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} array The array to inspect.
     * @param {Function} [comparator] The comparator invoked per element.
     * @returns {Array} Returns the new duplicate free array.
     * @example
     *
     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }, { 'x': 1, 'y': 2 }];
     *
     * _.uniqWith(objects, _.isEqual);
     * // => [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }]
     */function(e,t){return t="function"==typeof t?t:n,e&&e.length?rS(e,n,t):[]},np.unset=/**
     * Removes the property at `path` of `object`.
     *
     * **Note:** This method mutates `object`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Object
     * @param {Object} object The object to modify.
     * @param {Array|string} path The path of the property to unset.
     * @returns {boolean} Returns `true` if the property is deleted, else `false`.
     * @example
     *
     * var object = { 'a': [{ 'b': { 'c': 7 } }] };
     * _.unset(object, 'a[0].b.c');
     * // => true
     *
     * console.log(object);
     * // => { 'a': [{ 'b': {} }] };
     *
     * _.unset(object, ['a', '0', 'b', 'c']);
     * // => true
     *
     * console.log(object);
     * // => { 'a': [{ 'b': {} }] };
     */function(e,t){return null==e||rE(e,t)},np.unzip=i5,np.unzipWith=i6,np.update=/**
     * This method is like `_.set` except that accepts `updater` to produce the
     * value to set. Use `_.updateWith` to customize `path` creation. The `updater`
     * is invoked with one argument: (value).
     *
     * **Note:** This method mutates `object`.
     *
     * @static
     * @memberOf _
     * @since 4.6.0
     * @category Object
     * @param {Object} object The object to modify.
     * @param {Array|string} path The path of the property to set.
     * @param {Function} updater The function to produce the updated value.
     * @returns {Object} Returns `object`.
     * @example
     *
     * var object = { 'a': [{ 'b': { 'c': 3 } }] };
     *
     * _.update(object, 'a[0].b.c', function(n) { return n * n; });
     * console.log(object.a[0].b.c);
     * // => 9
     *
     * _.update(object, 'x[0].y.z', function(n) { return n ? n + 1 : 0; });
     * console.log(object.x[0].y.z);
     * // => 0
     */function(e,t,n){return null==e?e:rw(e,t,rR(n))},np.updateWith=/**
     * This method is like `_.update` except that it accepts `customizer` which is
     * invoked to produce the objects of `path`.  If `customizer` returns `undefined`
     * path creation is handled by the method instead. The `customizer` is invoked
     * with three arguments: (nsValue, key, nsObject).
     *
     * **Note:** This method mutates `object`.
     *
     * @static
     * @memberOf _
     * @since 4.6.0
     * @category Object
     * @param {Object} object The object to modify.
     * @param {Array|string} path The path of the property to set.
     * @param {Function} updater The function to produce the updated value.
     * @param {Function} [customizer] The function to customize assigned values.
     * @returns {Object} Returns `object`.
     * @example
     *
     * var object = {};
     *
     * _.updateWith(object, '[0][1]', _.constant('a'), Object);
     * // => { '0': { '1': 'a' } }
     */function(e,t,r,i){return i="function"==typeof i?i:n,null==e?e:rw(e,t,rR(r),i)},np.values=ob,np.valuesIn=/**
     * Creates an array of the own and inherited enumerable string keyed property
     * values of `object`.
     *
     * **Note:** Non-object values are coerced to objects.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Object
     * @param {Object} object The object to query.
     * @returns {Array} Returns the array of property values.
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.valuesIn(new Foo);
     * // => [1, 2, 3] (iteration order is not guaranteed)
     */function(e){return null==e?[]:tO(e,od(e))},np.without=i8,np.words=oO,np.wrap=/**
     * Creates a function that provides `value` to `wrapper` as its first
     * argument. Any additional arguments provided to the function are appended
     * to those provided to the `wrapper`. The wrapper is invoked with the `this`
     * binding of the created function.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Function
     * @param {*} value The value to wrap.
     * @param {Function} [wrapper=identity] The wrapper function.
     * @returns {Function} Returns the new function.
     * @example
     *
     * var p = _.wrap(_.escape, function(func, text) {
     *   return '<p>' + func(text) + '</p>';
     * });
     *
     * p('fred, barney, & pebbles');
     * // => '<p>fred, barney, &amp; pebbles</p>'
     */function(e,t){return aC(rR(t),e)},np.xor=i7,np.xorBy=i9,np.xorWith=ae,np.zip=at,np.zipObject=/**
     * This method is like `_.fromPairs` except that it accepts two arrays,
     * one of property identifiers and one of corresponding values.
     *
     * @static
     * @memberOf _
     * @since 0.4.0
     * @category Array
     * @param {Array} [props=[]] The property identifiers.
     * @param {Array} [values=[]] The property values.
     * @returns {Object} Returns the new object.
     * @example
     *
     * _.zipObject(['a', 'b'], [1, 2]);
     * // => { 'a': 1, 'b': 2 }
     */function(e,t){return rC(e||[],t||[],nA)},np.zipObjectDeep=/**
     * This method is like `_.zipObject` except that it supports property paths.
     *
     * @static
     * @memberOf _
     * @since 4.1.0
     * @category Array
     * @param {Array} [props=[]] The property identifiers.
     * @param {Array} [values=[]] The property values.
     * @returns {Object} Returns the new object.
     * @example
     *
     * _.zipObjectDeep(['a.b[0].c', 'a.b[1].d'], [1, 2]);
     * // => { 'a': { 'b': [{ 'c': 1 }, { 'd': 2 }] } }
     */function(e,t){return rC(e||[],t||[],rh)},np.zipWith=an,// Add aliases.
np.entries=o_,np.entriesIn=ox,np.extend=ot,np.extendWith=on,// Add methods to `lodash.prototype`.
oH(np,np),/*------------------------------------------------------------------------*/// Add methods that return unwrapped values in chain sequences.
np.add=oJ,np.attempt=oI,np.camelCase=oS,np.capitalize=oE,np.ceil=oQ,np.clamp=/*------------------------------------------------------------------------*//**
     * Clamps `number` within the inclusive `lower` and `upper` bounds.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Number
     * @param {number} number The number to clamp.
     * @param {number} [lower] The lower bound.
     * @param {number} upper The upper bound.
     * @returns {number} Returns the clamped number.
     * @example
     *
     * _.clamp(-10, -5, 5);
     * // => -5
     *
     * _.clamp(10, -5, 5);
     * // => 5
     */function(e,t,r){return r===n&&(r=t,t=n),r!==n&&(r=(r=a8(r))==r?r:0),t!==n&&(t=(t=a8(t))==t?t:0),nI(a8(e),t,r)},np.clone=/**
     * Creates a shallow clone of `value`.
     *
     * **Note:** This method is loosely based on the
     * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)
     * and supports cloning arrays, array buffers, booleans, date objects, maps,
     * numbers, `Object` objects, regexes, sets, strings, symbols, and typed
     * arrays. The own enumerable properties of `arguments` objects are cloned
     * as plain objects. An empty object is returned for uncloneable values such
     * as error objects, functions, DOM nodes, and WeakMaps.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Lang
     * @param {*} value The value to clone.
     * @returns {*} Returns the cloned value.
     * @see _.cloneDeep
     * @example
     *
     * var objects = [{ 'a': 1 }, { 'b': 2 }];
     *
     * var shallow = _.clone(objects);
     * console.log(shallow[0] === objects[0]);
     * // => true
     */function(e){return nU(e,4)},np.cloneDeep=/**
     * This method is like `_.clone` except that it recursively clones `value`.
     *
     * @static
     * @memberOf _
     * @since 1.0.0
     * @category Lang
     * @param {*} value The value to recursively clone.
     * @returns {*} Returns the deep cloned value.
     * @see _.clone
     * @example
     *
     * var objects = [{ 'a': 1 }, { 'b': 2 }];
     *
     * var deep = _.cloneDeep(objects);
     * console.log(deep[0] === objects[0]);
     * // => false
     */function(e){return nU(e,5)},np.cloneDeepWith=/**
     * This method is like `_.cloneWith` except that it recursively clones `value`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to recursively clone.
     * @param {Function} [customizer] The function to customize cloning.
     * @returns {*} Returns the deep cloned value.
     * @see _.cloneWith
     * @example
     *
     * function customizer(value) {
     *   if (_.isElement(value)) {
     *     return value.cloneNode(true);
     *   }
     * }
     *
     * var el = _.cloneDeepWith(document.body, customizer);
     *
     * console.log(el === document.body);
     * // => false
     * console.log(el.nodeName);
     * // => 'BODY'
     * console.log(el.childNodes.length);
     * // => 20
     */function(e,t){return nU(e,5,t="function"==typeof t?t:n)},np.cloneWith=/**
     * This method is like `_.clone` except that it accepts `customizer` which
     * is invoked to produce the cloned value. If `customizer` returns `undefined`,
     * cloning is handled by the method instead. The `customizer` is invoked with
     * up to four arguments; (value [, index|key, object, stack]).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to clone.
     * @param {Function} [customizer] The function to customize cloning.
     * @returns {*} Returns the cloned value.
     * @see _.cloneDeepWith
     * @example
     *
     * function customizer(value) {
     *   if (_.isElement(value)) {
     *     return value.cloneNode(false);
     *   }
     * }
     *
     * var el = _.cloneWith(document.body, customizer);
     *
     * console.log(el === document.body);
     * // => false
     * console.log(el.nodeName);
     * // => 'BODY'
     * console.log(el.childNodes.length);
     * // => 0
     */function(e,t){return nU(e,4,t="function"==typeof t?t:n)},np.conformsTo=/**
     * Checks if `object` conforms to `source` by invoking the predicate
     * properties of `source` with the corresponding property values of `object`.
     *
     * **Note:** This method is equivalent to `_.conforms` when `source` is
     * partially applied.
     *
     * @static
     * @memberOf _
     * @since 4.14.0
     * @category Lang
     * @param {Object} object The object to inspect.
     * @param {Object} source The object of property predicates to conform to.
     * @returns {boolean} Returns `true` if `object` conforms, else `false`.
     * @example
     *
     * var object = { 'a': 1, 'b': 2 };
     *
     * _.conformsTo(object, { 'b': function(n) { return n > 1; } });
     * // => true
     *
     * _.conformsTo(object, { 'b': function(n) { return n > 2; } });
     * // => false
     */function(e,t){return null==t||nN(e,t,oh(t))},np.deburr=ow,np.defaultTo=/**
     * Checks `value` to determine whether a default value should be returned in
     * its place. The `defaultValue` is returned if `value` is `NaN`, `null`,
     * or `undefined`.
     *
     * @static
     * @memberOf _
     * @since 4.14.0
     * @category Util
     * @param {*} value The value to check.
     * @param {*} defaultValue The default value.
     * @returns {*} Returns the resolved value.
     * @example
     *
     * _.defaultTo(1, 10);
     * // => 1
     *
     * _.defaultTo(undefined, 10);
     * // => 10
     */function(e,t){return null==e||e!=e?t:e},np.divide=o0,np.endsWith=/**
     * Checks if `string` ends with the given target string.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category String
     * @param {string} [string=''] The string to inspect.
     * @param {string} [target] The string to search for.
     * @param {number} [position=string.length] The position to search up to.
     * @returns {boolean} Returns `true` if `string` ends with `target`,
     *  else `false`.
     * @example
     *
     * _.endsWith('abc', 'c');
     * // => true
     *
     * _.endsWith('abc', 'b');
     * // => false
     *
     * _.endsWith('abc', 'b', 2);
     * // => true
     */function(e,t,r){e=a9(e),t=rb(t);var i=e.length,a=r=r===n?i:nI(a5(r),0,i);return(r-=t.length)>=0&&e.slice(r,a)==t},np.eq=aL,np.escape=/**
     * Converts the characters "&", "<", ">", '"', and "'" in `string` to their
     * corresponding HTML entities.
     *
     * **Note:** No other characters are escaped. To escape additional
     * characters use a third-party library like [_he_](https://mths.be/he).
     *
     * Though the ">" character is escaped for symmetry, characters like
     * ">" and "/" don't need escaping in HTML and have no special meaning
     * unless they're part of a tag or unquoted attribute value. See
     * [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)
     * (under "semi-related fun fact") for more details.
     *
     * When working with HTML you should always
     * [quote attribute values](http://wonko.com/post/html-escaping) to reduce
     * XSS vectors.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category String
     * @param {string} [string=''] The string to escape.
     * @returns {string} Returns the escaped string.
     * @example
     *
     * _.escape('fred, barney, & pebbles');
     * // => 'fred, barney, &amp; pebbles'
     */function(e){return(e=a9(e))&&G.test(e)?e.replace(V,tk):e},np.escapeRegExp=/**
     * Escapes the `RegExp` special characters "^", "$", "\", ".", "*", "+",
     * "?", "(", ")", "[", "]", "{", "}", and "|" in `string`.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category String
     * @param {string} [string=''] The string to escape.
     * @returns {string} Returns the escaped string.
     * @example
     *
     * _.escapeRegExp('[lodash](https://lodash.com/)');
     * // => '\[lodash\]\(https://lodash\.com/\)'
     */function(e){return(e=a9(e))&&Z.test(e)?e.replace(K,"\\$&"):e},np.every=/**
     * Checks if `predicate` returns truthy for **all** elements of `collection`.
     * Iteration is stopped once `predicate` returns falsey. The predicate is
     * invoked with three arguments: (value, index|key, collection).
     *
     * **Note:** This method returns `true` for
     * [empty collections](https://en.wikipedia.org/wiki/Empty_set) because
     * [everything is true](https://en.wikipedia.org/wiki/Vacuous_truth) of
     * elements of empty collections.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {boolean} Returns `true` if all elements pass the predicate check,
     *  else `false`.
     * @example
     *
     * _.every([true, 1, null, 'yes'], Boolean);
     * // => false
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36, 'active': false },
     *   { 'user': 'fred',   'age': 40, 'active': false }
     * ];
     *
     * // The `_.matches` iteratee shorthand.
     * _.every(users, { 'user': 'barney', 'active': false });
     * // => false
     *
     * // The `_.matchesProperty` iteratee shorthand.
     * _.every(users, ['active', false]);
     * // => true
     *
     * // The `_.property` iteratee shorthand.
     * _.every(users, 'active');
     * // => false
     */function(e,t,r){var i=aN(e)?tu:nB;return r&&iS(e,t,r)&&(t=n),i(e,ic(t,3))},np.find=as,np.findIndex=iW,np.findKey=/**
     * This method is like `_.find` except that it returns the key of the first
     * element `predicate` returns truthy for instead of the element itself.
     *
     * @static
     * @memberOf _
     * @since 1.1.0
     * @category Object
     * @param {Object} object The object to inspect.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @returns {string|undefined} Returns the key of the matched element,
     *  else `undefined`.
     * @example
     *
     * var users = {
     *   'barney':  { 'age': 36, 'active': true },
     *   'fred':    { 'age': 40, 'active': false },
     *   'pebbles': { 'age': 1,  'active': true }
     * };
     *
     * _.findKey(users, function(o) { return o.age < 40; });
     * // => 'barney' (iteration order is not guaranteed)
     *
     * // The `_.matches` iteratee shorthand.
     * _.findKey(users, { 'age': 1, 'active': true });
     * // => 'pebbles'
     *
     * // The `_.matchesProperty` iteratee shorthand.
     * _.findKey(users, ['active', false]);
     * // => 'fred'
     *
     * // The `_.property` iteratee shorthand.
     * _.findKey(users, 'active');
     * // => 'barney'
     */function(e,t){return t_(e,ic(t,3),nX)},np.findLast=al,np.findLastIndex=ij,np.findLastKey=/**
     * This method is like `_.findKey` except that it iterates over elements of
     * a collection in the opposite order.
     *
     * @static
     * @memberOf _
     * @since 2.0.0
     * @category Object
     * @param {Object} object The object to inspect.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @returns {string|undefined} Returns the key of the matched element,
     *  else `undefined`.
     * @example
     *
     * var users = {
     *   'barney':  { 'age': 36, 'active': true },
     *   'fred':    { 'age': 40, 'active': false },
     *   'pebbles': { 'age': 1,  'active': true }
     * };
     *
     * _.findLastKey(users, function(o) { return o.age < 40; });
     * // => returns 'pebbles' assuming `_.findKey` returns 'barney'
     *
     * // The `_.matches` iteratee shorthand.
     * _.findLastKey(users, { 'age': 36, 'active': true });
     * // => 'barney'
     *
     * // The `_.matchesProperty` iteratee shorthand.
     * _.findLastKey(users, ['active', false]);
     * // => 'fred'
     *
     * // The `_.property` iteratee shorthand.
     * _.findLastKey(users, 'active');
     * // => 'pebbles'
     */function(e,t){return t_(e,ic(t,3),nq)},np.floor=o1,np.forEach=au,np.forEachRight=ac,np.forIn=/**
     * Iterates over own and inherited enumerable string keyed properties of an
     * object and invokes `iteratee` for each property. The iteratee is invoked
     * with three arguments: (value, key, object). Iteratee functions may exit
     * iteration early by explicitly returning `false`.
     *
     * @static
     * @memberOf _
     * @since 0.3.0
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @returns {Object} Returns `object`.
     * @see _.forInRight
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.forIn(new Foo, function(value, key) {
     *   console.log(key);
     * });
     * // => Logs 'a', 'b', then 'c' (iteration order is not guaranteed).
     */function(e,t){return null==e?e:nW(e,ic(t,3),od)},np.forInRight=/**
     * This method is like `_.forIn` except that it iterates over properties of
     * `object` in the opposite order.
     *
     * @static
     * @memberOf _
     * @since 2.0.0
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @returns {Object} Returns `object`.
     * @see _.forIn
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.forInRight(new Foo, function(value, key) {
     *   console.log(key);
     * });
     * // => Logs 'c', 'b', then 'a' assuming `_.forIn` logs 'a', 'b', then 'c'.
     */function(e,t){return null==e?e:nj(e,ic(t,3),od)},np.forOwn=/**
     * Iterates over own enumerable string keyed properties of an object and
     * invokes `iteratee` for each property. The iteratee is invoked with three
     * arguments: (value, key, object). Iteratee functions may exit iteration
     * early by explicitly returning `false`.
     *
     * @static
     * @memberOf _
     * @since 0.3.0
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @returns {Object} Returns `object`.
     * @see _.forOwnRight
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.forOwn(new Foo, function(value, key) {
     *   console.log(key);
     * });
     * // => Logs 'a' then 'b' (iteration order is not guaranteed).
     */function(e,t){return e&&nX(e,ic(t,3))},np.forOwnRight=/**
     * This method is like `_.forOwn` except that it iterates over properties of
     * `object` in the opposite order.
     *
     * @static
     * @memberOf _
     * @since 2.0.0
     * @category Object
     * @param {Object} object The object to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @returns {Object} Returns `object`.
     * @see _.forOwn
     * @example
     *
     * function Foo() {
     *   this.a = 1;
     *   this.b = 2;
     * }
     *
     * Foo.prototype.c = 3;
     *
     * _.forOwnRight(new Foo, function(value, key) {
     *   console.log(key);
     * });
     * // => Logs 'b' then 'a' assuming `_.forOwn` logs 'a' then 'b'.
     */function(e,t){return e&&nq(e,ic(t,3))},np.get=os,np.gt=aO,np.gte=aI,np.has=/**
     * Checks if `path` is a direct property of `object`.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @param {Array|string} path The path to check.
     * @returns {boolean} Returns `true` if `path` exists, else `false`.
     * @example
     *
     * var object = { 'a': { 'b': 2 } };
     * var other = _.create({ 'a': _.create({ 'b': 2 }) });
     *
     * _.has(object, 'a');
     * // => true
     *
     * _.has(object, 'a.b');
     * // => true
     *
     * _.has(object, ['a', 'b']);
     * // => true
     *
     * _.has(other, 'a');
     * // => false
     */function(e,t){return null!=e&&iy(e,t,nQ)},np.hasIn=ol,np.head=iq,np.identity=oF,np.includes=/**
     * Checks if `value` is in `collection`. If `collection` is a string, it's
     * checked for a substring of `value`, otherwise
     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
     * is used for equality comparisons. If `fromIndex` is negative, it's used as
     * the offset from the end of `collection`.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Collection
     * @param {Array|Object|string} collection The collection to inspect.
     * @param {*} value The value to search for.
     * @param {number} [fromIndex=0] The index to search from.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.
     * @returns {boolean} Returns `true` if `value` is found, else `false`.
     * @example
     *
     * _.includes([1, 2, 3], 1);
     * // => true
     *
     * _.includes([1, 2, 3], 1, 2);
     * // => false
     *
     * _.includes({ 'a': 1, 'b': 2 }, 1);
     * // => true
     *
     * _.includes('abcd', 'bc');
     * // => true
     */function(e,t,n,r){e=ak(e)?e:ob(e),n=n&&!r?a5(n):0;var i=e.length;return n<0&&(n=t2(i+n,0)),aJ(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&tb(e,t,n)>-1},np.indexOf=/**
     * Gets the index at which the first occurrence of `value` is found in `array`
     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
     * for equality comparisons. If `fromIndex` is negative, it's used as the
     * offset from the end of `array`.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Array
     * @param {Array} array The array to inspect.
     * @param {*} value The value to search for.
     * @param {number} [fromIndex=0] The index to search from.
     * @returns {number} Returns the index of the matched value, else `-1`.
     * @example
     *
     * _.indexOf([1, 2, 1, 2], 2);
     * // => 1
     *
     * // Search from the `fromIndex`.
     * _.indexOf([1, 2, 1, 2], 2, 2);
     * // => 3
     */function(e,t,n){var r=null==e?0:e.length;if(!r)return -1;var i=null==n?0:a5(n);return i<0&&(i=t2(r+i,0)),tb(e,t,i)},np.inRange=/**
     * Checks if `n` is between `start` and up to, but not including, `end`. If
     * `end` is not specified, it's set to `start` with `start` then set to `0`.
     * If `start` is greater than `end` the params are swapped to support
     * negative ranges.
     *
     * @static
     * @memberOf _
     * @since 3.3.0
     * @category Number
     * @param {number} number The number to check.
     * @param {number} [start=0] The start of the range.
     * @param {number} end The end of the range.
     * @returns {boolean} Returns `true` if `number` is in the range, else `false`.
     * @see _.range, _.rangeRight
     * @example
     *
     * _.inRange(3, 2, 4);
     * // => true
     *
     * _.inRange(4, 8);
     * // => true
     *
     * _.inRange(4, 2);
     * // => false
     *
     * _.inRange(2, 2);
     * // => false
     *
     * _.inRange(1.2, 2);
     * // => true
     *
     * _.inRange(5.2, 4);
     * // => false
     *
     * _.inRange(-3, -2, -6);
     * // => true
     */function(e,t,r){var i,a,o;return t=a4(t),r===n?(r=t,t=0):r=a4(r),(i=e=a8(e))>=t3(a=t,o=r)&&i<t2(a,o)},np.invoke=of,np.isArguments=aU,np.isArray=aN,np.isArrayBuffer=aD,np.isArrayLike=ak,np.isArrayLikeObject=aF,np.isBoolean=/**
     * Checks if `value` is classified as a boolean primitive or object.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a boolean, else `false`.
     * @example
     *
     * _.isBoolean(false);
     * // => true
     *
     * _.isBoolean(null);
     * // => false
     */function(e){return!0===e||!1===e||aX(e)&&nZ(e)==h},np.isBuffer=az,np.isDate=aB,np.isElement=/**
     * Checks if `value` is likely a DOM element.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a DOM element, else `false`.
     * @example
     *
     * _.isElement(document.body);
     * // => true
     *
     * _.isElement('<body>');
     * // => false
     */function(e){return aX(e)&&1===e.nodeType&&!a$(e)},np.isEmpty=/**
     * Checks if `value` is an empty object, collection, map, or set.
     *
     * Objects are considered empty if they have no own enumerable string keyed
     * properties.
     *
     * Array-like values such as `arguments` objects, arrays, buffers, strings, or
     * jQuery-like collections are considered empty if they have a `length` of `0`.
     * Similarly, maps and sets are considered empty if they have a `size` of `0`.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is empty, else `false`.
     * @example
     *
     * _.isEmpty(null);
     * // => true
     *
     * _.isEmpty(true);
     * // => true
     *
     * _.isEmpty(1);
     * // => true
     *
     * _.isEmpty([1, 2, 3]);
     * // => false
     *
     * _.isEmpty({ 'a': 1 });
     * // => false
     */function(e){if(null==e)return!0;if(ak(e)&&(aN(e)||"string"==typeof e||"function"==typeof e.splice||az(e)||a0(e)||aU(e)))return!e.length;var t=iv(e);if(t==v||t==S)return!e.size;if(iT(e))return!n7(e).length;for(var n in e)if(eO.call(e,n))return!1;return!0},np.isEqual=/**
     * Performs a deep comparison between two values to determine if they are
     * equivalent.
     *
     * **Note:** This method supports comparing arrays, array buffers, booleans,
     * date objects, error objects, maps, numbers, `Object` objects, regexes,
     * sets, strings, symbols, and typed arrays. `Object` objects are compared
     * by their own, not inherited, enumerable properties. Functions and DOM
     * nodes are compared by strict equality, i.e. `===`.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Lang
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
     * @example
     *
     * var object = { 'a': 1 };
     * var other = { 'a': 1 };
     *
     * _.isEqual(object, other);
     * // => true
     *
     * object === other;
     * // => false
     */function(e,t){return n4(e,t)},np.isEqualWith=/**
     * This method is like `_.isEqual` except that it accepts `customizer` which
     * is invoked to compare values. If `customizer` returns `undefined`, comparisons
     * are handled by the method instead. The `customizer` is invoked with up to
     * six arguments: (objValue, othValue [, index|key, object, other, stack]).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to compare.
     * @param {*} other The other value to compare.
     * @param {Function} [customizer] The function to customize comparisons.
     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
     * @example
     *
     * function isGreeting(value) {
     *   return /^h(?:i|ello)$/.test(value);
     * }
     *
     * function customizer(objValue, othValue) {
     *   if (isGreeting(objValue) && isGreeting(othValue)) {
     *     return true;
     *   }
     * }
     *
     * var array = ['hello', 'goodbye'];
     * var other = ['hi', 'goodbye'];
     *
     * _.isEqualWith(array, other, customizer);
     * // => true
     */function(e,t,r){var i=(r="function"==typeof r?r:n)?r(e,t):n;return i===n?n4(e,t,n,r):!!i},np.isError=aV,np.isFinite=/**
     * Checks if `value` is a finite primitive number.
     *
     * **Note:** This method is based on
     * [`Number.isFinite`](https://mdn.io/Number/isFinite).
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a finite number, else `false`.
     * @example
     *
     * _.isFinite(3);
     * // => true
     *
     * _.isFinite(Number.MIN_VALUE);
     * // => true
     *
     * _.isFinite(Infinity);
     * // => false
     *
     * _.isFinite('3');
     * // => false
     */function(e){return"number"==typeof e&&tQ(e)},np.isFunction=aH,np.isInteger=aG,np.isLength=aW,np.isMap=aq,np.isMatch=/**
     * Performs a partial deep comparison between `object` and `source` to
     * determine if `object` contains equivalent property values.
     *
     * **Note:** This method is equivalent to `_.matches` when `source` is
     * partially applied.
     *
     * Partial comparisons will match empty array and empty object `source`
     * values against any array or object value, respectively. See `_.isEqual`
     * for a list of supported value comparisons.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Lang
     * @param {Object} object The object to inspect.
     * @param {Object} source The object of property values to match.
     * @returns {boolean} Returns `true` if `object` is a match, else `false`.
     * @example
     *
     * var object = { 'a': 1, 'b': 2 };
     *
     * _.isMatch(object, { 'b': 2 });
     * // => true
     *
     * _.isMatch(object, { 'b': 1 });
     * // => false
     */function(e,t){return e===t||n5(e,t,id(t))},np.isMatchWith=/**
     * This method is like `_.isMatch` except that it accepts `customizer` which
     * is invoked to compare values. If `customizer` returns `undefined`, comparisons
     * are handled by the method instead. The `customizer` is invoked with five
     * arguments: (objValue, srcValue, index|key, object, source).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {Object} object The object to inspect.
     * @param {Object} source The object of property values to match.
     * @param {Function} [customizer] The function to customize comparisons.
     * @returns {boolean} Returns `true` if `object` is a match, else `false`.
     * @example
     *
     * function isGreeting(value) {
     *   return /^h(?:i|ello)$/.test(value);
     * }
     *
     * function customizer(objValue, srcValue) {
     *   if (isGreeting(objValue) && isGreeting(srcValue)) {
     *     return true;
     *   }
     * }
     *
     * var object = { 'greeting': 'hello' };
     * var source = { 'greeting': 'hi' };
     *
     * _.isMatchWith(object, source, customizer);
     * // => true
     */function(e,t,r){return r="function"==typeof r?r:n,n5(e,t,id(t),r)},np.isNaN=/**
     * Checks if `value` is `NaN`.
     *
     * **Note:** This method is based on
     * [`Number.isNaN`](https://mdn.io/Number/isNaN) and is not the same as
     * global [`isNaN`](https://mdn.io/isNaN) which returns `true` for
     * `undefined` and other non-number values.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.
     * @example
     *
     * _.isNaN(NaN);
     * // => true
     *
     * _.isNaN(new Number(NaN));
     * // => true
     *
     * isNaN(undefined);
     * // => true
     *
     * _.isNaN(undefined);
     * // => false
     */function(e){// An `NaN` primitive is the only value that is not equal to itself.
// Perform the `toStringTag` check first to avoid errors with some
// ActiveX objects in IE.
return aY(e)&&e!=+e},np.isNative=/**
     * Checks if `value` is a pristine native function.
     *
     * **Note:** This method can't reliably detect native functions in the presence
     * of the core-js package because core-js circumvents this kind of detection.
     * Despite multiple requests, the core-js maintainer has made it clear: any
     * attempt to fix the detection will be obstructed. As a result, we're left
     * with little choice but to throw an error. Unfortunately, this also affects
     * packages, like [babel-polyfill](https://www.npmjs.com/package/babel-polyfill),
     * which rely on core-js.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a native function,
     *  else `false`.
     * @example
     *
     * _.isNative(Array.prototype.push);
     * // => true
     *
     * _.isNative(_);
     * // => false
     */function(e){if(iM(e))throw new ex("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return n6(e)},np.isNil=/**
     * Checks if `value` is `null` or `undefined`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is nullish, else `false`.
     * @example
     *
     * _.isNil(null);
     * // => true
     *
     * _.isNil(void 0);
     * // => true
     *
     * _.isNil(NaN);
     * // => false
     */function(e){return null==e},np.isNull=/**
     * Checks if `value` is `null`.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is `null`, else `false`.
     * @example
     *
     * _.isNull(null);
     * // => true
     *
     * _.isNull(void 0);
     * // => false
     */function(e){return null===e},np.isNumber=aY,np.isObject=aj,np.isObjectLike=aX,np.isPlainObject=a$,np.isRegExp=aK,np.isSafeInteger=/**
     * Checks if `value` is a safe integer. An integer is safe if it's an IEEE-754
     * double precision number which isn't the result of a rounded unsafe integer.
     *
     * **Note:** This method is based on
     * [`Number.isSafeInteger`](https://mdn.io/Number/isSafeInteger).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a safe integer, else `false`.
     * @example
     *
     * _.isSafeInteger(3);
     * // => true
     *
     * _.isSafeInteger(Number.MIN_VALUE);
     * // => false
     *
     * _.isSafeInteger(Infinity);
     * // => false
     *
     * _.isSafeInteger('3');
     * // => false
     */function(e){return aG(e)&&e>=-9007199254740991&&e<=9007199254740991},np.isSet=aZ,np.isString=aJ,np.isSymbol=aQ,np.isTypedArray=a0,np.isUndefined=/**
     * Checks if `value` is `undefined`.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.
     * @example
     *
     * _.isUndefined(void 0);
     * // => true
     *
     * _.isUndefined(null);
     * // => false
     */function(e){return e===n},np.isWeakMap=/**
     * Checks if `value` is classified as a `WeakMap` object.
     *
     * @static
     * @memberOf _
     * @since 4.3.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a weak map, else `false`.
     * @example
     *
     * _.isWeakMap(new WeakMap);
     * // => true
     *
     * _.isWeakMap(new Map);
     * // => false
     */function(e){return aX(e)&&iv(e)==M},np.isWeakSet=/**
     * Checks if `value` is classified as a `WeakSet` object.
     *
     * @static
     * @memberOf _
     * @since 4.3.0
     * @category Lang
     * @param {*} value The value to check.
     * @returns {boolean} Returns `true` if `value` is a weak set, else `false`.
     * @example
     *
     * _.isWeakSet(new WeakSet);
     * // => true
     *
     * _.isWeakSet(new Set);
     * // => false
     */function(e){return aX(e)&&"[object WeakSet]"==nZ(e)},np.join=/**
     * Converts all elements in `array` into a string separated by `separator`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} array The array to convert.
     * @param {string} [separator=','] The element separator.
     * @returns {string} Returns the joined string.
     * @example
     *
     * _.join(['a', 'b', 'c'], '~');
     * // => 'a~b~c'
     */function(e,t){return null==e?"":t0.call(e,t)},np.kebabCase=oM,np.last=iZ,np.lastIndexOf=/**
     * This method is like `_.indexOf` except that it iterates over elements of
     * `array` from right to left.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Array
     * @param {Array} array The array to inspect.
     * @param {*} value The value to search for.
     * @param {number} [fromIndex=array.length-1] The index to search from.
     * @returns {number} Returns the index of the matched value, else `-1`.
     * @example
     *
     * _.lastIndexOf([1, 2, 1, 2], 2);
     * // => 3
     *
     * // Search from the `fromIndex`.
     * _.lastIndexOf([1, 2, 1, 2], 2, 2);
     * // => 1
     */function(e,t,r){var i=null==e?0:e.length;if(!i)return -1;var a=i;return r!==n&&(a=(a=a5(r))<0?t2(i+a,0):t3(a,i-1)),t==t?/**
   * A specialized version of `_.lastIndexOf` which performs strict equality
   * comparisons of values, i.e. `===`.
   *
   * @private
   * @param {Array} array The array to inspect.
   * @param {*} value The value to search for.
   * @param {number} fromIndex The index to search from.
   * @returns {number} Returns the index of the matched value, else `-1`.
   */function(e,t,n){for(var r=n+1;r--&&e[r]!==t;);return r}(e,t,a):tx(e,tE,a,!0)},np.lowerCase=oT,np.lowerFirst=oA,np.lt=a1,np.lte=a2,np.max=/**
     * Computes the maximum value of `array`. If `array` is empty or falsey,
     * `undefined` is returned.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Math
     * @param {Array} array The array to iterate over.
     * @returns {*} Returns the maximum value.
     * @example
     *
     * _.max([4, 2, 8, 6]);
     * // => 8
     *
     * _.max([]);
     * // => undefined
     */function(e){return e&&e.length?nV(e,oF,nJ):n},np.maxBy=/**
     * This method is like `_.max` except that it accepts `iteratee` which is
     * invoked for each element in `array` to generate the criterion by which
     * the value is ranked. The iteratee is invoked with one argument: (value).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Math
     * @param {Array} array The array to iterate over.
     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
     * @returns {*} Returns the maximum value.
     * @example
     *
     * var objects = [{ 'n': 1 }, { 'n': 2 }];
     *
     * _.maxBy(objects, function(o) { return o.n; });
     * // => { 'n': 2 }
     *
     * // The `_.property` iteratee shorthand.
     * _.maxBy(objects, 'n');
     * // => { 'n': 2 }
     */function(e,t){return e&&e.length?nV(e,ic(t,2),nJ):n},np.mean=/**
     * Computes the mean of the values in `array`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Math
     * @param {Array} array The array to iterate over.
     * @returns {number} Returns the mean.
     * @example
     *
     * _.mean([4, 2, 8, 6]);
     * // => 5
     */function(e){return tw(e,oF)},np.meanBy=/**
     * This method is like `_.mean` except that it accepts `iteratee` which is
     * invoked for each element in `array` to generate the value to be averaged.
     * The iteratee is invoked with one argument: (value).
     *
     * @static
     * @memberOf _
     * @since 4.7.0
     * @category Math
     * @param {Array} array The array to iterate over.
     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
     * @returns {number} Returns the mean.
     * @example
     *
     * var objects = [{ 'n': 4 }, { 'n': 2 }, { 'n': 8 }, { 'n': 6 }];
     *
     * _.meanBy(objects, function(o) { return o.n; });
     * // => 5
     *
     * // The `_.property` iteratee shorthand.
     * _.meanBy(objects, 'n');
     * // => 5
     */function(e,t){return tw(e,ic(t,2))},np.min=/**
     * Computes the minimum value of `array`. If `array` is empty or falsey,
     * `undefined` is returned.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Math
     * @param {Array} array The array to iterate over.
     * @returns {*} Returns the minimum value.
     * @example
     *
     * _.min([4, 2, 8, 6]);
     * // => 2
     *
     * _.min([]);
     * // => undefined
     */function(e){return e&&e.length?nV(e,oF,n9):n},np.minBy=/**
     * This method is like `_.min` except that it accepts `iteratee` which is
     * invoked for each element in `array` to generate the criterion by which
     * the value is ranked. The iteratee is invoked with one argument: (value).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Math
     * @param {Array} array The array to iterate over.
     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
     * @returns {*} Returns the minimum value.
     * @example
     *
     * var objects = [{ 'n': 1 }, { 'n': 2 }];
     *
     * _.minBy(objects, function(o) { return o.n; });
     * // => { 'n': 1 }
     *
     * // The `_.property` iteratee shorthand.
     * _.minBy(objects, 'n');
     * // => { 'n': 1 }
     */function(e,t){return e&&e.length?nV(e,ic(t,2),n9):n},np.stubArray=oK,np.stubFalse=oZ,np.stubObject=/**
     * This method returns a new empty object.
     *
     * @static
     * @memberOf _
     * @since 4.13.0
     * @category Util
     * @returns {Object} Returns the new empty object.
     * @example
     *
     * var objects = _.times(2, _.stubObject);
     *
     * console.log(objects);
     * // => [{}, {}]
     *
     * console.log(objects[0] === objects[1]);
     * // => false
     */function(){return{}},np.stubString=/**
     * This method returns an empty string.
     *
     * @static
     * @memberOf _
     * @since 4.13.0
     * @category Util
     * @returns {string} Returns the empty string.
     * @example
     *
     * _.times(2, _.stubString);
     * // => ['', '']
     */function(){return""},np.stubTrue=/**
     * This method returns `true`.
     *
     * @static
     * @memberOf _
     * @since 4.13.0
     * @category Util
     * @returns {boolean} Returns `true`.
     * @example
     *
     * _.times(2, _.stubTrue);
     * // => [true, true]
     */function(){return!0},np.multiply=o2,np.nth=/**
     * Gets the element at index `n` of `array`. If `n` is negative, the nth
     * element from the end is returned.
     *
     * @static
     * @memberOf _
     * @since 4.11.0
     * @category Array
     * @param {Array} array The array to query.
     * @param {number} [n=0] The index of the element to return.
     * @returns {*} Returns the nth element of `array`.
     * @example
     *
     * var array = ['a', 'b', 'c', 'd'];
     *
     * _.nth(array, 1);
     * // => 'b'
     *
     * _.nth(array, -2);
     * // => 'c';
     */function(e,t){return e&&e.length?ri(e,a5(t)):n},np.noConflict=/**
     * Reverts the `_` variable to its previous value and returns a reference to
     * the `lodash` function.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Util
     * @returns {Function} Returns the `lodash` function.
     * @example
     *
     * var lodash = _.noConflict();
     */function(){return e4._===this&&(e4._=ek),this},np.noop=oG,np.now=av,np.pad=/**
     * Pads `string` on the left and right sides if it's shorter than `length`.
     * Padding characters are truncated if they can't be evenly divided by `length`.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category String
     * @param {string} [string=''] The string to pad.
     * @param {number} [length=0] The padding length.
     * @param {string} [chars=' '] The string used as padding.
     * @returns {string} Returns the padded string.
     * @example
     *
     * _.pad('abc', 8);
     * // => '  abc   '
     *
     * _.pad('abc', 8, '_-');
     * // => '_-abc_-_'
     *
     * _.pad('abc', 3);
     * // => 'abc'
     */function(e,t,n){e=a9(e);var r=(t=a5(t))?tW(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return r1(tK(i),n)+e+r1(t$(i),n)},np.padEnd=/**
     * Pads `string` on the right side if it's shorter than `length`. Padding
     * characters are truncated if they exceed `length`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category String
     * @param {string} [string=''] The string to pad.
     * @param {number} [length=0] The padding length.
     * @param {string} [chars=' '] The string used as padding.
     * @returns {string} Returns the padded string.
     * @example
     *
     * _.padEnd('abc', 6);
     * // => 'abc   '
     *
     * _.padEnd('abc', 6, '_-');
     * // => 'abc_-_'
     *
     * _.padEnd('abc', 3);
     * // => 'abc'
     */function(e,t,n){e=a9(e);var r=(t=a5(t))?tW(e):0;return t&&r<t?e+r1(t-r,n):e},np.padStart=/**
     * Pads `string` on the left side if it's shorter than `length`. Padding
     * characters are truncated if they exceed `length`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category String
     * @param {string} [string=''] The string to pad.
     * @param {number} [length=0] The padding length.
     * @param {string} [chars=' '] The string used as padding.
     * @returns {string} Returns the padded string.
     * @example
     *
     * _.padStart('abc', 6);
     * // => '   abc'
     *
     * _.padStart('abc', 6, '_-');
     * // => '_-_abc'
     *
     * _.padStart('abc', 3);
     * // => 'abc'
     */function(e,t,n){e=a9(e);var r=(t=a5(t))?tW(e):0;return t&&r<t?r1(t-r,n)+e:e},np.parseInt=/**
     * Converts `string` to an integer of the specified radix. If `radix` is
     * `undefined` or `0`, a `radix` of `10` is used unless `value` is a
     * hexadecimal, in which case a `radix` of `16` is used.
     *
     * **Note:** This method aligns with the
     * [ES5 implementation](https://es5.github.io/#x15.1.2.2) of `parseInt`.
     *
     * @static
     * @memberOf _
     * @since 1.1.0
     * @category String
     * @param {string} string The string to convert.
     * @param {number} [radix=10] The radix to interpret `value` by.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {number} Returns the converted integer.
     * @example
     *
     * _.parseInt('08');
     * // => 8
     *
     * _.map(['6', '08', '10'], _.parseInt);
     * // => [6, 8, 10]
     */function(e,t,n){return n||null==t?t=0:t&&(t=+t),t5(a9(e).replace(J,""),t||0)},np.random=/**
     * Produces a random number between the inclusive `lower` and `upper` bounds.
     * If only one argument is provided a number between `0` and the given number
     * is returned. If `floating` is `true`, or either `lower` or `upper` are
     * floats, a floating-point number is returned instead of an integer.
     *
     * **Note:** JavaScript follows the IEEE-754 standard for resolving
     * floating-point values which can produce unexpected results.
     *
     * @static
     * @memberOf _
     * @since 0.7.0
     * @category Number
     * @param {number} [lower=0] The lower bound.
     * @param {number} [upper=1] The upper bound.
     * @param {boolean} [floating] Specify returning a floating-point number.
     * @returns {number} Returns the random number.
     * @example
     *
     * _.random(0, 5);
     * // => an integer between 0 and 5
     *
     * _.random(5);
     * // => also an integer between 0 and 5
     *
     * _.random(5, true);
     * // => a floating-point number between 0 and 5
     *
     * _.random(1.2, 5.2);
     * // => a floating-point number between 1.2 and 5.2
     */function(e,t,r){if(r&&"boolean"!=typeof r&&iS(e,t,r)&&(t=r=n),r===n&&("boolean"==typeof t?(r=t,t=n):"boolean"==typeof e&&(r=e,e=n)),e===n&&t===n?(e=0,t=1):(e=a4(e),t===n?(t=e,e=0):t=a4(t)),e>t){var i=e;e=t,t=i}if(r||e%1||t%1){var a=t6();return t3(e+a*(t-e+e0("1e-"+((a+"").length-1))),t)}return ru(e,t)},np.reduce=/**
     * Reduces `collection` to a value which is the accumulated result of running
     * each element in `collection` thru `iteratee`, where each successive
     * invocation is supplied the return value of the previous. If `accumulator`
     * is not given, the first element of `collection` is used as the initial
     * value. The iteratee is invoked with four arguments:
     * (accumulator, value, index|key, collection).
     *
     * Many lodash methods are guarded to work as iteratees for methods like
     * `_.reduce`, `_.reduceRight`, and `_.transform`.
     *
     * The guarded methods are:
     * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `orderBy`,
     * and `sortBy`
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [accumulator] The initial value.
     * @returns {*} Returns the accumulated value.
     * @see _.reduceRight
     * @example
     *
     * _.reduce([1, 2], function(sum, n) {
     *   return sum + n;
     * }, 0);
     * // => 3
     *
     * _.reduce({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {
     *   (result[value] || (result[value] = [])).push(key);
     *   return result;
     * }, {});
     * // => { '1': ['a', 'c'], '2': ['b'] } (iteration order is not guaranteed)
     */function(e,t,n){var r=aN(e)?tm:tA,i=arguments.length<3;return r(e,ic(t,4),n,i,nF)},np.reduceRight=/**
     * This method is like `_.reduce` except that it iterates over elements of
     * `collection` from right to left.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @param {*} [accumulator] The initial value.
     * @returns {*} Returns the accumulated value.
     * @see _.reduce
     * @example
     *
     * var array = [[0, 1], [2, 3], [4, 5]];
     *
     * _.reduceRight(array, function(flattened, other) {
     *   return flattened.concat(other);
     * }, []);
     * // => [4, 5, 2, 3, 0, 1]
     */function(e,t,n){var r=aN(e)?tg:tA,i=arguments.length<3;return r(e,ic(t,4),n,i,nz)},np.repeat=/**
     * Repeats the given string `n` times.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category String
     * @param {string} [string=''] The string to repeat.
     * @param {number} [n=1] The number of times to repeat the string.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {string} Returns the repeated string.
     * @example
     *
     * _.repeat('*', 3);
     * // => '***'
     *
     * _.repeat('abc', 2);
     * // => 'abcabc'
     *
     * _.repeat('abc', 0);
     * // => ''
     */function(e,t,r){return t=(r?iS(e,t,r):t===n)?1:a5(t),rc(a9(e),t)},np.replace=/**
     * Replaces matches for `pattern` in `string` with `replacement`.
     *
     * **Note:** This method is based on
     * [`String#replace`](https://mdn.io/String/replace).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category String
     * @param {string} [string=''] The string to modify.
     * @param {RegExp|string} pattern The pattern to replace.
     * @param {Function|string} replacement The match replacement.
     * @returns {string} Returns the modified string.
     * @example
     *
     * _.replace('Hi Fred', 'Fred', 'Barney');
     * // => 'Hi Barney'
     */function(){var e=arguments,t=a9(e[0]);return e.length<3?t:t.replace(e[1],e[2])},np.result=/**
     * This method is like `_.get` except that if the resolved value is a
     * function it's invoked with the `this` binding of its parent object and
     * its result is returned.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Object
     * @param {Object} object The object to query.
     * @param {Array|string} path The path of the property to resolve.
     * @param {*} [defaultValue] The value returned for `undefined` resolved values.
     * @returns {*} Returns the resolved value.
     * @example
     *
     * var object = { 'a': [{ 'b': { 'c1': 3, 'c2': _.constant(4) } }] };
     *
     * _.result(object, 'a[0].b.c1');
     * // => 3
     *
     * _.result(object, 'a[0].b.c2');
     * // => 4
     *
     * _.result(object, 'a[0].b.c3', 'default');
     * // => 'default'
     *
     * _.result(object, 'a[0].b.c3', _.constant('default'));
     * // => 'default'
     */function(e,t,r){t=rL(t,e);var i=-1,a=t.length;for(a||(a=1,e=n);++i<a;){var o=null==e?n:e[iF(t[i])];o===n&&(i=a,o=r),e=aH(o)?o.call(e):o}return e},np.round=o3,np.runInContext=e,np.sample=/**
     * Gets a random element from `collection`.
     *
     * @static
     * @memberOf _
     * @since 2.0.0
     * @category Collection
     * @param {Array|Object} collection The collection to sample.
     * @returns {*} Returns the random element.
     * @example
     *
     * _.sample([1, 2, 3, 4]);
     * // => 2
     */function(e){return(aN(e)?nM:/**
     * The base implementation of `_.sample`.
     *
     * @private
     * @param {Array|Object} collection The collection to sample.
     * @returns {*} Returns the random element.
     */function(e){return nM(ob(e))})(e)},np.size=/**
     * Gets the size of `collection` by returning its length for array-like
     * values or the number of own enumerable string keyed properties for objects.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Collection
     * @param {Array|Object|string} collection The collection to inspect.
     * @returns {number} Returns the collection size.
     * @example
     *
     * _.size([1, 2, 3]);
     * // => 3
     *
     * _.size({ 'a': 1, 'b': 2 });
     * // => 2
     *
     * _.size('pebbles');
     * // => 7
     */function(e){if(null==e)return 0;if(ak(e))return aJ(e)?tW(e):e.length;var t=iv(e);return t==v||t==S?e.size:n7(e).length},np.snakeCase=oC,np.some=/**
     * Checks if `predicate` returns truthy for **any** element of `collection`.
     * Iteration is stopped once `predicate` returns truthy. The predicate is
     * invoked with three arguments: (value, index|key, collection).
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Collection
     * @param {Array|Object} collection The collection to iterate over.
     * @param {Function} [predicate=_.identity] The function invoked per iteration.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {boolean} Returns `true` if any element passes the predicate check,
     *  else `false`.
     * @example
     *
     * _.some([null, 0, 'yes', false], Boolean);
     * // => true
     *
     * var users = [
     *   { 'user': 'barney', 'active': true },
     *   { 'user': 'fred',   'active': false }
     * ];
     *
     * // The `_.matches` iteratee shorthand.
     * _.some(users, { 'user': 'barney', 'active': false });
     * // => false
     *
     * // The `_.matchesProperty` iteratee shorthand.
     * _.some(users, ['active', false]);
     * // => true
     *
     * // The `_.property` iteratee shorthand.
     * _.some(users, 'active');
     * // => true
     */function(e,t,r){var i=aN(e)?tv:rg;return r&&iS(e,t,r)&&(t=n),i(e,ic(t,3))},np.sortedIndex=/**
     * Uses a binary search to determine the lowest index at which `value`
     * should be inserted into `array` in order to maintain its sort order.
     *
     * @static
     * @memberOf _
     * @since 0.1.0
     * @category Array
     * @param {Array} array The sorted array to inspect.
     * @param {*} value The value to evaluate.
     * @returns {number} Returns the index at which `value` should be inserted
     *  into `array`.
     * @example
     *
     * _.sortedIndex([30, 50], 40);
     * // => 1
     */function(e,t){return rv(e,t)},np.sortedIndexBy=/**
     * This method is like `_.sortedIndex` except that it accepts `iteratee`
     * which is invoked for `value` and each element of `array` to compute their
     * sort ranking. The iteratee is invoked with one argument: (value).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} array The sorted array to inspect.
     * @param {*} value The value to evaluate.
     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
     * @returns {number} Returns the index at which `value` should be inserted
     *  into `array`.
     * @example
     *
     * var objects = [{ 'x': 4 }, { 'x': 5 }];
     *
     * _.sortedIndexBy(objects, { 'x': 4 }, function(o) { return o.x; });
     * // => 0
     *
     * // The `_.property` iteratee shorthand.
     * _.sortedIndexBy(objects, { 'x': 4 }, 'x');
     * // => 0
     */function(e,t,n){return ry(e,t,ic(n,2))},np.sortedIndexOf=/**
     * This method is like `_.indexOf` except that it performs a binary
     * search on a sorted `array`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} array The array to inspect.
     * @param {*} value The value to search for.
     * @returns {number} Returns the index of the matched value, else `-1`.
     * @example
     *
     * _.sortedIndexOf([4, 5, 5, 5, 6], 5);
     * // => 1
     */function(e,t){var n=null==e?0:e.length;if(n){var r=rv(e,t);if(r<n&&aL(e[r],t))return r}return -1},np.sortedLastIndex=/**
     * This method is like `_.sortedIndex` except that it returns the highest
     * index at which `value` should be inserted into `array` in order to
     * maintain its sort order.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category Array
     * @param {Array} array The sorted array to inspect.
     * @param {*} value The value to evaluate.
     * @returns {number} Returns the index at which `value` should be inserted
     *  into `array`.
     * @example
     *
     * _.sortedLastIndex([4, 5, 5, 5, 6], 5);
     * // => 4
     */function(e,t){return rv(e,t,!0)},np.sortedLastIndexBy=/**
     * This method is like `_.sortedLastIndex` except that it accepts `iteratee`
     * which is invoked for `value` and each element of `array` to compute their
     * sort ranking. The iteratee is invoked with one argument: (value).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} array The sorted array to inspect.
     * @param {*} value The value to evaluate.
     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
     * @returns {number} Returns the index at which `value` should be inserted
     *  into `array`.
     * @example
     *
     * var objects = [{ 'x': 4 }, { 'x': 5 }];
     *
     * _.sortedLastIndexBy(objects, { 'x': 4 }, function(o) { return o.x; });
     * // => 1
     *
     * // The `_.property` iteratee shorthand.
     * _.sortedLastIndexBy(objects, { 'x': 4 }, 'x');
     * // => 1
     */function(e,t,n){return ry(e,t,ic(n,2),!0)},np.sortedLastIndexOf=/**
     * This method is like `_.lastIndexOf` except that it performs a binary
     * search on a sorted `array`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Array
     * @param {Array} array The array to inspect.
     * @param {*} value The value to search for.
     * @returns {number} Returns the index of the matched value, else `-1`.
     * @example
     *
     * _.sortedLastIndexOf([4, 5, 5, 5, 6], 5);
     * // => 3
     */function(e,t){if(null==e?0:e.length){var n=rv(e,t,!0)-1;if(aL(e[n],t))return n}return -1},np.startCase=oP,np.startsWith=/**
     * Checks if `string` starts with the given target string.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category String
     * @param {string} [string=''] The string to inspect.
     * @param {string} [target] The string to search for.
     * @param {number} [position=0] The position to search from.
     * @returns {boolean} Returns `true` if `string` starts with `target`,
     *  else `false`.
     * @example
     *
     * _.startsWith('abc', 'a');
     * // => true
     *
     * _.startsWith('abc', 'b');
     * // => false
     *
     * _.startsWith('abc', 'b', 1);
     * // => true
     */function(e,t,n){return e=a9(e),n=null==n?0:nI(a5(n),0,e.length),t=rb(t),e.slice(n,n+t.length)==t},np.subtract=o4,np.sum=/**
     * Computes the sum of the values in `array`.
     *
     * @static
     * @memberOf _
     * @since 3.4.0
     * @category Math
     * @param {Array} array The array to iterate over.
     * @returns {number} Returns the sum.
     * @example
     *
     * _.sum([4, 2, 8, 6]);
     * // => 20
     */function(e){return e&&e.length?tC(e,oF):0},np.sumBy=/**
     * This method is like `_.sum` except that it accepts `iteratee` which is
     * invoked for each element in `array` to generate the value to be summed.
     * The iteratee is invoked with one argument: (value).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Math
     * @param {Array} array The array to iterate over.
     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
     * @returns {number} Returns the sum.
     * @example
     *
     * var objects = [{ 'n': 4 }, { 'n': 2 }, { 'n': 8 }, { 'n': 6 }];
     *
     * _.sumBy(objects, function(o) { return o.n; });
     * // => 20
     *
     * // The `_.property` iteratee shorthand.
     * _.sumBy(objects, 'n');
     * // => 20
     */function(e,t){return e&&e.length?tC(e,ic(t,2)):0},np.template=/**
     * Creates a compiled template function that can interpolate data properties
     * in "interpolate" delimiters, HTML-escape interpolated data properties in
     * "escape" delimiters, and execute JavaScript in "evaluate" delimiters. Data
     * properties may be accessed as free variables in the template. If a setting
     * object is given, it takes precedence over `_.templateSettings` values.
     *
     * **Note:** In the development build `_.template` utilizes
     * [sourceURLs](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl)
     * for easier debugging.
     *
     * For more information on precompiling templates see
     * [lodash's custom builds documentation](https://lodash.com/custom-builds).
     *
     * For more information on Chrome extension sandboxes see
     * [Chrome's extensions documentation](https://developer.chrome.com/extensions/sandboxingEval).
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category String
     * @param {string} [string=''] The template string.
     * @param {Object} [options={}] The options object.
     * @param {RegExp} [options.escape=_.templateSettings.escape]
     *  The HTML "escape" delimiter.
     * @param {RegExp} [options.evaluate=_.templateSettings.evaluate]
     *  The "evaluate" delimiter.
     * @param {Object} [options.imports=_.templateSettings.imports]
     *  An object to import into the template as free variables.
     * @param {RegExp} [options.interpolate=_.templateSettings.interpolate]
     *  The "interpolate" delimiter.
     * @param {string} [options.sourceURL='lodash.templateSources[n]']
     *  The sourceURL of the compiled template.
     * @param {string} [options.variable='obj']
     *  The data object variable name.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {Function} Returns the compiled template function.
     * @example
     *
     * // Use the "interpolate" delimiter to create a compiled template.
     * var compiled = _.template('hello <%= user %>!');
     * compiled({ 'user': 'fred' });
     * // => 'hello fred!'
     *
     * // Use the HTML "escape" delimiter to escape data property values.
     * var compiled = _.template('<b><%- value %></b>');
     * compiled({ 'value': '<script>' });
     * // => '<b>&lt;script&gt;</b>'
     *
     * // Use the "evaluate" delimiter to execute JavaScript and generate HTML.
     * var compiled = _.template('<% _.forEach(users, function(user) { %><li><%- user %></li><% }); %>');
     * compiled({ 'users': ['fred', 'barney'] });
     * // => '<li>fred</li><li>barney</li>'
     *
     * // Use the internal `print` function in "evaluate" delimiters.
     * var compiled = _.template('<% print("hello " + user); %>!');
     * compiled({ 'user': 'barney' });
     * // => 'hello barney!'
     *
     * // Use the ES template literal delimiter as an "interpolate" delimiter.
     * // Disable support by replacing the "interpolate" delimiter.
     * var compiled = _.template('hello ${ user }!');
     * compiled({ 'user': 'pebbles' });
     * // => 'hello pebbles!'
     *
     * // Use backslashes to treat delimiters as plain text.
     * var compiled = _.template('<%= "\\<%- value %\\>" %>');
     * compiled({ 'value': 'ignored' });
     * // => '<%- value %>'
     *
     * // Use the `imports` option to import `jQuery` as `jq`.
     * var text = '<% jq.each(users, function(user) { %><li><%- user %></li><% }); %>';
     * var compiled = _.template(text, { 'imports': { 'jq': jQuery } });
     * compiled({ 'users': ['fred', 'barney'] });
     * // => '<li>fred</li><li>barney</li>'
     *
     * // Use the `sourceURL` option to specify a custom sourceURL for the template.
     * var compiled = _.template('hello <%= user %>!', { 'sourceURL': '/basic/greeting.jst' });
     * compiled(data);
     * // => Find the source of "greeting.jst" under the Sources tab or Resources panel of the web inspector.
     *
     * // Use the `variable` option to ensure a with-statement isn't used in the compiled template.
     * var compiled = _.template('hi <%= data.user %>!', { 'variable': 'data' });
     * compiled.source;
     * // => function(data) {
     * //   var __t, __p = '';
     * //   __p += 'hi ' + ((__t = ( data.user )) == null ? '' : __t) + '!';
     * //   return __p;
     * // }
     *
     * // Use custom template delimiters.
     * _.templateSettings.interpolate = /{{([\s\S]+?)}}/g;
     * var compiled = _.template('hello {{ user }}!');
     * compiled({ 'user': 'mustache' });
     * // => 'hello mustache!'
     *
     * // Use the `source` property to inline compiled templates for meaningful
     * // line numbers in error messages and stack traces.
     * fs.writeFileSync(path.join(process.cwd(), 'jst.js'), '\
     *   var JST = {\
     *     "main": ' + _.template(mainText).source + '\
     *   };\
     * ');
     */function(e,t,r){// Based on John Resig's `tmpl` implementation
// (http://ejohn.org/blog/javascript-micro-templating/)
// and Laura Doktorova's doT.js (https://github.com/olado/doT).
var i=np.templateSettings;r&&iS(e,t,r)&&(t=n),e=a9(e),t=on({},t,i,r9);var a,o,s=on({},t.imports,i.imports,r9),l=oh(s),u=tO(s,l),c=0,f=t.interpolate||ep,h="__p += '",d=ew((t.escape||ep).source+"|"+f.source+"|"+(f===X?eo:ep).source+"|"+(t.evaluate||ep).source+"|$","g"),p="//# sourceURL="+(eO.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++eK+"]")+"\n";e.replace(d,function(t,n,r,i,s,l){// The JS engine embedded in Adobe products needs `match` returned in
// order to produce the correct `offset` value.
return r||(r=i),// Escape characters that can't be included in string literals.
h+=e.slice(c,l).replace(em,tF),n&&(a=!0,h+="' +\n__e("+n+") +\n'"),s&&(o=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=l+t.length,t}),h+="';\n";// If `variable` is not specified wrap a with-statement around the generated
// code to add the data object to the top of the scope chain.
var m=eO.call(t,"variable")&&t.variable;if(m){if(ei.test(m))throw new ex("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";// Cleanup code by stripping empty strings.
h=(o?h.replace(k,""):h).replace(F,"$1").replace(z,"$1;"),// Frame code as the function body.
h="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=oI(function(){return eb(l,p+"return "+h).apply(n,u)});if(// Provide the compiled function's source by its `toString` method or
// the `source` property as a convenience for inlining compiled templates.
g.source=h,aV(g))throw g;return g},np.times=/**
     * Invokes the iteratee `n` times, returning an array of the results of
     * each invocation. The iteratee is invoked with one argument; (index).
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Util
     * @param {number} n The number of times to invoke `iteratee`.
     * @param {Function} [iteratee=_.identity] The function invoked per iteration.
     * @returns {Array} Returns the array of results.
     * @example
     *
     * _.times(3, String);
     * // => ['0', '1', '2']
     *
     *  _.times(4, _.constant(0));
     * // => [0, 0, 0, 0]
     */function(e,t){if((e=a5(e))<1||e>9007199254740991)return[];var n=4294967295,r=t3(e,4294967295);t=ic(t),e-=4294967295;for(var i=tP(r,t);++n<e;)t(n);return i},np.toFinite=a4,np.toInteger=a5,np.toLength=a6,np.toLower=/**
     * Converts `string`, as a whole, to lower case just like
     * [String#toLowerCase](https://mdn.io/toLowerCase).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category String
     * @param {string} [string=''] The string to convert.
     * @returns {string} Returns the lower cased string.
     * @example
     *
     * _.toLower('--Foo-Bar--');
     * // => '--foo-bar--'
     *
     * _.toLower('fooBar');
     * // => 'foobar'
     *
     * _.toLower('__FOO_BAR__');
     * // => '__foo_bar__'
     */function(e){return a9(e).toLowerCase()},np.toNumber=a8,np.toSafeInteger=/**
     * Converts `value` to a safe integer. A safe integer can be compared and
     * represented correctly.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category Lang
     * @param {*} value The value to convert.
     * @returns {number} Returns the converted integer.
     * @example
     *
     * _.toSafeInteger(3.2);
     * // => 3
     *
     * _.toSafeInteger(Number.MIN_VALUE);
     * // => 0
     *
     * _.toSafeInteger(Infinity);
     * // => 9007199254740991
     *
     * _.toSafeInteger('3.2');
     * // => 3
     */function(e){return e?nI(a5(e),-9007199254740991,9007199254740991):0===e?e:0},np.toString=a9,np.toUpper=/**
     * Converts `string`, as a whole, to upper case just like
     * [String#toUpperCase](https://mdn.io/toUpperCase).
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category String
     * @param {string} [string=''] The string to convert.
     * @returns {string} Returns the upper cased string.
     * @example
     *
     * _.toUpper('--foo-bar--');
     * // => '--FOO-BAR--'
     *
     * _.toUpper('fooBar');
     * // => 'FOOBAR'
     *
     * _.toUpper('__foo_bar__');
     * // => '__FOO_BAR__'
     */function(e){return a9(e).toUpperCase()},np.trim=/**
     * Removes leading and trailing whitespace or specified characters from `string`.
     *
     * @static
     * @memberOf _
     * @since 3.0.0
     * @category String
     * @param {string} [string=''] The string to trim.
     * @param {string} [chars=whitespace] The characters to trim.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {string} Returns the trimmed string.
     * @example
     *
     * _.trim('  abc  ');
     * // => 'abc'
     *
     * _.trim('-_-abc-_-', '_-');
     * // => 'abc'
     *
     * _.map(['  foo  ', '  bar  '], _.trim);
     * // => ['foo', 'bar']
     */function(e,t,r){if((e=a9(e))&&(r||t===n))return tR(e);if(!e||!(t=rb(t)))return e;var i=tj(e),a=tj(t),o=tU(i,a),s=tN(i,a)+1;return rO(i,o,s).join("")},np.trimEnd=/**
     * Removes trailing whitespace or specified characters from `string`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category String
     * @param {string} [string=''] The string to trim.
     * @param {string} [chars=whitespace] The characters to trim.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {string} Returns the trimmed string.
     * @example
     *
     * _.trimEnd('  abc  ');
     * // => '  abc'
     *
     * _.trimEnd('-_-abc-_-', '_-');
     * // => '-_-abc'
     */function(e,t,r){if((e=a9(e))&&(r||t===n))return e.slice(0,tX(e)+1);if(!e||!(t=rb(t)))return e;var i=tj(e),a=tN(i,tj(t))+1;return rO(i,0,a).join("")},np.trimStart=/**
     * Removes leading whitespace or specified characters from `string`.
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category String
     * @param {string} [string=''] The string to trim.
     * @param {string} [chars=whitespace] The characters to trim.
     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
     * @returns {string} Returns the trimmed string.
     * @example
     *
     * _.trimStart('  abc  ');
     * // => 'abc  '
     *
     * _.trimStart('-_-abc-_-', '_-');
     * // => 'abc-_-'
     */function(e,t,r){if((e=a9(e))&&(r||t===n))return e.replace(J,"");if(!e||!(t=rb(t)))return e;var i=tj(e),a=tU(i,tj(t));return rO(i,a).join("")},np.truncate=/**
     * Truncates `string` if it's longer than the given maximum string length.
     * The last characters of the truncated string are replaced with the omission
     * string which defaults to "...".
     *
     * @static
     * @memberOf _
     * @since 4.0.0
     * @category String
     * @param {string} [string=''] The string to truncate.
     * @param {Object} [options={}] The options object.
     * @param {number} [options.length=30] The maximum string length.
     * @param {string} [options.omission='...'] The string to indicate text is omitted.
     * @param {RegExp|string} [options.separator] The separator pattern to truncate to.
     * @returns {string} Returns the truncated string.
     * @example
     *
     * _.truncate('hi-diddly-ho there, neighborino');
     * // => 'hi-diddly-ho there, neighbo...'
     *
     * _.truncate('hi-diddly-ho there, neighborino', {
     *   'length': 24,
     *   'separator': ' '
     * });
     * // => 'hi-diddly-ho there,...'
     *
     * _.truncate('hi-diddly-ho there, neighborino', {
     *   'length': 24,
     *   'separator': /,? +/
     * });
     * // => 'hi-diddly-ho there...'
     *
     * _.truncate('hi-diddly-ho there, neighborino', {
     *   'omission': ' [...]'
     * });
     * // => 'hi-diddly-ho there, neig [...]'
     */function(e,t){var r=30,i="...";if(aj(t)){var a="separator"in t?t.separator:a;r="length"in t?a5(t.length):r,i="omission"in t?rb(t.omission):i}var o=(e=a9(e)).length;if(tz(e)){var s=tj(e);o=s.length}if(r>=o)return e;var l=r-tW(i);if(l<1)return i;var u=s?rO(s,0,l).join(""):e.slice(0,l);if(a===n)return u+i;if(s&&(l+=u.length-l),aK(a)){if(e.slice(l).search(a)){var c,f=u;for(a.global||(a=ew(a.source,a9(es.exec(a))+"g")),a.lastIndex=0;c=a.exec(f);)var h=c.index;u=u.slice(0,h===n?l:h)}}else if(e.indexOf(rb(a),l)!=l){var d=u.lastIndexOf(a);d>-1&&(u=u.slice(0,d))}return u+i},np.unescape=/**
     * The inverse of `_.escape`; this method converts the HTML entities
     * `&amp;`, `&lt;`, `&gt;`, `&quot;`, and `&#39;` in `string` to
     * their corresponding characters.
     *
     * **Note:** No other HTML entities are unescaped. To unescape additional
     * HTML entities use a third-party library like [_he_](https://mths.be/he).
     *
     * @static
     * @memberOf _
     * @since 0.6.0
     * @category String
     * @param {string} [string=''] The string to unescape.
     * @returns {string} Returns the unescaped string.
     * @example
     *
     * _.unescape('fred, barney, &amp; pebbles');
     * // => 'fred, barney, & pebbles'
     */function(e){return(e=a9(e))&&H.test(e)?e.replace(B,tq):e},np.uniqueId=/**
     * Generates a unique ID. If `prefix` is given, the ID is appended to it.
     *
     * @static
     * @since 0.1.0
     * @memberOf _
     * @category Util
     * @param {string} [prefix=''] The value to prefix the ID with.
     * @returns {string} Returns the unique ID.
     * @example
     *
     * _.uniqueId('contact_');
     * // => 'contact_104'
     *
     * _.uniqueId();
     * // => '105'
     */function(e){var t=++eI;return a9(e)+t},np.upperCase=oR,np.upperFirst=oL,// Add aliases.
np.each=au,np.eachRight=ac,np.first=iq,oH(np,(ev={},nX(np,function(e,t){eO.call(np.prototype,t)||(ev[t]=e)}),ev),{chain:!1}),/*------------------------------------------------------------------------*//**
     * The semantic version number.
     *
     * @static
     * @memberOf _
     * @type {string}
     */np.VERSION="4.17.21",// Assign default placeholders.
tl(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){np[e].placeholder=np}),// Add `LazyWrapper` methods for `_.drop` and `_.take` variants.
tl(["drop","take"],function(e,t){ny.prototype[e]=function(r){r=r===n?1:t2(a5(r),0);var i=this.__filtered__&&!t?new ny(this):this.clone();return i.__filtered__?i.__takeCount__=t3(r,i.__takeCount__):i.__views__.push({size:t3(r,4294967295),type:e+(i.__dir__<0?"Right":"")}),i},ny.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),// Add `LazyWrapper` methods that accept an `iteratee` value.
tl(["filter","map","takeWhile"],function(e,t){var n=t+1,r=1==n||3==n;ny.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ic(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),// Add `LazyWrapper` methods for `_.head` and `_.last`.
tl(["head","last"],function(e,t){var n="take"+(t?"Right":"");ny.prototype[e]=function(){return this[n](1).value()[0]}}),// Add `LazyWrapper` methods for `_.initial` and `_.tail`.
tl(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");ny.prototype[e]=function(){return this.__filtered__?new ny(this):this[n](1)}}),ny.prototype.compact=function(){return this.filter(oF)},ny.prototype.find=function(e){return this.filter(e).head()},ny.prototype.findLast=function(e){return this.reverse().find(e)},ny.prototype.invokeMap=rf(function(e,t){return"function"==typeof e?new ny(this):this.map(function(n){return n2(n,e,t)})}),ny.prototype.reject=function(e){return this.filter(aT(ic(e)))},ny.prototype.slice=function(e,t){e=a5(e);var r=this;return r.__filtered__&&(e>0||t<0)?new ny(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==n&&(r=(t=a5(t))<0?r.dropRight(-t):r.take(t-e)),r)},ny.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},ny.prototype.toArray=function(){return this.take(4294967295)},// Add `LazyWrapper` methods to `lodash.prototype`.
nX(ny.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),a=np[i?"take"+("last"==t?"Right":""):t],o=i||/^find/.test(t);a&&(np.prototype[t]=function(){var t=this.__wrapped__,s=i?[1]:arguments,l=t instanceof ny,u=s[0],c=l||aN(t),f=function(e){var t=a.apply(np,tp([e],s));return i&&h?t[0]:t};c&&r&&"function"==typeof u&&1!=u.length&&(l=c=!1);var h=this.__chain__,d=!!this.__actions__.length,p=o&&!h,m=l&&!d;if(!o&&c){t=m?t:new ny(this);var g=e.apply(t,s);return g.__actions__.push({func:ai,args:[f],thisArg:n}),new nv(g,h)}return p&&m?e.apply(this,s):(g=this.thru(f),p?i?g.value()[0]:g.value():g)})}),// Add `Array` methods to `lodash.prototype`.
tl(["pop","push","shift","sort","splice","unshift"],function(e){var t=eA[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);np.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(aN(i)?i:[],e)}return this[n](function(n){return t.apply(aN(n)?n:[],e)})}}),// Map minified method names to their real names.
nX(ny.prototype,function(e,t){var n=np[t];if(n){var r=n.name+"";eO.call(na,r)||(na[r]=[]),na[r].push({name:t,func:n})}}),na[rZ(n,2).name]=[{name:"wrapper",func:n}],// Add methods to `LazyWrapper`.
ny.prototype.clone=/**
     * Creates a clone of the lazy wrapper object.
     *
     * @private
     * @name clone
     * @memberOf LazyWrapper
     * @returns {Object} Returns the cloned `LazyWrapper` object.
     */function(){var e=new ny(this.__wrapped__);return e.__actions__=rB(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=rB(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=rB(this.__views__),e},ny.prototype.reverse=/**
     * Reverses the direction of lazy iteration.
     *
     * @private
     * @name reverse
     * @memberOf LazyWrapper
     * @returns {Object} Returns the new reversed `LazyWrapper` object.
     */function(){if(this.__filtered__){var e=new ny(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e},ny.prototype.value=/**
     * Extracts the unwrapped value from its lazy wrapper.
     *
     * @private
     * @name value
     * @memberOf LazyWrapper
     * @returns {*} Returns the unwrapped value.
     */function(){var e=this.__wrapped__.value(),t=this.__dir__,n=aN(e),r=t<0,i=n?e.length:0,a=/**
     * Gets the view, applying any `transforms` to the `start` and `end` positions.
     *
     * @private
     * @param {number} start The start of the view.
     * @param {number} end The end of the view.
     * @param {Array} transforms The transformations to apply to the view.
     * @returns {Object} Returns an object containing the `start` and `end`
     *  positions of the view.
     */function(e,t,n){for(var r=-1,i=n.length;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=t3(t,e+o);break;case"takeRight":e=t2(e,t-o)}}return{start:e,end:t}}(0,i,this.__views__),o=a.start,s=a.end,l=s-o,u=r?s:o-1,c=this.__iteratees__,f=c.length,h=0,d=t3(l,this.__takeCount__);if(!n||!r&&i==l&&d==l)return rT(e,this.__actions__);var p=[];n:for(;l--&&h<d;){for(var m=-1,g=e[u+=t];++m<f;){var v=c[m],y=v.iteratee,_=v.type,x=y(g);if(2==_)g=x;else if(!x){if(1==_)continue n;break n}}p[h++]=g}return p},// Add chain sequence methods to the `lodash` wrapper.
np.prototype.at=aa,np.prototype.chain=/**
     * Creates a `lodash` wrapper instance with explicit method chain sequences enabled.
     *
     * @name chain
     * @memberOf _
     * @since 0.1.0
     * @category Seq
     * @returns {Object} Returns the new `lodash` wrapper instance.
     * @example
     *
     * var users = [
     *   { 'user': 'barney', 'age': 36 },
     *   { 'user': 'fred',   'age': 40 }
     * ];
     *
     * // A sequence without explicit chaining.
     * _(users).head();
     * // => { 'user': 'barney', 'age': 36 }
     *
     * // A sequence with explicit chaining.
     * _(users)
     *   .chain()
     *   .head()
     *   .pick('user')
     *   .value();
     * // => { 'user': 'barney' }
     */function(){return ar(this)},np.prototype.commit=/**
     * Executes the chain sequence and returns the wrapped result.
     *
     * @name commit
     * @memberOf _
     * @since 3.2.0
     * @category Seq
     * @returns {Object} Returns the new `lodash` wrapper instance.
     * @example
     *
     * var array = [1, 2];
     * var wrapped = _(array).push(3);
     *
     * console.log(array);
     * // => [1, 2]
     *
     * wrapped = wrapped.commit();
     * console.log(array);
     * // => [1, 2, 3]
     *
     * wrapped.last();
     * // => 3
     *
     * console.log(array);
     * // => [1, 2, 3]
     */function(){return new nv(this.value(),this.__chain__)},np.prototype.next=/**
     * Gets the next value on a wrapped object following the
     * [iterator protocol](https://mdn.io/iteration_protocols#iterator).
     *
     * @name next
     * @memberOf _
     * @since 4.0.0
     * @category Seq
     * @returns {Object} Returns the next iterator value.
     * @example
     *
     * var wrapped = _([1, 2]);
     *
     * wrapped.next();
     * // => { 'done': false, 'value': 1 }
     *
     * wrapped.next();
     * // => { 'done': false, 'value': 2 }
     *
     * wrapped.next();
     * // => { 'done': true, 'value': undefined }
     */function(){this.__values__===n&&(this.__values__=a3(this.value()));var e=this.__index__>=this.__values__.length,t=e?n:this.__values__[this.__index__++];return{done:e,value:t}},np.prototype.plant=/**
     * Creates a clone of the chain sequence planting `value` as the wrapped value.
     *
     * @name plant
     * @memberOf _
     * @since 3.2.0
     * @category Seq
     * @param {*} value The value to plant.
     * @returns {Object} Returns the new `lodash` wrapper instance.
     * @example
     *
     * function square(n) {
     *   return n * n;
     * }
     *
     * var wrapped = _([1, 2]).map(square);
     * var other = wrapped.plant([3, 4]);
     *
     * other.value();
     * // => [9, 16]
     *
     * wrapped.value();
     * // => [1, 4]
     */function(e){for(var t,r=this;r instanceof ng;){var i=iB(r);i.__index__=0,i.__values__=n,t?a.__wrapped__=i:t=i;var a=i;r=r.__wrapped__}return a.__wrapped__=e,t},np.prototype.reverse=/**
     * This method is the wrapper version of `_.reverse`.
     *
     * **Note:** This method mutates the wrapped array.
     *
     * @name reverse
     * @memberOf _
     * @since 0.1.0
     * @category Seq
     * @returns {Object} Returns the new `lodash` wrapper instance.
     * @example
     *
     * var array = [1, 2, 3];
     *
     * _(array).reverse().value()
     * // => [3, 2, 1]
     *
     * console.log(array);
     * // => [3, 2, 1]
     */function(){var e=this.__wrapped__;if(e instanceof ny){var t=e;return this.__actions__.length&&(t=new ny(this)),(t=t.reverse()).__actions__.push({func:ai,args:[i1],thisArg:n}),new nv(t,this.__chain__)}return this.thru(i1)},np.prototype.toJSON=np.prototype.valueOf=np.prototype.value=/**
     * Executes the chain sequence to resolve the unwrapped value.
     *
     * @name value
     * @memberOf _
     * @since 0.1.0
     * @alias toJSON, valueOf
     * @category Seq
     * @returns {*} Returns the resolved unwrapped value.
     * @example
     *
     * _([1, 2, 3]).value();
     * // => [1, 2, 3]
     */function(){return rT(this.__wrapped__,this.__actions__)},// Add lazy aliases.
np.prototype.first=np.prototype.head,e5&&(np.prototype[e5]=/**
     * Enables the wrapper to be iterable.
     *
     * @name Symbol.iterator
     * @memberOf _
     * @since 4.0.0
     * @category Seq
     * @returns {Object} Returns the wrapper object.
     * @example
     *
     * var wrapped = _([1, 2]);
     *
     * wrapped[Symbol.iterator]() === wrapped;
     * // => true
     *
     * Array.from(wrapped);
     * // => [1, 2]
     */function(){return this}),np)}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(// Expose Lodash on the global object to prevent errors when Lodash is
// loaded by a script tag in the presence of an AMD loader.
// See http://requirejs.org/docs/errors.html#mismatch for more details.
// Use `_.noConflict` to remove Lodash from the global object.
e4._=tY,// Define as an anonymous module so, through path mapping, it can be
// referenced as the "underscore" module.
define(function(){return tY})):e6?(// Export for Node.js.
(e6.exports=tY)._=tY,// Export for CommonJS support.
e5._=tY):e4._=tY}).call(this)}),m("jfanT",function(e,n){t(e.exports,"motion",()=>nh);var r,i,a,o,s,l,u,c,h,d,m,g,v,y,_,x=p("7WQrb"),b=p("cZSSj"),S=p("kr9rL"),E=p("6QSfE"),w=p("9L2TJ"),M=p("acw62"),T=function(e){return"object"==typeof e&&e.hasOwnProperty("current")},A=/** @class */function(){function e(){this.subscriptions=new Set}return e.prototype.add=function(e){var t=this;return this.subscriptions.add(e),function(){t.subscriptions.delete(e)}},e.prototype.notify=function(/**
     * Using ...args would be preferable but it's array creation and this
     * might be fired every frame.
     */e,t,n){var r,i;if(this.subscriptions.size)try{for(var a=(0,x.__values)(this.subscriptions),o=a.next();!o.done;o=a.next())(0,o.value)(e,t,n)}catch(e){r={error:e}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}},e.prototype.clear=function(){this.subscriptions.clear()},e}(),C=/** @class */function(){/**
     * @param init - The initiating value
     * @param config - Optional configuration options
     *
     * -  `transformer`: A function to transform incoming values with.
     *
     * @internal
     */function e(e){var t=this;/**
         * Duration, in milliseconds, since last updating frame.
         *
         * @internal
         */this.timeDelta=0,/**
         * Timestamp of the last time this `MotionValue` was updated.
         *
         * @internal
         */this.lastUpdated=0,/**
         * Functions to notify when the `MotionValue` updates.
         *
         * @internal
         */this.updateSubscribers=new A,/**
         * Functions to notify when the `MotionValue` updates and `render` is set to `true`.
         *
         * @internal
         */this.renderSubscribers=new A,/**
         * Tracks whether this value can output a velocity. Currently this is only true
         * if the value is numerical, but we might be able to widen the scope here and support
         * other value types.
         *
         * @internal
         */this.canTrackVelocity=!1,this.updateAndNotify=function(e,n){void 0===n&&(n=!0),t.prev=t.current,t.current=e,t.prev!==t.current&&t.updateSubscribers.notify(t.current),n&&t.renderSubscribers.notify(t.current);// Update timestamp
var r=(0,b.getFrameData)(),i=r.delta,a=r.timestamp;t.lastUpdated!==a&&(t.timeDelta=i,t.lastUpdated=a,(0,b.default).postRender(t.scheduleVelocityCheck))},/**
         * Schedule a velocity check for the next frame.
         *
         * This is an instanced and bound function to prevent generating a new
         * function once per frame.
         *
         * @internal
         */this.scheduleVelocityCheck=function(){return(0,b.default).postRender(t.velocityCheck)},/**
         * Updates `prev` with `current` if the value hasn't been updated this frame.
         * This ensures velocity calculations return `0`.
         *
         * This is an instanced and bound function to prevent generating a new
         * function once per frame.
         *
         * @internal
         */this.velocityCheck=function(e){e.timestamp!==t.lastUpdated&&(t.prev=t.current)},this.set(e,!1),this.canTrackVelocity=!isNaN(parseFloat(this.current))}return(/**
     * Adds a function that will be notified when the `MotionValue` is updated.
     *
     * It returns a function that, when called, will cancel the subscription.
     *
     * When calling `onChange` inside a React component, it should be wrapped with the
     * `useEffect` hook. As it returns an unsubscribe function, this should be returned
     * from the `useEffect` function to ensure you don't add duplicate subscribers..
     *
     * @library
     *
     * ```jsx
     * function MyComponent() {
     *   const x = useMotionValue(0)
     *   const y = useMotionValue(0)
     *   const opacity = useMotionValue(1)
     *
     *   useEffect(() => {
     *     function updateOpacity() {
     *       const maxXY = Math.max(x.get(), y.get())
     *       const newOpacity = transform(maxXY, [0, 100], [1, 0])
     *       opacity.set(newOpacity)
     *     }
     *
     *     const unsubscribeX = x.onChange(updateOpacity)
     *     const unsubscribeY = y.onChange(updateOpacity)
     *
     *     return () => {
     *       unsubscribeX()
     *       unsubscribeY()
     *     }
     *   }, [])
     *
     *   return <Frame x={x} />
     * }
     * ```
     *
     * @motion
     *
     * ```jsx
     * export const MyComponent = () => {
     *   const x = useMotionValue(0)
     *   const y = useMotionValue(0)
     *   const opacity = useMotionValue(1)
     *
     *   useEffect(() => {
     *     function updateOpacity() {
     *       const maxXY = Math.max(x.get(), y.get())
     *       const newOpacity = transform(maxXY, [0, 100], [1, 0])
     *       opacity.set(newOpacity)
     *     }
     *
     *     const unsubscribeX = x.onChange(updateOpacity)
     *     const unsubscribeY = y.onChange(updateOpacity)
     *
     *     return () => {
     *       unsubscribeX()
     *       unsubscribeY()
     *     }
     *   }, [])
     *
     *   return <motion.div style={{ x }} />
     * }
     * ```
     *
     * @internalremarks
     *
     * We could look into a `useOnChange` hook if the above lifecycle management proves confusing.
     *
     * ```jsx
     * useOnChange(x, () => {})
     * ```
     *
     * @param subscriber - A function that receives the latest value.
     * @returns A function that, when called, will cancel this subscription.
     *
     * @public
     */e.prototype.onChange=function(e){return this.updateSubscribers.add(e)},e.prototype.clearListeners=function(){this.updateSubscribers.clear()},/**
     * Adds a function that will be notified when the `MotionValue` requests a render.
     *
     * @param subscriber - A function that's provided the latest value.
     * @returns A function that, when called, will cancel this subscription.
     *
     * @internal
     */e.prototype.onRenderRequest=function(e){return(// Render immediately
e(this.get()),this.renderSubscribers.add(e))},/**
     * Attaches a passive effect to the `MotionValue`.
     *
     * @internal
     */e.prototype.attach=function(e){this.passiveEffect=e},/**
     * Sets the state of the `MotionValue`.
     *
     * @remarks
     *
     * ```jsx
     * const x = useMotionValue(0)
     * x.set(10)
     * ```
     *
     * @param latest - Latest value to set.
     * @param render - Whether to notify render subscribers. Defaults to `true`
     *
     * @public
     */e.prototype.set=function(e,t){void 0===t&&(t=!0),t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)},/**
     * Returns the latest state of `MotionValue`
     *
     * @returns - The latest state of `MotionValue`
     *
     * @public
     */e.prototype.get=function(){return this.current},/**
     * @public
     */e.prototype.getPrevious=function(){return this.prev},/**
     * Returns the latest velocity of `MotionValue`
     *
     * @returns - The latest velocity of `MotionValue`. Returns `0` if the state is non-numerical.
     *
     * @public
     */e.prototype.getVelocity=function(){// This could be isFloat(this.prev) && isFloat(this.current), but that would be wasteful
return this.canTrackVelocity?(0,S.velocityPerSecond)(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0},/**
     * Registers a new animation to control this `MotionValue`. Only one
     * animation can drive a `MotionValue` at one time.
     *
     * ```jsx
     * value.start()
     * ```
     *
     * @param animation - A function that starts the provided animation
     *
     * @internal
     */e.prototype.start=function(e){var t=this;return this.stop(),new Promise(function(n){t.stopAnimation=e(n)}).then(function(){return t.clearAnimation()})},/**
     * Stop the currently active animation.
     *
     * @public
     */e.prototype.stop=function(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()},/**
     * Returns `true` if this value is currently animating.
     *
     * @public
     */e.prototype.isAnimating=function(){return!!this.stopAnimation},e.prototype.clearAnimation=function(){this.stopAnimation=null},/**
     * Destroy and clean up subscribers to this `MotionValue`.
     *
     * The `MotionValue` hooks like `useMotionValue` and `useTransform` automatically
     * handle the lifecycle of the returned `MotionValue`, so this method is only necessary if you've manually
     * created a `MotionValue` via the `motionValue` function.
     *
     * @public
     */e.prototype.destroy=function(){this.updateSubscribers.clear(),this.renderSubscribers.clear(),this.stop()},e)}();/**
 * @internal
 */function P(e){return new C(e)}/**
 * VisualElement is an abstract class that provides a generic animation-optimised interface to the
 * underlying renderer.
 *
 * Currently many features interact directly with HTMLVisualElement/SVGVisualElement
 * but the idea is we can create, for instance, a ThreeVisualElement that extends
 * VisualElement and we can quickly offer all the same features.
 */var R=/** @class */function(){function e(e,t){var n=this;// An iterable list of current children
this.children=new Set,// The latest resolved MotionValues
this.latest={},// A map of MotionValues used to animate this element
this.values=new Map,// Unsubscription callbacks for each MotionValue
this.valueSubscriptions=new Map,// A configuration for this VisualElement, each derived class can extend this.
this.config={},// A pre-bound call to the user-provided `onUpdate` callback. This won't
// be called more than once per frame.
this.update=function(){return n.config.onUpdate(n.latest)},// Pre-bound version of render
this.triggerRender=function(){return n.render()},this.scheduleRender=function(){return(0,b.default).render(n.triggerRender,!1,!0)},// This function gets passed to the rendered component's `ref` prop
// and is used to mount/unmount the VisualElement
this.ref=function(e){e?n.mount(e):n.unmount(),n.externalRef&&("function"==typeof n.externalRef?n.externalRef(e):T(n.externalRef)&&(n.externalRef.current=e))},// Create a relationship with the provided parent.
this.parent=e,this.rootParent=e?e.rootParent:this,this.treePath=e?(0,x.__spread)(e.treePath,[e]):[],// Calculate the depth of this node in the VisualElement graph
this.depth=e?e.depth+1:0,// A reference to any externally-defined React ref. This might live better
// outside the VisualElement and be handled in a hook.
this.externalRef=t}return e.prototype.subscribe=function(e){var t=this;return this.children.add(e),function(){return t.children.delete(e)}},// Check whether this element has a MotionValue of the provided key
e.prototype.hasValue=function(e){return this.values.has(e)},// Add a MotionValue
e.prototype.addValue=function(e,t){this.hasValue(e)&&this.removeValue(e),this.values.set(e,t),this.latest[e]=t.get(),this.element&&this.subscribeToValue(e,t)},// Remove a MotionValue
e.prototype.removeValue=function(e){var t=this.valueSubscriptions.get(e);t&&t(),this.values.delete(e),delete this.latest[e],this.valueSubscriptions.delete(e)},e.prototype.getValue=function(e,t){var n=this.values.get(e);return void 0===n&&void 0!==t&&(n=new C(t),this.addValue(e,n)),n},// Iterate over all MotionValues
e.prototype.forEachValue=function(e){this.values.forEach(e)},// Get the underlying rendered instance of this VisualElement. For instance in
// HTMLVisualElement this will be a HTMLElement.
e.prototype.getInstance=function(){return this.element},e.prototype.updateConfig=function(e){void 0===e&&(e={}),this.config=(0,x.__assign)({},e)},// Set a single `latest` value
e.prototype.setSingleStaticValue=function(e,t){this.latest[e]=t},// Statically set values to `latest` without needing a MotionValue
e.prototype.setStaticValues=function(e,t){if("string"==typeof e)this.setSingleStaticValue(e,t);else for(var n in e)this.setSingleStaticValue(n,e[n])},e.prototype.scheduleUpdateLayoutDelta=function(){(0,b.default).update(this.rootParent.updateLayoutDelta,!1,!0)},// Subscribe to changes in a MotionValue
e.prototype.subscribeToValue=function(e,t){var n=this,r=t.onChange(function(t){n.setSingleStaticValue(e,t),n.latest[e]=t,n.config.onUpdate&&(0,b.default).update(n.update,!1,!0)}),i=t.onRenderRequest(this.scheduleRender);this.valueSubscriptions.set(e,function(){r(),i()})},// Mount the VisualElement with the actual DOM element
e.prototype.mount=function(e){var t=this;(0,E.invariant)(!!e,"No ref found. Ensure components created with motion.custom forward refs using React.forwardRef"),this.parent&&(this.removeFromParent=this.parent.subscribe(this)),/**
         * Save the element to this.element as a semantic API, this.current to the VisualElement
         * is compatible with existing RefObject APIs.
         */this.element=this.current=e,// Subscribe to any pre-existing MotionValues
this.forEachValue(function(e,n){return t.subscribeToValue(n,e)})},// Unmount the VisualElement and cancel any scheduled updates
e.prototype.unmount=function(){var e=this;this.forEachValue(function(t,n){return e.removeValue(n)}),(0,b.cancelSync).update(this.update),(0,b.cancelSync).render(this.render),this.removeFromParent&&this.removeFromParent()},e}();function L(e){return e}/**
 * Bounding boxes tend to be defined as top, left, right, bottom. For various operations
 * it's easier to consider each axis individually. This function returns a bounding box
 * as a map of single-axis min/max values.
 */function O(e){var t=e.top;return{x:{min:e.left,max:e.right},y:{min:t,max:e.bottom}}}function I(e){return{x:(0,x.__assign)({},e.x),y:(0,x.__assign)({},e.y)}}/**
 * Create an empty box delta
 */var U={translate:0,scale:1,origin:0,originPoint:0};function N(){return{x:(0,x.__assign)({},U),y:(0,x.__assign)({},U)}}/**
 * ValueType for ints
 */var D=(0,x.__assign)((0,x.__assign)({},w.number),{transform:Math.round}),k={// Color props
color:w.color,backgroundColor:w.color,outlineColor:w.color,fill:w.color,stroke:w.color,// Border props
borderColor:w.color,borderTopColor:w.color,borderRightColor:w.color,borderBottomColor:w.color,borderLeftColor:w.color,borderWidth:w.px,borderTopWidth:w.px,borderRightWidth:w.px,borderBottomWidth:w.px,borderLeftWidth:w.px,borderRadius:w.px,radius:w.px,borderTopLeftRadius:w.px,borderTopRightRadius:w.px,borderBottomRightRadius:w.px,borderBottomLeftRadius:w.px,// Positioning props
width:w.px,maxWidth:w.px,height:w.px,maxHeight:w.px,size:w.px,top:w.px,right:w.px,bottom:w.px,left:w.px,// Spacing props
padding:w.px,paddingTop:w.px,paddingRight:w.px,paddingBottom:w.px,paddingLeft:w.px,margin:w.px,marginTop:w.px,marginRight:w.px,marginBottom:w.px,marginLeft:w.px,// Transform props
rotate:w.degrees,rotateX:w.degrees,rotateY:w.degrees,rotateZ:w.degrees,scale:w.scale,scaleX:w.scale,scaleY:w.scale,scaleZ:w.scale,skew:w.degrees,skewX:w.degrees,skewY:w.degrees,distance:w.px,translateX:w.px,translateY:w.px,translateZ:w.px,x:w.px,y:w.px,z:w.px,perspective:w.px,transformPerspective:w.px,opacity:w.alpha,originX:w.progressPercentage,originY:w.progressPercentage,originZ:w.px,// Misc
zIndex:D,// SVG
fillOpacity:w.alpha,strokeOpacity:w.alpha,numOctaves:D},F=[w.number,w.px,w.percent,w.degrees,w.vw,w.vh,{test:function(e){return"auto"===e},parse:function(e){return e}}],z=function(e){return function(t){return t.test(e)}},B=function(e){return F.find(z(e))},V=(0,x.__spread)(F,[w.color,w.complex]),H=function(e){return k[e]},G=["","X","Y","Z"],W=new Set,j=["transformPerspective","x","y","z"];/**
 * A function to use with Array.sort to sort transform keys by their default order.
 */function X(e,t){return j.indexOf(e)-j.indexOf(t)}["perspective","translate","scale","rotate","skew"].forEach(function(e){var t=new Set(["rotate","skew"]).has(e);G.forEach(function(n){var r=e+n;j.push(r),t&&W.add(r)})});/**
 * A quick lookup for transform props.
 */var q=new Set(j);function Y(e){return q.has(e)}/**
 * A quick lookup for transform origin props
 */var $=new Set(["originX","originY","originZ"]),K={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"};/**
 * Build a transform style that takes a calculated delta between the element's current
 * space on screen and projects it into the desired space.
 */function Z(e,t){var n=e.x,r=e.y;return"translate3d("+n.translate/t.x+"px, "+r.translate/t.y+"px, 0) scale("+n.scale+", "+r.scale+")"}function J(e,t){return e/(t.max-t.min)*100}var Q={process:/**
 * We always correct borderRadius as a percentage rather than pixels to reduce paints.
 * For example, if you are projecting a box that is 100px wide with a 10px borderRadius
 * into a box that is 200px wide with a 20px borderRadius, that is actually a 10%
 * borderRadius in both states. If we animate between the two in pixels that will trigger
 * a paint each time. If we animate between the two in percentage we'll avoid a paint.
 */function(e,t){return(/**
     * If latest is a string, we either presume it's already a percentage, in which case it'll
     * already be stretched appropriately, or it's another value type which we don't support.
     */"number"!=typeof e?e:J(e,t.x)+"% "+J(e,t.y)+"%")}},ee={borderRadius:(0,x.__assign)((0,x.__assign)({},Q),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:Q,borderTopRightRadius:Q,borderBottomLeftRadius:Q,borderBottomRightRadius:Q,boxShadow:{process:function(e,t,n,r){// GC Warning - this creates a function and object every frame
var i=(0,w.complex).parse(e),a=(0,w.complex).createTransformer(e),o=n.x.scale*r.x,s=n.y.scale*r.y;// Scale x/y
i[1]/=o,i[2]/=s;/**
     * Ideally we'd correct x and y scales individually, but because blur and
     * spread apply to both we have to take a scale average and apply that instead.
     * We could potentially improve the outcome of this by incorporating the ratio between
     * the two scales.
     */var l=(0,S.mix)(o,s,.5);return"number"==typeof i[3]&&(i[3]/=l),"number"==typeof i[4]&&(i[4]/=l),a(i)}}};/**
 * Build style and CSS variables
 *
 * This function converts a Motion style prop:
 *
 * { x: 100, width: 100, originX: 0.5 }
 *
 * Into an object with default value types applied and default
 * transform order set:
 *
 * {
 *   transform: 'translateX(100px) translateZ(0)`,
 *   width: '100px',
 *   transformOrigin: '50% 50%'
 * }
 *
 * Styles are saved to `style` and CSS vars to `vars`.
 *
 * This function works with mutative data structures.
 */function et(e,t,n,r,i,a,o,s,l,u,c,f){var h,d,p,m,g,v=o.enableHardwareAcceleration,y=o.transformTemplate,_=o.allowTransformNone;// Empty the transformKeys array. As we're throwing out refs to its items
// this might not be as cheap as suspected. Maybe using the array as a buffer
// with a manual incrementation would be better.
a.length=0;// Track whether we encounter any transform or transformOrigin values.
var x=!1,b=!1,S=!0;/**
     * Loop over all our latest animated values and decide whether to handle them
     * as a style or CSS variable. Transforms and transform origins are kept seperately
     * for further processing
     */for(var E in e){var w=e[E],M=H(E),T=M&&"number"==typeof w?M.transform(w):w;if(Y(E)){if(// If this is a transform, flag and enable further transform processing
x=!0,r[E]=T,a.push(E),!S)continue;w!==(void 0!==M.default?M.default:0)&&(S=!1)}else if($.has(E))// If this is a transform origin, flag and enable further transform-origin processing
i[E]=T,b=!0;else if("transform"!==E||"function"!=typeof w){// Handle all remaining values. Decide which map to save to depending
// on whether this is a CSS variable
var A=E.startsWith("--")?n:t;// If we need to perform scale correction, and we have a handler for this
// value type (ie borderRadius), perform it
if(s&&ee[E]){var C=ee[E].process(w,f,l,c),P=ee[E].applyTo;if(P)for(var R=P.length,L=0;L<R;L++)A[P[L]]=C;else A[E]=C}else A[E]=T}}s?(t.transform=Z(u,c),x&&(t.transform+=" "+/**
 * Build a transform string only from the properties that distort bounding box measurements
 * (rotate and skew)
 */function(e,t){var n="";t.sort(X);for(var r=t.length,i=0;i<r;i++){var a=t[i];W.has(a)&&(n+=a+"("+e[a]+") ")}return n}(r,a),t.transform=t.transform.trim()),y&&(t.transform=y(r,t.transform)),t.transformOrigin=(h=u.x,d=u.y,100*h.origin+"% "+100*d.origin+"% 0")):(x&&(t.transform=/**
 * Build a CSS transform style from individual x/y/scale etc properties.
 *
 * This outputs with a default order of transforms/scales/rotations, this can be customised by
 * providing a transformTemplate function.
 */function(e,t,n,r,i,a){void 0===i&&(i=!0),void 0===a&&(a=!0);// The transform string we're going to build into.
var o="";// Transform keys into their default order - this will determine the output order.
t.sort(X);for(var s=!1,l=t.length,u=0;u<l;u++){var c=t[u];o+=(K[c]||c)+"("+e[c]+") ","z"===c&&(s=!0)}return!s&&i?o+="translateZ(0)":o=o.trim(),n?o=n(e,r?"":o):a&&r&&(o="none"),o}(r,a,y,S,v,_)),b&&(t.transformOrigin=(void 0===(p=i.originX)?"50%":p)+" "+(void 0===(m=i.originY)?"50%":m)+" "+(void 0===(g=i.originZ)?0:g)))}/**
 * Reset an axis to the provided origin box.
 *
 * This is a mutative operation.
 */function en(e,t){e.min=t.min,e.max=t.max}/**
 * Applies a translate/scale delta to a point
 */function er(e,t,n,r,i){return void 0!==i&&(e=r+i*(e-r)),r+n*(e-r)+t}/**
 * Applies a translate/scale delta to an axis
 */function ei(e,t,n,r,i){void 0===t&&(t=0),void 0===n&&(n=1),e.min=er(e.min,t,n,r,i),e.max=er(e.max,t,n,r,i)}/**
 * Apply a transform to an axis from the latest resolved motion values.
 * This function basically acts as a bridge between a flat motion value map
 * and applyAxisDelta
 */function ea(e,t,n,r){var i=(0,x.__read)(r,3),a=i[0],o=i[1],s=i[2];// Copy the current axis to the final axis before mutation
e.min=t.min,e.max=t.max;var l=void 0!==n[s]?n[s]:.5,u=(0,S.mix)(t.min,t.max,l);// Apply the axis delta to the final axis
ei(e,n[a],n[o],u,n.scale)}/**
 * The names of the motion values we want to apply as translation, scale and origin.
 */var eo=["x","scaleX","originX"],es=["y","scaleY","originY"];/**
 * Remove a delta from a point. This is essentially the steps of applyPointDelta in reverse
 */function el(e,t,n,r,i){return e-=t,e=r+1/n*(e-r),void 0!==i&&(e=r+1/i*(e-r)),e}/**
 * Remove a transforms from an axis. This is essentially the steps of applyAxisTransforms in reverse
 * and acts as a bridge between motion values and removeAxisDelta
 */function eu(e,t,n){var r,i,a,o,s,l=(0,x.__read)(n,3),u=l[0],c=l[1],f=l[2];r=t[u],i=t[c],a=t[f],o=t.scale,void 0===r&&(r=0),void 0===i&&(i=1),void 0===a&&(a=.5),s=(0,S.mix)(e.min,e.max,a)-r,e.min=el(e.min,r,i,s,o),e.max=el(e.max,r,i,s,o)}/**
 * Returns true if the provided value is within maxDistance of the provided target
 */function ec(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=.01),(0,S.distance)(e,t)<n}/**
 * Calculate a transform origin relative to the source axis, between 0-1, that results
 * in an asthetically pleasing scale/transform needed to project from source to target.
 */function ef(e,t){var n,r=.5,i=e.max-e.min,a=t.max-t.min;return a>i?r=(0,S.progress)(t.min,t.max-i,e.min):i>a&&(r=(0,S.progress)(e.min,e.max-a,t.min)),n=r,(0,S.clamp)(0,1,n)}/**
 * Update the AxisDelta with a transform that projects source into target.
 *
 * The transform `origin` is optional. If not provided, it'll be automatically
 * calculated based on the relative positions of the two bounding boxes.
 */function eh(e,t,n,r){var i,a,o=t.max-t.min,s=n.max-n.min;e.origin=void 0===r?ef(t,n):r,e.originPoint=(0,S.mix)(t.min,t.max,e.origin),e.scale=s/o,ec(e.scale,1,1e-4)&&(e.scale=1),e.translate=(i=e.origin,a=(0,S.mix)(t.min,t.max,i),(0,S.mix)(n.min,n.max,i)-a),ec(e.translate)&&(e.translate=0)}/**
 * Update the BoxDelta with a transform that projects the source into the target.
 *
 * The transform `origin` is optional. If not provided, it'll be automatically
 * calculated based on the relative positions of the two bounding boxes.
 */function ed(e,t,n,r){eh(e.x,t.x,n.x,r),eh(e.y,t.y,n.y,r)}// Call a handler once for each axis
function ep(e){return[e("x"),e("y")]}/**
 * Converts seconds to milliseconds
 *
 * @param seconds - Time in seconds.
 * @return milliseconds - Converted time in milliseconds.
 */var em=function(e){return 1e3*e},eg=function(e){if(Array.isArray(e)){// If cubic bezier definition, create bezier curve
(0,E.invariant)(4===e.length,"Cubic bezier arrays must contain four numerical values.");var t=(0,x.__read)(e,4),n=t[0],r=t[1],i=t[2],a=t[3];return(0,S.cubicBezier)(n,r,i,a)}return"string"==typeof e?(// Else lookup from table
(0,E.invariant)(void 0!==S[e],"Invalid easing type '"+e+"'"),S[e]):e},ev=function(e,t){return(// If the list of keys tat might be non-animatable grows, replace with Set
"zIndex"!==e&&!!("number"==typeof t||Array.isArray(t)||"string"==typeof t&&// It's animatable if we have a string
(0,w.complex).test(t)&&// And it contains numbers and/or colors
!t.startsWith("url(")// Unless it starts with "url("
))},ey=function(e){return Array.isArray(e)},e_=function(){return{type:"spring",stiffness:500,damping:25,restDelta:.5,restSpeed:10}},ex=function(e){return{type:"spring",stiffness:550,damping:0===e?100:30,restDelta:.01,restSpeed:10}},eb=function(){return{type:"keyframes",ease:"linear",duration:.3}},eS=function(e){return{type:"keyframes",duration:.8,values:e}},eE={x:e_,y:e_,z:e_,rotate:e_,rotateX:e_,rotateY:e_,rotateZ:e_,scaleX:ex,scaleY:ex,scale:ex,opacity:eb,backgroundColor:eb,color:eb,default:ex},ew=function(e,t){var n;return n=ey(t)?eS:eE[e]||eE.default,(0,x.__assign)({to:t},n(t))};/**
 * Start animation on a MotionValue. This function is an interface between
 * Framer Motion and Popmotion
 *
 * @internal
 */function eM(e,t,n,r){return void 0===r&&(r={}),t.start(function(i){var a,o,s,l,u,c,f,h,d,p,m,g,v,y=(f=r,h=t.get(),d=f[e]||f.default||f,p=ev(e,t.get()),m=ev(e,n),(0,E.warning)(p===m,"You are trying to animate "+e+' from "'+h+'" to "'+n+'". '+h+" is not an animatable value - to enable this animation set "+h+" to a value animatable to "+n+" via the `style` property."),p&&m&&!1!==d.type?function(){var r,a,o,s,l,u,c,f,p,m,g,v,y={from:h,to:n,velocity:t.getVelocity(),onComplete:i,onUpdate:function(e){return t.set(e)}};return"inertia"===d.type||"decay"===d.type?(0,S.inertia)((0,x.__assign)((0,x.__assign)({},y),d)):(0,S.animate)((r=d,a=y,o=e,Array.isArray(a.to)&&null===a.to[0]&&(a.to=(0,x.__spread)(a.to),a.to[0]=a.from),(s=r).when,s.delay,s.delayChildren,s.staggerChildren,s.staggerDirection,s.repeat,s.repeatType,s.repeatDelay,s.from,Object.keys((0,x.__rest)(s,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from"])).length||(r=(0,x.__assign)((0,x.__assign)({},r),ew(o,a.to))),(0,x.__assign)((0,x.__assign)({},a),(u=(l=r).yoyo,c=l.loop,f=l.flip,p=l.ease,m=l.times,g=(0,x.__rest)(l,["yoyo","loop","flip","ease","times"]),v=(0,x.__assign)({},g),m&&(v.offset=m),g.duration&&(v.duration=em(g.duration)),g.repeatDelay&&(v.repeatDelay=em(g.repeatDelay)),p&&(v.ease=Array.isArray(p)&&"number"!=typeof p[0]?p.map(eg):eg(p)),"tween"===g.type&&(v.type="keyframes"),u?v.repeatType="reverse":c?v.repeatType="loop":f&&(v.repeatType="mirror"),v.repeat=c||u||f||g.repeat,"spring"!==g.type&&(v.type="keyframes"),v))))}:function(){return t.set(n),i(),{stop:function(){}}}),_=null!==(c=null!==(u=null!==(s=null===(o=(a=r)[e])||void 0===o?void 0:o.delay)&&void 0!==s?s:null===(l=a.default)||void 0===l?void 0:l.delay)&&void 0!==u?u:a.delay)&&void 0!==c?c:0,b=function(){return v=y()};return _?g=setTimeout(b,em(_)):b(),function(){clearTimeout(g),null==v||v.stop()}})}/**
 * Measure and return the element bounding box.
 *
 * We convert the box into an AxisBox2D to make it easier to work with each axis
 * individually and programmatically.
 *
 * This function optionally accepts a transformPagePoint function which allows us to compensate
 * for, for instance, measuring the element within a scaled plane like a Framer devivce preview component.
 */function eT(e,t){var n,r,i,a,o,s,l,u;return O((n=e.getBoundingClientRect(),r=t,i=n.top,a=n.left,o=n.bottom,s=n.right,void 0===r&&(r=L),l=r({x:a,y:i}),u=r({x:s,y:o}),{top:l.y,left:l.x,bottom:u.y,right:u.x}))}/**
 * A VisualElement for HTMLElements
 */var eA=/** @class */function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return(/**
         *
         */t.defaultConfig={enableHardwareAcceleration:!0,allowTransformNone:!0},/**
         * A mutable record of styles we want to apply directly to the rendered Element
         * every frame. We use a mutable data structure to reduce GC during animations.
         */t.style={},/**
         * A record of styles we only want to apply via React. This gets set in useMotionValues
         * and applied in the render function. I'd prefer this to live somewhere else to decouple
         * VisualElement from React but works for now.
         */t.reactStyle={},/**
         * A mutable record of CSS variables we want to apply directly to the rendered Element
         * every frame. We use a mutable data structure to reduce GC during animations.
         */t.vars={},/**
         * A mutable record of transforms we want to apply directly to the rendered Element
         * every frame. We use a mutable data structure to reduce GC during animations.
         */t.transform={},/**
         * A mutable record of transform origins we want to apply directly to the rendered Element
         * every frame. We use a mutable data structure to reduce GC during animations.
         */t.transformOrigin={},/**
         * A mutable record of transform keys we want to apply to the rendered Element. We order
         * this to order transforms in the desired order. We use a mutable data structure to reduce GC during animations.
         */t.transformKeys=[],t.config=t.defaultConfig,/**
         * ========================================
         * Layout
         * ========================================
         */t.isLayoutProjectionEnabled=!1,/**
         * A set of layout update event handlers. These are only called once all layouts have been read,
         * making it safe to perform DOM write operations.
         */t.layoutUpdateListeners=new A,t.layoutMeasureListeners=new A,t.viewportBoxUpdateListeners=new A,/**
         * Keep track of whether the viewport box has been updated since the last render.
         * If it has, we want to fire the onViewportBoxUpdate listener.
         */t.hasViewportBoxUpdated=!1,/**
         * The visual target we want to project our component into on a given frame
         * before applying transforms defined in `animate` or `style`.
         *
         * This is considered mutable to avoid object creation on each frame.
         */t.targetBoxFinal={x:{min:0,max:1},y:{min:0,max:1}},/**
         * The overall scale of the local coordinate system as transformed by all parents
         * of this component. We use this for scale correction on our calculated layouts
         * and scale-affected values like `boxShadow`.
         *
         * This is considered mutable to avoid object creation on each frame.
         */t.treeScale={x:1,y:1},/**
         * The delta between the boxCorrected and the desired
         * targetBox (before user-set transforms are applied). The calculated output will be
         * handed to the renderer and used as part of the style correction calculations, for
         * instance calculating how to display the desired border-radius correctly.
         *
         * This is considered mutable to avoid object creation on each frame.
         */t.delta=N(),/**
         * The delta between the boxCorrected and the desired targetBoxFinal. The calculated
         * output will be handed to the renderer and used to project the boxCorrected into
         * the targetBoxFinal.
         *
         * This is considered mutable to avoid object creation on each frame.
         */t.deltaFinal=N(),/**
         *
         */t.stopLayoutAxisAnimation={x:function(){},y:function(){}},t.isTargetBoxLocked=!1,/**
         *
         */t.axisProgress={x:P(0),y:P(0)},t.updateLayoutDelta=function(){t.isLayoutProjectionEnabled&&t.box&&t.updateLayoutDeltas(),/**
             * Ensure all children layouts are also updated.
             *
             * This uses a pre-bound function executor rather than a lamda to avoid creating a new function
             * multiple times per frame (source of mid-animation GC)
             */t.children.forEach(eC)},t)}return(0,x.__extends)(t,e),/**
     * When a value is removed, we want to make sure it's removed from all rendered data structures.
     */t.prototype.removeValue=function(t){e.prototype.removeValue.call(this,t),delete this.vars[t],delete this.style[t]},/**
     * Empty the mutable data structures by re-creating them. We can do this every React render
     * as the comparative workload to the rest of the render is very low and this is also when
     * we want to reflect values that might have been removed by the render.
     */t.prototype.clean=function(){this.style={},this.vars={},this.transform={}},t.prototype.updateConfig=function(e){void 0===e&&(e={}),this.config=(0,x.__assign)((0,x.__assign)({},this.defaultConfig),e)},/**
     * Read a value directly from the HTMLElement style.
     */t.prototype.read=function(e){return this.getComputedStyle()[e]||0},t.prototype.addValue=function(t,n){e.prototype.addValue.call(this,t,n),t.startsWith("rotate")&&(this.layoutOrigin=.5)},/**
     * Read a value directly from the HTMLElement in case it's not defined by a Motion
     * prop. If it's a transform, we just return a pre-defined default value as reading these
     * out of a matrix is either error-prone or can incur a big payload for little benefit.
     */t.prototype.readNativeValue=function(e){if(!Y(e))return this.read(e);var t=H(e);return t&&t.default||0},t.prototype.enableLayoutProjection=function(){this.isLayoutProjectionEnabled=!0},t.prototype.hide=function(){!1!==this.isVisible&&(this.isVisible=!1,this.scheduleRender())},t.prototype.show=function(){!0!==this.isVisible&&(this.isVisible=!0,this.scheduleRender())},/**
     * Register an event listener to fire when the layout is updated. We might want to expose support
     * for this via a `motion` prop.
     */t.prototype.onLayoutUpdate=function(e){return this.layoutUpdateListeners.add(e)},t.prototype.onLayoutMeasure=function(e){return this.layoutMeasureListeners.add(e)},t.prototype.onViewportBoxUpdate=function(e){return this.viewportBoxUpdateListeners.add(e)},/**
     * To be called when all layouts are successfully updated. In turn we can notify layoutUpdate
     * subscribers.
     */t.prototype.layoutReady=function(e){this.layoutUpdateListeners.notify(this.box,this.prevViewportBox||this.box,e)},/**
     * Measure and return the Element's bounding box. We convert it to a AxisBox2D
     * structure to make it easier to work on each individual axis generically.
     */t.prototype.getBoundingBox=function(){var e=this.config.transformPagePoint;return eT(this.element,e)},t.prototype.getBoundingBoxWithoutTransforms=function(){var e,t=this.getBoundingBox();return e=this.latest,eu(t.x,e,eo),eu(t.y,e,es),t},/**
     * Return the computed style after a render.
     */t.prototype.getComputedStyle=function(){return window.getComputedStyle(this.element)},/**
     * Record the bounding box as it exists before a re-render.
     */t.prototype.snapshotBoundingBox=function(){this.prevViewportBox=this.getBoundingBoxWithoutTransforms();/**
         * Update targetBox to match the prevViewportBox. This is just to ensure
         * that targetBox is affected by scroll in the same way as the measured box
         */var e=this.axisProgress,t=e.x,n=e.y;this.isTargetBoxLocked||t.isAnimating()||n.isAnimating()||(this.targetBox=I(this.prevViewportBox))},t.prototype.measureLayout=function(){this.box=this.getBoundingBox(),this.boxCorrected=I(this.box),this.targetBox||(this.targetBox=I(this.box)),this.layoutMeasureListeners.notify(this.box,this.prevViewportBox||this.box)},/**
     * Ensure the targetBox reflects the latest visual box on screen
     */t.prototype.refreshTargetBox=function(){this.targetBox=this.getBoundingBoxWithoutTransforms()},t.prototype.lockTargetBox=function(){this.isTargetBoxLocked=!0},t.prototype.unlockTargetBox=function(){this.stopLayoutAnimation(),this.isTargetBoxLocked=!1},/**
     * Reset the transform on the current Element. This is called as part
     * of a batched process across the entire layout tree. To remove this write
     * cycle it'd be interesting to see if it's possible to "undo" all the current
     * layout transforms up the tree in the same way this.getBoundingBoxWithoutTransforms
     * works
     */t.prototype.resetTransform=function(){var e=this.config.transformTemplate;this.element.style.transform=e?e({},""):"none",// Ensure that whatever happens next, we restore our transform
this.scheduleRender()},/**
     * Reset rotate on this element. Doing so allows us to accurately measure the
     * bounding box of the element.
     *
     * This function will only be called if _supportRotate is enabled in a parent
     * AnimateSharedLayout. This is a private prop for use within Framer. It allows
     * us to support rotation in Magic Motion.
     *
     * @internal
     */t.prototype.resetRotate=function(){var e=this,t=!1,n={};// If there's no rotation values, we don't need to do any more.
if(// Check the rotate value of all axes and reset to 0
G.forEach(function(r){var i="rotate"+r;e.hasValue(i)&&(t=!0,// Record the rotation and then temporarily set it to 0
n[i]=e.latest[i],e.latest[i]=0)}),t){// Put back all the values we reset
for(var r in // Force a render of this element to apply the transform with all rotations
// set to 0.
this.render(),n)this.latest[r]=n[r];// Schedule a render for the next frame. This ensures we won't visually
// see the element with the reset rotate value applied.
this.scheduleRender()}},/**
     * Set new min/max boundaries to project an axis into
     */t.prototype.setAxisTarget=function(e,t,n){var r=this.targetBox[e];r.min=t,r.max=n,// Flag that we want to fire the onViewportBoxUpdate event handler
this.hasViewportBoxUpdated=!0,this.rootParent.scheduleUpdateLayoutDelta()},/**
     *
     */t.prototype.startLayoutAxisAnimation=function(e,t){var n=this,r=this.axisProgress[e],i=this.targetBox[e],a=i.min,o=i.max-a;return r.clearListeners(),r.set(a),r.set(a),r.onChange(function(t){return n.setAxisTarget(e,t,t+o)}),eM(e,r,0,t)},t.prototype.stopLayoutAnimation=function(){var e=this;ep(function(t){return e.axisProgress[t].stop()})},/**
     * Update the layout deltas to reflect the relative positions of the layout
     * and the desired target box
     */t.prototype.updateLayoutDeltas=function(){e=this.boxCorrected,t=this.box,en(e.x,t.x),en(e.y,t.y),this.parent&&(n=this.treeScale,r=this.parent.treeScale,i=this.parent.delta,n.x=r.x*i.x.scale,n.y=r.y*i.y.scale),/**
         * Apply all the parent deltas to this box to produce the corrected box. This
         * is the layout box, as it will appear on screen as a result of the transforms of its parents.
         *//**
 * Apply a tree of deltas to a box. We do this to calculate the effect of all the transforms
 * in a tree upon our box before then calculating how to project it into our desired viewport-relative box
 *
 * This is the final nested loop within HTMLVisualElement.updateLayoutDelta
 */function(e,t){for(var n=t.length,r=0;r<n;r++)!/**
 * Applies a translate/scale delta to a box
 */function(e,t){var n=t.x,r=t.y;ei(e.x,n.translate,n.scale,n.originPoint),ei(e.y,r.translate,r.scale,r.originPoint)}(e,t[r].delta)}(this.boxCorrected,this.treePath),/**
         * Update the delta between the corrected box and the target box before user-set transforms were applied.
         * This will allow us to calculate the corrected borderRadius and boxShadow to compensate
         * for our layout reprojection, but still allow them to be scaled correctly by the user.
         * It might be that to simplify this we may want to accept that user-set scale is also corrected
         * and we wouldn't have to keep and calc both deltas, OR we could support a user setting
         * to allow people to choose whether these styles are corrected based on just the
         * layout reprojection or the final bounding box.
         */ed(this.delta,this.boxCorrected,this.targetBox,this.layoutOrigin),/**
         * If we have a listener for the viewport box, fire it.
         */this.hasViewportBoxUpdated&&this.viewportBoxUpdateListeners.notify(this.targetBox,this.delta),this.hasViewportBoxUpdated=!1;/**
         * Ensure this element renders on the next frame if the projection transform has changed.
         */var e,t,n,r,i,a=Z(this.delta,this.treeScale);a!==this.deltaTransform&&this.scheduleRender(),this.deltaTransform=a},t.prototype.updateTransformDeltas=function(){if(this.isLayoutProjectionEnabled&&this.box){var e,t,n;e=this.targetBoxFinal,t=this.targetBox,n=this.latest,ea(e.x,t.x,n,eo),ea(e.y,t.y,n,es),/**
         * Update the delta between the corrected box and the final target box, after
         * user-set transforms are applied to it. This will be used by the renderer to
         * create a transform style that will reproject the element from its actual layout
         * into the desired bounding box.
         */ed(this.deltaFinal,this.boxCorrected,this.targetBoxFinal,this.layoutOrigin)}},/**
     * ========================================
     * Build & render
     * ========================================
     *//**
     * Build a style prop using the latest resolved MotionValues
     */t.prototype.build=function(){this.updateTransformDeltas(),void 0!==this.isVisible&&(this.style.visibility=this.isVisible?"visible":"hidden"),et(this.latest,this.style,this.vars,this.transform,this.transformOrigin,this.transformKeys,this.config,this.isLayoutProjectionEnabled&&!!this.box,this.delta,this.deltaFinal,this.treeScale,this.targetBoxFinal)},/**
     * Render the Element by rebuilding and applying the latest styles and vars.
     */t.prototype.render=function(){// Loop over any CSS variables and assign those.
for(var e in // Rebuild the latest animated values into style and vars caches.
this.build(),// Directly assign style into the Element's style prop. In tests Object.assign is the
// fastest way to assign styles.
Object.assign(this.element.style,this.style),this.vars)this.element.style.setProperty(e,this.vars[e])},t}(R),eC=function(e){return e.updateLayoutDelta()};/**
 * Creates a constant value over the lifecycle of a component.
 *
 * Even if `useMemo` is provided an empty array as its final argument, it doesn't offer
 * a guarantee that it won't re-run for performance reasons later on. By using `useConstant`
 * you can ensure that initialisers don't execute twice or more.
 */function eP(e){var t=(0,M.useRef)(null);return null===t.current&&(t.current=e()),t.current}function eR(e,t,n){return"string"==typeof e?e:(0,w.px).transform(t+n*e)}// Convert a progress 0-1 to a pixels value based on the provided length
var eL=function(e,t){return(0,w.px).transform(e*t)},eO={offset:"stroke-dashoffset",array:"stroke-dasharray"},eI={offset:"strokeDashoffset",array:"strokeDasharray"},eU={x:0,y:0,width:0,height:0},eN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox"]),eD=/([a-z])([A-Z])/g,ek=function(e){return e.replace(eD,"$1-$2").toLowerCase()},eF=/** @class */function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return(/**
         * A mutable record of attributes we want to apply directly to the rendered Element
         * every frame. We use a mutable data structure to reduce GC during animations.
         */t.attrs={},/**
         * We disable hardware acceleration for SVG transforms as they're not currently able to be accelerated.
         */t.defaultConfig={enableHardwareAcceleration:!1},/**
         * Without duplicating this call from HTMLVisualElement we end up with HTMLVisualElement.defaultConfig
         * being assigned to config
         */t.config=t.defaultConfig,t)}return(0,x.__extends)(t,e),/**
     * Measure the SVG element on mount. This can affect page rendering so there might be a
     * better time to perform this - for instance dynamically only if there's a transform-origin dependent
     * transform being set (like rotate)
     */t.prototype.mount=function(t){e.prototype.mount.call(this,t),this.measure()},/**
     * Update the SVG dimensions and path length
     */t.prototype.measure=function(){try{this.dimensions="function"==typeof this.element.getBBox?this.element.getBBox():this.element.getBoundingClientRect()}catch(e){// Most likely trying to measure an unrendered element under Firefox
this.dimensions={x:0,y:0,width:0,height:0}}"path"===this.element.tagName&&(this.totalPathLength=this.element.getTotalLength())},/**
     * Empty the mutable data structures in case attrs have been removed between renders.
     */t.prototype.clean=function(){e.prototype.clean.call(this),this.attrs={}},/**
     * Read an attribute directly from the SVGElement
     */t.prototype.read=function(e){return e=eN.has(e)?e:ek(e),this.element.getAttribute(e)},t.prototype.build=function(){var e,t,n,r,i,a,o,s,l,u,c,f,h,d,p,m,g,v,y,_,b,S,E,w,M,T,A,C,P,R,L;this.updateTransformDeltas(),e=this.latest,t=this.style,n=this.vars,r=this.attrs,i=this.transform,a=this.transformOrigin,o=this.transformKeys,s=this.config,l=this.dimensions,u=this.totalPathLength,c=this.isLayoutProjectionEnabled&&!!this.box,f=this.delta,h=this.deltaFinal,d=this.treeScale,p=this.targetBoxFinal,M=e.attrX,T=e.attrY,A=e.originX,C=e.originY,P=e.pathLength,R=e.pathSpacing,L=e.pathOffset,/**
     * With SVG we treat all animated values as attributes rather than CSS, so we build into attrs
     */et((0,x.__rest)(e,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]),r,n,i,a,o,s,c,f,h,d,p),r.transform&&(t.transform=r.transform,delete r.transform),(void 0!==A||void 0!==C||t.transform)&&(t.transformOrigin=(m=l||eU,g=void 0!==A?A:.5,v=void 0!==C?C:.5,eR(g,m.x,m.width)+" "+eR(v,m.y,m.height))),void 0!==M&&(r.x=M),void 0!==T&&(r.y=T),void 0!==u&&void 0!==P&&(b=!1,void 0===(y=void 0===R?1:R)&&(y=1),void 0===(_=void 0===L?0:L)&&(_=0),void 0===b&&(b=!0),// Build the dash offset
r[(S=b?eO:eI).offset]=eL(-_,u),E=eL(P,u),w=eL(y,u),r[S.array]=E+" "+w)},t.prototype.render=function(){// Loop through attributes and apply them to the SVGElement
for(var t in // Update HTML styles and CSS variables
e.prototype.render.call(this),this.attrs)this.element.setAttribute(eN.has(t)?t:ek(t),this.attrs[t])},t}(eA),ez=new Set(["animate","circle","clipPath","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","foreignObject","g","image","line","linearGradient","marker","mask","metadata","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","switch","symbol","text","textPath","tspan","use","view"]);/**
 * Determine whether this is a HTML or SVG component based on if the provided
 * Component is a string and a recognised SVG tag. A potentially better way to
 * do this would be to offer a `motion.customSVG` function and determine this
 * when we generate the `motion.circle` etc components.
 */function eB(e){return"string"==typeof e&&ez.has(e)}/**
 * @public
 */var eV=(0,M.createContext)(null);/**
 * When a component is the child of `AnimatePresence`, it can use `usePresence`
 * to access information about whether it's still present in the React tree.
 *
 * ```jsx
 * import { usePresence } from "framer-motion"
 *
 * export const Component = () => {
 *   const [isPresent, safeToRemove] = usePresence()
 *
 *   useEffect(() => {
 *     !isPresent && setTimeout(safeToRemove, 1000)
 *   }, [isPresent])
 *
 *   return <div />
 * }
 * ```
 *
 * If `isPresent` is `false`, it means that a component has been removed the tree, but
 * `AnimatePresence` won't really remove it until `safeToRemove` has been called.
 *
 * @public
 */function eH(){var e=(0,M.useContext)(eV);if(null===e)return[!0,null];var t=e.isPresent,n=e.onExitComplete,r=e.register,i=ej();return(0,M.useEffect)(function(){return r(i)},[]),!t&&n?[!1,function(){return null==n?void 0:n(i)}]:[!0]}var eG=0,eW=function(){return eG++},ej=function(){return eP(eW)},eX=new Set(["initial","animate","exit","style","variants","transition","transformTemplate","transformValues","custom","inherit","static","layout","layoutId","onLayoutAnimationComplete","onViewportBoxUpdate","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","whileHover","whileTap","onHoverEnd","onHoverStart"]),eq=function(e){return!eX.has(e)};/**
 * Emotion and Styled Components both allow users to pass through arbitrary props to their components
 * to dynamically generate CSS. They both use the `@emotion/is-prop-valid` package to determine which
 * of these should be passed to the underlying DOM node.
 *
 * However, when styling a Motion component `styled(motion.div)`, both packages pass through *all* props
 * as it's seen as an arbitrary component rather than a DOM node. Motion only allows arbitrary props
 * passed through the `custom` prop so it doesn't *need* the payload or computational overhead of
 * `@emotion/is-prop-valid`, however to fix this problem we need to use it.
 *
 * By making it an optionalDependency we can offer this functionality only in the situations where it's
 * actually required.
 */try{var eY=p("7dGEo").default;eq=function(e){return(// Handle events explicitly as Emotion validates them all as true
e.startsWith("on")?!eX.has(e):eY(e))}}catch(e){// We don't need to actually do anything here - the fallback is the existing `isPropValid`.
}function e$(e){return"string"==typeof e&&e.startsWith("var(--")}/**
 * Parse Framer's special CSS variable format into a CSS token and a fallback.
 *
 * ```
 * `var(--foo, #fff)` => [`--foo`, '#fff']
 * ```
 *
 * @param current
 */var eK=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function eZ(e,t,n){void 0===n&&(n=1),(0,E.invariant)(n<=4,'Max CSS variable fallback depth detected in property "'+e+'". This may indicate a circular fallback dependency.');var r=(0,x.__read)(function(e){var t=eK.exec(e);if(!t)return[,];var n=(0,x.__read)(t,3);return[n[1],n[2]]}(e),2),i=r[0],a=r[1];// No CSS variable detected
if(i)return window.getComputedStyle(t).getPropertyValue(i)||(e$(a)?eZ(a,t,n+1):a)}var eJ=new Set(["width","height","top","left","right","bottom","x","y"]),eQ=function(e){return eJ.has(e)},e0=function(e,t){// Looks odd but setting it twice doesn't render, it'll just
// set both prev and current to the latest value
e.set(t,!1),e.set(t)},e1=function(e){return e===w.number||e===w.px};(r=c||(c={})).width="width",r.height="height",r.left="left",r.right="right",r.top="top",r.bottom="bottom";var e2=function(e,t){return parseFloat(e.split(", ")[t])},e3=function(e,t){return function(n,r){var i=r.transform;if("none"===i||!i)return 0;var a=i.match(/^matrix3d\((.+)\)$/);if(a)return e2(a[1],t);var o=i.match(/^matrix\((.+)\)$/);return o?e2(o[1],e):0}},e4=new Set(["x","y","z"]),e5=j.filter(function(e){return!e4.has(e)}),e6={// Dimensions
width:function(e){var t=e.x;return t.max-t.min},height:function(e){var t=e.y;return t.max-t.min},top:function(e,t){return parseFloat(t.top)},left:function(e,t){return parseFloat(t.left)},bottom:function(e,t){var n=e.y;return parseFloat(t.top)+(n.max-n.min)},right:function(e,t){var n=e.x;return parseFloat(t.left)+(n.max-n.min)},// Transform
x:e3(4,13),y:e3(5,14)},e8=function(e,t,n){var r=t.getBoundingBox(),i=t.getComputedStyle(),a=i.display,o={top:i.top,left:i.left,bottom:i.bottom,right:i.right,transform:i.transform};"none"===a&&t.setStaticValues("display",e.display||"block"),// Apply the latest values (as set in checkAndConvertChangedValueTypes)
t.render();var s=t.getBoundingBox();return n.forEach(function(n){e0(t.getValue(n),e6[n](r,o)),e[n]=e6[n](s,i)}),e},e7=function(e,t,n,r){void 0===n&&(n={}),void 0===r&&(r={}),t=(0,x.__assign)({},t),r=(0,x.__assign)({},r);var i=Object.keys(t).filter(eQ),a=[],o=!1,s=[];if(i.forEach(function(i){var l,u=e.getValue(i);if(e.hasValue(i)){var c=n[i],f=t[i],h=B(c);// TODO: The current implementation of this basically throws an error
// if you try and do value conversion via keyframes. There's probably
// a way of doing this but the performance implications would need greater scrutiny,
// as it'd be doing multiple resize-remeasure operations.
if(ey(f))for(var d=f.length,p=null===f[0]?1:0;p<d;p++)l?(0,E.invariant)(B(f[p])===l,"All keyframes must be of the same type"):(l=B(f[p]),(0,E.invariant)(l===h||e1(h)&&e1(l),"Keyframes must be of the same dimension as the current value"));else l=B(f);if(h!==l){// If they're both just number or px, convert them both to numbers rather than
// relying on resize/remeasure to convert (which is wasteful in this situation)
if(e1(h)&&e1(l)){var m,g=u.get();"string"==typeof g&&u.set(parseFloat(g)),"string"==typeof f?t[i]=parseFloat(f):Array.isArray(f)&&l===w.px&&(t[i]=f.map(parseFloat))}else(null==h?void 0:h.transform)&&(null==l?void 0:l.transform)&&(0===c||0===f)?0===c?u.set(l.transform(c)):t[i]=h.transform(f):(o||(m=[],e5.forEach(function(t){var n=e.getValue(t);void 0!==n&&(m.push([t,n.get()]),n.set(t.startsWith("scale")?1:0))}),m.length&&e.render(),a=m,o=!0),s.push(i),r[i]=void 0!==r[i]?r[i]:t[i],e0(u,f))}}}),!s.length)return{target:t,transitionEnd:r};var l=e8(t,e,s);return a.length&&a.forEach(function(t){var n=(0,x.__read)(t,2),r=n[0],i=n[1];e.getValue(r).set(i)}),// Reapply original values
e.render(),{target:l,transitionEnd:r}},e9=/** @class */function(){function e(){/**
         * Track whether the host component has mounted.
         *
         * @internal
         */this.hasMounted=!1,/**
         * Pending animations that are started before a component is mounted.
         *
         * @internal
         */this.pendingAnimations=[],/**
         * A collection of linked component animation controls.
         *
         * @internal
         */this.componentControls=new Set}return(/**
     * Set variants on this and all child components.
     *
     * @param variants - The variants to set
     *
     * @internal
     */e.prototype.setVariants=function(e){this.variants=e,this.componentControls.forEach(function(t){return t.setVariants(e)})},/**
     * Set a default transition on this and all child components
     *
     * @param transition - The default transition to set
     *
     * @internal
     */e.prototype.setDefaultTransition=function(e){this.defaultTransition=e,this.componentControls.forEach(function(t){return t.setDefaultTransition(e)})},/**
     * Subscribes a component's animation controls to this.
     *
     * @param controls - The controls to subscribe
     * @returns An unsubscribe function.
     *
     * @internal
     */e.prototype.subscribe=function(e){var t=this;return this.componentControls.add(e),this.variants&&e.setVariants(this.variants),this.defaultTransition&&e.setDefaultTransition(this.defaultTransition),function(){return t.componentControls.delete(e)}},/**
     * Starts an animation on all linked components.
     *
     * @remarks
     *
     * ```jsx
     * controls.start("variantLabel")
     * controls.start({
     *   x: 0,
     *   transition: { duration: 1 }
     * })
     * ```
     *
     * @param definition - Properties or variant label to animate to
     * @param transition - Optional `transtion` to apply to a variant
     * @returns - A `Promise` that resolves when all animations have completed.
     *
     * @public
     */e.prototype.start=function(e,t){var n=this;if(!this.hasMounted)return new Promise(function(r){n.pendingAnimations.push({animation:[e,t],resolve:r})});var r=[];return this.componentControls.forEach(function(n){var i=n.start(e,{transitionOverride:t});r.push(i)}),Promise.all(r)},/**
     * Instantly set to a set of properties or a variant.
     *
     * ```jsx
     * // With properties
     * controls.set({ opacity: 0 })
     *
     * // With variants
     * controls.set("hidden")
     * ```
     *
     * @internalremarks
     * We could perform a similar trick to `.start` where this can be called before mount
     * and we maintain a list of of pending actions that get applied on mount. But the
     * expectation of `set` is that it happens synchronously and this would be difficult
     * to do before any children have even attached themselves. It's also poor practise
     * and we should discourage render-synchronous `.start` calls rather than lean into this.
     *
     * @public
     */e.prototype.set=function(e){return(0,E.invariant)(this.hasMounted,"controls.set() should only be called after a component has mounted. Consider calling within a useEffect hook."),this.componentControls.forEach(function(t){return t.apply(e)})},/**
     * Stops animations on all linked components.
     *
     * ```jsx
     * controls.stop()
     * ```
     *
     * @public
     */e.prototype.stop=function(){this.componentControls.forEach(function(e){return e.stop()})},/**
     * Initialises the animation controls.
     *
     * @internal
     */e.prototype.mount=function(){var e=this;this.hasMounted=!0,this.pendingAnimations.forEach(function(t){var n=t.animation,r=t.resolve;return e.start.apply(e,(0,x.__spread)(n)).then(r)})},/**
     * Stops all child animations when the host component unmounts.
     *
     * @internal
     */e.prototype.unmount=function(){this.hasMounted=!1,this.stop()},e)}(),te=(0,M.createContext)({static:!1}),tt=function(e){return"string"==typeof e||Array.isArray(e)},tn=function(e){return e instanceof e9},tr=function(e,t,n,r,i){void 0===r&&(r=!1);var a,o,s,l,u=i.initial,c=i.animate,f=i.variants,h=i.whileTap,d=i.whileHover,p=i.layoutId,m=(0,M.useContext)(eV),g=null==m?void 0:m.id;n.isPresenceRoot=e.presenceId!==g,(null==m?void 0:m.initial)!==void 0&&(u=m.initial),!1!==u||tn(c)?"boolean"!=typeof u&&(l=u):l=c;// Track mounted status so children can detect whether they were present during their
// parent's first render
var v=(0,M.useRef)(!1),y=f||tt(c)||tt(h)||tt(d)||tn(c),_=tt(l)?l:e.initial,x=tt(c)?c:e.animate,b=r?_:null,S=y&&tt(x)?x:null,E=(0,M.useMemo)(function(){return{controls:y?t:e.controls,initial:_,animate:x,visualElement:n,hasMounted:v,isReducedMotion:e.isReducedMotion,presenceId:g}},[b,S,e.isReducedMotion,c,p,g]);return(// Update the `static` property every render. This is unlikely to change but also essentially free.
E.static=r,o=!r,s=(0,M.useRef)(!0),(!o||o&&s.current)&&(a=l||e.initial)&&t.apply(a),s.current=!1,(0,M.useEffect)(function(){v.current=!0},[]),E)},ti=function(e){var t=e.animate,n=e.variants,r=e.inherit;return(void 0===r||r)&&!!n&&(!t||t instanceof e9)},ta=function(e){return e instanceof C};/**
 * Add incoming MotionValues
 *
 * TODO: Type the VisualElements properly
 */function to(e,t,n,r){for(var i in void 0===r&&(r=!1),r&&(e.reactStyle={}),n){var a=n[i],o=!1;ta(a)?ts.has(i)||(e.addValue(i,a),o=!0):Y(i)||$.has(i)?(e.hasValue(i)?a!==t[i]&&e.getValue(i).set(a):e.addValue(i,P(a)),o=!0):r&&(e.reactStyle[i]=a),o&&(t[i]=a)}}/**
 * These are props we accept as MotionValues but don't want to add
 * to the VisualElement
 */var ts=new Set([]),tl=function(){return{}},tu=function(e){// TODO maybe throw if v.length - 1 is placeholder token?
return ey(e)?e[e.length-1]||0:e},tc=function(e){var t={};return e.forEachValue(function(e,n){return t[n]=e.get()}),t},tf=function(e){var t={};return e.forEachValue(function(e,n){return t[n]=e.getVelocity()}),t},th=/** @class */function(){function e(e,t){var n=this,r=t.makeTargetAnimatable;/**
         * A reference to the component's latest props. We could probably ditch this in
         * favour to a reference to the `custom` prop now we don't send all props through
         * to target resolvers.
         */this.props={},/**
         * The component's variants, as provided by `variants`
         */this.variants={},/**
         * A set of values that we animate back to when a value is cleared of all overrides.
         */this.baseTarget={},/**
         * A series of target overrides that we can animate to/from when overrides are set/cleared.
         */this.overrides=[],/**
         * A series of target overrides as they were originally resolved.
         */this.resolvedOverrides=[],/**
         * A Set of currently active override indexes
         */this.activeOverrides=new Set,/**
         * A Set of value keys that are currently animating.
         */this.isAnimating=new Set,/**
         * Check if the associated `VisualElement` has a key with the provided string.
         * Pre-bound to the class so we can provide directly to the `filter` in `checkForNewValues`.
         */this.hasValue=function(e){return!n.visualElement.hasValue(e)},this.visualElement=e,this.makeTargetAnimatable=r,this.visualElement.forEachValue(function(e,t){return n.baseTarget[t]=e.get()})}return(/**
     * Set the reference to the component's props.
     * @param props -
     */e.prototype.setProps=function(e){this.props=e},/**
     * Set the reference to the component's variants
     * @param variants -
     */e.prototype.setVariants=function(e){e&&(this.variants=e)},/**
     * Set the component's default transition
     * @param transition -
     */e.prototype.setDefaultTransition=function(e){e&&(this.defaultTransition=e)},/**
     * Set motion values without animation.
     *
     * @param definition -
     * @param isActive -
     */e.prototype.setValues=function(e,t){var n=void 0===t?{}:t,r=n.isActive,i=void 0===r?new Set:r,a=n.priority,o=this.resolveVariant(e),s=o.target,l=o.transitionEnd;for(var u in s=this.transformValues((0,x.__assign)((0,x.__assign)({},s),l))){if(i.has(u))return;if(i.add(u),s){var c=tu(s[u]);if(this.visualElement.hasValue(u)){var f=this.visualElement.getValue(u);f&&f.set(c)}else this.visualElement.addValue(u,P(c));a||(this.baseTarget[u]=c)}}},/**
     * Allows `transformValues` to be set by a component that allows us to
     * transform the values in a given `Target`. This allows Framer Library
     * to extend Framer Motion to animate `Color` variables etc. Currently we have
     * to manually support these extended types here in Framer Motion.
     *
     * @param values -
     */e.prototype.transformValues=function(e){var t=this.props.transformValues;return t?t(e):e},/**
     * Check a `Target` for new values we haven't animated yet, and add them
     * to the `MotionValueMap`.
     *
     * Currently there's functionality here that is DOM-specific, we should allow
     * this functionality to be injected by the factory that creates DOM-specific
     * components.
     *
     * @param target -
     */e.prototype.checkForNewValues=function(e){var t=Object.keys(e).filter(this.hasValue),n=t.length;if(n)for(var r=0;r<n;r++){var i,a,o=t[r],s=e[o],l=null;// If it isn't a keyframes or the first keyframes value was set as `null`, read the
// value from the DOM. It might be worth investigating whether to check props (for SVG)
// or props.style (for HTML) if the value exists there before attempting to read.
if(Array.isArray(s)&&(l=s[0]),null===l){var u=this.visualElement.readNativeValue(o);l=void 0!==u?u:e[o],(0,E.invariant)(null!==l,'No initial value for "'+o+'" can be inferred. Ensure an initial value for "'+o+'" is defined on the component.')}"string"==typeof l&&(i=l,/^\-?\d*\.?\d+$/.test(i))?l=parseFloat(l):(a=l,!V.find(z(a))&&(0,w.complex).test(s)&&(l=(0,w.complex).getAnimatableNone(s))),this.visualElement.addValue(o,P(l)),this.baseTarget[o]=l}},/**
     * Resolve a variant from its label or resolver into an actual `Target` we can animate to.
     * @param variant -
     */e.prototype.resolveVariant=function(e,t){var n=(void 0===t?{}:t).custom;if(!e)return{target:void 0,transition:void 0,transitionEnd:void 0};"function"==typeof e&&(e=e(null!=n?n:this.props.custom,tc(this.visualElement),tf(this.visualElement)));var r=e.transition;return{transition:void 0===r?this.defaultTransition:r,transitionEnd:e.transitionEnd,target:(0,x.__rest)(e,["transition","transitionEnd"])}},/**
     * Get the highest active override priority index
     */e.prototype.getHighestPriority=function(){return this.activeOverrides.size?Math.max.apply(Math,(0,x.__spread)(Array.from(this.activeOverrides))):0},/**
     * Set an override. We add this layer of indirection so if, for instance, a tap gesture
     * starts and overrides a hover gesture, when we clear the tap gesture and fallback to the
     * hover gesture, if that hover gesture has changed in the meantime we can go to that rather
     * than the one that was resolved when the hover gesture animation started.
     *
     * @param definition -
     * @param overrideIndex -
     */e.prototype.setOverride=function(e,t){this.overrides[t]=e,this.children&&this.children.forEach(function(n){return n.setOverride(e,t)})},/**
     * Start an override animation.
     * @param overrideIndex -
     */e.prototype.startOverride=function(e){var t=this.overrides[e];if(t)return this.start(t,{priority:e})},/**
     * Clear an override. We check every value we animated to in this override to see if
     * its present on any lower-priority overrides. If not, we animate it back to its base target.
     * @param overrideIndex -
     */e.prototype.clearOverride=function(e){var t=this;if(this.children&&this.children.forEach(function(t){return t.clearOverride(e)}),this.overrides[e]){this.activeOverrides.delete(e);var n=this.getHighestPriority();this.resetIsAnimating(),n&&this.overrides[n]&&this.startOverride(n);// Figure out which remaining values were affected by the override and animate those
var r=this.resolvedOverrides[e];if(r){var i={};for(var a in this.baseTarget)void 0!==r[a]&&(i[a]=this.baseTarget[a]);this.onStart(),this.animate(i).then(function(){return t.onComplete()})}}},/**
     * Apply a target/variant without any animation
     */e.prototype.apply=function(e){return Array.isArray(e)?this.applyVariantLabels(e):"string"==typeof e?this.applyVariantLabels([e]):void this.setValues(e)},/**
     * Apply variant labels without animation
     */e.prototype.applyVariantLabels=function(e){var t=this,n=new Set;(0,x.__spread)(e).reverse().forEach(function(r){var i=t.resolveVariant(t.variants[r]),a=i.target,o=i.transitionEnd;o&&t.setValues(o,{isActive:n}),a&&t.setValues(a,{isActive:n}),t.children&&t.children.size&&t.children.forEach(function(t){return t.applyVariantLabels(e)})})},e.prototype.start=function(e,t){var n,r=this;return void 0===t&&(t={}),t.priority&&this.activeOverrides.add(t.priority),this.resetIsAnimating(t.priority),n=Array.isArray(e)?this.animateVariantLabels(e,t):"string"==typeof e?this.animateVariant(e,t):this.animate(e,t),this.onStart(),n.then(function(){return r.onComplete()})},e.prototype.animate=function(e,t){var n=this;void 0===t&&(t={});var r=t.delay,i=void 0===r?0:r,a=t.priority,o=void 0===a?0:a,s=t.transitionOverride,l=(0,x.__rest)(t,["delay","priority","transitionOverride"]),u=this.resolveVariant(e,l),c=u.target,f=u.transition,h=u.transitionEnd;if(s&&(f=s),!c)return Promise.resolve();c=this.transformValues(c),h&&(h=this.transformValues(h)),this.checkForNewValues(c);var d=this.transformValues(function(e,t,n){var r,i,a={};for(var o in e)a[o]=null!==(r=function(e,t){if(t)return(t[e]||t.default||t).from}(o,t))&&void 0!==r?r:null===(i=n.getValue(o))||void 0===i?void 0:i.get();return a}(c,f,this.visualElement));if(this.makeTargetAnimatable){var p=this.makeTargetAnimatable(this.visualElement,c,d,h);c=p.target,h=p.transitionEnd}o&&(this.resolvedOverrides[o]=c),this.checkForNewValues(c);var m=[];for(var g in c){var v=this.visualElement.getValue(g);if(v&&c&&void 0!==c[g]){var y=c[g];o||(this.baseTarget[g]=tu(y)),this.isAnimating.has(g)||(this.isAnimating.add(g),m.push(eM(g,v,y,(0,x.__assign)({delay:i},f))))}}var _=Promise.all(m);return h?_.then(function(){n.setValues(h,{priority:o})}):_},e.prototype.animateVariantLabels=function(e,t){var n=this;return Promise.all((0,x.__spread)(e).reverse().map(function(e){return n.animateVariant(e,t)}))},e.prototype.animateVariant=function(e,t){var n=this,r=t&&t.priority||0,i=this.variants[e],a=i&&this.resolveVariant(i,t).transition||{},o=i?function(){return n.animate(i,t)}:function(){return Promise.resolve()},s=this.children?function(i){void 0===i&&(i=0);var o=a.delayChildren,s=void 0===o?0:o;return n.animateChildren(e,s+i,a.staggerChildren,a.staggerDirection,r,null==t?void 0:t.custom)}:function(){return Promise.resolve()},l=a.when;if(!l)return Promise.all([o(),s(null==t?void 0:t.delay)]);var u=(0,x.__read)("beforeChildren"===l?[o,s]:[s,o],2),c=u[0],f=u[1];return c().then(f)},e.prototype.animateChildren=function(e,t,n,r,i,a){if(void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),!this.children)return Promise.resolve();var o=[],s=(this.children.size-1)*n,l=1===r?function(e){return e*n}:function(e){return s-e*n};return Array.from(this.children).forEach(function(n,r){var s=n.animateVariant(e,{priority:i,delay:t+l(r),custom:a});o.push(s)}),Promise.all(o)},e.prototype.onStart=function(){var e=this.props.onAnimationStart;e&&e()},e.prototype.onComplete=function(){var e=this.props.onAnimationComplete;e&&e()},e.prototype.checkOverrideIsAnimating=function(e){for(var t=this.overrides.length,n=e+1;n<t;n++){var r=this.resolvedOverrides[n];if(r)for(var i in r)this.isAnimating.add(i)}},e.prototype.resetIsAnimating=function(e){void 0===e&&(e=0),this.isAnimating.clear(),e<this.getHighestPriority()&&this.checkOverrideIsAnimating(e),this.children&&this.children.forEach(function(t){return t.resetIsAnimating(e)})},e.prototype.stop=function(){this.visualElement.forEachValue(function(e){return e.stop()})},/**
     * Add the controls of a child component.
     * @param controls -
     */e.prototype.addChild=function(e){this.children||(this.children=new Set),this.children.add(e),// We set child overrides when `setOverride` is called, but also have to do it here
// as the first time `setOverride` is called all the children might not have been added yet.
this.overrides.forEach(function(t,n){t&&e.setOverride(t,n)})},e.prototype.removeChild=function(e){this.children&&this.children.delete(e)},e.prototype.resetChildren=function(){this.children&&this.children.clear()},e)}(),td=(0,M.createContext)({transformPagePoint:function(e){return e},features:[]});(i=h||(h={}))[i.Entering=0]="Entering",i[i.Present=1]="Present",i[i.Exiting=2]="Exiting",(a=d||(d={}))[a.Hide=0]="Hide",a[a.Show=1]="Show";/**
 * Default handlers for batching VisualElements
 */var tp={measureLayout:function(e){return e.measureLayout()},layoutReady:function(e){return e.layoutReady()}},tm=function(e,t){return e.depth-t.depth};/**
 * Create a batcher to process VisualElements
 */function tg(){var e=new Set;return{add:function(t){return e.add(t)},flush:function(t){var n=void 0===t?tp:t,r=n.measureLayout,i=n.layoutReady,a=Array.from(e).sort(tm);/**
         * Write: Reset any transforms on children elements so we can read their actual layout
         */a.forEach(function(e){return e.resetTransform()}),/**
         * Read: Measure the actual layout
         */a.forEach(r),/**
         * Write: Notify the VisualElements they're ready for further write operations.
         */a.forEach(i),/**
         * After all children have started animating, ensure any Entering components are set to Present.
         * If we add deferred animations (set up all animations and then start them in two loops) this
         * could be moved to the start loop. But it needs to happen after all the animations configs
         * are generated in AnimateSharedLayout as this relies on presence data
         */a.forEach(function(e){e.isPresent&&(e.presence=h.Present)}),e.clear()}}}function tv(e){return!!e.forceUpdate}var ty=(0,M.createContext)(tg()),t_="undefined"!=typeof window?M.useLayoutEffect:M.useEffect;/**
 * Create a `motion` component.
 *
 * This function accepts a Component argument, which can be either a string (ie "div"
 * for `motion.div`), or an actual React component.
 *
 * Alongside this is a config option which provides a way of rendering the provided
 * component "offline", or outside the React render cycle.
 *
 * @internal
 */function tx(e,t){var n=t.defaultFeatures,r=t.useVisualElement,i=t.render,a=t.animationControlsConfig;return(0,M.forwardRef)(function(t,o){var s,l,u,c,f,h,d,p=(0,M.useContext)(te),m=ti(t),g=p.static||t.static||!1,v=r(e,t,p.visualElement,g,o);!/**
         * Scrape MotionValues from props and add/remove them to/from
         * the VisualElement as necessary.
         *//**
 * Scrape props for MotionValues and add/remove them to this component's
 * VisualElement
 */function(e,t){var n=eP(tl);/**
     * Remove MotionValues that are no longer present
     */for(var r in n){var i=Y(r)||$.has(r),a=t[r],o=t.style&&t.style[r],s=a&&ta(t[r]),l=o&&ta(t.style[r]),u=i&&!a&&!o,c=!i&&!s&&!l;(u||c)&&(e.removeValue(r),delete n[r])}/**
     * Add incoming MotionValues
     */to(e,n,t),t.style&&to(e,n,t.style,!0),t.transformValues&&(e.reactStyle=t.transformValues(e.reactStyle))}(v,t);/**
         * Create animation controls for the VisualElement. It might be
         * interesting to try and combine this with VisualElement itself in a further refactor.
         */var y=(s=ti(t),l=t.variants,u=t.transition,c=(0,M.useContext)(te).controls,f=(0,M.useContext)(eV),h=eP(function(){return new th(v,a)}),(!f||f.isPresent)&&(h.resetChildren(),h.setProps(t),h.setVariants(l),h.setDefaultTransition(u)),// We have to subscribe to the parent controls within a useEffect rather than during render,
// as
(0,M.useEffect)(function(){s&&c&&c.addChild(h)}),(0,M.useEffect)(function(){return function(){t.onAnimationComplete;// Remove reference to onAnimationComplete from controls. All the MotionValues
// are unsubscribed from this component separately. We let animations run out
// as they might be animating other components.
var e=(0,x.__rest)(t,["onAnimationComplete"]);h.setProps(e),c&&c.removeChild(h)}},[]),h),_=tr(p,y,v,g,t),b=/**
 * Load features via renderless components based on the provided MotionProps
 */function(e,t,n,r,i,a,o,s){var l=(0,M.useContext)(td);// If this is a static component, or we're rendering on the server, we don't load
// any feature components
if(t||"undefined"==typeof window)return null;// Decide which features we should render and add them to the returned array
for(var u=(0,x.__spread)(e,l.features),c=u.length,f=[],h=0;h<c;h++){var d=u[h],p=d.shouldRender,m=d.key,g=d.getComponent;if(p(i,o)){var v=g(i);v&&f.push((0,M.createElement)(v,(0,x.__assign)({key:m},i,{localContext:a,parentContext:o,visualElement:n,controls:r,inherit:s})))}}return f}(n,g,v,y,t,_,p,m),S=i(e,t,v);// The mount order and hierarchy is specific to ensure our element ref is hydrated by the time
// all plugins and features has to execute.
return d=(0,M.useContext)(ty),t_(function(){return function(){tv(d)&&d.remove(v)}},[]),(0,M.createElement)(M.Fragment,null,(0,M.createElement)(te.Provider,{value:_},S),b)})}function tb(e){var t=null;return function(){return null===t&&(t=e,function(){t=null})}}var tS=tb("dragHorizontal"),tE=tb("dragVertical");function tw(e){var t=!1;if("y"===e)t=tE();else if("x"===e)t=tS();else{var n=tS(),r=tE();n&&r?t=function(){n(),r()}:(n&&n(),r&&r())}return t}var tM=!1;"undefined"!=typeof window&&document.addEventListener("touchmove",function(e){tM&&e.preventDefault()},{passive:!1});var tT=function(){return tM=!1};function tA(e,t,n,r){if(n)return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n,r)}}function tC(e){return(// PointerEvent inherits from MouseEvent so we can't use a straight instanceof check.
"undefined"!=typeof PointerEvent&&e instanceof PointerEvent?!("mouse"!==e.pointerType):e instanceof MouseEvent)}var tP={pageX:0,pageY:0};function tR(e,t){var n,r,i;return void 0===t&&(t="page"),{point:e.touches?(void 0===(n=t)&&(n="page"),{x:(r=e.touches[0]||e.changedTouches[0]||tP)[n+"X"],y:r[n+"Y"]}):(void 0===(i=t)&&(i="page"),{x:e[i+"X"],y:e[i+"Y"]})}}function tL(e){return tR(e,"client")}var tO=function(e,t){if(void 0===t&&(t=!1),e){var n=function(t){return e(t,tR(t))};return t?/**
 * Filters out events not attached to the primary pointer (currently left mouse button)
 * @param eventHandler
 */function(e){if(e)return function(t){var n=t instanceof MouseEvent;(!n||n&&0===t.button)&&e(t)}}(n):n}},tI="undefined"!=typeof window,tU={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},tN={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function tD(e){if(tI&&null===window.onpointerdown);else if(tI&&null===window.ontouchstart)return tN[e];else if(tI&&null===window.onmousedown)return tU[e];return e}function tk(e,t,n,r){return tA(e,tD(t),tO(n,"pointerdown"===t),r)}function tF(e,t,n,r){var i,a;return i=tD(t),a=tO(n,"pointerdown"===t),void(0,M.useEffect)(function(){var t=e.current;if(a&&t)return tA(t,i,a,r)},[e,i,a,r])}/** @beta */(o=m||(m={})).subtract=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},/** @beta */o.relativeTo=function(e){var t;return function(n){var r=n.x,i=n.y,a=// Caching element here could be leaky because of React lifecycle
void 0!==t?t:t="string"==typeof e?document.getElementById(e):e;if(a){var o=a.getBoundingClientRect();return{x:r-o.left-window.scrollX,y:i-o.top-window.scrollY}}}};/**
 * @internal
 */var tz=/** @class */function(){function e(e,t,n){var r=this,i=(void 0===n?{}:n).transformPagePoint;// If we have more than one touch, don't start detecting this gesture
if(/**
         * @internal
         */this.startEvent=null,/**
         * @internal
         */this.lastMoveEvent=null,/**
         * @internal
         */this.lastMoveEventInfo=null,/**
         * @internal
         */this.handlers={},this.updatePoint=function(){if(r.lastMoveEvent&&r.lastMoveEventInfo){var e=tV(r.lastMoveEventInfo,r.history),t=null!==r.startEvent,n=(0,S.distance)(e.offset,{x:0,y:0})>=3;if(t||n){var i=e.point,a=(0,b.getFrameData)().timestamp;r.history.push((0,x.__assign)((0,x.__assign)({},i),{timestamp:a}));var o=r.handlers,s=o.onStart,l=o.onMove;t||(s&&s(r.lastMoveEvent,e),r.startEvent=r.lastMoveEvent),l&&l(r.lastMoveEvent,e)}}},!e.touches||!(e.touches.length>1)){this.handlers=t,this.transformPagePoint=i;var a=tB(tR(e),this.transformPagePoint),o=a.point,s=(0,b.getFrameData)().timestamp;this.history=[(0,x.__assign)((0,x.__assign)({},o),{timestamp:s})];var l=t.onSessionStart;l&&l(e,tV(a,this.history));var u=tk(window,"pointermove",function(e,t){return r.handlePointerMove(e,t)}),c=tk(window,"pointerup",function(e,t){return r.handlePointerUp(e,t)});this.removeListeners=function(){u&&u(),c&&c()}}}return e.prototype.handlePointerMove=function(e,t){// Because Safari doesn't trigger mouseup events when it's above a `<select>`
if(this.lastMoveEvent=e,this.lastMoveEventInfo=tB(t,this.transformPagePoint),tC(e)&&0===e.buttons){this.handlePointerUp(e,t);return}// Throttle mouse move event to once per frame
(0,b.default).update(this.updatePoint,!0)},e.prototype.handlePointerUp=function(e,t){this.end();var n=this.handlers.onEnd;if(n){var r=tV(tB(t,this.transformPagePoint),this.history);n&&n(e,r)}},e.prototype.updateHandlers=function(e){this.handlers=e},e.prototype.end=function(){this.removeListeners&&this.removeListeners(),(0,b.cancelSync).update(this.updatePoint),tT()},e}();function tB(e,t){return t?{point:t(e.point)}:e}function tV(e,t){var n=e.point;return{point:n,delta:m.subtract(n,tH(t)),offset:m.subtract(n,t[0]),velocity:function(e,t){if(e.length<2)return{x:0,y:0};for(var n=e.length-1,r=null,i=tH(e);n>=0&&(r=e[n],!(i.timestamp-r.timestamp>em(.1)));)n--;if(!r)return{x:0,y:0};var a=(i.timestamp-r.timestamp)/1e3;if(0===a)return{x:0,y:0};var o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}(t,0)}}function tH(e){return e[e.length-1]}/**
 * Apply constraints to a point. These constraints are both physical along an
 * axis, and an elastic factor that determines how much to constrain the point
 * by if it does lie outside the defined parameters.
 */function tG(e,t,n){var r=t.min,i=t.max;return void 0!==r&&e<r?e=n?(0,S.mix)(r,e,n):Math.max(e,r):void 0!==i&&e>i&&(e=n?(0,S.mix)(i,e,n):Math.min(e,i)),e}/**
 * Calculate constraints in terms of the viewport when defined relatively to the
 * measured axis. This is measured from the nearest edge, so a max constraint of 200
 * on an axis with a max value of 300 would return a constraint of 500 - axis length
 */function tW(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}/**
 * Calculate viewport constraints when defined as another viewport-relative axis
 */function tj(e,t){var n,r=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&(r=(n=(0,x.__read)([i,r],2))[0],i=n[1]),{min:e.min+r,max:e.min+i}}var tX=new WeakMap,tq=/** @class */function(){function e(e){var t=e.visualElement;/**
         * Track whether we're currently dragging.
         *
         * @internal
         */this.isDragging=!1,/**
         * The current direction of drag, or `null` if both.
         *
         * @internal
         */this.currentDirection=null,/**
         * The permitted boundaries of travel, in pixels.
         *
         * @internal
         */this.constraints=!1,/**
         * A reference to the host component's latest props.
         *
         * @internal
         */this.props={},/**
         * Track the initial position of the cursor relative to the dragging element
         * when dragging starts as a value of 0-1 on each axis. We then use this to calculate
         * an ideal bounding box for the VisualElement renderer to project into every frame.
         *
         * @internal
         */this.cursorProgress={x:.5,y:.5},// When updating _dragX, or _dragY instead of the VisualElement,
// persist their values between drag gestures.
this.originPoint={},// This is a reference to the global drag gesture lock, ensuring only one component
// can "capture" the drag of one or both axes.
// TODO: Look into moving this into pansession?
this.openGlobalLock=null,/**
         * @internal
         */this.panSession=null,this.visualElement=t,this.visualElement.enableLayoutProjection(),tX.set(t,this)}return(/**
     * Instantiate a PanSession for the drag gesture
     *
     * @public
     */e.prototype.start=function(e,t){var n=this,r=void 0===t?{}:t,i=r.snapToCursor,a=r.cursorProgress;/**
         * If this drag session has been manually triggered by the user, it might be from an event
         * outside the draggable element. If snapToCursor is set to true, we need to measure the position
         * of the element and snap it to the cursor.
         */void 0!==i&&i&&this.snapToCursor(e);var o=this.props.transformPagePoint;this.panSession=new tz(e,{onSessionStart:function(){tM=!0,// Stop any animations on both axis values immediately. This allows the user to throw and catch
// the component.
n.stopMotion()},onStart:function(e,t){// Attempt to grab the global drag gesture lock - maybe make this part of PanSession
var r,i,o=n.props,s=o.drag,l=o.dragPropagation;if(!s||l||(n.openGlobalLock&&n.openGlobalLock(),n.openGlobalLock=tw(s),n.openGlobalLock)){/**
             * Record the progress of the mouse within the draggable element on each axis.
             * onPan, we're going to use this to calculate a new bounding box for the element to
             * project into. This will ensure that even if the DOM element moves via a relayout, it'll
             * stick to the correct place under the pointer.
             */n.prepareBoundingBox(),n.visualElement.lockTargetBox(),/**
             * Resolve the drag constraints. These are either set as top/right/bottom/left constraints
             * relative to the element's layout, or a ref to another element. Both need converting to
             * viewport coordinates.
             */n.resolveDragConstraints();/**
             * When dragging starts, we want to find where the cursor is relative to the bounding box
             * of the element. Every frame, we calculate a new bounding box using this relative position
             * and let the visualElement renderer figure out how to reproject the element into this bounding
             * box.
             *
             * By doing it this way, rather than applying an x/y transform directly to the element,
             * we can ensure the component always visually sticks to the cursor as we'd expect, even
             * if the DOM element itself changes layout as a result of React updates the user might
             * make based on the drag position.
             */var u=tL(e).point;ep(function(e){var t=n.visualElement.targetBox[e],r=t.min,i=t.max;n.cursorProgress[e]=a?a[e]:(0,S.progress)(r,i,u[e]);/**
                 * If we have external drag MotionValues, record their origin point. On pointermove
                 * we'll apply the pan gesture offset directly to this value.
                 */var o=n.getAxisMotionValue(e);o&&(n.originPoint[e]=o.get())}),// Set current drag status
n.isDragging=!0,n.currentDirection=null,null===// Fire onDragStart event
(i=(r=n.props).onDragStart)||void 0===i||i.call(r,e,t)}},onMove:function(e,t){var r,i,a,o,s=n.props,l=s.dragPropagation,u=s.dragDirectionLock;// If we didn't successfully receive the gesture lock, early return.
if(l||n.openGlobalLock){var c,f,h=t.offset;// Attempt to detect drag direction if directionLock is true
if(u&&null===n.currentDirection){n.currentDirection=(void 0===c&&(c=10),f=null,Math.abs(h.y)>c?f="y":Math.abs(h.x)>c&&(f="x"),f),null!==n.currentDirection&&(null===(i=(r=n.props).onDirectionLock)||void 0===i||i.call(r,n.currentDirection));return}// Update each point with the latest position
n.updateAxis("x",e,h),n.updateAxis("y",e,h),null===// Fire onDrag event
(o=(a=n.props).onDrag)||void 0===o||o.call(a,e,t),// Update the last pointer event
g=e}},onEnd:function(e,t){return n.stop(e,t)}},{transformPagePoint:o})},/**
     * Ensure the component's layout and target bounding boxes are up-to-date.
     */e.prototype.prepareBoundingBox=function(){var e=this.visualElement.getInstance(),t=e.style.transform;this.visualElement.resetTransform(),this.visualElement.measureLayout(),e.style.transform=t,this.visualElement.refreshTargetBox()},e.prototype.resolveDragConstraints=function(){var e,t,n,r,i,a=this,o=this.props.dragConstraints;o?this.constraints=T(o)?this.resolveRefConstraints(this.visualElement.box,o):(e=this.visualElement.box,t=o.top,n=o.left,r=o.bottom,i=o.right,{x:tW(e.x,n,i),y:tW(e.y,t,r)}):this.constraints=!1,this.constraints&&ep(function(e){if(a.getAxisMotionValue(e)){var t,n,r;a.constraints[e]=(t=a.visualElement.box[e],n=a.constraints[e],r={},void 0!==n.min&&(r.min=n.min-t.min),void 0!==n.max&&(r.max=n.max-t.min),r)}})},e.prototype.resolveRefConstraints=function(e,t){var n=this.props,r=n.onMeasureDragConstraints,i=n.transformPagePoint,a=t.current;(0,E.invariant)(null!==a,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop."),this.constraintsBox=eT(a,i);var o=(s=this.constraintsBox,{x:tj(e.x,s.x),y:tj(e.y,s.y)});/**
         * If there's an onMeasureDragConstraints listener we call it and
         * if different constraints are returned, set constraints to that
         */if(r){var s,l,u,c,f=r((u=(l=o).x,{top:(c=l.y).min,bottom:c.max,left:u.min,right:u.max}));f&&(o=O(f))}return o},e.prototype.cancelDrag=function(){tT(),this.isDragging=!1,this.panSession&&this.panSession.end(),this.panSession=null,!this.props.dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null)},e.prototype.stop=function(e,t){this.visualElement.unlockTargetBox(),null===(n=this.panSession)||void 0===n||n.end(),this.panSession=null;var n,r=this.isDragging;if(this.cancelDrag(),r){var i=this.props,a=i.dragMomentum,o=i.dragElastic,s=i.onDragEnd;if(a||o){var l=t.velocity;this.animateDragEnd(l)}null==s||s(e,t)}},e.prototype.snapToCursor=function(e){var t=this;this.prepareBoundingBox(),ep(function(n){var r=t.getAxisMotionValue(n);if(r){var i=tL(e).point,a=t.visualElement.box,o=a[n].max-a[n].min,s=a[n].min+o/2,l=i[n]-s;t.originPoint[n]=i[n],r.set(l)}else t.cursorProgress[n]=.5,t.updateVisualElementAxis(n,e)})},/**
     * Update the specified axis with the latest pointer information.
     */e.prototype.updateAxis=function(e,t,n){// If we're not dragging this axis, do an early return.
if(tY(e,this.props.drag,this.currentDirection))return this.getAxisMotionValue(e)?this.updateAxisMotionValue(e,n):this.updateVisualElementAxis(e,t)},e.prototype.updateAxisMotionValue=function(e,t){var n=this.getAxisMotionValue(e);if(t&&n){var r=this.props.dragElastic,i=this.originPoint[e]+t[e],a=this.constraints?tG(i,this.constraints[e],r):i;n.set(a)}},e.prototype.updateVisualElementAxis=function(e,t){var n,r,i,a,o=this.props.dragElastic,s=this.visualElement.box[e],l=s.max-s.min,u=this.cursorProgress[e],c=(n=tL(t).point[e],r=null===(a=this.constraints)||void 0===a?void 0:a[e],i=n-l*u,r?tG(i,r,o):i);// Update the axis viewport target with this new min and the length
this.visualElement.setAxisTarget(e,c,c+l)},e.prototype.updateProps=function(e){var t=e.drag,n=e.dragDirectionLock,r=e.dragPropagation,i=e.dragConstraints,a=e.dragElastic,o=e.dragMomentum,s=(0,x.__rest)(e,["drag","dragDirectionLock","dragPropagation","dragConstraints","dragElastic","dragMomentum"]);this.props=(0,x.__assign)({drag:void 0!==t&&t,dragDirectionLock:void 0!==n&&n,dragPropagation:void 0!==r&&r,dragConstraints:void 0!==i&&i,dragElastic:void 0===a?.35:a,dragMomentum:void 0===o||o},s)},/**
     * Drag works differently depending on which props are provided.
     *
     * - If _dragX and _dragY are provided, we output the gesture delta directly to those motion values.
     * - If the component will perform layout animations, we output the gesture to the component's
     *      visual bounding box
     * - Otherwise, we apply the delta to the x/y motion values.
     */e.prototype.getAxisMotionValue=function(e){var t=this.props,n=t.layout,r=t.layoutId,i="_drag"+e.toUpperCase();return this.props[i]?this.props[i]:n||void 0!==r?void 0:this.visualElement.getValue(e,0)},e.prototype.animateDragEnd=function(e){var t=this,n=this.props,r=n.drag,i=n.dragMomentum,a=n.dragElastic,o=n.dragTransition;// Run all animations and then resolve the new drag constraints.
return Promise.all(ep(function(n){if(tY(n,r,t.currentDirection)){var s=t.constraints?t.constraints[n]:{},l=(0,x.__assign)((0,x.__assign)({type:"inertia",velocity:i?e[n]:0,bounceStiffness:a?200:1e6,bounceDamping:a?40:1e7,timeConstant:750,restDelta:1,restSpeed:10},o),s);// If we're not animating on an externally-provided `MotionValue` we can use the
// component's animation controls which will handle interactions with whileHover (etc),
// otherwise we just have to animate the `MotionValue` itself.
return t.getAxisMotionValue(n)?t.startAxisValueAnimation(n,l):t.visualElement.startLayoutAxisAnimation(n,l)}})).then(function(){var e,n;null===(n=(e=t.props).onDragTransitionEnd)||void 0===n||n.call(e)})},e.prototype.stopMotion=function(){var e=this;ep(function(t){var n=e.getAxisMotionValue(t);n?n.stop():e.visualElement.stopLayoutAnimation()})},e.prototype.startAxisValueAnimation=function(e,t){var n=this.getAxisMotionValue(e);if(n){var r=n.get();return n.set(r),n.set(r),eM(e,n,0,t)}},e.prototype.scalePoint=function(){var e=this,t=this.props,n=t.drag;if(T(t.dragConstraints)&&this.constraintsBox){// Stop any current animations as there can be some visual glitching if we resize mid animation
this.stopMotion();// Record the relative progress of the targetBox relative to the constraintsBox
var r={x:0,y:0};ep(function(t){r[t]=ef(e.visualElement.targetBox[t],e.constraintsBox[t])}),/**
         * For each axis, calculate the current progress of the layout axis within the constraints.
         * Then, using the latest layout and constraints measurements, reposition the new layout axis
         * proportionally within the constraints.
         */this.prepareBoundingBox(),this.resolveDragConstraints(),ep(function(t){if(tY(t,n,null)){// Calculate the position of the targetBox relative to the constraintsBox using the
// previously calculated progress
var i,a,o,s,l,u=(i=e.visualElement.targetBox[t],a=e.constraintsBox[t],o=r[t],s=i.max-i.min,{min:l=(0,S.mix)(a.min,a.max-s,o),max:l+s}),c=u.min,f=u.max;e.visualElement.setAxisTarget(t,c,f)}})}},e.prototype.mount=function(e){var t=this,n=tk(e.getInstance(),"pointerdown",function(e){var n=t.props,r=n.drag,i=n.dragListener;r&&(void 0===i||i)&&t.start(e)}),r=tA(window,"resize",function(){t.scalePoint()}),i=e.onLayoutUpdate(function(){t.isDragging&&t.resolveDragConstraints()}),a=e.prevSnapshot;/**
         * Return a function that will teardown the drag gesture
         */return(null==a?void 0:a.isDragging)&&this.start(g,{cursorProgress:a.cursorProgress}),function(){null==n||n(),null==r||r(),null==i||i(),t.cancelDrag()}},e)}();function tY(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}var t$=function(e){return function(t){return e(t),null}},tK=t$(function(e){var t,n,r,i,a=e.visualElement;return n=(t=(0,x.__rest)(e,["visualElement"])).dragControls,r=(0,M.useContext)(td).transformPagePoint,void((i=eP(function(){return new tq({visualElement:a})})).updateProps((0,x.__assign)((0,x.__assign)({},t),{transformPagePoint:r})),// If we've been provided a DragControls for manual control over the drag gesture,
// subscribe this component to it on mount.
(0,M.useEffect)(function(){return n&&n.subscribe(i)},[i]),// Mount the drag controls with the visualElement
(0,M.useEffect)(function(){return i.mount(a)},[]))});function tZ(e){return(0,M.useEffect)(function(){return function(){return e()}},[])}/**
 * Recursively traverse up the tree to check whether the provided child node
 * is the parent or a descendant of it.
 *
 * @param parent - Element to find
 * @param child - Element to test against parent
 */var tJ=function(e,t){return!!t&&(e===t||tJ(e,t.parentElement))},tQ=["whileHover","whileTap","whileDrag"],t0=function(e){return tQ.indexOf(e)+1},t1=t0("whileTap"),t2=t0("whileHover"),t3=function(e){return function(t,n){tC(t)&&e(t,n)}},t4=["onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","whileTap","whileHover","onHoverStart","onHoverEnd"],t5=t$(function(e){var t,n,r,i,a,o,s,l,u,c,f,h,d,p=e.visualElement;n=(t=(0,x.__rest)(e,["visualElement"])).onPan,r=t.onPanStart,i=t.onPanEnd,a=t.onPanSessionStart,o=n||r||i||a,s=(0,M.useRef)(null),l=(0,M.useContext)(td).transformPagePoint,u={onSessionStart:a,onStart:r,onMove:n,onEnd:function(e,t){s.current=null,i&&i(e,t)}},(0,M.useEffect)(function(){null!==s.current&&s.current.updateHandlers(u)}),tF(p,"pointerdown",o&&function(e){s.current=new tz(e,u,{transformPagePoint:l})}),tZ(function(){return s.current&&s.current.end()}),/**
 * @param handlers -
 * @internal
 */function(e,t){var n=e.onTap,r=e.onTapStart,i=e.onTapCancel,a=e.whileTap,o=e.controls,s=n||r||i||a,l=(0,M.useRef)(!1),u=(0,M.useRef)(null);function c(){u.current&&u.current(),u.current=null}a&&o&&o.setOverride(a,t1);// We load this event handler into a ref so we can later refer to
// onPointerUp.current which will always have reference to the latest props
var f=(0,M.useRef)(null);f.current=function(e,r){var s=t.current;if(c(),l.current&&s){l.current=!1,o&&a&&o.clearOverride(t1);// Check the gesture lock - if we get it, it means no drag gesture is active
// and we can safely fire the tap gesture.
var u=tw(!0);u&&(u(),tJ(s,e.target)?n&&n(e,r):i&&i(e,r))}},tF(t,"pointerdown",s?function(e,n){c(),u.current=tk(window,"pointerup",function(e,t){return f.current(e,t)}),t.current&&!l.current&&(l.current=!0,r&&r(e,n),o&&a&&o.startOverride(t1))}:void 0),tZ(c)}(t,p),c=t.whileHover,f=t.onHoverStart,h=t.onHoverEnd,d=t.controls,c&&d&&d.setOverride(c,t2),tF(p,"pointerenter",t3(function(e,t){f&&f(e,t),c&&d&&d.startOverride(t2)})),tF(p,"pointerleave",t3(function(e,t){h&&h(e,t),c&&d&&d.clearOverride(t2)}))}),t6=t$(function(e){var t=e.animate,n=e.controls,r=e.exit,i=(0,x.__read)(eH(),2),a=i[0],o=i[1],s=(0,M.useContext)(eV),l=(0,M.useRef)(!1),u=(null==s?void 0:s.custom)!==void 0?s.custom:e.custom;(0,M.useEffect)(function(){a?!l.current||!t||"boolean"==typeof t||t instanceof e9||n.start(t):(!l.current&&r&&n.start(r,{custom:u}).then(o),l.current=!0),a&&(l.current=!1)},[t,n,u,r,a,o,e])});function t8(e,t){void 0===t&&(t=!1),e.transition;var n=e.transitionEnd,r=(0,x.__rest)(e,["transition","transitionEnd"]);return t?(0,x.__assign)((0,x.__assign)({},r),n):r}(s=v||(v={})).Target="Target",s.VariantLabel="VariantLabel",s.AnimationSubscription="AnimationSubscription";var t7=function(e){var t=e instanceof C?e.get():e;return Array.from(new Set(t?Array.isArray(t)?t:[t]:[]))},t9=((y={})[v.Target]=t$(function(e){var t,n,r=e.animate,i=e.controls,a=e.visualElement,o=e.transition;return t=(0,M.useRef)(!0),void((n=(0,M.useRef)(null)).current||(n.current=t8(r,!0)),(0,M.useEffect)(function(){var e={},s=t8(r),l=t8(r,!0);// Detect which values have changed between renders
for(var u in s){// This value should animate on mount if this value doesn't already exist (wasn't
// defined in `style` or `initial`) or if it does exist and it's already changed.
var c,f,h=t.current&&(!a.hasValue(u)||a.getValue(u).get()!==l[u]),d=null!==l[u],p=(c=n.current[u],void 0!==(f=l[u])&&(Array.isArray(c)&&Array.isArray(f)?!function(e,t){if(null===t)return!1;var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}(f,c):c!==f));d&&(p||h)&&(e[u]=s[u])}t.current=!1,n.current=(0,x.__assign)((0,x.__assign)({},n.current),l),Object.keys(e).length&&i.start((0,x.__assign)((0,x.__assign)({},e),{transition:r.transition||o,transitionEnd:r.transitionEnd}))},[r]))}),y[v.VariantLabel]=t$(function(e){var t,n,r,i,a,o,s=e.animate,l=e.inherit,u=e.controls;return t=e.initial,n=void 0===l||l,r=t7(s),a=(i=(0,M.useContext)(te)).hasMounted&&i.hasMounted.current,o=(0,M.useRef)(!1),void(0,M.useEffect)(function(){var e,s,l=!1;n?(// If we're inheriting variant changes and the parent has already
// mounted when this component loads, we need to manually trigger
// this animation.
l=!!a,r=t7(i.animate)):l=o.current||(e=t7(t),s=r,e.join(",")!==s.join(",")),l&&u.start(r),o.current=!0},[r.join(",")])}),y[v.AnimationSubscription]=t$(function(e){var t,n=e.animate,r=e.controls;return t=(0,M.useMemo)(function(){return n.subscribe(r)},[n]),void(0,M.useEffect)(function(){return function(){t&&t()}},[t])}),y),ne=function(e){return e.animate instanceof e9},nt=["initial","animate","whileTap","whileHover"],nn=((_={})[v.Target]=function(e){var t;return void 0!==e.animate&&!(Array.isArray(t=e.animate)||"string"==typeof t)&&!ne(e)},_[v.VariantLabel]=function(e){return void 0!==e.variants||nt.some(function(t){return"string"==typeof e[t]})},_[v.AnimationSubscription]=ne,_),nr=/** @class */function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.frameTarget={x:{min:0,max:0},y:{min:0,max:0}},t.stopAxisAnimation={x:void 0,y:void 0},t.animate=function(e,n,r){void 0===r&&(r={});var i,a,o=r.originBox,s=r.targetBox,l=r.visibilityAction,u=(0,x.__rest)(r,["originBox","targetBox","visibilityAction"]),c=t.props,f=c.visualElement,p=c.layout,m=(i=/**
             * Allow the measured origin (prev bounding box) and target (actual layout) to be
             * overridden by the provided config.
             */n=o||n,a=e=s||e,na(i.x,a.x)||na(i.y,a.y)),g=ep(function(r){/**
                 * If layout is set to "position", we can resize the origin box based on the target
                 * box and only animate its position.
                 */if("position"===p){var i=e[r].max-e[r].min;n[r].max=n[r].min+i}if(!f.isTargetBoxLocked){if(void 0!==l)l===d.Hide?f.hide():f.show();else if(m)// final state
return t.animateAxis(r,e[r],n[r],u);else // to the final desired state
return f.setAxisTarget(r,e[r].min,e[r].max)}});/**
             * If this visualElement isn't present (ie it's been removed from the tree by the user but
             * kept in by the tree by AnimatePresence) then call safeToRemove when all axis animations
             * have successfully finished.
             */return(// Force a render to ensure there's no flash of uncorrected bounding box.
f.render(),Promise.all(g).then(function(){var e,n;null===(n=(e=t.props).onLayoutAnimationComplete)||void 0===n||n.call(e),f.isPresent?f.presence=h.Present:t.safeToRemove()}))},t}return(0,x.__extends)(t,e),t.prototype.componentDidMount=function(){var e=this.props.visualElement;e.enableLayoutProjection(),this.unsubLayoutReady=e.onLayoutUpdate(this.animate)},t.prototype.componentWillUnmount=function(){var e=this;this.unsubLayoutReady(),ep(function(t){var n,r;return null===(r=(n=e.stopAxisAnimation)[t])||void 0===r?void 0:r.call(n)})},/**
     * TODO: This manually performs animations on the visualElement's layout progress
     * values. It'd be preferable to amend the HTMLVisualElement.startLayoutAxisAnimation
     * API to accept more custom animations like this.
     */t.prototype.animateAxis=function(e,t,n,r){var i,a,o=void 0===r?{}:r,s=o.transition,l=o.crossfadeOpacity;null===(a=(i=this.stopAxisAnimation)[e])||void 0===a||a.call(i);var u=this.props.visualElement,c=this.frameTarget[e],f=u.axisProgress[e];/**
         * Set layout progress back to 0. We set it twice to hard-reset any velocity that might
         * be re-incoporated into a subsequent spring animation.
         */f.clearListeners(),f.set(0),f.set(0);/**
         * If this is a crossfade animation, create a function that updates both the opacity of this component
         * and the one being crossfaded out.
         */var h=l&&this.createCrossfadeAnimation(l),d=function(){// Convert the latest layoutProgress, which is a value from 0-1000, into a 0-1 progress
var r=f.get()/1e3;c.min=(0,S.mix)(n.min,t.min,r),c.max=(0,S.mix)(n.max,t.max,r),u.setAxisTarget(e,c.min,c.max),// If this is a crossfade animation, update both elements.
null==h||h(r)};// Synchronously run a frame to ensure there's no flash of the uncorrected bounding box.
d();// Create a function to stop animation on this specific axis
var p=f.onChange(d),m=eM("x"===e?"layoutX":"layoutY",f,1e3,s||this.props.transition||no).then(p);return this.stopAxisAnimation[e]=function(){f.stop(),p()},m},t.prototype.createCrossfadeAnimation=function(e){var t=this.props.visualElement.getValue("opacity",0);return function(n){t.set(nl((0,S.mix)(0,1,n))),e.set(nu((0,S.mix)(1,0,n)))}},t.prototype.safeToRemove=function(){var e,t;null===(t=(e=this.props).safeToRemove)||void 0===t||t.call(e)},t.prototype.render=function(){return null},t}(M.Component);function ni(e){var t=(0,x.__read)(eH(),2)[1];return(0,M.createElement)(nr,(0,x.__assign)({},e,{safeToRemove:t}))}function na(e,t){return e.min!==t.min||e.max!==t.max}var no={duration:.45,ease:[.4,0,.1,1]};function ns(e,t,n){return function(r){return(// Could replace ifs with clamp
r<e?0:r>t?1:n((0,S.progress)(e,t,r)))}}var nl=ns(0,.5,S.circOut),nu=ns(.5,.95,S.linear),nc=/** @class */function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,x.__extends)(t,e),/**
     * If this is a child of a SyncContext, register the VisualElement with it on mount.
     */t.prototype.componentDidMount=function(){var e=this.props,t=e.syncLayout,n=e.visualElement;tv(t)&&t.register(n)},/**
     * If this is a child of a SyncContext, notify it that it needs to re-render. It will then
     * handle the snapshotting.
     *
     * If it is stand-alone component, add it to the batcher.
     */t.prototype.getSnapshotBeforeUpdate=function(){var e=this.props,t=e.syncLayout,n=e.visualElement;return tv(t)?t.syncUpdate():(n.snapshotBoundingBox(),t.add(n)),null},t.prototype.componentDidUpdate=function(){var e=this.props,t=e.syncLayout,n=e.visualElement;tv(t)||t.flush();/**
         * If this axis isn't animating as a result of this render we want to reset the targetBox
         * to the measured box
         */var r=n.axisProgress,i=r.x,a=r.y;!n.box||n.isTargetBoxLocked||i.isAnimating()||a.isAnimating()||(ep(function(e){var t=n.box[e],r=t.min,i=t.max;n.setAxisTarget(e,r,i)}),// Force a render to ensure there's no flash of uncorrected bounding box.
n.render())},t.prototype.render=function(){return null},t}(/*@__PURE__*/f(M).Component);function nf(e){var t=(0,M.useContext)(ty);return /*@__PURE__*/f(M).createElement(nc,(0,x.__assign)({},e,{syncLayout:t}))}/**
 * HTML & SVG components, optimised for use with gestures and animation. These can be used as
 * drop-in replacements for any HTML & SVG component, all CSS & SVG properties are supported.
 *
 * @public
 */var nh=(l={defaultFeatures:[{key:"measure-layout",shouldRender:function(e){return!!e.drag||!!e.layout||!!e.layoutId},getComponent:function(){return nf}},{key:"animation",shouldRender:function(){return!0},getComponent:function(e){var t=void 0;for(var n in v)nn[n](e)&&(t=n);return t?t9[t]:void 0}},{key:"drag",shouldRender:function(e){return!!e.drag},getComponent:function(){return tK}},{key:"gestures",shouldRender:function(e){return t4.some(function(t){return e.hasOwnProperty(t)})},getComponent:function(){return t5}},{key:"exit",shouldRender:function(e){return!!e.exit&&!ti(e)},getComponent:function(){return t6}},{key:"animate-layout",shouldRender:function(e){return!!e.layout||!!e.layoutId},getComponent:function(){return ni}}],useVisualElement:function(e,t,n,r,i){var a,o=eP(function(){return new(eB(e)?eF:eA)(n,i)});o.updateConfig((0,x.__assign)({enableHardwareAcceleration:!r},t)),o.layoutId=t.layoutId;var s=null===(a=(0,M.useContext)(eV))||a.isPresent;return o.isPresent=void 0!==t.isPresent?t.isPresent:s,(0,M.useEffect)(function(){if(t.onViewportBoxUpdate)return o.onViewportBoxUpdate(t.onViewportBoxUpdate)},[t.onViewportBoxUpdate]),o},render:function(e,t,n){// Only filter props from components we control, ie `motion.div`. If this
// is a custom component pass along everything provided to it.
var r,i,a="string"==typeof e?function(e){var t={};for(var n in e)eq(n)&&(t[n]=e[n]);return t}(t):t;/**
     * Every render, empty and rebuild the animated values to be applied to our Element.
     * During animation these data structures are used in a mutable fashion to reduce
     * garbage collection, but between renders we can flush them to remove values
     * that might have been taken out of the provided props.
     */n.clean(),n.build();// Generate props to visually render this component
var o=eB(e)?(0,x.__assign)((0,x.__assign)({},n.attrs),{style:(0,x.__assign)({},n.reactStyle)}):(r=t.drag,i={style:(0,x.__assign)((0,x.__assign)((0,x.__assign)({},n.reactStyle),n.style),n.vars)},r&&(// Disable text selection
i.style.userSelect="none",// Disable the ghost element when a user drags
i.draggable=!1),i);return(0,M.createElement)(e,(0,x.__assign)((0,x.__assign)((0,x.__assign)({},a),{ref:n.ref}),o))},animationControlsConfig:{makeTargetAnimatable:function(e,t,n,r){var i,a,o=/**
 * Resolve CSS variables from
 *
 * @internal
 */function(e,t,n){var r,i=(0,x.__rest)(t,[]),a=e.getInstance();if(!(a instanceof HTMLElement))return{target:i,transitionEnd:n};// Cycle through every target property and resolve CSS variables. Currently
// we only read single-var properties like `var(--foo)`, not `calc(var(--foo) + 20px)`
for(var o in n&&(n=(0,x.__assign)({},n)),// Go through existing `MotionValue`s and ensure any existing CSS variables are resolved
e.forEachValue(function(e){var t=e.get();if(e$(t)){var n=eZ(t,a);n&&e.set(n)}}),i){var s=i[o];if(e$(s)){var l=eZ(s,a);l&&(// Clone target if it hasn't already been
i[o]=l,n&&(null!==(r=n[o])&&void 0!==r||(n[o]=s)))}}return{target:i,transitionEnd:n}}(e,t,r);return i=t=o.target,a=r=o.transitionEnd,Object.keys(i).some(eQ)?e7(e,i,n,a):{target:i,transitionEnd:a}}}},u=new Map,new Proxy({custom:function(e){return tx(e,l)}},{get:function(e,t){return"custom"===t?e.custom:(u.has(t)||u.set(t,tx(t,l)),u.get(t))}}));function nd(e,t){var n,r;return t&&e!==t.lead?{visibilityAction:d.Hide}:t&&e.presence!==h.Entering&&e===t.lead&&t.lead!==t.prevLead?{visibilityAction:d.Show}:(e.presence===h.Entering?n=null==t?void 0:t.getFollowOrigin():e.presence===h.Exiting&&(r=null==t?void 0:t.getFollowTarget()),{originBox:n,targetBox:r})}function np(e,t){var n,r,i,a={},o=t&&t.lead,s=null==o?void 0:o.presence;return t&&e===o?e.presence===h.Entering?a.originBox=t.getFollowOrigin():e.presence===h.Exiting&&(a.targetBox=t.getFollowTarget()):t&&e===t.follow&&(a.transition=t.getLeadTransition(),s===h.Entering?a.targetBox=t.getLeadTarget():s===h.Exiting&&(a.originBox=t.getLeadOrigin())),((null===(n=null==t?void 0:t.follow)||void 0===n?void 0:n.isPresenceRoot)||(null==o?void 0:o.isPresenceRoot))&&(t&&e!==o?t&&e===t.follow?o&&s!==h.Entering&&s===h.Exiting&&(a.crossfadeOpacity=null===(i=null==t?void 0:t.lead)||void 0===i?void 0:i.getValue("opacity",1)):a.visibilityAction=d.Hide:e.presence===h.Entering&&(a.crossfadeOpacity=null===(r=null==t?void 0:t.follow)||void 0===r?void 0:r.getValue("opacity",0))),a}var nm=/** @class */function(){function e(){this.order=[],// Track whether we've ever had a child
this.hasChildren=!1}return e.prototype.add=function(e){var t,n=e.config.layoutOrder;if(void 0===n)this.order.push(e);else{var r=this.order.findIndex(function(e){return n<=(e.config.layoutOrder||0)});-1===r&&(e.presence=this.hasChildren?h.Entering:h.Present,r=this.order.length),this.order.splice(r,0,e)}/**
         *
         */// Load previous values from snapshot into this child
// TODO Neaten up
// TODO Double check when reimplementing move
// TODO Add isDragging status and
if(this.snapshot){e.prevSnapshot=this.snapshot,// TODO Remove in favour of above
e.prevViewportBox=this.snapshot.boundingBox;var i=this.snapshot.latestMotionValues;for(var a in i)e.hasValue(a)?null===(t=e.getValue(a))||void 0===t||t.set(i[a]):e.addValue(a,P(i[a]))}this.hasChildren=!0},e.prototype.remove=function(e){var t=this.order.findIndex(function(t){return e===t});-1!==t&&this.order.splice(t,1)},e.prototype.updateLeadAndFollow=function(){this.prevLead=this.lead,this.prevFollow=this.follow;var e=(0,x.__read)(/**
 * For each layout animation, we want to identify two components
 * within a stack that will serve as the "lead" and "follow" components.
 *
 * In the switch animation, the lead component performs the entire animation.
 * It uses the follow bounding box to animate out from and back to. The follow
 * component is hidden.
 *
 * In the crossfade animation, both the lead and follow components perform
 * the entire animation, animating from the follow origin bounding box to the lead
 * target bounding box.
 *
 * Generalising a stack as First In Last Out, *searching from the end* we can
 * generally consider the lead component to be:
 *  - If the last child is present, the last child
 *  - If the last child is exiting, the last *encountered* exiting component
 */function(e,t){for(var n=(0,x.__read)(t,2),r=n[0],i=n[1],a=void 0,o=0,s=void 0,l=e.length,u=!1,c=l-1;c>=0;c--){var f=e[c];if(c===l-1&&(u=f.isPresent),u)a=f;else{// If the child before this will be present, make this the
// lead.
var h=e[c-1];h&&h.isPresent&&(a=f)}if(a){o=c;break}}// If the lead component is exiting, find the closest follow
// present component
if(a||(a=e[0]),// Find the follow child
s=e[o-1],a)for(var c=o-1;c>=0;c--){var f=e[c];if(f.isPresent){s=f;break}}return a!==r&&!u&&s===i&&e.find(function(e){return e===r})&&(a=r),[a,s]}(this.order,[this.lead,this.follow]),2),t=e[0],n=e[1];this.lead=t,this.follow=n},e.prototype.updateSnapshot=function(){if(this.lead){var e={boundingBox:this.lead.prevViewportBox,latestMotionValues:{}};this.lead.forEachValue(function(t,n){var r=t.get();Y(r)||(e.latestMotionValues[n]=r)});var t=tX.get(this.lead);t&&t.isDragging&&(e.isDragging=!0,e.cursorProgress=t.cursorProgress),this.snapshot=e}},e.prototype.isLeadPresent=function(){var e;return this.lead&&(null===(e=this.lead)||void 0===e?void 0:e.presence)!==h.Exiting},e.prototype.shouldStackAnimate=function(){return!0;// return this.lead && this.lead?.isPresent
//     ? this.lead?.props?._shouldAnimate === true
//     : this.follow && this.follow?.props._shouldAnimate === true
},e.prototype.getFollowOrigin=function(){var e;// This shouldAnimate check is quite specifically a fix for the optimisation made in Framer
// where components are kept in the tree ready to be re-used
return this.follow// && this.follow.shouldAnimate
?this.follow.prevViewportBox:null===(e=this.snapshot)||void 0===e?void 0:e.boundingBox},e.prototype.getFollowTarget=function(){var e;return null===(e=this.follow)||void 0===e?void 0:e.box},e.prototype.getLeadOrigin=function(){var e;return null===(e=this.lead)||void 0===e?void 0:e.prevViewportBox},e.prototype.getLeadTarget=function(){var e;return null===(e=this.lead)||void 0===e?void 0:e.box},e.prototype.getLeadTransition=function(){var e;return null===(e=this.lead)||void 0===e?void 0:e.config.transition},e}();/** @class */(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return(/**
         * A list of all the children in the shared layout
         */t.children=new Set,/**
         * As animate components with a defined `layoutId` are added/removed to the tree,
         * we store them in order. When one is added, it will animate out from the
         * previous one, and when it's removed, it'll animate to the previous one.
         */t.stacks=new Map,/**
         * Track whether the component has mounted. If it hasn't, the presence of added children
         * are set to Present, whereas if it has they're considered Entering
         */t.hasMounted=!1,/**
         * Track whether we already have an update scheduled. If we don't, we'll run snapshots
         * and schedule one.
         */t.updateScheduled=!1,/**
         * Tracks whether we already have a render scheduled. If we don't, we'll force one with this.forceRender
         */t.renderScheduled=!1,/**
         * The methods provided to all children in the shared layout tree.
         */t.syncContext=(0,x.__assign)((0,x.__assign)({},tg()),{syncUpdate:function(e){return t.scheduleUpdate(e)},forceUpdate:function(){// By copying syncContext to itself, when this component re-renders it'll also re-render
// all children subscribed to the SharedLayout context.
t.syncContext=(0,x.__assign)({},t.syncContext),t.scheduleUpdate(!0)},register:function(e){return t.addChild(e)},remove:function(e){return t.removeChild(e)}}),t)}(0,x.__extends)(t,e),t.prototype.componentDidMount=function(){this.hasMounted=!0,this.updateStacks()},t.prototype.componentDidUpdate=function(){this.startLayoutAnimation()},t.prototype.shouldComponentUpdate=function(){return this.renderScheduled=!0,!0},t.prototype.startLayoutAnimation=function(){var e=this;/**
         * Reset update and render scheduled status
         */this.renderScheduled=this.updateScheduled=!1;var t=this.props.type;/**
         * Update presence metadata based on the latest AnimatePresence status.
         * This is a kind of goofy way of dealing with this, perhaps there's a better model to find.
         */this.children.forEach(function(e){e.isPresent?e.presence!==h.Entering&&(e.presence=e.presence===h.Exiting?h.Entering:h.Present):e.presence=h.Exiting}),/**
         * In every layoutId stack, nominate a component to lead the animation and another
         * to follow
         */this.updateStacks();/**
         * Decide which animation to use between shared layoutId components
         */var n="crossfade"===t?np:nd;/**
         * Shared layout animations can be used without the AnimateSharedLayout wrapping component.
         * This requires some co-ordination across components to stop layout thrashing
         * and ensure measurements are taken at the correct time.
         *
         * Here we use that same mechanism of schedule/flush.
         */this.children.forEach(function(t){return e.syncContext.add(t)}),this.syncContext.flush({measureLayout:function(e){return e.measureLayout()},layoutReady:function(t){var r=t.layoutId;t.layoutReady(n(t,e.getStack(r)))}}),/**
         * Clear snapshots so subsequent rerenders don't retain memory of outgoing components
         */this.stacks.forEach(function(e){return e.snapshot=void 0})},t.prototype.updateStacks=function(){this.stacks.forEach(function(e){return e.updateLeadAndFollow()})},t.prototype.scheduleUpdate=function(e){void 0===e&&(e=!1),(e||!this.updateScheduled)&&(/**
         * Flag we've scheduled an update
         */this.updateScheduled=!0,this.props._supportRotate&&this.children.forEach(function(e){return e.resetRotate()}),/**
         * Read: Snapshot children
         */this.children.forEach(function(e){return e.snapshotBoundingBox()}),/**
         * Every child keeps a local snapshot, but we also want to record
         * snapshots of the visible children as, if they're are being removed
         * in this render, we can still access them.
         */this.stacks.forEach(function(e){return e.updateSnapshot()}),(e||!this.renderScheduled)&&(this.renderScheduled=!0,this.forceUpdate()))},t.prototype.addChild=function(e){this.children.add(e),this.addToStack(e),e.presence=this.hasMounted?h.Entering:h.Present},t.prototype.removeChild=function(e){this.scheduleUpdate(),this.children.delete(e),this.removeFromStack(e)},t.prototype.addToStack=function(e){var t=this.getStack(e.layoutId);null==t||t.add(e)},t.prototype.removeFromStack=function(e){var t=this.getStack(e.layoutId);null==t||t.remove(e)},/**
     * Return a stack of animate children based on the provided layoutId.
     * Will create a stack if none currently exists with that layoutId.
     */t.prototype.getStack=function(e){if(void 0!==e)return(// Create stack if it doesn't already exist
this.stacks.has(e)||this.stacks.set(e,new nm),this.stacks.get(e))},t.prototype.render=function(){return(0,M.createElement)(ty.Provider,{value:this.syncContext},this.props.children)}})(M.Component),P(0),P(0),P(0),P(0);// Does this device prefer reduced motion? Returns `null` server-side.
var ng=P(null);if("undefined"!=typeof window){if(window.matchMedia){var nv=window.matchMedia("(prefers-reduced-motion)"),ny=function(){return ng.set(nv.matches)};nv.addListener(ny),ny()}else ng.set(!1)}/** @class */(function(){function e(){this.componentControls=new Set}/**
     * Subscribe a component's internal `VisualElementDragControls` to the user-facing API.
     *
     * @internal
     */e.prototype.subscribe=function(e){var t=this;return this.componentControls.add(e),function(){return t.componentControls.delete(e)}},/**
     * Start a drag gesture on every `motion` component that has this set of drag controls
     * passed into it via the `dragControls` prop.
     *
     * ```jsx
     * dragControls.start(e, {
     *   snapToCursor: true
     * })
     * ```
     *
     * @param event - A mouse/touch/pointer event.
     * @param options - Options
     *
     * @public
     */e.prototype.start=function(e,t){this.componentControls.forEach(function(n){n.start(e.nativeEvent||e,t)})}})(),/** @class */function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.initialState={},t}(0,x.__extends)(t,e),t.prototype.updateLayoutDelta=function(){},t.prototype.build=function(){},t.prototype.clean=function(){},t.prototype.getBoundingBox=function(){return{x:{min:0,max:0},y:{min:0,max:0}}},t.prototype.readNativeValue=function(e){return this.initialState[e]||0},t.prototype.render=function(){this.build()}}(R)}),m("7WQrb",function(e,n){t(e.exports,"__extends",()=>i),t(e.exports,"__assign",()=>a),t(e.exports,"__rest",()=>o),t(e.exports,"__values",()=>s),t(e.exports,"__read",()=>l),t(e.exports,"__spread",()=>u),t(e.exports,"__spreadArrays",()=>c);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** *//* global Reflect, Promise */var r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function s(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function u(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e}function c(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r}}),m("cZSSj",function(e,n){t(e.exports,"cancelSync",()=>v),t(e.exports,"getFrameData",()=>b),t(e.exports,"default",()=>S);var r=p("6QSfE"),i=0,a="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(e){return window.requestAnimationFrame(e)}:function(e){var t=Date.now(),n=Math.max(0,16.7-(t-i));i=t+n,setTimeout(function(){return e(i)},n)},o=function(e){var t=[],n=[],i=0,a=!1,o=0,s=new WeakSet,l=new WeakSet,u={cancel:function(e){var t=n.indexOf(e);s.add(e),-1!==t&&n.splice(t,1)},process:function(r){var c,f;if(a=!0,t=(c=[n,t])[0],(n=c[1]).length=0,i=t.length)for(o=0;o<i;o++)(f=t[o])(r),!0!==l.has(f)||s.has(f)||(u.schedule(f),e(!0));a=!1},schedule:function(e,o,u){void 0===o&&(o=!1),void 0===u&&(u=!1),(0,r.invariant)("function"==typeof e,"Argument must be a function");var c=u&&a,f=c?t:n;s.delete(e),o&&l.add(e),-1===f.indexOf(e)&&(f.push(e),c&&(i=t.length))}};return u},s=1/60*1e3,l=!0,u=!1,c=!1,f={delta:0,timestamp:0},h=["read","update","preRender","render","postRender"],d=function(e){return u=e},m=/*#__PURE__*/h.reduce(function(e,t){return e[t]=o(d),e},{}),g=/*#__PURE__*/h.reduce(function(e,t){var n=m[t];return e[t]=function(e,t,r){return void 0===t&&(t=!1),void 0===r&&(r=!1),u||x(),n.schedule(e,t,r),e},e},{}),v=/*#__PURE__*/h.reduce(function(e,t){return e[t]=m[t].cancel,e},{}),y=function(e){return m[e].process(f)},_=function(e){u=!1,f.delta=l?s:Math.max(Math.min(e-f.timestamp,40),1),l||(s=f.delta),f.timestamp=e,c=!0,h.forEach(y),c=!1,u&&(l=!1,a(_))},x=function(){u=!0,l=!0,c||a(_)},b=function(){return f},S=g}),m("6QSfE",function(e,n){t(e.exports,"warning",()=>r),t(e.exports,"invariant",()=>i);var r=function(){},i=function(){}}),m("kr9rL",function(e,n){t(e.exports,"SpringAnimator",()=>s),t(e.exports,"progress",()=>l),t(e.exports,"mix",()=>u),t(e.exports,"mixColor",()=>m),t(e.exports,"pipe",()=>_),t(e.exports,"mixComplex",()=>w),t(e.exports,"clamp",()=>M),t(e.exports,"interpolate",()=>A),t(e.exports,"reverseEasing",()=>C),t(e.exports,"mirrorEasing",()=>P),t(e.exports,"createExpoIn",()=>R),t(e.exports,"createBackIn",()=>L),t(e.exports,"createAnticipate",()=>O),t(e.exports,"linear",()=>N),t(e.exports,"easeIn",()=>D),t(e.exports,"easeOut",()=>k),t(e.exports,"easeInOut",()=>F),t(e.exports,"circIn",()=>z),t(e.exports,"circOut",()=>B),t(e.exports,"circInOut",()=>V),t(e.exports,"backIn",()=>H),t(e.exports,"backOut",()=>G),t(e.exports,"backInOut",()=>W),t(e.exports,"anticipate",()=>j),t(e.exports,"bounceOut",()=>$),t(e.exports,"bounceIn",()=>K),t(e.exports,"bounceInOut",()=>Z),t(e.exports,"KeyframesAnimator",()=>J),t(e.exports,"DecayAnimator",()=>Q),t(e.exports,"animate",()=>ea),t(e.exports,"velocityPerSecond",()=>eo),t(e.exports,"inertia",()=>es),t(e.exports,"radiansToDegrees",()=>el),t(e.exports,"angle",()=>eu),t(e.exports,"applyOffset",()=>ec),t(e.exports,"createAttractor",()=>eh),t(e.exports,"attract",()=>ed),t(e.exports,"attractExpo",()=>ep),t(e.exports,"degreesToRadians",()=>em),t(e.exports,"isPoint",()=>eg),t(e.exports,"isPoint3D",()=>ev),t(e.exports,"distance",()=>e_),t(e.exports,"pointFromVector",()=>ex),t(e.exports,"toDecimal",()=>eb),t(e.exports,"smoothFrame",()=>eS),t(e.exports,"smooth",()=>eE),t(e.exports,"snap",()=>ew),t(e.exports,"velocityPerFrame",()=>eM),t(e.exports,"wrap",()=>eT),t(e.exports,"cubicBezier",()=>eO),t(e.exports,"steps",()=>eI);var r=p("7WQrb"),i=p("9L2TJ"),a=p("6QSfE"),o=p("cZSSj"),s=/*#__PURE__*/function(){function e(e){this.isComplete=!1,this.updateOptions(e),this.createSpring()}return e.prototype.createSpring=function(){var e=this.options,t=e.velocity,n=e.from,r=e.to,i=e.damping,a=e.stiffness,o=e.mass,s=t?-(t/1e3):0,l=r-n,u=i/(2*Math.sqrt(a*o)),c=Math.sqrt(a/o)/1e3;if(u<1)this.resolveSpring=function(e){var t=Math.exp(-u*c*e),n=c*Math.sqrt(1-u*u);return r-t*((s+u*c*l)/n*Math.sin(n*e)+l*Math.cos(n*e))},this.resolveVelocity=function(e){var t=Math.exp(-u*c*e),n=c*Math.sqrt(1-u*u);return u*c*t*(Math.sin(n*e)*(s+u*c*l)/n+l*Math.cos(n*e))-t*(Math.cos(n*e)*(s+u*c*l)-n*l*Math.sin(n*e))};else if(1===u)this.resolveSpring=function(e){return r-Math.exp(-c*e)*(l+(s+c*l)*e)},this.resolveVelocity=function(){return 0};else{var f=c*Math.sqrt(u*u-1);this.resolveSpring=function(e){return r-Math.exp(-u*c*e)*((s+u*c*l)*Math.sinh(f*e)+f*l*Math.cosh(f*e))/f},this.resolveVelocity=function(){return 0}}},e.prototype.update=function(e){var t=this.options,n=t.restSpeed,r=t.restDelta,i=t.to,a=this.resolveSpring(e),o=Math.abs(1e3*this.resolveVelocity(e))<=n,s=Math.abs(i-a)<=r;return this.isComplete=o&&s,this.isComplete?i:a},e.prototype.updateOptions=function(e){var t=e.from,n=void 0===t?0:t,r=e.to,i=void 0===r?0:r,a=e.velocity,o=e.stiffness,s=e.damping,l=e.mass,u=e.restSpeed,c=e.restDelta;void 0===c&&(c=1>=Math.abs(i-n)?.01:.4),this.options={from:n,to:i,velocity:void 0===a?0:a,stiffness:void 0===o?100:o,damping:void 0===s?10:s,mass:void 0===l?1:l,restSpeed:void 0===u?2:u,restDelta:c}},e.prototype.flipTarget=function(){var e=this.options,t=e.from,n=e.to,r=e.velocity;this.options.velocity=-r,this.options.from=n,this.options.to=t,this.createSpring()},e.needsInterpolation=function(e,t){return"string"==typeof e||"string"==typeof t},e.uniqueOptionKeys=/*#__PURE__*/new Set(["velocity","stiffness","damping","mass","restSpeed","restDelta"]),e}(),l=function(e,t,n){var r=t-e;return 0===r?1:(n-e)/r},u=function(e,t,n){return-n*e+n*t+e},c=function(e,t,n){var r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},f=[i.hex,i.rgba,i.hsla],h=function(e){return f.find(function(t){return t.test(e)})},d=function(e){return"'"+e+"' is not an animatable color. Use the equivalent color code instead."},m=function(e,t){var n=h(e),o=h(t);(0,a.invariant)(!!n,d(e)),(0,a.invariant)(!!o,d(t)),(0,a.invariant)(n.transform===o.transform,"Both colors must be hex/RGBA, OR both must be HSLA.");var s=n.parse(e),l=o.parse(t),f=(0,r.__assign)({},s),p=n===i.hsla?u:c;return function(e){for(var t in f)"alpha"!==t&&(f[t]=p(s[t],l[t],e));return f.alpha=u(s.alpha,l.alpha,e),n.transform(f)}},g={x:0,y:0,z:0},v=function(e){return"number"==typeof e},y=function(e,t){return function(n){return t(e(n))}},_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce(y)};function x(e,t){return v(e)?function(n){return u(e,t,n)}:(0,i.color).test(e)?m(e,t):w(e,t)}var b=function(e,t){var n=(0,r.__spreadArrays)(e),i=n.length,a=e.map(function(e,n){return x(e,t[n])});return function(e){for(var t=0;t<i;t++)n[t]=a[t](e);return n}},S=function(e,t){var n=(0,r.__assign)((0,r.__assign)({},e),t),i={};for(var a in n)void 0!==e[a]&&void 0!==t[a]&&(i[a]=x(e[a],t[a]));return function(e){for(var t in i)n[t]=i[t](e);return n}};function E(e){for(var t=(0,i.complex).parse(e),n=t.length,r=0,a=0,o=0,s=0;s<n;s++)r||"number"==typeof t[s]?r++:void 0!==t[s].hue?o++:a++;return{parsed:t,numNumbers:r,numRGB:a,numHSL:o}}var w=function(e,t){var n=(0,i.complex).createTransformer(t),r=E(e),o=E(t);return(0,a.invariant)(r.numHSL===o.numHSL&&r.numRGB===o.numRGB&&r.numNumbers>=o.numNumbers,"Complex values '"+e+"' and '"+t+"' too different to mix. Ensure all colors are of the same type."),_(b(r.parsed,o.parsed),n)},M=function(e,t,n){return Math.min(Math.max(n,e),t)},T=function(e,t){return function(n){return u(e,t,n)}};function A(e,t,n){var r,o,s,u,c,f,h,d=void 0===n?{}:n,p=d.clamp,g=d.ease,v=d.mixer,y=e.length;(0,a.invariant)(y===t.length,"Both input and output ranges must be the same length"),(0,a.invariant)(!g||!Array.isArray(g)||g.length===y-1,"Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values."),e[0]>e[y-1]&&(e=[].concat(e),t=[].concat(t),e.reverse(),t.reverse());var x=function(e,t,n){for(var r,a=[],o=n||("number"==typeof(r=e[0])?T:"string"==typeof r?(0,i.color).test(r)?m:w:Array.isArray(r)?b:"object"==typeof r?S:void 0),s=e.length-1,l=0;l<s;l++){var u=o(e[l],e[l+1]);t&&(u=_(Array.isArray(t)?t[l]:t,u)),a.push(u)}return a}(t,g,v),E=2===y?(o=(r=e)[0],s=r[1],u=x[0],function(e){return u(l(o,s,e))}):(h=(f=(c=e).length)-1,function(e){var t=0,n=!1;if(e<=c[0]?n=!0:e>=c[h]&&(t=h-1,n=!0),!n){for(var r=1;r<f&&!(c[r]>e)&&r!==h;r++);t=r-1}var i=l(c[t],c[t+1],e);return x[t](i)});return void 0===p||p?function(t){return E(M(e[0],e[y-1],t))}:E}var C=function(e){return function(t){return 1-e(1-t)}},P=function(e){return function(t){return t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2}},R=function(e){return function(t){return Math.pow(t,e)}},L=function(e){return function(t){return t*t*((e+1)*t-e)}},O=function(e){var t=L(e);return function(e){return(e*=2)<1?.5*t(e):.5*(2-Math.pow(2,-10*(e-1)))}},I=4/11,U=8/11,N=function(e){return e},D=/*#__PURE__*/R(2),k=/*#__PURE__*/C(D),F=/*#__PURE__*/P(D),z=function(e){return 1-Math.sin(Math.acos(e))},B=/*#__PURE__*/C(z),V=/*#__PURE__*/P(B),H=/*#__PURE__*/L(1.525),G=/*#__PURE__*/C(H),W=/*#__PURE__*/P(H),j=/*#__PURE__*/O(1.525),X=4356/361,q=35442/1805,Y=16061/1805,$=function(e){if(1===e||0===e)return e;var t=e*e;return e<I?7.5625*t:e<U?9.075*t-9.9*e+3.4:e<.9?X*t-q*e+Y:10.8*e*e-20.52*e+10.72},K=/*#__PURE__*/C($),Z=function(e){return e<.5?.5*(1-$(1-2*e)):.5*$(2*e-1)+.5},J=/*#__PURE__*/function(){function e(e){this.isComplete=!1,this.updateOptions(e);var t=this.options,n=t.from,r=t.to;this.values=Array.isArray(r)?r:[n,r],this.createInterpolator()}return e.prototype.createInterpolator=function(){var e,t,n,r,i=this.options,a=i.duration,o=i.ease,s=i.offset;o=Array.isArray(o)?o:(e=this.values,t=o,e.map(function(){return t||F}).splice(0,e.length-1));var l=(s=s||(r=(n=this.values).length,n.map(function(e,t){return 0!==t?t/(r-1):0}))).map(function(e){return e*a});this.interpolator=A(l,this.values,{ease:o})},e.prototype.update=function(e){var t=this.options.duration;return this.isComplete=e>=t,this.interpolator(e)},e.prototype.updateOptions=function(e){var t=e.from,n=e.to,r=e.ease,i=e.offset,a=e.duration;this.options={from:void 0===t?0:t,to:void 0===n?1:n,ease:r,offset:i,duration:void 0===a?300:a}},e.prototype.flipTarget=function(){this.values.reverse(),this.createInterpolator()},e.needsInterpolation=function(){return!1},e.uniqueOptionKeys=/*#__PURE__*/new Set(["duration","ease"]),e}(),Q=/*#__PURE__*/function(){function e(e){this.isComplete=!1,this.updateOptions(e);var t=this.options,n=t.power,r=t.velocity,i=t.modifyTarget,a=t.from,o=n*r,s=a+o,l=void 0===i?s:i(s);l!==s&&(o=l-a),this.target=l,this.amplitude=o}return e.prototype.flipTarget=function(){},e.prototype.update=function(e){var t=this.options,n=t.timeConstant,r=t.restDelta,i=-this.amplitude*Math.exp(-e/n);return this.isComplete=!(i>r||i<-r),this.isComplete?this.target:this.target+i},e.prototype.updateOptions=function(e){var t=void 0===e?{}:e,n=t.velocity,r=t.from,i=t.power,a=t.timeConstant,o=t.restDelta,s=t.modifyTarget;this.options={velocity:void 0===n?0:n,from:void 0===r?0:r,power:void 0===i?.8:i,timeConstant:void 0===a?350:a,restDelta:void 0===o?.5:o,modifyTarget:s}},e.needsInterpolation=function(){return!1},e.uniqueOptionKeys=/*#__PURE__*/new Set(["power","timeConstant","modifyTarget"]),e}(),ee=[J,Q,s],et={keyframes:J,spring:s,decay:Q},en=ee.length;function er(e,t,n){return void 0===n&&(n=0),e-t-n}var ei=function(e){var t=function(t){return e(t.delta)};return{start:function(){return(0,o.default).update(t,!0,!0)},stop:function(){return(0,o.cancelSync).update(t)}}};function ea(e){var t,n,i,a=e.from,o=e.autoplay,s=e.driver,l=void 0===s?ei:s,u=e.elapsed,c=void 0===u?0:u,f=e.repeat,h=void 0===f?0:f,d=e.repeatType,p=void 0===d?"loop":d,m=e.repeatDelay,g=void 0===m?0:m,v=e.onPlay,y=e.onStop,_=e.onComplete,x=e.onRepeat,b=e.onUpdate,S=(0,r.__rest)(e,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]),E=S.to,w=0,M=S.duration,T=!1,C=!0,P=function(e){if(Array.isArray(e.to))return J;if(et[e.type])return et[e.type];for(var t in e)for(var n=0;n<en;n++){var r=ee[n];if(r.uniqueOptionKeys.has(t))return r}return J}(S);P.needsInterpolation(a,E)&&(i=A([0,100],[a,E],{clamp:!1}),a=0,E=100);var R=new P((0,r.__assign)((0,r.__assign)({},S),{from:a,to:E}));function L(e){if(C||(e=-e),c+=e,T||(n=R.update(Math.max(0,c)),i&&(n=i(n)),T=C?R.isComplete:c<=0),null==b||b(n),T){if(0===w&&void 0===M&&(M=c),w<h){var r,a;r=c,a=M,(C?r>=a+g:r<=-g)&&function(){if(w++,"reverse"===p){var e,t,n,r;C=w%2==0,e=c,t=M,void 0===(n=g)&&(n=0),void 0===(r=C)&&(r=!0),c=r?er(t+-e,t,n):t-(e-t)+n}else c=er(c,M,g),"mirror"===p&&R.flipTarget();T=!1,R.isComplete=!1,x&&x()}()}else t.stop(),_&&_()}}function O(){null==v||v(),(t=l(L)).start()}return(void 0===o||o)&&O(),{play:O,pause:function(){},resume:function(){},reverse:function(){},seek:function(){},stop:function(){null==y||y(),t.stop()}}}function eo(e,t){return t?e*(1e3/t):0}function es(e){var t=e.from,n=void 0===t?0:t,i=e.velocity,a=void 0===i?0:i,s=e.min,l=e.max,u=e.power,c=void 0===u?.8:u,f=e.timeConstant,h=e.bounceStiffness,d=void 0===h?500:h,p=e.bounceDamping,m=void 0===p?10:p,g=e.restDelta,v=void 0===g?1:g,y=e.modifyTarget,_=e.driver,x=e.onUpdate,b=e.onComplete;function S(e){return void 0!==s&&e<s||void 0!==l&&e>l}function E(e){return void 0===s?l:void 0===l?s:Math.abs(s-e)<Math.abs(l-e)?s:l}function w(e){null==T||T.stop(),T=ea((0,r.__assign)((0,r.__assign)({},e),{driver:_,onUpdate:function(t){var n;null==x||x(t),null===(n=e.onUpdate)||void 0===n||n.call(e,t)},onComplete:b}))}function M(e){w((0,r.__assign)({type:"spring",stiffness:d,damping:m,restDelta:v},e))}if(S(n))M({from:n,velocity:a,to:E(n)});else{var T,A,C=c*a+n;void 0!==y&&(C=y(C));var P=E(C),R=P===s?-1:1;w({type:"decay",from:n,velocity:a,timeConstant:void 0===f?750:f,power:c,restDelta:v,modifyTarget:y,onUpdate:S(C)?function(e){a=eo(e-A,(0,o.getFrameData)().delta),A=e,P-e*R>0||M({from:A,to:P,velocity:a})}:void 0})}return{stop:function(){return null==T?void 0:T.stop()}}}var el=function(e){return 180*e/Math.PI},eu=function(e,t){return void 0===t&&(t=g),el(Math.atan2(t.y-e.y,t.x-e.x))},ec=function(e,t){var n=!0;return void 0===t&&(t=e,n=!1),function(r){return n?r-e+t:(e=r,n=!0,t)}},ef=function(e){return e},eh=function(e){return void 0===e&&(e=ef),function(t,n,r){var i=n-r,a=-(0-t+1)*(0-e(Math.abs(i)));return i<=0?n+a:n-a}},ed=/*#__PURE__*/eh(),ep=/*#__PURE__*/eh(Math.sqrt),em=function(e){return e*Math.PI/180},eg=function(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")},ev=function(e){return eg(e)&&e.hasOwnProperty("z")},ey=function(e,t){return Math.abs(e-t)};function e_(e,t){return v(e)&&v(t)?ey(e,t):eg(e)&&eg(t)?Math.sqrt(Math.pow(ey(e.x,t.x),2)+Math.pow(ey(e.y,t.y),2)+Math.pow(ev(e)&&ev(t)?ey(e.z,t.z):0,2)):void 0}var ex=function(e,t,n){return{x:n*Math.cos(t=em(t))+e.x,y:n*Math.sin(t)+e.y}},eb=function(e,t){return void 0===t&&(t=2),Math.round(e*(t=Math.pow(10,t)))/t},eS=function(e,t,n,r){return void 0===r&&(r=0),eb(e+n*(t-e)/Math.max(r,n))},eE=function(e){void 0===e&&(e=50);var t=0,n=0;return function(r){var i=(0,o.getFrameData)().timestamp,a=i!==n?i-n:0,s=a?eS(t,r,a,e):t;return n=i,t=s,s}},ew=function(e){if("number"==typeof e)return function(t){return Math.round(t/e)*e};var t=0,n=e.length;return function(r){var i=Math.abs(e[0]-r);for(t=1;t<n;t++){var a=e[t],o=Math.abs(a-r);if(0===o)return a;if(o>i)return e[t-1];if(t===n-1)return a;i=o}}};function eM(e,t){return e/(1e3/t)}var eT=function(e,t,n){var r=t-e;return((n-e)%r+r)%r+e},eA=function(e,t){return 1-3*t+3*e},eC=function(e,t){return 3*t-6*e},eP=function(e){return 3*e},eR=function(e,t,n){return((eA(t,n)*e+eC(t,n))*e+eP(t))*e},eL=function(e,t,n){return 3*eA(t,n)*e*e+2*eC(t,n)*e+eP(t)};function eO(e,t,n,r){if(e===t&&n===r)return N;for(var i=new Float32Array(11),a=0;a<11;++a)i[a]=eR(.1*a,e,n);return function(a){return 0===a||1===a?a:eR(function(t){for(var r=0,a=1;10!==a&&i[a]<=t;++a)r+=.1;var o=r+(t-i[--a])/(i[a+1]-i[a])*.1,s=eL(o,e,n);return s>=.001?function(e,t,n,r){for(var i=0;i<8;++i){var a=eL(t,n,r);if(0===a)break;var o=eR(t,n,r)-e;t-=o/a}return t}(t,o,e,n):0===s?o:function(e,t,n,r,i){var a,o,s=0;do(a=eR(o=t+(n-t)/2,r,i)-e)>0?n=o:t=o;while(Math.abs(a)>1e-7&&++s<10)return o}(t,r,r+.1,e,n)}(a),t,r)}}var eI=function(e,t){return void 0===t&&(t="end"),function(n){var r=(n="end"===t?Math.min(n,.999):Math.max(n,.001))*e;return M(0,1,("end"===t?Math.floor(r):Math.ceil(r))/e)}}}),m("9L2TJ",function(e,n){t(e.exports,"number",()=>u),t(e.exports,"alpha",()=>c),t(e.exports,"scale",()=>f),t(e.exports,"degrees",()=>d),t(e.exports,"percent",()=>m),t(e.exports,"px",()=>g),t(e.exports,"vh",()=>v),t(e.exports,"vw",()=>y),t(e.exports,"progressPercentage",()=>_),t(e.exports,"rgba",()=>C),t(e.exports,"hsla",()=>P),t(e.exports,"hex",()=>R),t(e.exports,"color",()=>L),t(e.exports,"complex",()=>N);var r=p("7WQrb"),i=function(e,t){return function(n){return Math.max(Math.min(n,t),e)}},a=function(e){return e%1?Number(e.toFixed(5)):e},o=/(-)?(\d[\d\.]*)/g,s=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi,l=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i,u={test:function(e){return"number"==typeof e},parse:parseFloat,transform:function(e){return e}},c=(0,r.__assign)((0,r.__assign)({},u),{transform:i(0,1)}),f=(0,r.__assign)((0,r.__assign)({},u),{default:1}),h=function(e){return{test:function(t){return"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length},parse:parseFloat,transform:function(t){return""+t+e}}},d=h("deg"),m=h("%"),g=h("px"),v=h("vh"),y=h("vw"),_=(0,r.__assign)((0,r.__assign)({},m),{parse:function(e){return m.parse(e)/100},transform:function(e){return m.transform(100*e)}}),x=i(0,255),b=function(e){return void 0!==e.red},S=function(e){return void 0!==e.hue},E=function(e){return function(t){if("string"!=typeof t)return t;for(var n={},r=t.substring(t.indexOf("(")+1,t.lastIndexOf(")")).replace(/(,|\/)/g," ").split(/ \s*/),i=0;i<4;i++)n[e[i]]=void 0!==r[i]?parseFloat(r[i]):1;return n}},w=function(e){var t=e.red,n=e.green,r=e.blue,i=e.alpha;return"rgba("+t+", "+n+", "+r+", "+(void 0===i?1:i)+")"},M=function(e){var t=e.hue,n=e.saturation,r=e.lightness,i=e.alpha;return"hsla("+t+", "+n+", "+r+", "+(void 0===i?1:i)+")"},T=(0,r.__assign)((0,r.__assign)({},u),{transform:function(e){return Math.round(x(e))}});function A(e,t){return e.startsWith(t)&&l.test(e)}var C={test:function(e){return"string"==typeof e?A(e,"rgb"):b(e)},parse:E(["red","green","blue","alpha"]),transform:function(e){var t=e.red,n=e.green,r=e.blue,i=e.alpha,o=void 0===i?1:i;return w({red:T.transform(t),green:T.transform(n),blue:T.transform(r),alpha:a(c.transform(o))})}},P={test:function(e){return"string"==typeof e?A(e,"hsl"):S(e)},parse:E(["hue","saturation","lightness","alpha"]),transform:function(e){var t=e.hue,n=e.saturation,r=e.lightness,i=e.alpha,o=void 0===i?1:i;return M({hue:Math.round(t),saturation:m.transform(a(n)),lightness:m.transform(a(r)),alpha:a(c.transform(o))})}},R=(0,r.__assign)((0,r.__assign)({},C),{test:function(e){return"string"==typeof e&&A(e,"#")},parse:function(e){var t="",n="",r="";return e.length>4?(t=e.substr(1,2),n=e.substr(3,2),r=e.substr(5,2)):(t=e.substr(1,1),n=e.substr(2,1),r=e.substr(3,1),t+=t,n+=n,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:1}}}),L={test:function(e){return"string"==typeof e&&l.test(e)||b(e)||S(e)},parse:function(e){return C.test(e)?C.parse(e):P.test(e)?P.parse(e):R.test(e)?R.parse(e):e},transform:function(e){return b(e)?C.transform(e):S(e)?P.transform(e):e}},O="${c}",I="${n}",U=function(e){return"number"==typeof e?0:e},N={test:function(e){if("string"!=typeof e||!isNaN(e))return!1;var t=0,n=e.match(o),r=e.match(s);return n&&(t+=n.length),r&&(t+=r.length),t>0},parse:function(e){var t=e,n=[],r=t.match(s);r&&(t=t.replace(s,O),n.push.apply(n,r.map(L.parse)));var i=t.match(o);return i&&n.push.apply(n,i.map(u.parse)),n},createTransformer:function(e){var t=e,n=0,r=e.match(s),i=r?r.length:0;if(r)for(var l=0;l<i;l++)t=t.replace(r[l],O),n++;var u=t.match(o),c=u?u.length:0;if(u)for(var l=0;l<c;l++)t=t.replace(u[l],I),n++;return function(e){for(var r=t,o=0;o<n;o++)r=r.replace(o<i?O:I,o<i?L.transform(e[o]):a(e[o]));return r}},getAnimatableNone:function(e){var t=N.parse(e);return N.createTransformer(e)(t.map(U))}}}),m("7dGEo",function(e,n){t(e.exports,"default",()=>a);var r=p("l7O8P"),i=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,a=(0,r.default)(function(e){return i.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&91>e.charCodeAt(2)})}),m("l7O8P",function(e,n){t(e.exports,"default",()=>r);var r=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}}),m("9cCWX",function(e,n){t(e.exports,"ContextConsumer",()=>r,e=>r=e),t(e.exports,"ContextProvider",()=>i,e=>i=e),t(e.exports,"Element",()=>a,e=>a=e),t(e.exports,"ForwardRef",()=>o,e=>o=e),t(e.exports,"Fragment",()=>s,e=>s=e),t(e.exports,"Lazy",()=>l,e=>l=e),t(e.exports,"Memo",()=>u,e=>u=e),t(e.exports,"Portal",()=>c,e=>c=e),t(e.exports,"Profiler",()=>f,e=>f=e),t(e.exports,"StrictMode",()=>h,e=>h=e),t(e.exports,"Suspense",()=>d,e=>d=e),t(e.exports,"SuspenseList",()=>p,e=>p=e),t(e.exports,"isAsyncMode",()=>m,e=>m=e),t(e.exports,"isConcurrentMode",()=>g,e=>g=e),t(e.exports,"isContextConsumer",()=>v,e=>v=e),t(e.exports,"isContextProvider",()=>y,e=>y=e),t(e.exports,"isElement",()=>_,e=>_=e),t(e.exports,"isForwardRef",()=>x,e=>x=e),t(e.exports,"isFragment",()=>b,e=>b=e),t(e.exports,"isLazy",()=>S,e=>S=e),t(e.exports,"isMemo",()=>E,e=>E=e),t(e.exports,"isPortal",()=>w,e=>w=e),t(e.exports,"isProfiler",()=>M,e=>M=e),t(e.exports,"isStrictMode",()=>T,e=>T=e),t(e.exports,"isSuspense",()=>A,e=>A=e),t(e.exports,"isSuspenseList",()=>C,e=>C=e),t(e.exports,"isValidElementType",()=>P,e=>P=e),t(e.exports,"typeOf",()=>R,e=>R=e);var r,i,a,o,s,l,u,c,f,h,d,p,m,g,v,y,_,x,b,S,E,w,M,T,A,C,P,R,L,O=Symbol.for("react.element"),I=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),F=Symbol.for("react.context"),z=Symbol.for("react.server_context"),B=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),j=Symbol.for("react.offscreen");function X(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case O:switch(e=e.type){case U:case D:case N:case V:case H:return e;default:switch(e=e&&e.$$typeof){case z:case F:case B:case W:case G:case k:return e;default:return t}}case I:return t}}}L=Symbol.for("react.module.reference"),r=F,i=k,a=O,o=B,s=U,l=W,u=G,c=I,f=D,h=N,d=V,p=H,m=function(){return!1},g=function(){return!1},v=function(e){return X(e)===F},y=function(e){return X(e)===k},_=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===O},x=function(e){return X(e)===B},b=function(e){return X(e)===U},S=function(e){return X(e)===W},E=function(e){return X(e)===G},w=function(e){return X(e)===I},M=function(e){return X(e)===D},T=function(e){return X(e)===N},A=function(e){return X(e)===V},C=function(e){return X(e)===H},P=function(e){return"string"==typeof e||"function"==typeof e||e===U||e===D||e===N||e===V||e===H||e===j||"object"==typeof e&&null!==e&&(e.$$typeof===W||e.$$typeof===G||e.$$typeof===k||e.$$typeof===F||e.$$typeof===B||e.$$typeof===L||void 0!==e.getModuleId)},R=X}),m("dNL7g",function(e,n){t(e.exports,"AsyncMode",()=>r,e=>r=e),t(e.exports,"ConcurrentMode",()=>i,e=>i=e),t(e.exports,"ContextConsumer",()=>a,e=>a=e),t(e.exports,"ContextProvider",()=>o,e=>o=e),t(e.exports,"Element",()=>s,e=>s=e),t(e.exports,"ForwardRef",()=>l,e=>l=e),t(e.exports,"Fragment",()=>u,e=>u=e),t(e.exports,"Lazy",()=>c,e=>c=e),t(e.exports,"Memo",()=>f,e=>f=e),t(e.exports,"Portal",()=>h,e=>h=e),t(e.exports,"Profiler",()=>d,e=>d=e),t(e.exports,"StrictMode",()=>p,e=>p=e),t(e.exports,"Suspense",()=>m,e=>m=e),t(e.exports,"isAsyncMode",()=>g,e=>g=e),t(e.exports,"isConcurrentMode",()=>v,e=>v=e),t(e.exports,"isContextConsumer",()=>y,e=>y=e),t(e.exports,"isContextProvider",()=>_,e=>_=e),t(e.exports,"isElement",()=>x,e=>x=e),t(e.exports,"isForwardRef",()=>b,e=>b=e),t(e.exports,"isFragment",()=>S,e=>S=e),t(e.exports,"isLazy",()=>E,e=>E=e),t(e.exports,"isMemo",()=>w,e=>w=e),t(e.exports,"isPortal",()=>M,e=>M=e),t(e.exports,"isProfiler",()=>T,e=>T=e),t(e.exports,"isStrictMode",()=>A,e=>A=e),t(e.exports,"isSuspense",()=>C,e=>C=e),t(e.exports,"isValidElementType",()=>P,e=>P=e),t(e.exports,"typeOf",()=>R,e=>R=e);var r,i,a,o,s,l,u,c,f,h,d,p,m,g,v,y,_,x,b,S,E,w,M,T,A,C,P,R,L="function"==typeof Symbol&&Symbol.for,O=L?Symbol.for("react.element"):60103,I=L?Symbol.for("react.portal"):60106,U=L?Symbol.for("react.fragment"):60107,N=L?Symbol.for("react.strict_mode"):60108,D=L?Symbol.for("react.profiler"):60114,k=L?Symbol.for("react.provider"):60109,F=L?Symbol.for("react.context"):60110,z=L?Symbol.for("react.async_mode"):60111,B=L?Symbol.for("react.concurrent_mode"):60111,V=L?Symbol.for("react.forward_ref"):60112,H=L?Symbol.for("react.suspense"):60113,G=L?Symbol.for("react.suspense_list"):60120,W=L?Symbol.for("react.memo"):60115,j=L?Symbol.for("react.lazy"):60116,X=L?Symbol.for("react.block"):60121,q=L?Symbol.for("react.fundamental"):60117,Y=L?Symbol.for("react.responder"):60118,$=L?Symbol.for("react.scope"):60119;function K(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case O:switch(e=e.type){case z:case B:case U:case D:case N:case H:return e;default:switch(e=e&&e.$$typeof){case F:case V:case j:case W:case k:return e;default:return t}}case I:return t}}}function Z(e){return K(e)===B}r=z,i=B,a=F,o=k,s=O,l=V,u=U,c=j,f=W,h=I,d=D,p=N,m=H,g=function(e){return Z(e)||K(e)===z},v=Z,y=function(e){return K(e)===F},_=function(e){return K(e)===k},x=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===O},b=function(e){return K(e)===V},S=function(e){return K(e)===U},E=function(e){return K(e)===j},w=function(e){return K(e)===W},M=function(e){return K(e)===I},T=function(e){return K(e)===D},A=function(e){return K(e)===N},C=function(e){return K(e)===H},P=function(e){return"string"==typeof e||"function"==typeof e||e===U||e===B||e===D||e===N||e===H||e===G||"object"==typeof e&&null!==e&&(e.$$typeof===j||e.$$typeof===W||e.$$typeof===k||e.$$typeof===F||e.$$typeof===V||e.$$typeof===q||e.$$typeof===Y||e.$$typeof===$||e.$$typeof===X)},R=K});var g={};// Gets all non-builtin properties up the prototype chain
const v=e=>{let t=new Set;do for(let n of Reflect.ownKeys(e))t.add([e,n]);while((e=Reflect.getPrototypeOf(e))&&e!==Object.prototype)return t};g=(e,{include:t,exclude:n}={})=>{let r=e=>{let r=t=>"string"==typeof t?e===t:t.test(e);return t?t.some(r):!n||!n.some(r)};for(let[t,n]of v(e.constructor.prototype)){if("constructor"===n||!r(n))continue;let i=Reflect.getOwnPropertyDescriptor(t,n);i&&"function"==typeof i.value&&(e[n]=e[n].bind(e))}return e};var y=p("acw62"),_={};!// DCE check should happen before ReactDOM bundle executes so that
// DevTools can report bad minification during injection.
function e(){/* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{// Verify that the code above has been dead code eliminated (DCE'd).
__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){// DevTools shouldn't crash React, no matter what.
// We should still report in case we break this code.
console.error(e)}}(),_=p("Xw6Mv");var x={};(n=function(){function e(e){return i.appendChild(e.dom),e}function t(e){for(var t=0;t<i.children.length;t++)i.children[t].style.display=t===e?"block":"none";r=e}var r=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",function(e){e.preventDefault(),t(++r%i.children.length)},!1);var a=(performance||Date).now(),o=a,s=0,l=e(new n.Panel("FPS","#0ff","#002")),u=e(new n.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=e(new n.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:i,addPanel:e,showPanel:t,begin:function(){a=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(u.update(e-a,200),e>o+1e3&&(l.update(1e3*s/(e-o),100),o=e,s=0,c)){var t=performance.memory;c.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){a=this.end()},domElement:i,setMode:t}}).Panel=function(e,t,n){var r=1/0,i=0,a=Math.round,o=a(window.devicePixelRatio||1),s=80*o,l=48*o,u=3*o,c=2*o,f=3*o,h=15*o,d=74*o,p=30*o,m=document.createElement("canvas");m.width=s,m.height=l,m.style.cssText="width:80px;height:48px";var g=m.getContext("2d");return g.font="bold "+9*o+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=n,g.fillRect(0,0,s,l),g.fillStyle=t,g.fillText(e,u,c),g.fillRect(f,h,d,p),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(f,h,d,p),{dom:m,update:function(l,v){r=Math.min(r,l),i=Math.max(i,l),g.fillStyle=n,g.globalAlpha=1,g.fillRect(0,0,s,h),g.fillStyle=t,g.fillText(a(l)+" "+e+" ("+a(r)+"-"+a(i)+")",u,c),g.drawImage(m,f+o,h,d-o,p,f,h,d-o,p),g.fillRect(f+d-o,h,o,p),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(f+d-o,h,o,a((1-l/v)*p))}}},x=n;const b="srgb",S="srgb-linear",E="display-p3",w="300 es";/**
 * https://github.com/mrdoob/eventdispatcher.js/
 */class M{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});let n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;let n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;let n=this._listeners,r=n[e];if(void 0!==r){let e=r.indexOf(t);-1!==e&&r.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;let t=this._listeners,n=t[e.type];if(void 0!==n){e.target=this;// Make a copy, in case listeners are removed while iterating.
let t=n.slice(0);for(let n=0,r=t.length;n<r;n++)t[n].call(this,e);e.target=null}}}const T=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],A=Math.PI/180,C=180/Math.PI;// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136
function P(){let e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=T[255&e]+T[e>>8&255]+T[e>>16&255]+T[e>>24&255]+"-"+T[255&t]+T[t>>8&255]+"-"+T[t>>16&15|64]+T[t>>24&255]+"-"+T[63&n|128]+T[n>>8&255]+"-"+T[n>>16&255]+T[n>>24&255]+T[255&r]+T[r>>8&255]+T[r>>16&255]+T[r>>24&255];// .toLowerCase() here flattens concatenated strings to save heap memory space.
return i.toLowerCase()}function R(e,t,n){return Math.max(t,Math.min(n,e))}function L(e){return(e&e-1)==0&&0!==e}function O(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function I(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw Error("Invalid component type.")}}function U(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw Error("Invalid component type.")}}class N{constructor(e=0,t=0){N.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return(// assumes min < max, componentwise
this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this)}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){// computes the angle in radians with respect to the positive x-axis
let e=Math.atan2(-this.y,-this.x)+Math.PI;return e}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;let n=this.dot(e)/t;// clamp, to handle numerical problems
return Math.acos(R(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class D{constructor(e,t,n,r,i,a,o,s,l){D.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,a,o,s,l)}set(e,t,n,r,i,a,o,s,l){let u=this.elements;return u[0]=e,u[1]=r,u[2]=o,u[3]=t,u[4]=i,u[5]=s,u[6]=n,u[7]=a,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],u=n[4],c=n[7],f=n[2],h=n[5],d=n[8],p=r[0],m=r[3],g=r[6],v=r[1],y=r[4],_=r[7],x=r[2],b=r[5],S=r[8];return i[0]=a*p+o*v+s*x,i[3]=a*m+o*y+s*b,i[6]=a*g+o*_+s*S,i[1]=l*p+u*v+c*x,i[4]=l*m+u*y+c*b,i[7]=l*g+u*_+c*S,i[2]=f*p+h*v+d*x,i[5]=f*m+h*y+d*b,i[8]=f*g+h*_+d*S,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*a*u-t*o*l-n*i*u+n*o*s+r*i*l-r*a*s}invert(){let e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=u*a-o*l,f=o*s-u*i,h=l*i-a*s,d=t*c+n*f+r*h;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);let p=1/d;return e[0]=c*p,e[1]=(r*l-u*n)*p,e[2]=(o*n-r*a)*p,e[3]=f*p,e[4]=(u*t-r*s)*p,e[5]=(r*i-o*t)*p,e[6]=h*p,e[7]=(n*s-l*t)*p,e[8]=(a*t-n*i)*p,this}transpose(){let e;let t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,a,o){let s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*a+l*o)+a+e,-r*l,r*s,-r*(-l*a+s*o)+o+t,0,0,1),this}//
scale(e,t){return this.premultiply(k.makeScale(e,t)),this}rotate(e){return this.premultiply(k.makeRotation(-e)),this}translate(e,t){return this.premultiply(k.makeTranslation(e,t)),this}// for 2D Transforms
makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){// counterclockwise
let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}//
equals(e){let t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const k=/*@__PURE__*/new D;function F(e){// assumes larger values usually on last
for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;// account for PRIMITIVE_RESTART_FIXED_INDEX, #24565
return!1}function z(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const B={};function V(e){e in B||(B[e]=!0,console.warn(e))}function H(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function G(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}/**
 * Matrices converting P3 <-> Rec. 709 primaries, without gamut mapping
 * or clipping. Based on W3C specifications for sRGB and Display P3,
 * and ICC specifications for the D50 connection space. Values in/out
 * are _linear_ sRGB and _linear_ Display P3.
 *
 * Note that both sRGB and Display P3 use the sRGB transfer functions.
 *
 * Reference:
 * - http://www.russellcottrell.com/photo/matrixCalculator.htm
 */const W=/*@__PURE__*/new D().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-.0000001,1e-7,.9105199]),j=/*@__PURE__*/new D().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),X={[S]:e=>e,[b]:e=>e.convertSRGBToLinear(),[E]:function(e){// Display P3 uses the sRGB transfer functions
return e.convertSRGBToLinear().applyMatrix3(j)}},q={[S]:e=>e,[b]:e=>e.convertLinearToSRGB(),[E]:function(e){// Display P3 uses the sRGB transfer functions
return e.applyMatrix3(W).convertLinearToSRGB()}},Y={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(legacyMode){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!legacyMode},get workingColorSpace(){return S},set workingColorSpace(colorSpace){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;let r=X[t],i=q[n];if(void 0===r||void 0===i)throw Error(`Unsupported color space conversion, "${t}" to "${n}".`);return i(r(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}};class ${static getDataURL(t){let n;if(/^data:/i.test(t.src)||"undefined"==typeof HTMLCanvasElement)return t.src;if(t instanceof HTMLCanvasElement)n=t;else{void 0===e&&(e=z("canvas")),e.width=t.width,e.height=t.height;let r=e.getContext("2d");t instanceof ImageData?r.putImageData(t,0,0):r.drawImage(t,0,0,t.width,t.height),n=e}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){let t=z("canvas");t.width=e.width,t.height=e.height;let n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);let r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*H(i[e]/255);return n.putImageData(r,0,0),t}if(!e.data)return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e;{let t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*H(t[e]/255)):t[e]=H(t[e]);return{data:t,width:e.width,height:e.height}}}}let K=0;class Z{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:K++}),this.uuid=P(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){let t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];let n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){// cube texture
e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(J(r[t].image)):e.push(J(r[t]))}else e=J(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function J(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?$.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Q=0;class ee extends M{constructor(e=ee.DEFAULT_IMAGE,t=ee.DEFAULT_MAPPING,n=1001,r=1001,i=1006,a=1008,o=1023,s=1009,l=ee.DEFAULT_ANISOTROPY,u=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Q++}),this.uuid=P(),this.name="",this.source=new Z(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=a,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=s,this.offset=new N(0,0),this.repeat=new N(1,1),this.center=new N(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new D,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof u?this.colorSpace=u:(V("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=3001===u?b:""),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];let n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case 1001:e.x=e.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case 1001:e.y=e.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return V("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===b?3001:3e3}set encoding(e){V("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=3001===e?b:""}}ee.DEFAULT_IMAGE=null,ee.DEFAULT_MAPPING=300,ee.DEFAULT_ANISOTROPY=1;class et{constructor(e=0,t=0,n=0,r=1){et.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm
// q is assumed to be normalized
this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;let a=e.elements,o=a[0],s=a[4],l=a[8],u=a[1],c=a[5],f=a[9],h=a[2],d=a[6],p=a[10];if(.01>Math.abs(s-u)&&.01>Math.abs(l-h)&&.01>Math.abs(f-d)){// singularity found
// first check for identity matrix which must have +1 for all terms
// in leading diagonal and zero in other terms
if(.1>Math.abs(s+u)&&.1>Math.abs(l+h)&&.1>Math.abs(f+d)&&.1>Math.abs(o+c+p-3))return(// this singularity is identity matrix so angle = 0
this.set(1,0,0,0),this);// zero angle, arbitrary axis
// otherwise this singularity is angle = 180
t=Math.PI;let e=(o+1)/2,a=(c+1)/2,m=(p+1)/2,g=(s+u)/4,v=(l+h)/4,y=(f+d)/4;return e>a&&e>m?e<.01?(n=0,r=.707106781,i=.707106781):(r=g/(n=Math.sqrt(e)),i=v/n):a>m?a<.01?(n=.707106781,r=0,i=.707106781):(n=g/(r=Math.sqrt(a)),i=y/r):m<.01?(n=.707106781,r=.707106781,i=0):(n=v/(i=Math.sqrt(m)),r=y/i),this.set(n,r,i,t),this;// return 180 deg rotation
}// as we have reached here there are no singularities so we can handle normally
let m=Math.sqrt((d-f)*(d-f)+(l-h)*(l-h)+(u-s)*(u-s));// used to normalize
return .001>Math.abs(m)&&(m=1),// prevent divide by zero, should not happen if matrix is orthogonal and should be
// caught by singularity test above, but I've left it in just in case
this.x=(d-f)/m,this.y=(l-h)/m,this.z=(u-s)/m,this.w=Math.acos((o+c+p-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return(// assumes min < max, componentwise
this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this)}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}/*
 In options, we can specify:
 * Texture parameters for an auto-generated target texture
 * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers
*/class en extends M{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new et(0,0,e,t),this.scissorTest=!1,this.viewport=new et(0,0,e,t),void 0!==n.encoding&&(// @deprecated, r152
V("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=3001===n.encoding?b:""),this.texture=new ee({width:e,height:t,depth:1},n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:1006,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;// ensure image object is not shared, see #20328
let t=Object.assign({},e.texture.image);return this.texture.source=new Z(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class er extends en{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class ei extends ee{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ea{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,a,o){// fuzz-free, array-based Quaternion SLERP operation
let s=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3],f=i[a+0],h=i[a+1],d=i[a+2],p=i[a+3];if(0===o){e[t+0]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c;return}if(1===o){e[t+0]=f,e[t+1]=h,e[t+2]=d,e[t+3]=p;return}if(c!==p||s!==f||l!==h||u!==d){let e=1-o,t=s*f+l*h+u*d+c*p,n=t>=0?1:-1,r=1-t*t;// Skip the Slerp for tiny steps to avoid numeric problems:
if(r>Number.EPSILON){let i=Math.sqrt(r),a=Math.atan2(i,t*n);e=Math.sin(e*a)/i,o=Math.sin(o*a)/i}let i=o*n;// Normalize in case we just did a lerp:
if(s=s*e+f*i,l=l*e+h*i,u=u*e+d*i,c=c*e+p*i,e===1-o){let e=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=e,l*=e,u*=e,c*=e}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c}static multiplyQuaternionsFlat(e,t,n,r,i,a){let o=n[r],s=n[r+1],l=n[r+2],u=n[r+3],c=i[a],f=i[a+1],h=i[a+2],d=i[a+3];return e[t]=o*d+u*c+s*h-l*f,e[t+1]=s*d+u*f+l*c-o*h,e[t+2]=l*d+u*h+o*f-s*c,e[t+3]=u*d-o*c-s*f-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){let n=e._x,r=e._y,i=e._z,a=e._order,o=Math.cos,s=Math.sin,l=o(n/2),u=o(r/2),c=o(i/2),f=s(n/2),h=s(r/2),d=s(i/2);switch(a){case"XYZ":this._x=f*u*c+l*h*d,this._y=l*h*c-f*u*d,this._z=l*u*d+f*h*c,this._w=l*u*c-f*h*d;break;case"YXZ":this._x=f*u*c+l*h*d,this._y=l*h*c-f*u*d,this._z=l*u*d-f*h*c,this._w=l*u*c+f*h*d;break;case"ZXY":this._x=f*u*c-l*h*d,this._y=l*h*c+f*u*d,this._z=l*u*d+f*h*c,this._w=l*u*c-f*h*d;break;case"ZYX":this._x=f*u*c-l*h*d,this._y=l*h*c+f*u*d,this._z=l*u*d-f*h*c,this._w=l*u*c+f*h*d;break;case"YZX":this._x=f*u*c+l*h*d,this._y=l*h*c+f*u*d,this._z=l*u*d-f*h*c,this._w=l*u*c-f*h*d;break;case"XZY":this._x=f*u*c-l*h*d,this._y=l*h*c-f*u*d,this._z=l*u*d+f*h*c,this._w=l*u*c+f*h*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm
// assumes axis is normalized
let n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm
// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)
let t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],o=t[5],s=t[9],l=t[2],u=t[6],c=t[10],f=n+o+c;if(f>0){let e=.5/Math.sqrt(f+1);this._w=.25/e,this._x=(u-s)*e,this._y=(i-l)*e,this._z=(a-r)*e}else if(n>o&&n>c){let e=2*Math.sqrt(1+n-o-c);this._w=(u-s)/e,this._x=.25*e,this._y=(r+a)/e,this._z=(i+l)/e}else if(o>c){let e=2*Math.sqrt(1+o-n-c);this._w=(i-l)/e,this._x=(r+a)/e,this._y=.25*e,this._z=(s+u)/e}else{let e=2*Math.sqrt(1+c-n-o);this._w=(a-r)/e,this._x=(i+l)/e,this._y=(s+u)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){// assumes direction vectors vFrom and vTo are normalized
let n=e.dot(t)+1;return n<Number.EPSILON?(// vFrom and vTo point in opposite directions
n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0):(this._x=0,this._y=-e.z,this._z=e.y)):(// crossVectors( vFrom, vTo ); // inlined to avoid cyclic dependency on Vector3
this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x),this._w=n,this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(R(this.dot(e),-1,1)))}rotateTowards(e,t){let n=this.angleTo(e);if(0===n)return this;let r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){// quaternion is assumed to have unit length
return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm
let n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,l=t._z,u=t._w;return this._x=n*u+a*o+r*l-i*s,this._y=r*u+a*s+i*o-n*l,this._z=i*u+a*l+n*s-r*o,this._w=a*u-n*o-r*s-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);let n=this._x,r=this._y,i=this._z,a=this._w,o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;let s=1-o*o;if(s<=Number.EPSILON){let e=1-t;return this._w=e*a+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(s),u=Math.atan2(l,o),c=Math.sin((1-t)*u)/l,f=Math.sin(t*u)/l;return this._w=a*c+this._w*f,this._x=n*c+this._x*f,this._y=r*c+this._y*f,this._z=i*c+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){// Derived from http://planning.cs.uiuc.edu/node198.html
// Note, this source uses w, x, y, z ordering,
// so we swap the order below.
let e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class eo{constructor(e=0,t=0,n=0){eo.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(el.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(el.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}applyQuaternion(e){let t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,l=s*t+a*r-o*n,u=s*n+o*t-i*r,c=s*r+i*n-a*t,f=-i*t-a*n-o*r;return(// calculate result * inverse quat
this.x=l*s+-(f*i)+-(u*o)- -(c*a),this.y=u*s+-(f*a)+-(c*i)- -(l*o),this.z=c*s+-(f*o)+-(l*a)- -(u*i),this)}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){// input: THREE.Matrix4 affine matrix
// vector interpreted as a direction
let t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return(// assumes min < max, componentwise
this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this)}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}// TODO lengthSquared?
lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}projectOnVector(e){let t=e.lengthSq();if(0===t)return this.set(0,0,0);let n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return es.copy(this).projectOnVector(e),this.sub(es)}reflect(e){// reflect incident vector off plane orthogonal to normal
// normal is assumed to have unit length
return this.sub(es.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;let n=this.dot(e)/t;// clamp, to handle numerical problems
return Math.acos(R(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){let r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){// Derived from https://mathworld.wolfram.com/SpherePointPicking.html
let e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const es=/*@__PURE__*/new eo,el=/*@__PURE__*/new ea;class eu{constructor(e=new eo(1/0,1/0,1/0),t=new eo(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(ef.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(ef.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let n=ef.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes
return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(// Computes the world-axis-aligned bounding box of an object (including its children),
// accounting for both the object's, and children's, world transforms
e.updateWorldMatrix(!1,!1),void 0!==e.boundingBox)null===e.boundingBox&&e.computeBoundingBox(),eh.copy(e.boundingBox),eh.applyMatrix4(e.matrixWorld),this.union(eh);else{let n=e.geometry;if(void 0!==n){if(t&&void 0!==n.attributes&&void 0!==n.attributes.position){let t=n.attributes.position;for(let n=0,r=t.count;n<r;n++)ef.fromBufferAttribute(t,n).applyMatrix4(e.matrixWorld),this.expandByPoint(ef)}else null===n.boundingBox&&n.computeBoundingBox(),eh.copy(n.boundingBox),eh.applyMatrix4(e.matrixWorld),this.union(eh)}}let n=e.children;for(let e=0,r=n.length;e<r;e++)this.expandByObject(n[e],t);return this}containsPoint(e){return!(e.x<this.min.x)&&!(e.x>this.max.x)&&!(e.y<this.min.y)&&!(e.y>this.max.y)&&!(e.z<this.min.z)&&!(e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){// This can potentially have a divide by zero if the box
// has a size dimension of 0.
return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){// using 6 splitting planes to rule out intersections.
return!(e.max.x<this.min.x)&&!(e.min.x>this.max.x)&&!(e.max.y<this.min.y)&&!(e.min.y>this.max.y)&&!(e.max.z<this.min.z)&&!(e.min.z>this.max.z)}intersectsSphere(e){// If that point is inside the sphere, the AABB and sphere intersect.
return(// Find the point on the AABB closest to the sphere center.
this.clampPoint(e.center,ef),ef.distanceToSquared(e.center)<=e.radius*e.radius)}intersectsPlane(e){// We compute the minimum and maximum dot product values. If those values
// are on the same side (back or front) of the plane, then there is no intersection.
let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;// compute box center and extents
this.getCenter(e_),ex.subVectors(this.max,e_),// translate triangle to aabb origin
ed.subVectors(e.a,e_),ep.subVectors(e.b,e_),em.subVectors(e.c,e_),// compute edge vectors for triangle
eg.subVectors(ep,ed),ev.subVectors(em,ep),ey.subVectors(ed,em);// test against axes that are given by cross product combinations of the edges of the triangle and the edges of the aabb
// make an axis testing of each of the 3 sides of the aabb against each of the 3 sides of the triangle = 9 axis of separation
// axis_ij = u_i x f_j (u0, u1, u2 = face normals of aabb = x,y,z axes vectors since aabb is axis aligned)
let t=[0,-eg.z,eg.y,0,-ev.z,ev.y,0,-ey.z,ey.y,eg.z,0,-eg.x,ev.z,0,-ev.x,ey.z,0,-ey.x,-eg.y,eg.x,0,-ev.y,ev.x,0,-ey.y,ey.x,0];return!!(eE(t,ed,ep,em,ex)&&eE(// test 3 face normals from the aabb
t=[1,0,0,0,1,0,0,0,1],ed,ep,em,ex))&&(// finally testing the face normal of the triangle
// use already existing triangle edge vectors here
eb.crossVectors(eg,ev),eE(t=[eb.x,eb.y,eb.z],ed,ep,em,ex))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ef).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(ef).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(// NOTE: I am using a binary pattern to specify all 2^3 combinations below
ec[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ec[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ec[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ec[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ec[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ec[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ec[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ec[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ec)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ec=[/*@__PURE__*/new eo,/*@__PURE__*/new eo,/*@__PURE__*/new eo,/*@__PURE__*/new eo,/*@__PURE__*/new eo,/*@__PURE__*/new eo,/*@__PURE__*/new eo,/*@__PURE__*/new eo],ef=/*@__PURE__*/new eo,eh=/*@__PURE__*/new eu,ed=/*@__PURE__*/new eo,ep=/*@__PURE__*/new eo,em=/*@__PURE__*/new eo,eg=/*@__PURE__*/new eo,ev=/*@__PURE__*/new eo,ey=/*@__PURE__*/new eo,e_=/*@__PURE__*/new eo,ex=/*@__PURE__*/new eo,eb=/*@__PURE__*/new eo,eS=/*@__PURE__*/new eo;function eE(e,t,n,r,i){for(let a=0,o=e.length-3;a<=o;a+=3){eS.fromArray(e,a);// project the aabb onto the separating axis
let o=i.x*Math.abs(eS.x)+i.y*Math.abs(eS.y)+i.z*Math.abs(eS.z),s=t.dot(eS),l=n.dot(eS),u=r.dot(eS);// actual test, basically see if either of the most extreme of the triangle points intersects r
if(Math.max(-Math.max(s,l,u),Math.min(s,l,u))>o)// the axis is separating and we can exit
return!1}return!0}const ew=/*@__PURE__*/new eu,eM=/*@__PURE__*/new eo,eT=/*@__PURE__*/new eo;class eA{constructor(e=new eo,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let n=this.center;void 0!==t?n.copy(t):ew.setFromPoints(e).getCenter(n);let r=0;for(let t=0,i=e.length;t<i;t++)r=Math.max(r,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?// Empty sphere produces empty bounding box
e.makeEmpty():(e.set(this.center,this.center),e.expandByScalar(this.radius)),e}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;eM.subVectors(e,this.center);let t=eM.lengthSq();if(t>this.radius*this.radius){// calculate the minimal sphere
let e=Math.sqrt(t),n=(e-this.radius)*.5;this.center.addScaledVector(eM,n/e),this.radius+=n}return this}union(e){return e.isEmpty()||(this.isEmpty()?this.copy(e):!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(eT.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(eM.copy(e.center).add(eT)),this.expandByPoint(eM.copy(e.center).sub(eT)))),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const eC=/*@__PURE__*/new eo,eP=/*@__PURE__*/new eo,eR=/*@__PURE__*/new eo,eL=/*@__PURE__*/new eo,eO=/*@__PURE__*/new eo,eI=/*@__PURE__*/new eo,eU=/*@__PURE__*/new eo;class eN{constructor(e=new eo,t=new eo(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,eC)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=eC.subVectors(e,this.origin).dot(this.direction);return(// point behind the ray
t<0?this.origin.distanceToSquared(e):(eC.copy(this.origin).addScaledVector(this.direction,t),eC.distanceToSquared(e)))}distanceSqToSegment(e,t,n,r){let i,a,o,s;// from https://github.com/pmjoniak/GeometricTools/blob/master/GTEngine/Include/Mathematics/GteDistRaySegment.h
// It returns the min distance between the ray and the segment
// defined by v0 and v1
// It can also set two optional targets :
// - The closest point on the ray
// - The closest point on the segment
eP.copy(e).add(t).multiplyScalar(.5),eR.copy(t).sub(e).normalize(),eL.copy(this.origin).sub(eP);let l=.5*e.distanceTo(t),u=-this.direction.dot(eR),c=eL.dot(this.direction),f=-eL.dot(eR),h=eL.lengthSq(),d=Math.abs(1-u*u);if(d>0){if(// The ray and segment are not parallel.
i=u*f-c,a=u*c-f,s=l*d,i>=0){if(a>=-s){if(a<=s){// region 0
// Minimum at interior points of ray and segment.
let e=1/d;i*=e,a*=e,o=i*(i+u*a+2*c)+a*(u*i+a+2*f)+h}else o=-(i=Math.max(0,-(u*// region 1
(a=l)+c)))*i+a*(a+2*f)+h}else o=-(i=Math.max(0,-(u*// region 5
(a=-l)+c)))*i+a*(a+2*f)+h}else a<=-s?(a=// region 4
(i=Math.max(0,-(-u*l+c)))>0?-l:Math.min(Math.max(-l,-f),l),o=-i*i+a*(a+2*f)+h):a<=s?(// region 3
i=0,o=(a=Math.min(Math.max(-l,-f),l))*(a+2*f)+h):(a=// region 2
(i=Math.max(0,-(u*l+c)))>0?l:Math.min(Math.max(-l,-f),l),o=-i*i+a*(a+2*f)+h)}else // Ray and segment are parallel.
a=u>0?-l:l,o=-(i=Math.max(0,-(u*a+c)))*i+a*(a+2*f)+h;return n&&n.copy(this.origin).addScaledVector(this.direction,i),r&&r.copy(eP).addScaledVector(eR,a),o}intersectSphere(e,t){eC.subVectors(e.center,this.origin);let n=eC.dot(this.direction),r=eC.dot(eC)-n*n,i=e.radius*e.radius;if(r>i)return null;let a=Math.sqrt(i-r),o=n-a,s=n+a;return(// test to see if t1 is behind the ray - if so, return null
s<0?null:o<0?this.at(s,t):this.at(o,t))}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(0===t)return(// line is coplanar, return origin
0===e.distanceToPoint(this.origin)?0:null);let n=-(this.origin.dot(e.normal)+e.constant)/t;// Return if the ray never intersects the plane
return n>=0?n:null}intersectPlane(e,t){let n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){// check if the ray lies on the plane first
let t=e.distanceToPoint(this.origin);if(0===t)return!0;let n=e.normal.dot(this.direction);return n*t<0}intersectBox(e,t){let n,r,i,a,o,s;let l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,f=this.origin;return(l>=0?(n=(e.min.x-f.x)*l,r=(e.max.x-f.x)*l):(n=(e.max.x-f.x)*l,r=(e.min.x-f.x)*l),u>=0?(i=(e.min.y-f.y)*u,a=(e.max.y-f.y)*u):(i=(e.max.y-f.y)*u,a=(e.min.y-f.y)*u),n>a||i>r)?null:((i>n||isNaN(n))&&(n=i),(a<r||isNaN(r))&&(r=a),c>=0?(o=(e.min.z-f.z)*c,s=(e.max.z-f.z)*c):(o=(e.max.z-f.z)*c,s=(e.min.z-f.z)*c),n>s||o>r)?null:((o>n||n!=n)&&(n=o),(s<r||r!=r)&&(r=s),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return null!==this.intersectBox(e,eC)}intersectTriangle(e,t,n,r,i){let a;// Compute the offset origin, edges, and normal.
// from https://github.com/pmjoniak/GeometricTools/blob/master/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h
eO.subVectors(t,e),eI.subVectors(n,e),eU.crossVectors(eO,eI);// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,
// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by
//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))
//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))
//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)
let o=this.direction.dot(eU);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}eL.subVectors(this.origin,e);let s=a*this.direction.dot(eI.crossVectors(eL,eI));// b1 < 0, no intersection
if(s<0)return null;let l=a*this.direction.dot(eO.cross(eL));// b2 < 0, no intersection
if(l<0||s+l>o)return null;// Line intersects triangle, check if ray does.
let u=-a*eL.dot(eU);return(// t < 0, no intersection
u<0?null:this.at(u/o,i))}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class eD{constructor(e,t,n,r,i,a,o,s,l,u,c,f,h,d,p,m){eD.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,a,o,s,l,u,c,f,h,d,p,m)}set(e,t,n,r,i,a,o,s,l,u,c,f,h,d,p,m){let g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=a,g[9]=o,g[13]=s,g[2]=l,g[6]=u,g[10]=c,g[14]=f,g[3]=h,g[7]=d,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new eD().fromArray(this.elements)}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){let t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){// this method does not support reflection matrices
let t=this.elements,n=e.elements,r=1/ek.setFromMatrixColumn(e,0).length(),i=1/ek.setFromMatrixColumn(e,1).length(),a=1/ek.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),l=Math.sin(r),u=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){let e=a*u,n=a*c,r=o*u,i=o*c;t[0]=s*u,t[4]=-s*c,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-o*s,t[2]=i-e*l,t[6]=r+n*l,t[10]=a*s}else if("YXZ"===e.order){let e=s*u,n=s*c,r=l*u,i=l*c;t[0]=e+i*o,t[4]=r*o-n,t[8]=a*l,t[1]=a*c,t[5]=a*u,t[9]=-o,t[2]=n*o-r,t[6]=i+e*o,t[10]=a*s}else if("ZXY"===e.order){let e=s*u,n=s*c,r=l*u,i=l*c;t[0]=e-i*o,t[4]=-a*c,t[8]=r+n*o,t[1]=n+r*o,t[5]=a*u,t[9]=i-e*o,t[2]=-a*l,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){let e=a*u,n=a*c,r=o*u,i=o*c;t[0]=s*u,t[4]=r*l-n,t[8]=e*l+i,t[1]=s*c,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){let e=a*s,n=a*l,r=o*s,i=o*l;t[0]=s*u,t[4]=i-e*c,t[8]=r*c+n,t[1]=c,t[5]=a*u,t[9]=-o*u,t[2]=-l*u,t[6]=n*c+r,t[10]=e-i*c}else if("XZY"===e.order){let e=a*s,n=a*l,r=o*s,i=o*l;t[0]=s*u,t[4]=-c,t[8]=l*u,t[1]=e*c+i,t[5]=a*u,t[9]=n*c-r,t[2]=r*c-n,t[6]=o*u,t[10]=i*c+e}return(// bottom row
t[3]=0,t[7]=0,t[11]=0,// last column
t[12]=0,t[13]=0,t[14]=0,t[15]=1,this)}makeRotationFromQuaternion(e){return this.compose(ez,e,eB)}lookAt(e,t,n){let r=this.elements;return eG.subVectors(e,t),0===eG.lengthSq()&&(eG.z=1),eG.normalize(),eV.crossVectors(n,eG),0===eV.lengthSq()&&(1===Math.abs(n.z)?eG.x+=1e-4:eG.z+=1e-4,eG.normalize(),eV.crossVectors(n,eG)),eV.normalize(),eH.crossVectors(eG,eV),r[0]=eV.x,r[4]=eH.x,r[8]=eG.x,r[1]=eV.y,r[5]=eH.y,r[9]=eG.y,r[2]=eV.z,r[6]=eH.z,r[10]=eG.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],u=n[1],c=n[5],f=n[9],h=n[13],d=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],_=n[11],x=n[15],b=r[0],S=r[4],E=r[8],w=r[12],M=r[1],T=r[5],A=r[9],C=r[13],P=r[2],R=r[6],L=r[10],O=r[14],I=r[3],U=r[7],N=r[11],D=r[15];return i[0]=a*b+o*M+s*P+l*I,i[4]=a*S+o*T+s*R+l*U,i[8]=a*E+o*A+s*L+l*N,i[12]=a*w+o*C+s*O+l*D,i[1]=u*b+c*M+f*P+h*I,i[5]=u*S+c*T+f*R+h*U,i[9]=u*E+c*A+f*L+h*N,i[13]=u*w+c*C+f*O+h*D,i[2]=d*b+p*M+m*P+g*I,i[6]=d*S+p*T+m*R+g*U,i[10]=d*E+p*A+m*L+g*N,i[14]=d*w+p*C+m*O+g*D,i[3]=v*b+y*M+_*P+x*I,i[7]=v*S+y*T+_*R+x*U,i[11]=v*E+y*A+_*L+x*N,i[15]=v*w+y*C+_*O+x*D,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],l=e[13],u=e[2],c=e[6],f=e[10],h=e[14],d=e[3],p=e[7],m=e[11],g=e[15];//TODO: make this more efficient
//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )
return d*(+i*s*c-r*l*c-i*o*f+n*l*f+r*o*h-n*s*h)+p*(+t*s*h-t*l*f+i*a*f-r*a*h+r*l*u-i*s*u)+m*(+t*l*c-t*o*h-i*a*c+n*a*h+i*o*u-n*l*u)+g*(-r*o*u-t*s*c+t*o*f+r*a*c-n*a*f+n*s*u)}transpose(){let e;let t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(e,t,n){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm
let e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],f=e[10],h=e[11],d=e[12],p=e[13],m=e[14],g=e[15],v=c*m*l-p*f*l+p*s*h-o*m*h-c*s*g+o*f*g,y=d*f*l-u*m*l-d*s*h+a*m*h+u*s*g-a*f*g,_=u*p*l-d*c*l+d*o*h-a*p*h-u*o*g+a*c*g,x=d*c*s-u*p*s-d*o*f+a*p*f+u*o*m-a*c*m,b=t*v+n*y+r*_+i*x;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let S=1/b;return e[0]=v*S,e[1]=(p*f*i-c*m*i-p*r*h+n*m*h+c*r*g-n*f*g)*S,e[2]=(o*m*i-p*s*i+p*r*l-n*m*l-o*r*g+n*s*g)*S,e[3]=(c*s*i-o*f*i-c*r*l+n*f*l+o*r*h-n*s*h)*S,e[4]=y*S,e[5]=(u*m*i-d*f*i+d*r*h-t*m*h-u*r*g+t*f*g)*S,e[6]=(d*s*i-a*m*i-d*r*l+t*m*l+a*r*g-t*s*g)*S,e[7]=(a*f*i-u*s*i+u*r*l-t*f*l-a*r*h+t*s*h)*S,e[8]=_*S,e[9]=(d*c*i-u*p*i-d*n*h+t*p*h+u*n*g-t*c*g)*S,e[10]=(a*p*i-d*o*i+d*n*l-t*p*l-a*n*g+t*o*g)*S,e[11]=(u*o*i-a*c*i-u*n*l+t*c*l+a*n*h-t*o*h)*S,e[12]=x*S,e[13]=(u*p*r-d*c*r+d*n*f-t*p*f-u*n*m+t*c*m)*S,e[14]=(d*o*r-a*p*r-d*n*s+t*p*s+a*n*m-t*o*m)*S,e[15]=(a*c*r-u*o*r+u*n*s-t*c*s-a*n*f+t*o*f)*S,this}scale(e){let t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){// Based on http://www.gamedev.net/reference/articles/article1199.asp
let n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,l=i*a,u=i*o;return this.set(l*a+n,l*o-r*s,l*s+r*o,0,l*o+r*s,u*o+n,u*s-r*a,0,l*s-r*o,u*s+r*a,i*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){let r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,l=i+i,u=a+a,c=o+o,f=i*l,h=i*u,d=i*c,p=a*u,m=a*c,g=o*c,v=s*l,y=s*u,_=s*c,x=n.x,b=n.y,S=n.z;return r[0]=(1-(p+g))*x,r[1]=(h+_)*x,r[2]=(d-y)*x,r[3]=0,r[4]=(h-_)*b,r[5]=(1-(f+g))*b,r[6]=(m+v)*b,r[7]=0,r[8]=(d+y)*S,r[9]=(m-v)*S,r[10]=(1-(f+p))*S,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){let r=this.elements,i=ek.set(r[0],r[1],r[2]).length(),a=ek.set(r[4],r[5],r[6]).length(),o=ek.set(r[8],r[9],r[10]).length(),s=this.determinant();s<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],// scale the rotation part
eF.copy(this);let l=1/i,u=1/a,c=1/o;return eF.elements[0]*=l,eF.elements[1]*=l,eF.elements[2]*=l,eF.elements[4]*=u,eF.elements[5]*=u,eF.elements[6]*=u,eF.elements[8]*=c,eF.elements[9]*=c,eF.elements[10]*=c,t.setFromRotationMatrix(eF),n.x=i,n.y=a,n.z=o,this}makePerspective(e,t,n,r,i,a,o=2e3){let s,l;let u=this.elements;if(2e3===o)s=-(a+i)/(a-i),l=-2*a*i/(a-i);else if(2001===o)s=-a/(a-i),l=-a*i/(a-i);else throw Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return u[0]=2*i/(t-e),u[4]=0,u[8]=(t+e)/(t-e),u[12]=0,u[1]=0,u[5]=2*i/(n-r),u[9]=(n+r)/(n-r),u[13]=0,u[2]=0,u[6]=0,u[10]=s,u[14]=l,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,n,r,i,a,o=2e3){let s,l;let u=this.elements,c=1/(t-e),f=1/(n-r),h=1/(a-i);if(2e3===o)s=(a+i)*h,l=-2*h;else if(2001===o)s=i*h,l=-1*h;else throw Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return u[0]=2*c,u[4]=0,u[8]=0,u[12]=-((t+e)*c),u[1]=0,u[5]=2*f,u[9]=0,u[13]=-((n+r)*f),u[2]=0,u[6]=0,u[10]=l,u[14]=-s,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){let t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const ek=/*@__PURE__*/new eo,eF=/*@__PURE__*/new eD,ez=/*@__PURE__*/new eo(0,0,0),eB=/*@__PURE__*/new eo(1,1,1),eV=/*@__PURE__*/new eo,eH=/*@__PURE__*/new eo,eG=/*@__PURE__*/new eo,eW=/*@__PURE__*/new eD,ej=/*@__PURE__*/new ea;class eX{constructor(e=0,t=0,n=0,r=eX.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)
let r=e.elements,i=r[0],a=r[4],o=r[8],s=r[1],l=r[5],u=r[9],c=r[2],f=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(R(o,-1,1)),.9999999>Math.abs(o)?(this._x=Math.atan2(-u,h),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(f,l),this._z=0);break;case"YXZ":this._x=Math.asin(-R(u,-1,1)),.9999999>Math.abs(u)?(this._y=Math.atan2(o,h),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(R(f,-1,1)),.9999999>Math.abs(f)?(this._y=Math.atan2(-c,h),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-R(c,-1,1)),.9999999>Math.abs(c)?(this._x=Math.atan2(f,h),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(R(s,-1,1)),.9999999>Math.abs(s)?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-R(a,-1,1)),.9999999>Math.abs(a)?(this._x=Math.atan2(f,l),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-u,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return eW.makeRotationFromQuaternion(e),this.setFromRotationMatrix(eW,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return(// WARNING: this discards revolution information -bhouston
ej.setFromEuler(this),this.setFromQuaternion(ej,e))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}eX.DEFAULT_ORDER="XYZ";class eq{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!=0}isEnabled(e){return(this.mask&(1<<e|0))!=0}}let eY=0;const e$=/*@__PURE__*/new eo,eK=/*@__PURE__*/new ea,eZ=/*@__PURE__*/new eD,eJ=/*@__PURE__*/new eo,eQ=/*@__PURE__*/new eo,e0=/*@__PURE__*/new eo,e1=/*@__PURE__*/new ea,e2=/*@__PURE__*/new eo(1,0,0),e3=/*@__PURE__*/new eo(0,1,0),e4=/*@__PURE__*/new eo(0,0,1),e5={type:"added"},e6={type:"removed"};class e8 extends M{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:eY++}),this.uuid=P(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=e8.DEFAULT_UP.clone();let e=new eo,t=new eX,n=new ea,r=new eo(1,1,1);t._onChange(function(){n.setFromEuler(t,!1)}),n._onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new eD},normalMatrix:{value:new D}}),this.matrix=new eD,this.matrixWorld=new eD,this.matrixAutoUpdate=e8.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=e8.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new eq,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){// assumes axis is normalized
this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)
this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){// assumes q is normalized
this.quaternion.copy(e)}rotateOnAxis(e,t){return(// rotate object on axis in object space
// axis is assumed to be normalized
eK.setFromAxisAngle(e,t),this.quaternion.multiply(eK),this)}rotateOnWorldAxis(e,t){return(// rotate object on axis in world space
// axis is assumed to be normalized
// method assumes no rotated parent
eK.setFromAxisAngle(e,t),this.quaternion.premultiply(eK),this)}rotateX(e){return this.rotateOnAxis(e2,e)}rotateY(e){return this.rotateOnAxis(e3,e)}rotateZ(e){return this.rotateOnAxis(e4,e)}translateOnAxis(e,t){return(// translate object by distance along axis in object space
// axis is assumed to be normalized
e$.copy(e).applyQuaternion(this.quaternion),this.position.add(e$.multiplyScalar(t)),this)}translateX(e){return this.translateOnAxis(e2,e)}translateY(e){return this.translateOnAxis(e3,e)}translateZ(e){return this.translateOnAxis(e4,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(eZ.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?eJ.copy(e):eJ.set(e,t,n);let r=this.parent;this.updateWorldMatrix(!0,!1),eQ.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?eZ.lookAt(eQ,eJ,this.up):eZ.lookAt(eJ,eQ,this.up),this.quaternion.setFromRotationMatrix(eZ),r&&(eZ.extractRotation(r.matrixWorld),eK.setFromRotationMatrix(eZ),this.quaternion.premultiply(eK.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?console.error("THREE.Object3D.add: object can't be added as a child of itself.",e):e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(e5)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}let t=this.children.indexOf(e);return -1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(e6)),this}removeFromParent(){let e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return(// adds object as a child of this, while maintaining the object's world transform
// Note: This method does not support scene graphs having non-uniformly-scaled nodes(s)
this.updateWorldMatrix(!0,!1),eZ.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),eZ.multiply(e.parent.matrixWorld)),e.applyMatrix4(eZ),this.add(e),e.updateWorldMatrix(!1,!0),this)}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){let r=this.children[n],i=r.getObjectByProperty(e,t);if(void 0!==i)return i}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let r=0,i=this.children.length;r<i;r++){let i=this.children[r].getObjectsByProperty(e,t);i.length>0&&(n=n.concat(i))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(eQ,e,e0),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(eQ,e1,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);let t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){let t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);// update children
let t=this.children;for(let n=0,r=t.length;n<r;n++){let r=t[n];(!0===r.matrixWorldAutoUpdate||!0===e)&&r.updateMatrixWorld(e)}}updateWorldMatrix(e,t){let n=this.parent;// update children
if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){let e=this.children;for(let t=0,n=e.length;t<n;t++){let n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){// meta is a string when called from JSON.stringify
let t=void 0===e||"string"==typeof e,n={};t&&(// initialize meta obj
e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});// standard Object3D serialization
let r={};//
function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);let t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){let n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){let r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material){if(Array.isArray(this.material)){let t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material)}//
if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}//
if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){let n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){let t=a(e.geometries),r=a(e.materials),i=a(e.textures),o=a(e.images),s=a(e.shapes),l=a(e.skeletons),u=a(e.animations),c=a(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),o.length>0&&(n.images=o),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),u.length>0&&(n.animations=u),c.length>0&&(n.nodes=c)}return n.object=r,n;// extract data from the cache hash
// remove metadata on each item
// and return as array
function a(e){let t=[];for(let n in e){let r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){let n=e.children[t];this.add(n.clone())}return this}}e8.DEFAULT_UP=/*@__PURE__*/new eo(0,1,0),e8.DEFAULT_MATRIX_AUTO_UPDATE=!0,e8.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const e7=/*@__PURE__*/new eo,e9=/*@__PURE__*/new eo,te=/*@__PURE__*/new eo,tt=/*@__PURE__*/new eo,tn=/*@__PURE__*/new eo,tr=/*@__PURE__*/new eo,ti=/*@__PURE__*/new eo,ta=/*@__PURE__*/new eo,to=/*@__PURE__*/new eo,ts=/*@__PURE__*/new eo;let tl=!1;class tu{constructor(e=new eo,t=new eo,n=new eo){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),e7.subVectors(e,t),r.cross(e7);let i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}// static/instance method to calculate barycentric coordinates
// based on: http://www.blackpawn.com/texts/pointinpoly/default.html
static getBarycoord(e,t,n,r,i){e7.subVectors(r,t),e9.subVectors(n,t),te.subVectors(e,t);let a=e7.dot(e7),o=e7.dot(e9),s=e7.dot(te),l=e9.dot(e9),u=e9.dot(te),c=a*l-o*o;// collinear or singular triangle
if(0===c)// not sure if this is the best idea, maybe should be returning undefined
return i.set(-2,-1,-1);let f=1/c,h=(l*s-o*u)*f,d=(a*u-o*s)*f;// barycentric coordinates must always sum to 1
return i.set(1-h-d,d,h)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,tt),tt.x>=0&&tt.y>=0&&tt.x+tt.y<=1}static getUV(e,t,n,r,i,a,o,s){return!1===tl&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),tl=!0),this.getInterpolation(e,t,n,r,i,a,o,s)}static getInterpolation(e,t,n,r,i,a,o,s){return this.getBarycoord(e,t,n,r,tt),s.setScalar(0),s.addScaledVector(i,tt.x),s.addScaledVector(a,tt.y),s.addScaledVector(o,tt.z),s}static isFrontFacing(e,t,n,r){// strictly front facing
return e7.subVectors(n,t),e9.subVectors(e,t),0>e7.cross(e9).dot(r)}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return e7.subVectors(this.c,this.b),e9.subVectors(this.a,this.b),.5*e7.cross(e9).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return tu.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return tu.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return!1===tl&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),tl=!0),tu.getInterpolation(e,this.a,this.b,this.c,t,n,r,i)}getInterpolation(e,t,n,r,i){return tu.getInterpolation(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return tu.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return tu.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let n,r;let i=this.a,a=this.b,o=this.c;// algorithm thanks to Real-Time Collision Detection by Christer Ericson,
// published by Morgan Kaufmann Publishers, (c) 2005 Elsevier Inc.,
// under the accompanying license; see chapter 5.1.5 for detailed explanation.
// basically, we're distinguishing which of the voronoi regions of the triangle
// the point lies in with the minimum amount of redundant computation.
tn.subVectors(a,i),tr.subVectors(o,i),ta.subVectors(e,i);let s=tn.dot(ta),l=tr.dot(ta);if(s<=0&&l<=0)return t.copy(i);to.subVectors(e,a);let u=tn.dot(to),c=tr.dot(to);if(u>=0&&c<=u)return t.copy(a);let f=s*c-u*l;if(f<=0&&s>=0&&u<=0)// edge region of AB; barycentric coords (1-v, v, 0)
return n=s/(s-u),t.copy(i).addScaledVector(tn,n);ts.subVectors(e,o);let h=tn.dot(ts),d=tr.dot(ts);if(d>=0&&h<=d)return t.copy(o);let p=h*l-s*d;if(p<=0&&l>=0&&d<=0)// edge region of AC; barycentric coords (1-w, 0, w)
return r=l/(l-d),t.copy(i).addScaledVector(tr,r);let m=u*d-h*c;if(m<=0&&c-u>=0&&h-d>=0)// edge region of BC; barycentric coords (0, 1-w, w)
return ti.subVectors(o,a),r=(c-u)/(c-u+(h-d)),t.copy(a).addScaledVector(ti,r);// edge region of BC
// face region
let g=1/(m+p+f);return(// u = va * denom
n=p*g,r=f*g,t.copy(i).addScaledVector(tn,n).addScaledVector(tr,r))}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let tc=0;class tf extends M{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:tc++}),this.uuid=P(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(let t in e){let n=e[t];if(void 0===n){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}let r=this[t];if(void 0===r){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){let t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});let n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};// TODO: Copied from Object3D.toJSON
function r(e){let t=[];for(let n in e){let r=e[n];delete r.metadata,t.push(r)}return t}if(// standard Material serialization
n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=this.alphaHash),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){let t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,n=null;if(null!==t){let e=t.length;n=Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}const th={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},td={h:0,s:0,l:0},tp={h:0,s:0,l:0};function tm(e,t,n){return(n<0&&(n+=1),n>1&&(n-=1),n<1/6)?e+(t-e)*6*n:n<.5?t:n<2/3?e+(t-e)*6*(2/3-n):e}class tg{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){return void 0===t&&void 0===n?e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e):this.setRGB(e,t,n),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=b){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Y.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=Y.workingColorSpace){return this.r=e,this.g=t,this.b=n,Y.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=Y.workingColorSpace){if(// h,s,l ranges are in 0.0 - 1.0
e=(e%1+1)%1,t=R(t,0,1),n=R(n,0,1),0===t)this.r=this.g=this.b=n;else{let r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=tm(i,r,e+1/3),this.g=tm(i,r,e),this.b=tm(i,r,e-1/3)}return Y.toWorkingColorSpace(this,r),this}setStyle(e,t=b){let n;function r(t){void 0!==t&&1>parseFloat(t)&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(n=/^(\w+)\(([^\)]*)\)/.exec(e)){let i;let a=n[1],o=n[2];switch(a){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return(// rgb(255,0,0) rgba(255,0,0,0.5)
r(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,t));if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return(// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)
r(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,t));break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return(// hsl(120,50%,50%) hsla(120,50%,50%,0.5)
r(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,t));break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){// hex color
let r=n[1],i=r.length;if(3===i)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(6===i)return this.setHex(parseInt(r,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=b){// color keywords
let n=th[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=H(e.r),this.g=H(e.g),this.b=H(e.b),this}copyLinearToSRGB(e){return this.r=G(e.r),this.g=G(e.g),this.b=G(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=b){return Y.fromWorkingColorSpace(tv.copy(this),e),65536*Math.round(R(255*tv.r,0,255))+256*Math.round(R(255*tv.g,0,255))+Math.round(R(255*tv.b,0,255))}getHexString(e=b){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Y.workingColorSpace){let n,r;// h,s,l ranges are in 0.0 - 1.0
Y.fromWorkingColorSpace(tv.copy(this),t);let i=tv.r,a=tv.g,o=tv.b,s=Math.max(i,a,o),l=Math.min(i,a,o),u=(l+s)/2;if(l===s)n=0,r=0;else{let e=s-l;switch(r=u<=.5?e/(s+l):e/(2-s-l),s){case i:n=(a-o)/e+(a<o?6:0);break;case a:n=(o-i)/e+2;break;case o:n=(i-a)/e+4}n/=6}return e.h=n,e.s=r,e.l=u,e}getRGB(e,t=Y.workingColorSpace){return Y.fromWorkingColorSpace(tv.copy(this),t),e.r=tv.r,e.g=tv.g,e.b=tv.b,e}getStyle(e=b){Y.fromWorkingColorSpace(tv.copy(this),e);let t=tv.r,n=tv.g,r=tv.b;return e!==b?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(e,t,n){return this.getHSL(td),td.h+=e,td.s+=t,td.l+=n,this.setHSL(td.h,td.s,td.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(td),e.getHSL(tp);let n=(1-t)*td.h+t*tp.h,r=(1-t)*td.s+t*tp.s,i=(1-t)*td.l+t*tp.l;return this.setHSL(n,r,i),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,n=this.g,r=this.b,i=e.elements;return this.r=i[0]*t+i[3]*n+i[6]*r,this.g=i[1]*t+i[4]*n+i[7]*r,this.b=i[2]*t+i[5]*n+i[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const tv=/*@__PURE__*/new tg;tg.NAMES=th;class ty extends tf{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new tg(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const t_=/*@__PURE__*/new eo,tx=/*@__PURE__*/new N;class tb{constructor(e,t,n=!1){if(Array.isArray(e))throw TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=35044,this.updateRange={offset:0,count:-1},this.gpuType=1015,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)tx.fromBufferAttribute(this,t),tx.applyMatrix3(e),this.setXY(t,tx.x,tx.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)t_.fromBufferAttribute(this,t),t_.applyMatrix3(e),this.setXYZ(t,t_.x,t_.y,t_.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)t_.fromBufferAttribute(this,t),t_.applyMatrix4(e),this.setXYZ(t,t_.x,t_.y,t_.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)t_.fromBufferAttribute(this,t),t_.applyNormalMatrix(e),this.setXYZ(t,t_.x,t_.y,t_.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)t_.fromBufferAttribute(this,t),t_.transformDirection(e),this.setXYZ(t,t_.x,t_.y,t_.z);return this}set(e,t=0){return(// Matching BufferAttribute constructor, do not normalize the array.
this.array.set(e,t),this)}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=I(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=U(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=I(t,this.array)),t}setX(e,t){return this.normalized&&(t=U(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=I(t,this.array)),t}setY(e,t){return this.normalized&&(t=U(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=I(t,this.array)),t}setZ(e,t){return this.normalized&&(t=U(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=I(t,this.array)),t}setW(e,t){return this.normalized&&(t=U(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=U(t,this.array),n=U(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=U(t,this.array),n=U(n,this.array),r=U(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=U(t,this.array),n=U(n,this.array),r=U(r,this.array),i=U(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}}class tS extends tb{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class tE extends tb{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class tw extends tb{constructor(e,t,n){super(new Float32Array(e),t,n)}}let tM=0;const tT=/*@__PURE__*/new eD,tA=/*@__PURE__*/new e8,tC=/*@__PURE__*/new eo,tP=/*@__PURE__*/new eu,tR=/*@__PURE__*/new eu,tL=/*@__PURE__*/new eo;class tO extends M{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:tM++}),this.uuid=P(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(F(e)?tE:tS)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);let n=this.attributes.normal;if(void 0!==n){let t=new D().getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}let r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return tT.makeRotationFromQuaternion(e),this.applyMatrix4(tT),this}rotateX(e){return(// rotate geometry around world x-axis
tT.makeRotationX(e),this.applyMatrix4(tT),this)}rotateY(e){return(// rotate geometry around world y-axis
tT.makeRotationY(e),this.applyMatrix4(tT),this)}rotateZ(e){return(// rotate geometry around world z-axis
tT.makeRotationZ(e),this.applyMatrix4(tT),this)}translate(e,t,n){return(// translate geometry
tT.makeTranslation(e,t,n),this.applyMatrix4(tT),this)}scale(e,t,n){return(// scale geometry
tT.makeScale(e,t,n),this.applyMatrix4(tT),this)}lookAt(e){return tA.lookAt(e),tA.updateMatrix(),this.applyMatrix4(tA.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(tC).negate(),this.translate(tC.x,tC.y,tC.z),this}setFromPoints(e){let t=[];for(let n=0,r=e.length;n<r;n++){let r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new tw(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new eu);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new eo(-1/0,-1/0,-1/0),new eo(1/0,1/0,1/0));return}if(void 0!==e)// process morph attributes if present
{if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){let n=t[e];tP.setFromBufferAttribute(n),this.morphTargetsRelative?(tL.addVectors(this.boundingBox.min,tP.min),this.boundingBox.expandByPoint(tL),tL.addVectors(this.boundingBox.max,tP.max),this.boundingBox.expandByPoint(tL)):(this.boundingBox.expandByPoint(tP.min),this.boundingBox.expandByPoint(tP.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new eA);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new eo,1/0);return}if(e){// first, find the center of the bounding sphere
let n=this.boundingSphere.center;// process morph attributes if present
if(tP.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){let n=t[e];tR.setFromBufferAttribute(n),this.morphTargetsRelative?(tL.addVectors(tP.min,tR.min),tP.expandByPoint(tL),tL.addVectors(tP.max,tR.max),tP.expandByPoint(tL)):(tP.expandByPoint(tR.min),tP.expandByPoint(tR.max))}tP.getCenter(n);// second, try to find a boundingSphere with a radius smaller than the
// boundingSphere of the boundingBox: sqrt(3) smaller in the best case
let r=0;for(let t=0,i=e.count;t<i;t++)tL.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(tL));// process morph attributes if present
if(t)for(let i=0,a=t.length;i<a;i++){let a=t[i],o=this.morphTargetsRelative;for(let t=0,i=a.count;t<i;t++)tL.fromBufferAttribute(a,t),o&&(tC.fromBufferAttribute(e,t),tL.add(tC)),r=Math.max(r,n.distanceToSquared(tL))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;// based on http://www.terathon.com/code/tangent.html
// (per vertex tangents)
if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let n=e.array,r=t.position.array,i=t.normal.array,a=t.uv.array,o=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new tb(new Float32Array(4*o),4));let s=this.getAttribute("tangent").array,l=[],u=[];for(let e=0;e<o;e++)l[e]=new eo,u[e]=new eo;let c=new eo,f=new eo,h=new eo,d=new N,p=new N,m=new N,g=new eo,v=new eo,y=this.groups;0===y.length&&(y=[{start:0,count:n.length}]);for(let e=0,t=y.length;e<t;++e){let t=y[e],i=t.start,o=t.count;for(let e=i,t=i+o;e<t;e+=3)!function(e,t,n){c.fromArray(r,3*e),f.fromArray(r,3*t),h.fromArray(r,3*n),d.fromArray(a,2*e),p.fromArray(a,2*t),m.fromArray(a,2*n),f.sub(c),h.sub(c),p.sub(d),m.sub(d);let i=1/(p.x*m.y-m.x*p.y);isFinite(i)&&(g.copy(f).multiplyScalar(m.y).addScaledVector(h,-p.y).multiplyScalar(i),v.copy(h).multiplyScalar(p.x).addScaledVector(f,-m.x).multiplyScalar(i),l[e].add(g),l[t].add(g),l[n].add(g),u[e].add(v),u[t].add(v),u[n].add(v))}(n[e+0],n[e+1],n[e+2])}let _=new eo,x=new eo,b=new eo,S=new eo;function E(e){b.fromArray(i,3*e),S.copy(b);let t=l[e];// Gram-Schmidt orthogonalize
_.copy(t),_.sub(b.multiplyScalar(b.dot(t))).normalize(),// Calculate handedness
x.crossVectors(S,t);let n=x.dot(u[e]);s[4*e]=_.x,s[4*e+1]=_.y,s[4*e+2]=_.z,s[4*e+3]=n<0?-1:1}for(let e=0,t=y.length;e<t;++e){let t=y[e],r=t.start,i=t.count;for(let e=r,t=r+i;e<t;e+=3)E(n[e+0]),E(n[e+1]),E(n[e+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new tb(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);let r=new eo,i=new eo,a=new eo,o=new eo,s=new eo,l=new eo,u=new eo,c=new eo;// indexed elements
if(e)for(let f=0,h=e.count;f<h;f+=3){let h=e.getX(f+0),d=e.getX(f+1),p=e.getX(f+2);r.fromBufferAttribute(t,h),i.fromBufferAttribute(t,d),a.fromBufferAttribute(t,p),u.subVectors(a,i),c.subVectors(r,i),u.cross(c),o.fromBufferAttribute(n,h),s.fromBufferAttribute(n,d),l.fromBufferAttribute(n,p),o.add(u),s.add(u),l.add(u),n.setXYZ(h,o.x,o.y,o.z),n.setXYZ(d,s.x,s.y,s.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let e=0,o=t.count;e<o;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),u.subVectors(a,i),c.subVectors(r,i),u.cross(c),n.setXYZ(e+0,u.x,u.y,u.z),n.setXYZ(e+1,u.x,u.y,u.z),n.setXYZ(e+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)tL.fromBufferAttribute(e,t),tL.normalize(),e.setXYZ(t,tL.x,tL.y,tL.z)}toNonIndexed(){function e(e,t){let n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r),o=0,s=0;for(let i=0,l=t.length;i<l;i++){o=e.isInterleavedBufferAttribute?t[i]*e.data.stride+e.offset:t[i]*r;for(let e=0;e<r;e++)a[s++]=n[o++]}return new tb(a,r,i)}//
if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new tO,n=this.index.array,r=this.attributes;// attributes
for(let i in r){let a=r[i],o=e(a,n);t.setAttribute(i,o)}// morph attributes
let i=this.morphAttributes;for(let r in i){let a=[],o=i[r];for(let t=0,r=o.length;t<r;t++){let r=o[t],i=e(r,n);a.push(i)}t.morphAttributes[r]=a}t.morphTargetsRelative=this.morphTargetsRelative;// groups
let a=this.groups;for(let e=0,n=a.length;e<n;e++){let n=a[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){let e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(// standard BufferGeometry serialization
e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){let t=this.parameters;for(let n in t)void 0!==t[n]&&(e[n]=t[n]);return e}// for simplicity the code assumes attributes are not shared across geometries, see #15811
e.data={attributes:{}};let t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let n=this.attributes;for(let t in n){let r=n[t];e.data.attributes[t]=r.toJSON(e.data)}let r={},i=!1;for(let t in this.morphAttributes){let n=this.morphAttributes[t],a=[];for(let t=0,r=n.length;t<r;t++){let r=n[t];a.push(r.toJSON(e.data))}a.length>0&&(r[t]=a,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));let o=this.boundingSphere;return null!==o&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){// reset
this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;// used for storing cloned, shared data
let t={};// name
this.name=e.name;// index
let n=e.index;null!==n&&this.setIndex(n.clone(t));// attributes
let r=e.attributes;for(let e in r){let n=r[e];this.setAttribute(e,n.clone(t))}// morph attributes
let i=e.morphAttributes;for(let e in i){let n=[],r=i[e];for(let e=0,i=r.length;e<i;e++)n.push(r[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;// groups
let a=e.groups;for(let e=0,t=a.length;e<t;e++){let t=a[e];this.addGroup(t.start,t.count,t.materialIndex)}// bounding box
let o=e.boundingBox;null!==o&&(this.boundingBox=o.clone());// bounding sphere
let s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),// draw range
this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,// user data
this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const tI=/*@__PURE__*/new eD,tU=/*@__PURE__*/new eN,tN=/*@__PURE__*/new eA,tD=/*@__PURE__*/new eo,tk=/*@__PURE__*/new eo,tF=/*@__PURE__*/new eo,tz=/*@__PURE__*/new eo,tB=/*@__PURE__*/new eo,tV=/*@__PURE__*/new eo,tH=/*@__PURE__*/new N,tG=/*@__PURE__*/new N,tW=/*@__PURE__*/new N,tj=/*@__PURE__*/new eo,tX=/*@__PURE__*/new eo,tq=/*@__PURE__*/new eo,tY=/*@__PURE__*/new eo,t$=/*@__PURE__*/new eo;class tK extends e8{constructor(e=new tO,t=new ty){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry,t=e.morphAttributes,n=Object.keys(t);if(n.length>0){let e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){let n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}getVertexPosition(e,t){let n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(r,e);let o=this.morphTargetInfluences;if(i&&o){tV.set(0,0,0);for(let n=0,r=i.length;n<r;n++){let r=o[n],s=i[n];0!==r&&(tB.fromBufferAttribute(s,e),a?tV.addScaledVector(tB,r):tV.addScaledVector(tB.sub(t),r))}t.add(tV)}return t}raycast(e,t){let n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),tN.copy(n.boundingSphere),tN.applyMatrix4(i),// check distance from ray origin to bounding sphere
tU.copy(e.ray).recast(e.near),!1===tN.containsPoint(tU.origin)&&(null===tU.intersectSphere(tN,tD)||tU.origin.distanceToSquared(tD)>(e.far-e.near)**2)||(// convert ray to local space of mesh
tI.copy(i).invert(),tU.copy(e.ray).applyMatrix4(tI),null!==n.boundingBox&&!1===tU.intersectsBox(n.boundingBox)))return;// test for intersections with geometry
this._computeIntersections(e,t,tU)}}_computeIntersections(e,t,n){let r;let i=this.geometry,a=this.material,o=i.index,s=i.attributes.position,l=i.attributes.uv,u=i.attributes.uv1,c=i.attributes.normal,f=i.groups,h=i.drawRange;if(null!==o){// indexed buffer geometry
if(Array.isArray(a))for(let i=0,s=f.length;i<s;i++){let s=f[i],d=a[s.materialIndex],p=Math.max(s.start,h.start),m=Math.min(o.count,Math.min(s.start+s.count,h.start+h.count));for(let i=p;i<m;i+=3){let a=o.getX(i),f=o.getX(i+1),h=o.getX(i+2);(r=tZ(this,d,e,n,l,u,c,a,f,h))&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=s.materialIndex,t.push(r))}}else{let i=Math.max(0,h.start),s=Math.min(o.count,h.start+h.count);for(let f=i;f<s;f+=3){let i=o.getX(f),s=o.getX(f+1),h=o.getX(f+2);(r=tZ(this,a,e,n,l,u,c,i,s,h))&&(r.faceIndex=Math.floor(f/3),t.push(r))}}}else if(void 0!==s){// non-indexed buffer geometry
if(Array.isArray(a))for(let i=0,o=f.length;i<o;i++){let o=f[i],d=a[o.materialIndex],p=Math.max(o.start,h.start),m=Math.min(s.count,Math.min(o.start+o.count,h.start+h.count));for(let i=p;i<m;i+=3){let a=i,s=i+1,f=i+2;(r=tZ(this,d,e,n,l,u,c,a,s,f))&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=o.materialIndex,t.push(r))}}else{let i=Math.max(0,h.start),o=Math.min(s.count,h.start+h.count);for(let s=i;s<o;s+=3){let i=s,o=s+1,f=s+2;(r=tZ(this,a,e,n,l,u,c,i,o,f))&&(r.faceIndex=Math.floor(s/3),t.push(r))}}}}}function tZ(e,t,n,r,i,a,o,s,l,u){e.getVertexPosition(s,tk),e.getVertexPosition(l,tF),e.getVertexPosition(u,tz);let c=function(e,t,n,r,i,a,o,s){if(null===(1===t.side?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,0===t.side,s)))return null;t$.copy(s),t$.applyMatrix4(e.matrixWorld);let l=n.ray.origin.distanceTo(t$);return l<n.near||l>n.far?null:{distance:l,point:t$.clone(),object:e}}(e,t,n,r,tk,tF,tz,tY);if(c){i&&(tH.fromBufferAttribute(i,s),tG.fromBufferAttribute(i,l),tW.fromBufferAttribute(i,u),c.uv=tu.getInterpolation(tY,tk,tF,tz,tH,tG,tW,new N)),a&&(tH.fromBufferAttribute(a,s),tG.fromBufferAttribute(a,l),tW.fromBufferAttribute(a,u),c.uv1=tu.getInterpolation(tY,tk,tF,tz,tH,tG,tW,new N),c.uv2=c.uv1),o&&(tj.fromBufferAttribute(o,s),tX.fromBufferAttribute(o,l),tq.fromBufferAttribute(o,u),c.normal=tu.getInterpolation(tY,tk,tF,tz,tj,tX,tq,new eo),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));let e={a:s,b:l,c:u,normal:new eo,materialIndex:0};tu.getNormal(tk,tF,tz,e.normal),c.face=e}return c}class tJ extends tO{constructor(e=1,t=1,n=1,r=1,i=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:a};let o=this;// segments
r=Math.floor(r),i=Math.floor(i),a=Math.floor(a);// buffers
let s=[],l=[],u=[],c=[],f=0,h=0;function d(e,t,n,r,i,a,d,p,m,g,v){let y=a/m,_=d/g,x=a/2,b=d/2,S=p/2,E=m+1,w=g+1,M=0,T=0,A=new eo;// generate vertices, normals and uvs
for(let a=0;a<w;a++){let o=a*_-b;for(let s=0;s<E;s++){let f=s*y-x;// set values to correct vector component
A[e]=f*r,A[t]=o*i,A[n]=S,// now apply vector to vertex buffer
l.push(A.x,A.y,A.z),// set values to correct vector component
A[e]=0,A[t]=0,A[n]=p>0?1:-1,// now apply vector to normal buffer
u.push(A.x,A.y,A.z),// uvs
c.push(s/m),c.push(1-a/g),// counters
M+=1}}// indices
// 1. you need three indices to draw a single face
// 2. a single segment consists of two faces
// 3. so we need to generate six (2*3) indices per segment
for(let e=0;e<g;e++)for(let t=0;t<m;t++){let n=f+t+E*e,r=f+t+E*(e+1),i=f+(t+1)+E*(e+1),a=f+(t+1)+E*e;// faces
s.push(n,r,a),s.push(r,i,a),// increase counter
T+=6}// add a group to the geometry. this will ensure multi material support
o.addGroup(h,T,v),// calculate new start value for groups
h+=T,// update total number of vertices
f+=M}// build each side of the box geometry
d("z","y","x",-1,-1,n,t,e,a,i,0),d("z","y","x",1,-1,n,t,-e,a,i,1),d("x","z","y",1,1,e,n,t,r,a,2),d("x","z","y",1,-1,e,n,-t,r,a,3),d("x","y","z",1,-1,e,t,n,r,i,4),d("x","y","z",-1,-1,e,t,-n,r,i,5),// build geometry
this.setIndex(s),this.setAttribute("position",new tw(l,3)),this.setAttribute("normal",new tw(u,3)),this.setAttribute("uv",new tw(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tJ(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}/**
 * Uniform Utilities
 */function tQ(e){let t={};for(let n in e)for(let r in t[n]={},e[n]){let i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function t0(e){let t={};for(let n=0;n<e.length;n++){let r=tQ(e[n]);for(let e in r)t[e]=r[e]}return t}function t1(e){return null===e.getRenderTarget()?e.outputColorSpace:S}// Legacy
const t2={clone:tQ,merge:t0};class t3 extends tf{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1// set to use shader texture LOD
},// When rendered geometry doesn't include these attributes but the material does,
// use these default values in WebGL. This avoids errors when buffer data is missing.
this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=tQ(e.uniforms),this.uniformsGroups=function(e){let t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);for(let n in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){let r=this.uniforms[n],i=r.value;i&&i.isTexture?t.uniforms[n]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[n]={type:"m4",value:i.toArray()}:t.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let n={};for(let e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class t4 extends e8{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new eD,this.projectionMatrix=new eD,this.projectionMatrixInverse=new eD,this.coordinateSystem=2e3}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class t5 extends t4{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}/**
	 * Sets the FOV by focal length in respect to the current .filmGauge.
	 *
	 * The default film gauge is 35, so that the focal length can be specified for
	 * a 35mm (full frame) camera.
	 *
	 * Values for focal length and film gauge must have the same unit.
	 */setFocalLength(e){/** see {@link http://www.bobatkins.com/photography/technical/field_of_view.html} */let t=.5*this.getFilmHeight()/e;this.fov=2*C*Math.atan(t),this.updateProjectionMatrix()}/**
	 * Calculates the focal length from the current .fov and .filmGauge.
	 */getFocalLength(){let e=Math.tan(.5*A*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*C*Math.atan(Math.tan(.5*A*this.fov)/this.zoom)}getFilmWidth(){// film not completely covered in portrait format (aspect < 1)
return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){// film not completely covered in landscape format (aspect > 1)
return this.filmGauge/Math.max(this.aspect,1)}/**
	 * Sets an offset in a larger frustum. This is useful for multi-window or
	 * multi-monitor/multi-machine setups.
	 *
	 * For example, if you have 3x2 monitors and each monitor is 1920x1080 and
	 * the monitors are in grid like this
	 *
	 *   +---+---+---+
	 *   | A | B | C |
	 *   +---+---+---+
	 *   | D | E | F |
	 *   +---+---+---+
	 *
	 * then for each monitor you would call it like this
	 *
	 *   const w = 1920;
	 *   const h = 1080;
	 *   const fullWidth = w * 3;
	 *   const fullHeight = h * 2;
	 *
	 *   --A--
	 *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );
	 *   --B--
	 *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );
	 *   --C--
	 *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );
	 *   --D--
	 *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );
	 *   --E--
	 *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );
	 *   --F--
	 *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );
	 *
	 *   Note there is no reason monitors have to be the same size or in a grid.
	 */setViewOffset(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(.5*A*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){let e=a.fullWidth,o=a.fullHeight;i+=a.offsetX*r/e,t-=a.offsetY*n/o,r*=a.width/e,n*=a.height/o}let o=this.filmOffset;0!==o&&(i+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class t6 extends e8{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null;let r=new t5(-90,1,e,t);r.layers=this.layers,this.add(r);let i=new t5(-90,1,e,t);i.layers=this.layers,this.add(i);let a=new t5(-90,1,e,t);a.layers=this.layers,this.add(a);let o=new t5(-90,1,e,t);o.layers=this.layers,this.add(o);let s=new t5(-90,1,e,t);s.layers=this.layers,this.add(s);let l=new t5(-90,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[n,r,i,a,o,s]=t;for(let e of t)this.remove(e);if(2e3===e)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),s.up.set(0,1,0),s.lookAt(0,0,-1);else if(2001===e)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),s.up.set(0,-1,0),s.lookAt(0,0,-1);else throw Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let e of t)this.add(e),e.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();let n=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[r,i,a,o,s,l]=this.children,u=e.getRenderTarget(),c=e.xr.enabled;e.xr.enabled=!1;let f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,a),e.setRenderTarget(n,3),e.render(t,o),e.setRenderTarget(n,4),e.render(t,s),n.texture.generateMipmaps=f,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(u),e.xr.enabled=c,n.texture.needsPMREMUpdate=!0}}class t8 extends ee{constructor(e,t,n,r,i,a,o,s,l,u){super(e=void 0!==e?e:[],t=void 0!==t?t:301,n,r,i,a,o,s,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class t7 extends er{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];void 0!==t.encoding&&(// @deprecated, r152
V("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=3001===t.encoding?b:""),this.texture=new t8(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),// By convention -- likely based on the RenderMan spec from the 1990's -- cube maps are specified by WebGL (and three.js)
// in a coordinate system in which positive-x is to the right when looking up the positive-z axis -- in other words,
// in a left-handed coordinate system. By continuing this convention, preexisting cube maps continued to render correctly.
// three.js uses a right-handed coordinate system. So environment maps used in three.js appear to have px and nx swapped
// and the flag isRenderTargetTexture controls this conversion. The flip is not required when using WebGLCubeRenderTarget.texture
// as a cube texture (this is detected when isRenderTargetTexture is set to true for cube textures).
this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:1006}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let n={uniforms:{tEquirect:{value:null}},vertexShader:/* glsl */`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:/* glsl */`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new tJ(5,5,5),i=new t3({name:"CubemapFromEquirect",uniforms:tQ(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:1,blending:0});i.uniforms.tEquirect.value=t;let a=new tK(r,i),o=t.minFilter;1008===t.minFilter&&(t.minFilter=1006);let s=new t6(1,10,this);return s.update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,r){let i=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(i)}}const t9=/*@__PURE__*/new eo,ne=/*@__PURE__*/new eo,nt=/*@__PURE__*/new D;class nn{constructor(e=new eo(1,0,0),t=0){this.isPlane=!0,// normal is assumed to be normalized
this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){let r=t9.subVectors(n,t).cross(ne.subVectors(e,t)).normalize();return(// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?
this.setFromNormalAndCoplanarPoint(r,e),this)}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){// Note: will lead to a divide by zero if the plane is invalid.
let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let n=e.delta(t9),r=this.normal.dot(n);if(0===r)return(// line is coplanar, return origin
0===this.distanceToPoint(e.start)?t.copy(e.start):null);let i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(e.start).addScaledVector(n,i)}intersectsLine(e){// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.
let t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let n=t||nt.getNormalMatrix(e),r=this.coplanarPoint(t9).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const nr=/*@__PURE__*/new eA,ni=/*@__PURE__*/new eo;class na{constructor(e=new nn,t=new nn,n=new nn,r=new nn,i=new nn,a=new nn){this.planes=[e,t,n,r,i,a]}set(e,t,n,r,i,a){let o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this}copy(e){let t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=2e3){let n=this.planes,r=e.elements,i=r[0],a=r[1],o=r[2],s=r[3],l=r[4],u=r[5],c=r[6],f=r[7],h=r[8],d=r[9],p=r[10],m=r[11],g=r[12],v=r[13],y=r[14],_=r[15];if(n[0].setComponents(s-i,f-l,m-h,_-g).normalize(),n[1].setComponents(s+i,f+l,m+h,_+g).normalize(),n[2].setComponents(s+a,f+u,m+d,_+v).normalize(),n[3].setComponents(s-a,f-u,m-d,_-v).normalize(),n[4].setComponents(s-o,f-c,m-p,_-y).normalize(),2e3===t)n[5].setComponents(s+o,f+c,m+p,_+y).normalize();else if(2001===t)n[5].setComponents(o,c,p,y).normalize();else throw Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),nr.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),nr.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(nr)}intersectsSprite(e){return nr.center.set(0,0,0),nr.radius=.7071067811865476,nr.applyMatrix4(e.matrixWorld),this.intersectsSphere(nr)}intersectsSphere(e){let t=this.planes,n=e.center,r=-e.radius;for(let e=0;e<6;e++){let i=t[e].distanceToPoint(n);if(i<r)return!1}return!0}intersectsBox(e){let t=this.planes;for(let n=0;n<6;n++){let r=t[n];if(// corner at max distance
ni.x=r.normal.x>0?e.max.x:e.min.x,ni.y=r.normal.y>0?e.max.y:e.min.y,ni.z=r.normal.z>0?e.max.z:e.min.z,0>r.distanceToPoint(ni))return!1}return!0}containsPoint(e){let t=this.planes;for(let n=0;n<6;n++)if(0>t[n].distanceToPoint(e))return!1;return!0}clone(){return new this.constructor().copy(this)}}function no(){let e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function ns(e,t){let n=t.isWebGL2,r=new WeakMap;return{get://
function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);let n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){let e=r.get(t);(!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version});return}t.isInterleavedBufferAttribute&&(t=t.data);let a=r.get(t);void 0===a?r.set(t,function(t,r){let i;let a=t.array,o=t.usage,s=e.createBuffer();if(e.bindBuffer(r,s),e.bufferData(r,a,o),t.onUploadCallback(),a instanceof Float32Array)i=e.FLOAT;else if(a instanceof Uint16Array){if(t.isFloat16BufferAttribute){if(n)i=e.HALF_FLOAT;else throw Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.")}else i=e.UNSIGNED_SHORT}else if(a instanceof Int16Array)i=e.SHORT;else if(a instanceof Uint32Array)i=e.UNSIGNED_INT;else if(a instanceof Int32Array)i=e.INT;else if(a instanceof Int8Array)i=e.BYTE;else if(a instanceof Uint8Array)i=e.UNSIGNED_BYTE;else if(a instanceof Uint8ClampedArray)i=e.UNSIGNED_BYTE;else throw Error("THREE.WebGLAttributes: Unsupported buffer data format: "+a);return{buffer:s,type:i,bytesPerElement:a.BYTES_PER_ELEMENT,version:t.version}}(t,i)):a.version<t.version&&(!function(t,r,i){let a=r.array,o=r.updateRange;e.bindBuffer(i,t),-1===o.count?e.bufferSubData(i,0,a):(n?e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1),r.onUploadCallback()}(a.buffer,t,i),a.version=t.version)}}}class nl extends tO{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};let i=e/2,a=t/2,o=Math.floor(n),s=Math.floor(r),l=o+1,u=s+1,c=e/o,f=t/s,h=[],d=[],p=[],m=[];for(let e=0;e<u;e++){let t=e*f-a;for(let n=0;n<l;n++){let r=n*c-i;d.push(r,-t,0),p.push(0,0,1),m.push(n/o),m.push(1-e/s)}}for(let e=0;e<s;e++)for(let t=0;t<o;t++){let n=t+l*e,r=t+l*(e+1),i=t+1+l*(e+1),a=t+1+l*e;h.push(n,r,a),h.push(r,i,a)}this.setIndex(h),this.setAttribute("position",new tw(d,3)),this.setAttribute("normal",new tw(p,3)),this.setAttribute("uv",new tw(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nl(e.width,e.height,e.widthSegments,e.heightSegments)}}const nu={alphahash_fragment:"#ifdef USE_ALPHAHASH\n	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n	const float ALPHA_HASH_SCALE = 0.05;\n	float hash2D( vec2 value ) {\n		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n	}\n	float hash3D( vec3 value ) {\n		return hash2D( vec2( hash2D( value.xy ), value.z ) );\n	}\n	float getAlphaHashThreshold( vec3 position ) {\n		float maxDeriv = max(\n			length( dFdx( position.xyz ) ),\n			length( dFdy( position.xyz ) )\n		);\n		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n		vec2 pixScales = vec2(\n			exp2( floor( log2( pixScale ) ) ),\n			exp2( ceil( log2( pixScale ) ) )\n		);\n		vec2 alpha = vec2(\n			hash3D( floor( pixScales.x * position.xyz ) ),\n			hash3D( floor( pixScales.y * position.xyz ) )\n		);\n		float lerpFactor = fract( log2( pixScale ) );\n		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n		float a = min( lerpFactor, 1.0 - lerpFactor );\n		vec3 cases = vec3(\n			x * x / ( 2.0 * a * ( 1.0 - a ) ),\n			( x - 0.5 * a ) / ( 1.0 - a ),\n			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n		);\n		float threshold = ( x < ( 1.0 - a ) )\n			? ( ( x < a ) ? cases.x : cases.y )\n			: cases.z;\n		return clamp( threshold , 1.0e-6, 1.0 );\n	}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n	if ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n	uniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n	reflectedLight.indirectDiffuse *= ambientOcclusion;\n	#if defined( USE_ENVMAP ) && defined( STANDARD )\n		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n	#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n	uniform sampler2D aoMap;\n	uniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n	vPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n	vec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n	return 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotVH = saturate( dot( viewDir, halfDir ) );\n	vec3 F = F_Schlick( specularColor, 1.0, dotVH );\n	float G = G_BlinnPhong_Implicit( );\n	float D = D_BlinnPhong( shininess, dotNH );\n	return F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n	const mat3 XYZ_TO_REC709 = mat3(\n		 3.2404542, -0.9692660,  0.0556434,\n		-1.5371385,  1.8760108, -0.2040259,\n		-0.4985314,  0.0415560,  1.0572252\n	);\n	vec3 Fresnel0ToIor( vec3 fresnel0 ) {\n		vec3 sqrtF0 = sqrt( fresnel0 );\n		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n	}\n	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n	}\n	float IorToFresnel0( float transmittedIor, float incidentIor ) {\n		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n	}\n	vec3 evalSensitivity( float OPD, vec3 shift ) {\n		float phase = 2.0 * PI * OPD * 1.0e-9;\n		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n		xyz /= 1.0685e-7;\n		vec3 rgb = XYZ_TO_REC709 * xyz;\n		return rgb;\n	}\n	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n		vec3 I;\n		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n		float cosTheta2Sq = 1.0 - sinTheta2Sq;\n		if ( cosTheta2Sq < 0.0 ) {\n			return vec3( 1.0 );\n		}\n		float cosTheta2 = sqrt( cosTheta2Sq );\n		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n		float R12 = F_Schlick( R0, 1.0, cosTheta1 );\n		float T121 = 1.0 - R12;\n		float phi12 = 0.0;\n		if ( iridescenceIOR < outsideIOR ) phi12 = PI;\n		float phi21 = PI - phi12;\n		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n		vec3 phi23 = vec3( 0.0 );\n		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n		vec3 phi = vec3( phi21 ) + phi23;\n		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n		vec3 r123 = sqrt( R123 );\n		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n		vec3 C0 = R12 + Rs;\n		I = C0;\n		vec3 Cm = Rs - T121;\n		for ( int m = 1; m <= 2; ++ m ) {\n			Cm *= r123;\n			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n			I += Cm * Sm;\n		}\n		return max( I, vec3( 0.0 ) );\n	}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n	vec2 dHdxy_fwd() {\n		vec2 dSTdx = dFdx( vBumpMapUv );\n		vec2 dSTdy = dFdy( vBumpMapUv );\n		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n		return vec2( dBx, dBy );\n	}\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n		vec3 vSigmaX = dFdx( surf_pos.xyz );\n		vec3 vSigmaY = dFdy( surf_pos.xyz );\n		vec3 vN = surf_norm;\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n		float fDet = dot( vSigmaX, R1 ) * faceDirection;\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n	}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n	vec4 plane;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n		plane = clippingPlanes[ i ];\n		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n	}\n	#pragma unroll_loop_end\n	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n		bool clipped = true;\n		#pragma unroll_loop_start\n		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n			plane = clippingPlanes[ i ];\n			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n		}\n		#pragma unroll_loop_end\n		if ( clipped ) discard;\n	#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n	vClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n	diffuseColor *= vColor;\n#elif defined( USE_COLOR )\n	diffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n	varying vec4 vColor;\n#elif defined( USE_COLOR )\n	varying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n	varying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n	varying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n	vColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n	vColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n	vColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n	vColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n	const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n	return fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n	float precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n	float precisionSafeLength( vec3 v ) {\n		float maxComponent = max3( abs( v ) );\n		return length( v / maxComponent ) * maxComponent;\n	}\n#endif\nstruct IncidentLight {\n	vec3 color;\n	vec3 direction;\n	bool visible;\n};\nstruct ReflectedLight {\n	vec3 directDiffuse;\n	vec3 directSpecular;\n	vec3 indirectDiffuse;\n	vec3 indirectSpecular;\n};\nstruct GeometricContext {\n	vec3 position;\n	vec3 normal;\n	vec3 viewDir;\n#ifdef USE_CLEARCOAT\n	vec3 clearcoatNormal;\n#endif\n};\n#ifdef USE_ALPHAHASH\n	varying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n	mat3 tmp;\n	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n	return tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n	return dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n	return m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n	return vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n	return RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n	#define cubeUV_minMipLevel 4.0\n	#define cubeUV_minTileSize 16.0\n	float getFace( vec3 direction ) {\n		vec3 absDirection = abs( direction );\n		float face = - 1.0;\n		if ( absDirection.x > absDirection.z ) {\n			if ( absDirection.x > absDirection.y )\n				face = direction.x > 0.0 ? 0.0 : 3.0;\n			else\n				face = direction.y > 0.0 ? 1.0 : 4.0;\n		} else {\n			if ( absDirection.z > absDirection.y )\n				face = direction.z > 0.0 ? 2.0 : 5.0;\n			else\n				face = direction.y > 0.0 ? 1.0 : 4.0;\n		}\n		return face;\n	}\n	vec2 getUV( vec3 direction, float face ) {\n		vec2 uv;\n		if ( face == 0.0 ) {\n			uv = vec2( direction.z, direction.y ) / abs( direction.x );\n		} else if ( face == 1.0 ) {\n			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n		} else if ( face == 2.0 ) {\n			uv = vec2( - direction.x, direction.y ) / abs( direction.z );\n		} else if ( face == 3.0 ) {\n			uv = vec2( - direction.z, direction.y ) / abs( direction.x );\n		} else if ( face == 4.0 ) {\n			uv = vec2( - direction.x, direction.z ) / abs( direction.y );\n		} else {\n			uv = vec2( direction.x, direction.y ) / abs( direction.z );\n		}\n		return 0.5 * ( uv + 1.0 );\n	}\n	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n		float face = getFace( direction );\n		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n		mipInt = max( mipInt, cubeUV_minMipLevel );\n		float faceSize = exp2( mipInt );\n		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n		if ( face > 2.0 ) {\n			uv.y += faceSize;\n			face -= 3.0;\n		}\n		uv.x += face * faceSize;\n		uv.x += filterInt * 3.0 * cubeUV_minTileSize;\n		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n		uv.x *= CUBEUV_TEXEL_WIDTH;\n		uv.y *= CUBEUV_TEXEL_HEIGHT;\n		#ifdef texture2DGradEXT\n			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n		#else\n			return texture2D( envMap, uv ).rgb;\n		#endif\n	}\n	#define cubeUV_r0 1.0\n	#define cubeUV_v0 0.339\n	#define cubeUV_m0 - 2.0\n	#define cubeUV_r1 0.8\n	#define cubeUV_v1 0.276\n	#define cubeUV_m1 - 1.0\n	#define cubeUV_r4 0.4\n	#define cubeUV_v4 0.046\n	#define cubeUV_m4 2.0\n	#define cubeUV_r5 0.305\n	#define cubeUV_v5 0.016\n	#define cubeUV_m5 3.0\n	#define cubeUV_r6 0.21\n	#define cubeUV_v6 0.0038\n	#define cubeUV_m6 4.0\n	float roughnessToMip( float roughness ) {\n		float mip = 0.0;\n		if ( roughness >= cubeUV_r1 ) {\n			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n		} else if ( roughness >= cubeUV_r4 ) {\n			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n		} else if ( roughness >= cubeUV_r5 ) {\n			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n		} else if ( roughness >= cubeUV_r6 ) {\n			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n		} else {\n			mip = - 2.0 * log2( 1.16 * roughness );		}\n		return mip;\n	}\n	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n		float mipF = fract( mip );\n		float mipInt = floor( mip );\n		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n		if ( mipF == 0.0 ) {\n			return vec4( color0, 1.0 );\n		} else {\n			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n			return vec4( mix( color0, color1, mipF ), 1.0 );\n		}\n	}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n	mat3 m = mat3( instanceMatrix );\n	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n	transformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n	transformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n	#ifdef FLIP_SIDED\n		transformedTangent = - transformedTangent;\n	#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n	uniform sampler2D displacementMap;\n	uniform float displacementScale;\n	uniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n	totalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n	uniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n	return value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vec3 cameraToFrag;\n		if ( isOrthographic ) {\n			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToFrag = normalize( vWorldPosition - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( cameraToFrag, worldNormal );\n		#else\n			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n		#endif\n	#else\n		vec3 reflectVec = vReflect;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n	#else\n		vec4 envColor = vec4( 0.0 );\n	#endif\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_MIX )\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_ADD )\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n	#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n	uniform float envMapIntensity;\n	uniform float flipEnvMap;\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n	uniform float reflectivity;\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		varying vec3 vWorldPosition;\n		uniform float refractionRatio;\n	#else\n		varying vec3 vReflect;\n	#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		\n		varying vec3 vWorldPosition;\n	#else\n		varying vec3 vReflect;\n		uniform float refractionRatio;\n	#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n	vec3 getIBLIrradiance( const in vec3 normal ) {\n		#ifdef ENVMAP_TYPE_CUBE_UV\n			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n			return PI * envMapColor.rgb * envMapIntensity;\n		#else\n			return vec3( 0.0 );\n		#endif\n	}\n	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n		#ifdef ENVMAP_TYPE_CUBE_UV\n			vec3 reflectVec = reflect( - viewDir, normal );\n			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n			return envMapColor.rgb * envMapIntensity;\n		#else\n			return vec3( 0.0 );\n		#endif\n	}\n	#ifdef USE_ANISOTROPY\n		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n			#ifdef ENVMAP_TYPE_CUBE_UV\n				vec3 bentNormal = cross( bitangent, viewDir );\n				bentNormal = normalize( cross( bentNormal, bitangent ) );\n				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n				return getIBLRadiance( viewDir, bentNormal, roughness );\n			#else\n				return vec3( 0.0 );\n			#endif\n		}\n	#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vWorldPosition = worldPosition.xyz;\n	#else\n		vec3 cameraToVertex;\n		if ( isOrthographic ) {\n			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vReflect = reflect( cameraToVertex, worldNormal );\n		#else\n			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n	vFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n	varying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n	#ifdef FOG_EXP2\n		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n	#else\n		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n	#endif\n	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n	uniform vec3 fogColor;\n	varying float vFogDepth;\n	#ifdef FOG_EXP2\n		uniform float fogDensity;\n	#else\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n	uniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n	float dotNL = dot( normal, lightDirection );\n	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n	#ifdef USE_GRADIENTMAP\n		return vec3( texture2D( gradientMap, coord ).r );\n	#else\n		vec2 fw = fwidth( coord ) * 0.5;\n		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n	#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n	reflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n	uniform sampler2D lightMap;\n	uniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n	vec3 diffuseColor;\n	float specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Lambert\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n	float x = normal.x, y = normal.y, z = normal.z;\n	vec3 result = shCoefficients[ 0 ] * 0.886227;\n	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n	return result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n	return irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n	vec3 irradiance = ambientLightColor;\n	return irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n	#if defined ( LEGACY_LIGHTS )\n		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n		}\n		return 1.0;\n	#else\n		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n		if ( cutoffDistance > 0.0 ) {\n			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n		}\n		return distanceFalloff;\n	#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n	return smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n	struct DirectionalLight {\n		vec3 direction;\n		vec3 color;\n	};\n	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n		light.color = directionalLight.color;\n		light.direction = directionalLight.direction;\n		light.visible = true;\n	}\n#endif\n#if NUM_POINT_LIGHTS > 0\n	struct PointLight {\n		vec3 position;\n		vec3 color;\n		float distance;\n		float decay;\n	};\n	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n		vec3 lVector = pointLight.position - geometry.position;\n		light.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		light.color = pointLight.color;\n		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n		light.visible = ( light.color != vec3( 0.0 ) );\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	struct SpotLight {\n		vec3 position;\n		vec3 direction;\n		vec3 color;\n		float distance;\n		float decay;\n		float coneCos;\n		float penumbraCos;\n	};\n	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n		vec3 lVector = spotLight.position - geometry.position;\n		light.direction = normalize( lVector );\n		float angleCos = dot( light.direction, spotLight.direction );\n		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n		if ( spotAttenuation > 0.0 ) {\n			float lightDistance = length( lVector );\n			light.color = spotLight.color * spotAttenuation;\n			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n			light.visible = ( light.color != vec3( 0.0 ) );\n		} else {\n			light.color = vec3( 0.0 );\n			light.visible = false;\n		}\n	}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n	struct RectAreaLight {\n		vec3 color;\n		vec3 position;\n		vec3 halfWidth;\n		vec3 halfHeight;\n	};\n	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;\n	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	struct HemisphereLight {\n		vec3 direction;\n		vec3 skyColor;\n		vec3 groundColor;\n	};\n	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n		float dotNL = dot( normal, hemiLight.direction );\n		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n		return irradiance;\n	}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n	vec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Toon\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n	vec3 diffuseColor;\n	vec3 specularColor;\n	float specularShininess;\n	float specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_BlinnPhong\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n	material.ior = ior;\n	#ifdef USE_SPECULAR\n		float specularIntensityFactor = specularIntensity;\n		vec3 specularColorFactor = specularColor;\n		#ifdef USE_SPECULAR_COLORMAP\n			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n		#endif\n		#ifdef USE_SPECULAR_INTENSITYMAP\n			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n		#endif\n		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n	#else\n		float specularIntensityFactor = 1.0;\n		vec3 specularColorFactor = vec3( 1.0 );\n		material.specularF90 = 1.0;\n	#endif\n	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n	material.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n	material.clearcoat = clearcoat;\n	material.clearcoatRoughness = clearcoatRoughness;\n	material.clearcoatF0 = vec3( 0.04 );\n	material.clearcoatF90 = 1.0;\n	#ifdef USE_CLEARCOATMAP\n		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n	#endif\n	#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n	#endif\n	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n	material.clearcoatRoughness += geometryRoughness;\n	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n	material.iridescence = iridescence;\n	material.iridescenceIOR = iridescenceIOR;\n	#ifdef USE_IRIDESCENCEMAP\n		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n	#endif\n	#ifdef USE_IRIDESCENCE_THICKNESSMAP\n		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n	#else\n		material.iridescenceThickness = iridescenceThicknessMaximum;\n	#endif\n#endif\n#ifdef USE_SHEEN\n	material.sheenColor = sheenColor;\n	#ifdef USE_SHEEN_COLORMAP\n		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n	#endif\n	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n	#ifdef USE_SHEEN_ROUGHNESSMAP\n		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n	#endif\n#endif\n#ifdef USE_ANISOTROPY\n	#ifdef USE_ANISOTROPYMAP\n		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n	#else\n		vec2 anisotropyV = anisotropyVector;\n	#endif\n	material.anisotropy = length( anisotropyV );\n	anisotropyV /= material.anisotropy;\n	material.anisotropy = saturate( material.anisotropy );\n	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;\n	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n	vec3 diffuseColor;\n	float roughness;\n	vec3 specularColor;\n	float specularF90;\n	#ifdef USE_CLEARCOAT\n		float clearcoat;\n		float clearcoatRoughness;\n		vec3 clearcoatF0;\n		float clearcoatF90;\n	#endif\n	#ifdef USE_IRIDESCENCE\n		float iridescence;\n		float iridescenceIOR;\n		float iridescenceThickness;\n		vec3 iridescenceFresnel;\n		vec3 iridescenceF0;\n	#endif\n	#ifdef USE_SHEEN\n		vec3 sheenColor;\n		float sheenRoughness;\n	#endif\n	#ifdef IOR\n		float ior;\n	#endif\n	#ifdef USE_TRANSMISSION\n		float transmission;\n		float transmissionAlpha;\n		float thickness;\n		float attenuationDistance;\n		vec3 attenuationColor;\n	#endif\n	#ifdef USE_ANISOTROPY\n		float anisotropy;\n		float alphaT;\n		vec3 anisotropyT;\n		vec3 anisotropyB;\n	#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	return 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n	float a2 = pow2( alpha );\n	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n	return RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n		float v = 0.5 / ( gv + gl );\n		return saturate(v);\n	}\n	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n		float a2 = alphaT * alphaB;\n		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n		highp float v2 = dot( v, v );\n		float w2 = a2 / v2;\n		return RECIPROCAL_PI * a2 * pow2 ( w2 );\n	}\n#endif\n#ifdef USE_CLEARCOAT\n	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n		vec3 f0 = material.clearcoatF0;\n		float f90 = material.clearcoatF90;\n		float roughness = material.clearcoatRoughness;\n		float alpha = pow2( roughness );\n		vec3 halfDir = normalize( lightDir + viewDir );\n		float dotNL = saturate( dot( normal, lightDir ) );\n		float dotNV = saturate( dot( normal, viewDir ) );\n		float dotNH = saturate( dot( normal, halfDir ) );\n		float dotVH = saturate( dot( viewDir, halfDir ) );\n		vec3 F = F_Schlick( f0, f90, dotVH );\n		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n		float D = D_GGX( alpha, dotNH );\n		return F * ( V * D );\n	}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n	vec3 f0 = material.specularColor;\n	float f90 = material.specularF90;\n	float roughness = material.roughness;\n	float alpha = pow2( roughness );\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotVH = saturate( dot( viewDir, halfDir ) );\n	vec3 F = F_Schlick( f0, f90, dotVH );\n	#ifdef USE_IRIDESCENCE\n		F = mix( F, material.iridescenceFresnel, material.iridescence );\n	#endif\n	#ifdef USE_ANISOTROPY\n		float dotTL = dot( material.anisotropyT, lightDir );\n		float dotTV = dot( material.anisotropyT, viewDir );\n		float dotTH = dot( material.anisotropyT, halfDir );\n		float dotBL = dot( material.anisotropyB, lightDir );\n		float dotBV = dot( material.anisotropyB, viewDir );\n		float dotBH = dot( material.anisotropyB, halfDir );\n		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n	#else\n		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n		float D = D_GGX( alpha, dotNH );\n	#endif\n	return F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n	const float LUT_SIZE = 64.0;\n	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n	const float LUT_BIAS = 0.5 / LUT_SIZE;\n	float dotNV = saturate( dot( N, V ) );\n	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n	uv = uv * LUT_SCALE + LUT_BIAS;\n	return uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n	float l = length( f );\n	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n	float x = dot( v1, v2 );\n	float y = abs( x );\n	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n	float b = 3.4175940 + ( 4.1616724 + y ) * y;\n	float v = a / b;\n	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n	return cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n	vec3 lightNormal = cross( v1, v2 );\n	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n	vec3 T1, T2;\n	T1 = normalize( V - N * dot( V, N ) );\n	T2 = - cross( N, T1 );\n	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n	vec3 coords[ 4 ];\n	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n	coords[ 0 ] = normalize( coords[ 0 ] );\n	coords[ 1 ] = normalize( coords[ 1 ] );\n	coords[ 2 ] = normalize( coords[ 2 ] );\n	coords[ 3 ] = normalize( coords[ 3 ] );\n	vec3 vectorFormFactor = vec3( 0.0 );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n	return vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n	float alpha = pow2( roughness );\n	float invAlpha = 1.0 / alpha;\n	float cos2h = dotNH * dotNH;\n	float sin2h = max( 1.0 - cos2h, 0.0078125 );\n	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float D = D_Charlie( sheenRoughness, dotNH );\n	float V = V_Neubelt( dotNV, dotNL );\n	return sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float r2 = roughness * roughness;\n	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n	return saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n	vec4 r = roughness * c0 + c1;\n	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n	return fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n	vec2 fab = DFGApprox( normal, viewDir, roughness );\n	return specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n	vec2 fab = DFGApprox( normal, viewDir, roughness );\n	#ifdef USE_IRIDESCENCE\n		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n	#else\n		vec3 Fr = specularColor;\n	#endif\n	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n	float Ess = fab.x + fab.y;\n	float Ems = 1.0 - Ess;\n	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n	singleScatter += FssEss;\n	multiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n		vec3 normal = geometry.normal;\n		vec3 viewDir = geometry.viewDir;\n		vec3 position = geometry.position;\n		vec3 lightPos = rectAreaLight.position;\n		vec3 halfWidth = rectAreaLight.halfWidth;\n		vec3 halfHeight = rectAreaLight.halfHeight;\n		vec3 lightColor = rectAreaLight.color;\n		float roughness = material.roughness;\n		vec3 rectCoords[ 4 ];\n		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n		vec2 uv = LTC_Uv( normal, viewDir, roughness );\n		vec4 t1 = texture2D( ltc_1, uv );\n		vec4 t2 = texture2D( ltc_2, uv );\n		mat3 mInv = mat3(\n			vec3( t1.x, 0, t1.y ),\n			vec3(    0, 1,    0 ),\n			vec3( t1.z, 0, t1.w )\n		);\n		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n	}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	#ifdef USE_CLEARCOAT\n		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n		vec3 ccIrradiance = dotNLcc * directLight.color;\n		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n	#endif\n	#ifdef USE_SHEEN\n		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n	#endif\n	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n	#ifdef USE_CLEARCOAT\n		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n	#endif\n	#ifdef USE_SHEEN\n		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n	#endif\n	vec3 singleScattering = vec3( 0.0 );\n	vec3 multiScattering = vec3( 0.0 );\n	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n	#ifdef USE_IRIDESCENCE\n		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n	#else\n		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n	#endif\n	vec3 totalScattering = singleScattering + multiScattering;\n	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n	reflectedLight.indirectSpecular += radiance * singleScattering;\n	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct				RE_Direct_Physical\n#define RE_Direct_RectArea		RE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular		RE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n	geometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n	float dotNVi = saturate( dot( normal, geometry.viewDir ) );\n	if ( material.iridescenceThickness == 0.0 ) {\n		material.iridescence = 0.0;\n	} else {\n		material.iridescence = saturate( material.iridescence );\n	}\n	if ( material.iridescence > 0.0 ) {\n		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n	}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n	PointLight pointLight;\n	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		getPointLightInfo( pointLight, geometry, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n		pointLightShadow = pointLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n	SpotLight spotLight;\n	vec4 spotColor;\n	vec3 spotLightCoord;\n	bool inSpotLightMap;\n	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		getSpotLightInfo( spotLight, geometry, directLight );\n		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n		#else\n		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n		#endif\n		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n		#endif\n		#undef SPOT_LIGHT_MAP_INDEX\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		spotLightShadow = spotLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n	DirectionalLight directionalLight;\n	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		getDirectionalLightInfo( directionalLight, geometry, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n		directionalLightShadow = directionalLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n	RectAreaLight rectAreaLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n		rectAreaLight = rectAreaLights[ i ];\n		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n	vec3 iblIrradiance = vec3( 0.0 );\n	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n	#if ( NUM_HEMI_LIGHTS > 0 )\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n		}\n		#pragma unroll_loop_end\n	#endif\n#endif\n#if defined( RE_IndirectSpecular )\n	vec3 radiance = vec3( 0.0 );\n	vec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n		irradiance += lightMapIrradiance;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n		iblIrradiance += getIBLIrradiance( geometry.normal );\n	#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n	#ifdef USE_ANISOTROPY\n		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );\n	#else\n		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n	#endif\n	#ifdef USE_CLEARCOAT\n		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n	#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n	uniform float logDepthBufFC;\n	varying float vFragDepth;\n	varying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n	#ifdef USE_LOGDEPTHBUF_EXT\n		varying float vFragDepth;\n		varying float vIsPerspective;\n	#else\n		uniform float logDepthBufFC;\n	#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n	#ifdef USE_LOGDEPTHBUF_EXT\n		vFragDepth = 1.0 + gl_Position.w;\n		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n	#else\n		if ( isPerspectiveMatrix( projectionMatrix ) ) {\n			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n			gl_Position.z *= gl_Position.w;\n		}\n	#endif\n#endif",map_fragment:"#ifdef USE_MAP\n	vec4 sampledDiffuseColor = texture2D( map, vMapUv );\n	#ifdef DECODE_VIDEO_TEXTURE\n		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n	\n	#endif\n	diffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n	uniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n	#if defined( USE_POINTS_UV )\n		vec2 uv = vUv;\n	#else\n		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n	#endif\n#endif\n#ifdef USE_MAP\n	diffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n	varying vec2 vUv;\n#else\n	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n		uniform mat3 uvTransform;\n	#endif\n#endif\n#ifdef USE_MAP\n	uniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n	metalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n	uniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n	vColor *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		#if defined( USE_COLOR_ALPHA )\n			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n		#elif defined( USE_COLOR )\n			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n		#endif\n	}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n	objectNormal *= morphTargetBaseInfluence;\n	#ifdef MORPHTARGETS_TEXTURE\n		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n		}\n	#else\n		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n	#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n	uniform float morphTargetBaseInfluence;\n	#ifdef MORPHTARGETS_TEXTURE\n		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n		uniform sampler2DArray morphTargetsTexture;\n		uniform ivec2 morphTargetsTextureSize;\n		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n			int y = texelIndex / morphTargetsTextureSize.x;\n			int x = texelIndex - y * morphTargetsTextureSize.x;\n			ivec3 morphUV = ivec3( x, y, morphTargetIndex );\n			return texelFetch( morphTargetsTexture, morphUV, 0 );\n		}\n	#else\n		#ifndef USE_MORPHNORMALS\n			uniform float morphTargetInfluences[ 8 ];\n		#else\n			uniform float morphTargetInfluences[ 4 ];\n		#endif\n	#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n	transformed *= morphTargetBaseInfluence;\n	#ifdef MORPHTARGETS_TEXTURE\n		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n		}\n	#else\n		transformed += morphTarget0 * morphTargetInfluences[ 0 ];\n		transformed += morphTarget1 * morphTargetInfluences[ 1 ];\n		transformed += morphTarget2 * morphTargetInfluences[ 2 ];\n		transformed += morphTarget3 * morphTargetInfluences[ 3 ];\n		#ifndef USE_MORPHNORMALS\n			transformed += morphTarget4 * morphTargetInfluences[ 4 ];\n			transformed += morphTarget5 * morphTargetInfluences[ 5 ];\n			transformed += morphTarget6 * morphTargetInfluences[ 6 ];\n			transformed += morphTarget7 * morphTargetInfluences[ 7 ];\n		#endif\n	#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n	vec3 fdx = dFdx( vViewPosition );\n	vec3 fdy = dFdy( vViewPosition );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n#else\n	vec3 normal = normalize( vNormal );\n	#ifdef DOUBLE_SIDED\n		normal *= faceDirection;\n	#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n	#ifdef USE_TANGENT\n		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n	#else\n		mat3 tbn = getTangentFrame( - vViewPosition, normal,\n		#if defined( USE_NORMALMAP )\n			vNormalMapUv\n		#elif defined( USE_CLEARCOAT_NORMALMAP )\n			vClearcoatNormalMapUv\n		#else\n			vUv\n		#endif\n		);\n	#endif\n	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n		tbn[0] *= faceDirection;\n		tbn[1] *= faceDirection;\n	#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	#ifdef USE_TANGENT\n		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n	#else\n		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n	#endif\n	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n		tbn2[0] *= faceDirection;\n		tbn2[1] *= faceDirection;\n	#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n	#ifdef FLIP_SIDED\n		normal = - normal;\n	#endif\n	#ifdef DOUBLE_SIDED\n		normal = normal * faceDirection;\n	#endif\n	normal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n	mapN.xy *= normalScale;\n	normal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n	#ifdef USE_TANGENT\n		vTangent = normalize( transformedTangent );\n		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n	#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n	uniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( uv.st );\n		vec2 st1 = dFdy( uv.st );\n		vec3 N = surf_norm;\n		vec3 q1perp = cross( q1, N );\n		vec3 q0perp = cross( N, q0 );\n		vec3 T = q1perp * st0.x + q0perp * st1.x;\n		vec3 B = q1perp * st0.y + q0perp * st1.y;\n		float det = max( dot( T, T ), dot( B, B ) );\n		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n		return mat3( T * scale, B * scale, N );\n	}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n	vec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n	clearcoatMapN.xy *= clearcoatNormalScale;\n	clearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n	uniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	uniform sampler2D clearcoatNormalMap;\n	uniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	uniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n	uniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	uniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n	return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n	return 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n	vec4 r = vec4( fract( v * PackFactors ), v );\n	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n	return dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n	return packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n	return depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n	return ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n	gl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n	mvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n	gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n	vec3 dithering( vec3 color ) {\n		float grid_position = rand( gl_FragCoord.xy );\n		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n		return color + dither_shift_RGB;\n	}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n	roughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n	uniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n		struct DirectionalLightShadow {\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n		struct SpotLightShadow {\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n		struct PointLightShadow {\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n	}\n	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n		return unpackRGBATo2Half( texture2D( shadow, uv ) );\n	}\n	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n		float occlusion = 1.0;\n		vec2 distribution = texture2DDistribution( shadow, uv );\n		float hard_shadow = step( compare , distribution.x );\n		if (hard_shadow != 1.0 ) {\n			float distance = compare - distribution.x ;\n			float variance = max( 0.00000, distribution.y * distribution.y );\n			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n		}\n		return occlusion;\n	}\n	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n		float shadow = 1.0;\n		shadowCoord.xyz /= shadowCoord.w;\n		shadowCoord.z += shadowBias;\n		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n		if ( frustumTest ) {\n		#if defined( SHADOWMAP_TYPE_PCF )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			float dx2 = dx0 / 2.0;\n			float dy2 = dy0 / 2.0;\n			float dx3 = dx1 / 2.0;\n			float dy3 = dy1 / 2.0;\n			shadow = (\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 17.0 );\n		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx = texelSize.x;\n			float dy = texelSize.y;\n			vec2 uv = shadowCoord.xy;\n			vec2 f = fract( uv * shadowMapSize + 0.5 );\n			uv -= f * texelSize;\n			shadow = (\n				texture2DCompare( shadowMap, uv, shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n					 f.x ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n					 f.x ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n					 f.y ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n					 f.y ) +\n				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n						  f.x ),\n					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n						  f.x ),\n					 f.y )\n			) * ( 1.0 / 9.0 );\n		#elif defined( SHADOWMAP_TYPE_VSM )\n			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#else\n			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#endif\n		}\n		return shadow;\n	}\n	vec2 cubeToUV( vec3 v, float texelSizeY ) {\n		vec3 absV = abs( v );\n		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n		absV *= scaleToCube;\n		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n		vec2 planar = v.xy;\n		float almostATexel = 1.5 * texelSizeY;\n		float almostOne = 1.0 - almostATexel;\n		if ( absV.z >= almostOne ) {\n			if ( v.z > 0.0 )\n				planar.x = 4.0 - v.x;\n		} else if ( absV.x >= almostOne ) {\n			float signX = sign( v.x );\n			planar.x = v.z * signX + 2.0 * signX;\n		} else if ( absV.y >= almostOne ) {\n			float signY = sign( v.y );\n			planar.x = v.x + 2.0 * signY + 2.0;\n			planar.y = v.z * signY - 2.0;\n		}\n		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n	}\n	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n		vec3 lightToPosition = shadowCoord.xyz;\n		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;\n		vec3 bd3D = normalize( lightToPosition );\n		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n			return (\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n			) * ( 1.0 / 9.0 );\n		#else\n			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n		#endif\n	}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n		struct DirectionalLightShadow {\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		struct SpotLightShadow {\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n		struct PointLightShadow {\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n	vec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n		}\n		#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n		}\n		#pragma unroll_loop_end\n	#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n		shadowWorldPosition = worldPosition;\n		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n		#endif\n		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n	}\n	#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n	float shadow = 1.0;\n	#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n		directionalLight = directionalLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n		spotLight = spotLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n		pointLight = pointLightShadows[ i ];\n		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#endif\n	return shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n	uniform highp sampler2D boneTexture;\n	uniform int boneTextureSize;\n	mat4 getBoneMatrix( const in float i ) {\n		float j = i * 4.0;\n		float x = mod( j, float( boneTextureSize ) );\n		float y = floor( j / float( boneTextureSize ) );\n		float dx = 1.0 / float( boneTextureSize );\n		float dy = 1.0 / float( boneTextureSize );\n		y = dy * ( y + 0.5 );\n		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n		mat4 bone = mat4( v1, v2, v3, v4 );\n		return bone;\n	}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	transformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n	#ifdef USE_TANGENT\n		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n	#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n	specularStrength = texelSpecular.r;\n#else\n	specularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n	uniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n	return saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	return saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	color = max( vec3( 0.0 ), color - 0.004 );\n	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n	return a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n	const mat3 ACESInputMat = mat3(\n		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),\n		vec3( 0.04823, 0.01566, 0.83777 )\n	);\n	const mat3 ACESOutputMat = mat3(\n		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),\n		vec3( -0.07367, -0.00605,  1.07602 )\n	);\n	color *= toneMappingExposure / 0.6;\n	color = ACESInputMat * color;\n	color = RRTAndODTFit( color );\n	color = ACESOutputMat * color;\n	return saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n	material.transmission = transmission;\n	material.transmissionAlpha = 1.0;\n	material.thickness = thickness;\n	material.attenuationDistance = attenuationDistance;\n	material.attenuationColor = attenuationColor;\n	#ifdef USE_TRANSMISSIONMAP\n		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n	#endif\n	#ifdef USE_THICKNESSMAP\n		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n	#endif\n	vec3 pos = vWorldPosition;\n	vec3 v = normalize( cameraPosition - pos );\n	vec3 n = inverseTransformDirection( normal, viewMatrix );\n	vec4 transmitted = getIBLVolumeRefraction(\n		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n		material.attenuationColor, material.attenuationDistance );\n	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n	uniform float transmission;\n	uniform float thickness;\n	uniform float attenuationDistance;\n	uniform vec3 attenuationColor;\n	#ifdef USE_TRANSMISSIONMAP\n		uniform sampler2D transmissionMap;\n	#endif\n	#ifdef USE_THICKNESSMAP\n		uniform sampler2D thicknessMap;\n	#endif\n	uniform vec2 transmissionSamplerSize;\n	uniform sampler2D transmissionSamplerMap;\n	uniform mat4 modelMatrix;\n	uniform mat4 projectionMatrix;\n	varying vec3 vWorldPosition;\n	float w0( float a ) {\n		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n	}\n	float w1( float a ) {\n		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n	}\n	float w2( float a ){\n		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n	}\n	float w3( float a ) {\n		return ( 1.0 / 6.0 ) * ( a * a * a );\n	}\n	float g0( float a ) {\n		return w0( a ) + w1( a );\n	}\n	float g1( float a ) {\n		return w2( a ) + w3( a );\n	}\n	float h0( float a ) {\n		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n	}\n	float h1( float a ) {\n		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n	}\n	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n		uv = uv * texelSize.zw + 0.5;\n		vec2 iuv = floor( uv );\n		vec2 fuv = fract( uv );\n		float g0x = g0( fuv.x );\n		float g1x = g1( fuv.x );\n		float h0x = h0( fuv.x );\n		float h1x = h1( fuv.x );\n		float h0y = h0( fuv.y );\n		float h1y = h1( fuv.y );\n		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n	}\n	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n		vec2 fLodSizeInv = 1.0 / fLodSize;\n		vec2 cLodSizeInv = 1.0 / cLodSize;\n		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n		return mix( fSample, cSample, fract( lod ) );\n	}\n	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n		vec3 modelScale;\n		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n		return normalize( refractionVector ) * thickness * modelScale;\n	}\n	float applyIorToRoughness( const in float roughness, const in float ior ) {\n		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n	}\n	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n	}\n	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n		if ( isinf( attenuationDistance ) ) {\n			return vec3( 1.0 );\n		} else {\n			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;\n		}\n	}\n	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n		const in vec3 attenuationColor, const in float attenuationDistance ) {\n		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n		vec3 refractedRayExit = position + transmissionRay;\n		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n		vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n		refractionCoords += 1.0;\n		refractionCoords /= 2.0;\n		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n		vec3 attenuatedColor = transmittance * transmittedLight.rgb;\n		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n	}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	varying vec2 vUv;\n#endif\n#ifdef USE_MAP\n	varying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n	varying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n	varying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n	varying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n	varying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n	varying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n	varying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n	varying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	varying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	varying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n	varying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	varying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	varying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	varying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	varying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	varying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	varying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n	varying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	varying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	varying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	uniform mat3 transmissionMapTransform;\n	varying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n	uniform mat3 thicknessMapTransform;\n	varying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	varying vec2 vUv;\n#endif\n#ifdef USE_MAP\n	uniform mat3 mapTransform;\n	varying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n	uniform mat3 alphaMapTransform;\n	varying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n	uniform mat3 lightMapTransform;\n	varying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n	uniform mat3 aoMapTransform;\n	varying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n	uniform mat3 bumpMapTransform;\n	varying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n	uniform mat3 normalMapTransform;\n	varying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n	uniform mat3 displacementMapTransform;\n	varying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n	uniform mat3 emissiveMapTransform;\n	varying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n	uniform mat3 metalnessMapTransform;\n	varying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	uniform mat3 roughnessMapTransform;\n	varying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	uniform mat3 anisotropyMapTransform;\n	varying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n	uniform mat3 clearcoatMapTransform;\n	varying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	uniform mat3 clearcoatNormalMapTransform;\n	varying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	uniform mat3 clearcoatRoughnessMapTransform;\n	varying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	uniform mat3 sheenColorMapTransform;\n	varying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	uniform mat3 sheenRoughnessMapTransform;\n	varying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	uniform mat3 iridescenceMapTransform;\n	varying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	uniform mat3 iridescenceThicknessMapTransform;\n	varying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n	uniform mat3 specularMapTransform;\n	varying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	uniform mat3 specularColorMapTransform;\n	varying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	uniform mat3 specularIntensityMapTransform;\n	varying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	uniform mat3 transmissionMapTransform;\n	varying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n	uniform mat3 thicknessMapTransform;\n	varying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	vUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n	vec4 worldPosition = vec4( transformed, 1.0 );\n	#ifdef USE_INSTANCING\n		worldPosition = instanceMatrix * worldPosition;\n	#endif\n	worldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	gl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n	vec4 texColor = texture2D( t2D, vUv );\n	#ifdef DECODE_VIDEO_TEXTURE\n		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n	#endif\n	texColor.rgb *= backgroundIntensity;\n	gl_FragColor = texColor;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n	uniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n	uniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n	#elif defined( ENVMAP_TYPE_CUBE_UV )\n		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n	#else\n		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n	#endif\n	texColor.rgb *= backgroundIntensity;\n	gl_FragColor = texColor;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n	gl_FragColor = texColor;\n	gl_FragColor.a *= opacity;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	#include <uv_vertex>\n	#include <skinbase_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n	uniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( 1.0 );\n	#if DEPTH_PACKING == 3200\n		diffuseColor.a = opacity;\n	#endif\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <logdepthbuf_fragment>\n	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n	#if DEPTH_PACKING == 3200\n		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n	#elif DEPTH_PACKING == 3201\n		gl_FragColor = packDepthToRGBA( fragCoordZ );\n	#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <skinbase_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <clipping_planes_vertex>\n	vWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	float dist = length( vWorldPosition - referencePosition );\n	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n	dist = saturate( dist );\n	gl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vec3 direction = normalize( vWorldDirection );\n	vec2 sampleUV = equirectUv( direction );\n	gl_FragColor = texture2D( tEquirect, sampleUV );\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	vLineDistance = scale * lineDistance;\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinbase_vertex>\n		#include <skinnormal_vertex>\n		#include <defaultnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n	#else\n		reflectedLight.indirectDiffuse += vec3( 1.0 );\n	#endif\n	#include <aomap_fragment>\n	reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n	vec3 outgoingLight = reflectedLight.indirectDiffuse;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_lambert_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n	vViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	vec3 viewDir = normalize( vViewPosition );\n	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n	vec3 y = cross( viewDir, x );\n	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n	#ifdef USE_MATCAP\n		vec4 matcapColor = texture2D( matcap, uv );\n	#else\n		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n	#endif\n	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	varying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	vViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	varying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n	#ifdef OPAQUE\n		gl_FragColor.a = 1.0;\n	#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_phong_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n	varying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n	vWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n	#define IOR\n	#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n	uniform float ior;\n#endif\n#ifdef USE_SPECULAR\n	uniform float specularIntensity;\n	uniform vec3 specularColor;\n	#ifdef USE_SPECULAR_COLORMAP\n		uniform sampler2D specularColorMap;\n	#endif\n	#ifdef USE_SPECULAR_INTENSITYMAP\n		uniform sampler2D specularIntensityMap;\n	#endif\n#endif\n#ifdef USE_CLEARCOAT\n	uniform float clearcoat;\n	uniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n	uniform float iridescence;\n	uniform float iridescenceIOR;\n	uniform float iridescenceThicknessMinimum;\n	uniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n	uniform vec3 sheenColor;\n	uniform float sheenRoughness;\n	#ifdef USE_SHEEN_COLORMAP\n		uniform sampler2D sheenColorMap;\n	#endif\n	#ifdef USE_SHEEN_ROUGHNESSMAP\n		uniform sampler2D sheenRoughnessMap;\n	#endif\n#endif\n#ifdef USE_ANISOTROPY\n	uniform vec2 anisotropyVector;\n	#ifdef USE_ANISOTROPYMAP\n		uniform sampler2D anisotropyMap;\n	#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <roughnessmap_fragment>\n	#include <metalnessmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <clearcoat_normal_fragment_begin>\n	#include <clearcoat_normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_physical_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n	#include <transmission_fragment>\n	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n	#ifdef USE_SHEEN\n		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n	#endif\n	#ifdef USE_CLEARCOAT\n		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n	#endif\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_toon_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n	varying vec2 vUv;\n	uniform mat3 uvTransform;\n#endif\nvoid main() {\n	#ifdef USE_POINTS_UV\n		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	#endif\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	gl_PointSize = size;\n	#ifdef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n	#endif\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_particle_fragment>\n	#include <color_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n	#include <logdepthbuf_fragment>\n	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n	vec2 scale;\n	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n	#ifndef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) scale *= - mvPosition.z;\n	#endif\n	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n	vec2 rotatedPosition;\n	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n	mvPosition.xy += rotatedPosition;\n	gl_Position = projectionMatrix * mvPosition;\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n}"},nc={common:{diffuse:{value:/*@__PURE__*/new tg(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:/*@__PURE__*/new D},alphaMap:{value:null},alphaMapTransform:{value:/*@__PURE__*/new D},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:/*@__PURE__*/new D}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:/*@__PURE__*/new D}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:/*@__PURE__*/new D}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:/*@__PURE__*/new D},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:/*@__PURE__*/new D},normalScale:{value:/*@__PURE__*/new N(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:/*@__PURE__*/new D},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:/*@__PURE__*/new D}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:/*@__PURE__*/new D}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:/*@__PURE__*/new D}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:/*@__PURE__*/new tg(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},// TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src
rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:/*@__PURE__*/new tg(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:/*@__PURE__*/new D},alphaTest:{value:0},uvTransform:{value:/*@__PURE__*/new D}},sprite:{diffuse:{value:/*@__PURE__*/new tg(16777215)},opacity:{value:1},center:{value:/*@__PURE__*/new N(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:/*@__PURE__*/new D},alphaMap:{value:null},alphaMapTransform:{value:/*@__PURE__*/new D},alphaTest:{value:0}}},nf={basic:{uniforms:/*@__PURE__*/t0([nc.common,nc.specularmap,nc.envmap,nc.aomap,nc.lightmap,nc.fog]),vertexShader:nu.meshbasic_vert,fragmentShader:nu.meshbasic_frag},lambert:{uniforms:/*@__PURE__*/t0([nc.common,nc.specularmap,nc.envmap,nc.aomap,nc.lightmap,nc.emissivemap,nc.bumpmap,nc.normalmap,nc.displacementmap,nc.fog,nc.lights,{emissive:{value:/*@__PURE__*/new tg(0)}}]),vertexShader:nu.meshlambert_vert,fragmentShader:nu.meshlambert_frag},phong:{uniforms:/*@__PURE__*/t0([nc.common,nc.specularmap,nc.envmap,nc.aomap,nc.lightmap,nc.emissivemap,nc.bumpmap,nc.normalmap,nc.displacementmap,nc.fog,nc.lights,{emissive:{value:/*@__PURE__*/new tg(0)},specular:{value:/*@__PURE__*/new tg(1118481)},shininess:{value:30}}]),vertexShader:nu.meshphong_vert,fragmentShader:nu.meshphong_frag},standard:{uniforms:/*@__PURE__*/t0([nc.common,nc.envmap,nc.aomap,nc.lightmap,nc.emissivemap,nc.bumpmap,nc.normalmap,nc.displacementmap,nc.roughnessmap,nc.metalnessmap,nc.fog,nc.lights,{emissive:{value:/*@__PURE__*/new tg(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}// temporary
}]),vertexShader:nu.meshphysical_vert,fragmentShader:nu.meshphysical_frag},toon:{uniforms:/*@__PURE__*/t0([nc.common,nc.aomap,nc.lightmap,nc.emissivemap,nc.bumpmap,nc.normalmap,nc.displacementmap,nc.gradientmap,nc.fog,nc.lights,{emissive:{value:/*@__PURE__*/new tg(0)}}]),vertexShader:nu.meshtoon_vert,fragmentShader:nu.meshtoon_frag},matcap:{uniforms:/*@__PURE__*/t0([nc.common,nc.bumpmap,nc.normalmap,nc.displacementmap,nc.fog,{matcap:{value:null}}]),vertexShader:nu.meshmatcap_vert,fragmentShader:nu.meshmatcap_frag},points:{uniforms:/*@__PURE__*/t0([nc.points,nc.fog]),vertexShader:nu.points_vert,fragmentShader:nu.points_frag},dashed:{uniforms:/*@__PURE__*/t0([nc.common,nc.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:nu.linedashed_vert,fragmentShader:nu.linedashed_frag},depth:{uniforms:/*@__PURE__*/t0([nc.common,nc.displacementmap]),vertexShader:nu.depth_vert,fragmentShader:nu.depth_frag},normal:{uniforms:/*@__PURE__*/t0([nc.common,nc.bumpmap,nc.normalmap,nc.displacementmap,{opacity:{value:1}}]),vertexShader:nu.meshnormal_vert,fragmentShader:nu.meshnormal_frag},sprite:{uniforms:/*@__PURE__*/t0([nc.sprite,nc.fog]),vertexShader:nu.sprite_vert,fragmentShader:nu.sprite_frag},background:{uniforms:{uvTransform:{value:/*@__PURE__*/new D},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:nu.background_vert,fragmentShader:nu.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:nu.backgroundCube_vert,fragmentShader:nu.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:nu.cube_vert,fragmentShader:nu.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:nu.equirect_vert,fragmentShader:nu.equirect_frag},distanceRGBA:{uniforms:/*@__PURE__*/t0([nc.common,nc.displacementmap,{referencePosition:{value:/*@__PURE__*/new eo},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:nu.distanceRGBA_vert,fragmentShader:nu.distanceRGBA_frag},shadow:{uniforms:/*@__PURE__*/t0([nc.lights,nc.fog,{color:{value:/*@__PURE__*/new tg(0)},opacity:{value:1}}]),vertexShader:nu.shadow_vert,fragmentShader:nu.shadow_frag}};nf.physical={uniforms:/*@__PURE__*/t0([nf.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:/*@__PURE__*/new D},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:/*@__PURE__*/new D},clearcoatNormalScale:{value:/*@__PURE__*/new N(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:/*@__PURE__*/new D},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:/*@__PURE__*/new D},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:/*@__PURE__*/new D},sheen:{value:0},sheenColor:{value:/*@__PURE__*/new tg(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:/*@__PURE__*/new D},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:/*@__PURE__*/new D},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:/*@__PURE__*/new D},transmissionSamplerSize:{value:/*@__PURE__*/new N},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:/*@__PURE__*/new D},attenuationDistance:{value:0},attenuationColor:{value:/*@__PURE__*/new tg(0)},specularColor:{value:/*@__PURE__*/new tg(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:/*@__PURE__*/new D},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:/*@__PURE__*/new D},anisotropyVector:{value:/*@__PURE__*/new N},anisotropyMap:{value:null},anisotropyMapTransform:{value:/*@__PURE__*/new D}}]),vertexShader:nu.meshphysical_vert,fragmentShader:nu.meshphysical_frag};const nh={r:0,b:0,g:0};function nd(e,t,n,r,i,a,o){let s,l;let u=new tg(0),c=!0===a?0:1,f=null,h=0,d=null;function p(t,n){t.getRGB(nh,t1(e)),r.buffers.color.setClear(nh.r,nh.g,nh.b,n,o)}return{getClearColor:function(){return u},setClearColor:function(e,t=1){u.set(e),p(u,c=t)},getClearAlpha:function(){return c},setClearAlpha:function(e){p(u,c=e)},render:function(a,m){let g=!1,v=!0===m.isScene?m.background:null;if(v&&v.isTexture){let e=m.backgroundBlurriness>0;// use PMREM if the user wants to blur the background
v=(e?n:t).get(v)}null===v?p(u,c):v&&v.isColor&&(p(v,1),g=!0);let y=e.xr.getEnvironmentBlendMode();"additive"===y?r.buffers.color.setClear(0,0,0,1,o):"alpha-blend"===y&&r.buffers.color.setClear(0,0,0,0,o),(e.autoClear||g)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),v&&(v.isCubeTexture||306===v.mapping)?(void 0===l&&((l=new tK(new tJ(1,1,1),new t3({name:"BackgroundCubeMaterial",uniforms:tQ(nf.backgroundCube.uniforms),vertexShader:nf.backgroundCube.vertexShader,fragmentShader:nf.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},// add "envMap" material property so the renderer can evaluate it like for built-in materials
Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),l.material.uniforms.envMap.value=v,l.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,l.material.uniforms.backgroundBlurriness.value=m.backgroundBlurriness,l.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,l.material.toneMapped=v.colorSpace!==b,(f!==v||h!==v.version||d!==e.toneMapping)&&(l.material.needsUpdate=!0,f=v,h=v.version,d=e.toneMapping),l.layers.enableAll(),// push to the pre-sorted opaque render list
a.unshift(l,l.geometry,l.material,0,0,null)):v&&v.isTexture&&(void 0===s&&((s=new tK(new nl(2,2),new t3({name:"BackgroundMaterial",uniforms:tQ(nf.background.uniforms),vertexShader:nf.background.vertexShader,fragmentShader:nf.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),// add "map" material property so the renderer can evaluate it like for built-in materials
Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(s)),s.material.uniforms.t2D.value=v,s.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,s.material.toneMapped=v.colorSpace!==b,!0===v.matrixAutoUpdate&&v.updateMatrix(),s.material.uniforms.uvTransform.value.copy(v.matrix),(f!==v||h!==v.version||d!==e.toneMapping)&&(s.material.needsUpdate=!0,f=v,h=v.version,d=e.toneMapping),s.layers.enableAll(),// push to the pre-sorted opaque render list
a.unshift(s,s.geometry,s.material,0,0,null))}}}function np(e,t,n,r){let i=e.getParameter(e.MAX_VERTEX_ATTRIBS),a=r.isWebGL2?null:t.get("OES_vertex_array_object"),o=r.isWebGL2||null!==a,s={},l=d(null),u=l,c=!1;function f(t){return r.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function d(e){let t=[],n=[],r=[];for(let e=0;e<i;e++)t[e]=0,n[e]=0,r[e]=0;return{// for backward compatibility on non-VAO support browser
geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function p(){let e=u.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function m(e){g(e,0)}function g(n,i){let a=u.newAttributes,o=u.enabledAttributes,s=u.attributeDivisors;if(a[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),s[n]!==i){let a=r.isWebGL2?e:t.get("ANGLE_instanced_arrays");a[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i}}function v(){let t=u.newAttributes,n=u.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function y(t,n,r,i,a,o,s){!0===s?e.vertexAttribIPointer(t,n,r,a,o):e.vertexAttribPointer(t,n,r,i,a,o)}function _(){x(),c=!0,u!==l&&f((u=l).object)}// for backward-compatibility
function x(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,h,_,x){let b=!1;if(o){let t=function(t,n,i){let o=!0===i.wireframe,l=s[t.id];void 0===l&&(l={},s[t.id]=l);let u=l[n.id];void 0===u&&(u={},l[n.id]=u);let c=u[o];return void 0===c&&(c=d(r.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),u[o]=c),c}(_,h,l);u!==t&&f((u=t).object),(b=function(e,t,n,r){let i=u.attributes,a=t.attributes,o=0,s=n.getAttributes();for(let t in s){let n=s[t];if(n.location>=0){let n=i[t],r=a[t];if(void 0===r&&("instanceMatrix"===t&&e.instanceMatrix&&(r=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(r=e.instanceColor)),void 0===n||n.attribute!==r||r&&n.data!==r.data)return!0;o++}}return u.attributesNum!==o||u.index!==r}(i,_,h,x))&&function(e,t,n,r){let i={},a=t.attributes,o=0,s=n.getAttributes();for(let t in s){let n=s[t];if(n.location>=0){let n=a[t];void 0===n&&("instanceMatrix"===t&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(n=e.instanceColor));let r={};r.attribute=n,n&&n.data&&(r.data=n.data),i[t]=r,o++}}u.attributes=i,u.attributesNum=o,u.index=r}(i,_,h,x)}else{let e=!0===l.wireframe;(u.geometry!==_.id||u.program!==h.id||u.wireframe!==e)&&(u.geometry=_.id,u.program=h.id,u.wireframe=e,b=!0)}null!==x&&n.update(x,e.ELEMENT_ARRAY_BUFFER),(b||c)&&(c=!1,function(i,a,o,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();let l=s.attributes,u=o.getAttributes(),c=a.defaultAttributeValues;for(let t in u){let a=u[t];if(a.location>=0){let o=l[t];if(void 0===o&&("instanceMatrix"===t&&i.instanceMatrix&&(o=i.instanceMatrix),"instanceColor"===t&&i.instanceColor&&(o=i.instanceColor)),void 0!==o){let t=o.normalized,l=o.itemSize,u=n.get(o);// TODO Attribute may not be available on context restore
if(void 0===u)continue;let c=u.buffer,f=u.type,h=u.bytesPerElement,d=!0===r.isWebGL2&&(f===e.INT||f===e.UNSIGNED_INT||1013===o.gpuType);if(o.isInterleavedBufferAttribute){let n=o.data,r=n.stride,u=o.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<a.locationSize;e++)g(a.location+e,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<a.locationSize;e++)m(a.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<a.locationSize;e++)y(a.location+e,l/a.locationSize,f,t,r*h,(u+l/a.locationSize*e)*h,d)}else{if(o.isInstancedBufferAttribute){for(let e=0;e<a.locationSize;e++)g(a.location+e,o.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)}else for(let e=0;e<a.locationSize;e++)m(a.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<a.locationSize;e++)y(a.location+e,l/a.locationSize,f,t,l*h,l/a.locationSize*e*h,d)}}else if(void 0!==c){let n=c[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(a.location,n);break;case 3:e.vertexAttrib3fv(a.location,n);break;case 4:e.vertexAttrib4fv(a.location,n);break;default:e.vertexAttrib1fv(a.location,n)}}}}v()}(i,l,h,_),null!==x&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.get(x).buffer))},reset:_,resetDefaultState:x,dispose:function(){for(let e in _(),s){let t=s[e];for(let e in t){let n=t[e];for(let e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0===s[e.id])return;let t=s[e.id];for(let e in t){let n=t[e];for(let e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e.id]},releaseStatesOfProgram:function(e){for(let t in s){let n=s[t];if(void 0===n[e.id])continue;let r=n[e.id];for(let e in r)h(r[e].object),delete r[e];delete n[e.id]}},initAttributes:p,enableAttribute:m,disableUnusedAttributes:v}}function nm(e,t,n,r){let i;let a=r.isWebGL2;//
this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i,1)},this.renderInstances=function(r,o,s){let l,u;if(0!==s){if(a)l=e,u="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),u="drawArraysInstancedANGLE",null===l){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}l[u](i,r,o,s),n.update(o,i,s)}}}function ng(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let a="undefined"!=typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===e.constructor.name,o=void 0!==n.precision?n.precision:"highp",s=i(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);let l=a||t.has("WEBGL_draw_buffers"),u=!0===n.logarithmicDepthBuffer,c=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),f=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_TEXTURE_SIZE),d=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),p=e.getParameter(e.MAX_VERTEX_ATTRIBS),m=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),g=e.getParameter(e.MAX_VARYING_VECTORS),v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),y=f>0,_=a||t.has("OES_texture_float"),x=a?e.getParameter(e.MAX_SAMPLES):0;return{isWebGL2:a,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){let n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:f,maxTextureSize:h,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:_,floatVertexTextures:y&&_,maxSamples:x}}function nv(e){let t=this,n=null,r=0,i=!1,a=!1,o=new nn,s=new D,l={value:null,needsUpdate:!1};function u(e,n,r,i){let a=null!==e?e.length:0,u=null;if(0!==a){if(u=l.value,!0!==i||null===u){let t=r+4*a,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===u||u.length<t)&&(u=new Float32Array(t));for(let t=0,n=r;t!==a;++t,n+=4)o.copy(e[t]).applyMatrix4(i,s),o.normal.toArray(u,n),u[n+3]=o.constant}l.value=u,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,u}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){let n=0!==e.length||t||// enable state of previous frame - the clipping code has to
// run another frame in order to reset the state:
0!==r||i;return i=t,r=e.length,n},this.beginShadows=function(){a=!0,u(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(e,t){n=u(e,t,0)},this.setState=function(o,s,c){let f=o.clippingPlanes,h=o.clipIntersection,d=o.clipShadows,p=e.get(o);if(i&&null!==f&&0!==f.length&&(!a||d)){let e=a?0:r,t=4*e,i=p.clippingState||null;l.value=i,i=u(f,s,t,c);for(let e=0;e!==t;++e)i[e]=n[e];p.clippingState=i,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}else a?u(null):(l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0)}}function ny(e){let t=new WeakMap;function n(e,t){return 303===t?e.mapping=301:304===t&&(e.mapping=302),e}function r(e){let n=e.target;n.removeEventListener("dispose",r);let i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){let a=i.mapping;if(303===a||304===a){if(t.has(i)){let e=t.get(i).texture;return n(e,i.mapping)}{let a=i.image;if(!a||!(a.height>0))return null;{let o=new t7(a.height/2);return o.fromEquirectangularTexture(e,i),t.set(i,o),i.addEventListener("dispose",r),n(o.texture,i.mapping)}}}}return i},dispose:function(){t=new WeakMap}}}// The standard deviations (radians) associated with the extra mips. These are
// chosen to approximate a Trowbridge-Reitz distribution function times the
// geometric shadowing function. These sigma values squared must match the
// variance #defines in cube_uv_reflection_fragment.glsl.js.
const n_=[.125,.215,.35,.446,.526,.582],nx=/*@__PURE__*/new class extends t4{constructor(e=-1,t=1,n=1,r=-1,i=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,a=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){let e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,a=i+e*this.view.width,o-=t*this.view.offsetY,s=o-t*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}},nb=/*@__PURE__*/new tg;let nS=null;// Golden Ratio
const nE=(1+Math.sqrt(5))/2,nw=1/nE,nM=[/*@__PURE__*/new eo(1,1,1),/*@__PURE__*/new eo(-1,1,1),/*@__PURE__*/new eo(1,1,-1),/*@__PURE__*/new eo(-1,1,-1),/*@__PURE__*/new eo(0,nE,nw),/*@__PURE__*/new eo(0,nE,-nw),/*@__PURE__*/new eo(nw,0,nE),/*@__PURE__*/new eo(-nw,0,nE),/*@__PURE__*/new eo(nE,nw,0),/*@__PURE__*/new eo(-nE,nw,0)];/**
 * This class generates a Prefiltered, Mipmapped Radiance Environment Map
 * (PMREM) from a cubeMap environment texture. This allows different levels of
 * blur to be quickly accessed based on material roughness. It is packed into a
 * special CubeUV format that allows us to perform custom interpolation so that
 * we can support nonlinear formats such as RGBE. Unlike a traditional mipmap
 * chain, it only goes down to the LOD_MIN level (above), and then creates extra
 * even more filtered 'mips' at the same LOD_MIN resolution, associated with
 * higher roughness levels. In this way we maintain resolution to smoothly
 * interpolate diffuse lighting while limiting sampling computation.
 *
 * Paper: Fast, Accurate Image-Based Lighting
 * https://drive.google.com/file/d/15y8r_UpKlU9SvV4ILb0C3qCPecS8pvLz/view
*/class nT{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}/**
	 * Generates a PMREM from a supplied Scene, which can be faster than using an
	 * image if networking bandwidth is low. Optional sigma specifies a blur radius
	 * in radians to be applied to the scene before PMREM generation. Optional near
	 * and far planes ensure the scene is rendered in its entirety (the cubeCamera
	 * is placed at the origin).
	 */fromScene(e,t=0,n=.1,r=100){nS=this._renderer.getRenderTarget(),this._setSize(256);let i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}/**
	 * Generates a PMREM from an equirectangular texture, which can be either LDR
	 * or HDR. The ideal input image size is 1k (1024 x 512),
	 * as this matches best with the 256 x 256 cubemap output.
	 */fromEquirectangular(e,t=null){return this._fromTexture(e,t)}/**
	 * Generates a PMREM from an cubemap texture, which can be either LDR
	 * or HDR. The ideal input cube size is 256 x 256,
	 * as this matches best with the 256 x 256 cubemap output.
	 */fromCubemap(e,t=null){return this._fromTexture(e,t)}/**
	 * Pre-compiles the cubemap shader. You can get faster start-up by invoking this method during
	 * your texture's network fetch for increased concurrency.
	 */compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=nR(),this._compileMaterial(this._cubemapMaterial))}/**
	 * Pre-compiles the equirectangular shader. You can get faster start-up by invoking this method during
	 * your texture's network fetch for increased concurrency.
	 */compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=nP(),this._compileMaterial(this._equirectMaterial))}/**
	 * Disposes of the PMREMGenerator's internal memory. Note that PMREMGenerator is a static class,
	 * so you should not need more than one PMREMGenerator object. If you do, calling dispose() on
	 * one of them will cause any others to also become unusable.
	 */dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}// private interface
_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(nS),e.scissorTest=!1,nC(e,0,0,e.width,e.height)}_fromTexture(e,t){301===e.mapping||302===e.mapping?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),nS=this._renderer.getRenderTarget();let n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:1006,minFilter:1006,generateMipmaps:!1,type:1016,format:1023,colorSpace:S,depthBuffer:!1},r=nA(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=nA(e,t,n);let{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){let t=[],n=[],r=[],i=e,a=e-4+1+n_.length;for(let o=0;o<a;o++){let a=Math.pow(2,i);n.push(a);let s=1/a;o>e-4?s=n_[o-e+4-1]:0===o&&(s=0),r.push(s);let l=1/(a-2),u=-l,c=1+l,f=[u,u,c,u,c,c,u,u,c,c,u,c],h=new Float32Array(108),d=new Float32Array(72),p=new Float32Array(36);for(let e=0;e<6;e++){let t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];h.set(r,18*e),d.set(f,12*e);let i=[e,e,e,e,e,e];p.set(i,6*e)}let m=new tO;m.setAttribute("position",new tb(h,3)),m.setAttribute("uv",new tb(d,2)),m.setAttribute("faceIndex",new tb(p,1)),t.push(m),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){let r=new Float32Array(20),i=new eo(0,1,0),a=new t3({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:nL(),fragmentShader:/* glsl */`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:0,depthTest:!1,depthWrite:!1});return a}(r,e,t)}return r}_compileMaterial(e){let t=new tK(this._lodPlanes[0],e);this._renderer.compile(t,nx)}_sceneToCubeUV(e,t,n,r){let i=new t5(90,1,t,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,u=s.toneMapping;s.getClearColor(nb),s.toneMapping=0,s.autoClear=!1;let c=new ty({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),f=new tK(new tJ,c),h=!1,d=e.background;d?d.isColor&&(c.color.copy(d),e.background=null,h=!0):(c.color.copy(nb),h=!0);for(let t=0;t<6;t++){let n=t%3;0===n?(i.up.set(0,a[t],0),i.lookAt(o[t],0,0)):1===n?(i.up.set(0,0,a[t]),i.lookAt(0,o[t],0)):(i.up.set(0,a[t],0),i.lookAt(0,0,o[t]));let l=this._cubeSize;nC(r,n*l,t>2?l:0,l,l),s.setRenderTarget(r),h&&s.render(f,i),s.render(e,i)}f.geometry.dispose(),f.material.dispose(),s.toneMapping=u,s.autoClear=l,e.background=d}_textureToCubeUV(e,t){let n=this._renderer,r=301===e.mapping||302===e.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=nR()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=nP());let i=r?this._cubemapMaterial:this._equirectMaterial,a=new tK(this._lodPlanes[0],i),o=i.uniforms;o.envMap.value=e;let s=this._cubeSize;nC(t,0,0,3*s,2*s),n.setRenderTarget(t),n.render(a,nx)}_applyPMREM(e){let t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let t=1;t<this._lodPlanes.length;t++){let n=Math.sqrt(this._sigmas[t]*this._sigmas[t]-this._sigmas[t-1]*this._sigmas[t-1]),r=nM[(t-1)%nM.length];this._blur(e,t-1,t,n,r)}t.autoClear=n}/**
	 * This is a two-pass Gaussian blur for a cubemap. Normally this is done
	 * vertically and horizontally, but this breaks down on a cube. Here we apply
	 * the blur latitudinally (around the poles), and then longitudinally (towards
	 * the poles) to approximate the orthogonally-separable blur. It is least
	 * accurate at the poles, but still does a decent job.
	 */_blur(e,t,n,r,i){let a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,a,o){let s=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");let u=new tK(this._lodPlanes[r],l),c=l.uniforms,f=this._sizeLods[n]-1,h=isFinite(i)?Math.PI/(2*f):2*Math.PI/39,d=i/h,p=isFinite(i)?1+Math.floor(3*d):20;p>20&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${p} samples when the maximum is set to 20`);let m=[],g=0;for(let e=0;e<20;++e){let t=e/d,n=Math.exp(-t*t/2);m.push(n),0===e?g+=n:e<p&&(g+=2*n)}for(let e=0;e<m.length;e++)m[e]=m[e]/g;c.envMap.value=e.texture,c.samples.value=p,c.weights.value=m,c.latitudinal.value="latitudinal"===a,o&&(c.poleAxis.value=o);let{_lodMax:v}=this;c.dTheta.value=h,c.mipInt.value=v-n;let y=this._sizeLods[r],_=3*y*(r>v-4?r-v+4:0),x=4*(this._cubeSize-y);nC(t,_,x,3*y,2*y),s.setRenderTarget(t),s.render(u,nx)}}function nA(e,t,n){let r=new er(e,t,n);return r.texture.mapping=306,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function nC(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function nP(){return new t3({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:nL(),fragmentShader:/* glsl */`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:0,depthTest:!1,depthWrite:!1})}function nR(){return new t3({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:nL(),fragmentShader:/* glsl */`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:0,depthTest:!1,depthWrite:!1})}function nL(){return/* glsl */`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function nO(e){let t=new WeakMap,n=null;function r(e){let n=e.target;n.removeEventListener("dispose",r);let i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){let a=i.mapping,o=303===a||304===a,s=301===a||302===a;// equirect/cube map to cubeUV conversion
if(o||s){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let r=t.get(i);return null===n&&(n=new nT(e)),r=o?n.fromEquirectangular(i,r):n.fromCubemap(i,r),t.set(i,r),r.texture}if(t.has(i))return t.get(i).texture;{let a=i.image;if(!(o&&a&&a.height>0||s&&a&&function(e){let t=0;for(let n=0;n<6;n++)void 0!==e[n]&&t++;return 6===t}(a)))return null;{null===n&&(n=new nT(e));let a=o?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,a),i.addEventListener("dispose",r),a.texture}}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function nI(e){let t={};function n(n){let r;if(void 0!==t[n])return t[n];switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){let t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function nU(e,t,n,r){let i={},a=new WeakMap;function o(e){let s=e.target;for(let e in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[e]);for(let e in s.morphAttributes){let n=s.morphAttributes[e];for(let e=0,r=n.length;e<r;e++)t.remove(n[e])}s.removeEventListener("dispose",o),delete i[s.id];let l=a.get(s);l&&(t.remove(l),a.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,//
n.memory.geometries--}function s(e){let n=[],r=e.index,i=e.attributes.position,o=0;if(null!==r){let e=r.array;o=r.version;for(let t=0,r=e.length;t<r;t+=3){let r=e[t+0],i=e[t+1],a=e[t+2];n.push(r,i,i,a,a,r)}}else{if(void 0===i)return;let e=i.array;o=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){let e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}let s=new(F(n)?tE:tS)(n,1);s.version=o;// Updating index buffer in VAO now. See WebGLBindingStates
//
let l=a.get(e);l&&t.remove(l),//
a.set(e,s)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",o),i[t.id]=!0,n.memory.geometries++),t},update:function(n){let r=n.attributes;// Updating index buffer in VAO now. See WebGLBindingStates.
for(let n in r)t.update(r[n],e.ARRAY_BUFFER);// morph targets
let i=n.morphAttributes;for(let n in i){let r=i[n];for(let n=0,i=r.length;n<i;n++)t.update(r[n],e.ARRAY_BUFFER)}},getWireframeAttribute:function(e){let t=a.get(e);if(t){let n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return a.get(e)}}}function nN(e,t,n,r){let i,a,o;let s=r.isWebGL2;//
this.setMode=function(e){i=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,a,t*o),n.update(r,i,1)},this.renderInstances=function(r,l,u){let c,f;if(0!==u){if(s)c=e,f="drawElementsInstanced";else if(c=t.get("ANGLE_instanced_arrays"),f="drawElementsInstancedANGLE",null===c){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}c[f](i,l,a,r*o,u),n.update(l,i,u)}}}function nD(e){let t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=i*(n/3);break;case e.LINES:t.lines+=i*(n/2);break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function nk(e,t){return e[0]-t[0]}function nF(e,t){return Math.abs(t[1])-Math.abs(e[1])}function nz(e,t,n){let r={},i=new Float32Array(8),a=new WeakMap,o=new et,s=[];for(let e=0;e<8;e++)s[e]=[e,0];return{update:function(l,u,c){let f=l.morphTargetInfluences;if(!0===t.isWebGL2){// instead of using attributes, the WebGL 2 code path encodes morph targets
// into an array of data textures. Each layer represents a single morph target.
let r=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,i=void 0!==r?r.length:0,s=a.get(u);if(void 0===s||s.count!==i){void 0!==s&&s.texture.dispose();let e=void 0!==u.morphAttributes.position,n=void 0!==u.morphAttributes.normal,r=void 0!==u.morphAttributes.color,l=u.morphAttributes.position||[],c=u.morphAttributes.normal||[],f=u.morphAttributes.color||[],h=0;!0===e&&(h=1),!0===n&&(h=2),!0===r&&(h=3);let d=u.attributes.position.count*h,p=1;d>t.maxTextureSize&&(p=Math.ceil(d/t.maxTextureSize),d=t.maxTextureSize);let m=new Float32Array(d*p*4*i),g=new ei(m,d,p,i);g.type=1015,g.needsUpdate=!0;// fill buffer
let v=4*h;for(let t=0;t<i;t++){let i=l[t],a=c[t],s=f[t],u=d*p*4*t;for(let t=0;t<i.count;t++){let l=t*v;!0===e&&(o.fromBufferAttribute(i,t),m[u+l+0]=o.x,m[u+l+1]=o.y,m[u+l+2]=o.z,m[u+l+3]=0),!0===n&&(o.fromBufferAttribute(a,t),m[u+l+4]=o.x,m[u+l+5]=o.y,m[u+l+6]=o.z,m[u+l+7]=0),!0===r&&(o.fromBufferAttribute(s,t),m[u+l+8]=o.x,m[u+l+9]=o.y,m[u+l+10]=o.z,m[u+l+11]=4===s.itemSize?o.w:1)}}s={count:i,texture:g,size:new N(d,p)},a.set(u,s),u.addEventListener("dispose",function e(){g.dispose(),a.delete(u),u.removeEventListener("dispose",e)})}//
let l=0;for(let e=0;e<f.length;e++)l+=f[e];let h=u.morphTargetsRelative?1:1-l;c.getUniforms().setValue(e,"morphTargetBaseInfluence",h),c.getUniforms().setValue(e,"morphTargetInfluences",f),c.getUniforms().setValue(e,"morphTargetsTexture",s.texture,n),c.getUniforms().setValue(e,"morphTargetsTextureSize",s.size)}else{// When object doesn't have morph target influences defined, we treat it as a 0-length array
// This is important to make sure we set up morphTargetBaseInfluence / morphTargetInfluences
let t=void 0===f?0:f.length,n=r[u.id];if(void 0===n||n.length!==t){// initialise list
n=[];for(let e=0;e<t;e++)n[e]=[e,0];r[u.id]=n}// Collect influences
for(let e=0;e<t;e++){let t=n[e];t[0]=e,t[1]=f[e]}n.sort(nF);for(let e=0;e<8;e++)e<t&&n[e][1]?(s[e][0]=n[e][0],s[e][1]=n[e][1]):(s[e][0]=Number.MAX_SAFE_INTEGER,s[e][1]=0);s.sort(nk);let a=u.morphAttributes.position,o=u.morphAttributes.normal,l=0;for(let e=0;e<8;e++){let t=s[e],n=t[0],r=t[1];n!==Number.MAX_SAFE_INTEGER&&r?(a&&u.getAttribute("morphTarget"+e)!==a[n]&&u.setAttribute("morphTarget"+e,a[n]),o&&u.getAttribute("morphNormal"+e)!==o[n]&&u.setAttribute("morphNormal"+e,o[n]),i[e]=r,l+=r):(a&&!0===u.hasAttribute("morphTarget"+e)&&u.deleteAttribute("morphTarget"+e),o&&!0===u.hasAttribute("morphNormal"+e)&&u.deleteAttribute("morphNormal"+e),i[e]=0)}// GLSL shader uses formula baseinfluence * base + sum(target * influence)
// This allows us to switch between absolute morphs and relative morphs without changing shader code
// When baseinfluence = 1 - sum(influence), the above is equivalent to sum((target - base) * influence)
let h=u.morphTargetsRelative?1:1-l;c.getUniforms().setValue(e,"morphTargetBaseInfluence",h),c.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function nB(e,t,n,r){let i=new WeakMap;function a(e){let t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(o){let s=r.render.frame,l=o.geometry,u=t.get(o,l);if(i.get(u)!==s&&(t.update(u),i.set(u,s)),o.isInstancedMesh&&(!1===o.hasEventListener("dispose",a)&&o.addEventListener("dispose",a),i.get(o)!==s&&(n.update(o.instanceMatrix,e.ARRAY_BUFFER),null!==o.instanceColor&&n.update(o.instanceColor,e.ARRAY_BUFFER),i.set(o,s))),o.isSkinnedMesh){let e=o.skeleton;i.get(e)!==s&&(e.update(),i.set(e,s))}return u},dispose:function(){i=new WeakMap}}}/**
 * Uniforms of a program.
 * Those form a tree structure with a special top-level container for the root,
 * which you get by calling 'new WebGLUniforms( gl, program )'.
 *
 *
 * Properties of inner nodes including the top-level container:
 *
 * .seq - array of nested uniforms
 * .map - nested uniforms by name
 *
 *
 * Methods of all nodes except the top-level container:
 *
 * .setValue( gl, value, [textures] )
 *
 * 		uploads a uniform value(s)
 *  	the 'textures' parameter is needed for sampler uniforms
 *
 *
 * Static methods of the top-level container (textures factorizations):
 *
 * .upload( gl, seq, values, textures )
 *
 * 		sets uniforms in 'seq' to 'values[id].value'
 *
 * .seqWithValue( seq, values ) : filteredSeq
 *
 * 		filters 'seq' entries with corresponding entry in values
 *
 *
 * Methods of the top-level container (textures factorizations):
 *
 * .setValue( gl, name, value, textures )
 *
 * 		sets uniform with  name 'name' to 'value'
 *
 * .setOptional( gl, obj, prop )
 *
 * 		like .set for an optional property of the object
 *
 */const nV=/*@__PURE__*/new ee,nH=/*@__PURE__*/new ei,nG=/*@__PURE__*/new class extends ee{constructor(e=null,t=1,n=1,r=1){// We're going to add .setXXX() methods for setting properties later.
// Users can still set in DataTexture3D directly.
//
//	const texture = new THREE.DataTexture3D( data, width, height, depth );
// 	texture.anisotropy = 16;
//
// See #14839
super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},nW=/*@__PURE__*/new t8,nj=[],nX=[],nq=new Float32Array(16),nY=new Float32Array(9),n$=new Float32Array(4);// Flattening for arrays of vectors and matrices
function nK(e,t,n){let r=e[0];if(r<=0||r>0)return e;// unoptimized: ! isNaN( firstElem )
// see http://jacksondunstan.com/articles/983
let i=t*n,a=nj[i];if(void 0===a&&(a=new Float32Array(i),nj[i]=a),0!==t){r.toArray(a,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(a,i)}return a}function nZ(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function nJ(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}// Texture unit allocation
function nQ(e,t){let n=nX[t];void 0===n&&(n=new Int32Array(t),nX[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}// --- Setters ---
// Note: Defining these methods externally, because they come in a bunch
// and this way their names minify.
// Single scalar
function n0(e,t){let n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}// Single float vector (from flat array or THREE.VectorN)
function n1(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(nZ(n,t))return;e.uniform2fv(this.addr,t),nJ(n,t)}}function n2(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)(n[0]!==t.r||n[1]!==t.g||n[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(nZ(n,t))return;e.uniform3fv(this.addr,t),nJ(n,t)}}function n3(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(nZ(n,t))return;e.uniform4fv(this.addr,t),nJ(n,t)}}// Single matrix (from flat array or THREE.MatrixN)
function n4(e,t){let n=this.cache,r=t.elements;if(void 0===r){if(nZ(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),nJ(n,t)}else{if(nZ(n,r))return;n$.set(r),e.uniformMatrix2fv(this.addr,!1,n$),nJ(n,r)}}function n5(e,t){let n=this.cache,r=t.elements;if(void 0===r){if(nZ(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),nJ(n,t)}else{if(nZ(n,r))return;nY.set(r),e.uniformMatrix3fv(this.addr,!1,nY),nJ(n,r)}}function n6(e,t){let n=this.cache,r=t.elements;if(void 0===r){if(nZ(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),nJ(n,t)}else{if(nZ(n,r))return;nq.set(r),e.uniformMatrix4fv(this.addr,!1,nq),nJ(n,r)}}// Single integer / boolean
function n8(e,t){let n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}// Single integer / boolean vector (from flat array or THREE.VectorN)
function n7(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(nZ(n,t))return;e.uniform2iv(this.addr,t),nJ(n,t)}}function n9(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(nZ(n,t))return;e.uniform3iv(this.addr,t),nJ(n,t)}}function re(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(nZ(n,t))return;e.uniform4iv(this.addr,t),nJ(n,t)}}// Single unsigned integer
function rt(e,t){let n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}// Single unsigned integer vector (from flat array or THREE.VectorN)
function rn(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(nZ(n,t))return;e.uniform2uiv(this.addr,t),nJ(n,t)}}function rr(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(nZ(n,t))return;e.uniform3uiv(this.addr,t),nJ(n,t)}}function ri(e,t){let n=this.cache;if(void 0!==t.x)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(nZ(n,t))return;e.uniform4uiv(this.addr,t),nJ(n,t)}}// Single texture (2D / Cube)
function ra(e,t,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||nV,i)}function ro(e,t,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||nG,i)}function rs(e,t,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||nW,i)}function rl(e,t,n){let r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||nH,i)}// Array of scalars
function ru(e,t){e.uniform1fv(this.addr,t)}// Array of vectors (from flat array or array of THREE.VectorN)
function rc(e,t){let n=nK(t,this.size,2);e.uniform2fv(this.addr,n)}function rf(e,t){let n=nK(t,this.size,3);e.uniform3fv(this.addr,n)}function rh(e,t){let n=nK(t,this.size,4);e.uniform4fv(this.addr,n)}// Array of matrices (from flat array or array of THREE.MatrixN)
function rd(e,t){let n=nK(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function rp(e,t){let n=nK(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function rm(e,t){let n=nK(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}// Array of integer / boolean
function rg(e,t){e.uniform1iv(this.addr,t)}// Array of integer / boolean vectors (from flat array)
function rv(e,t){e.uniform2iv(this.addr,t)}function ry(e,t){e.uniform3iv(this.addr,t)}function r_(e,t){e.uniform4iv(this.addr,t)}// Array of unsigned integer
function rx(e,t){e.uniform1uiv(this.addr,t)}// Array of unsigned integer vectors (from flat array)
function rb(e,t){e.uniform2uiv(this.addr,t)}function rS(e,t){e.uniform3uiv(this.addr,t)}function rE(e,t){e.uniform4uiv(this.addr,t)}// Array of textures (2D / 3D / Cube / 2DArray)
function rw(e,t,n){let r=this.cache,i=t.length,a=nQ(n,i);nZ(r,a)||(e.uniform1iv(this.addr,a),nJ(r,a));for(let e=0;e!==i;++e)n.setTexture2D(t[e]||nV,a[e])}function rM(e,t,n){let r=this.cache,i=t.length,a=nQ(n,i);nZ(r,a)||(e.uniform1iv(this.addr,a),nJ(r,a));for(let e=0;e!==i;++e)n.setTexture3D(t[e]||nG,a[e])}function rT(e,t,n){let r=this.cache,i=t.length,a=nQ(n,i);nZ(r,a)||(e.uniform1iv(this.addr,a),nJ(r,a));for(let e=0;e!==i;++e)n.setTextureCube(t[e]||nW,a[e])}function rA(e,t,n){let r=this.cache,i=t.length,a=nQ(n,i);nZ(r,a)||(e.uniform1iv(this.addr,a),nJ(r,a));for(let e=0;e!==i;++e)n.setTexture2DArray(t[e]||nH,a[e])}// --- Uniform Classes ---
class rC{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=// Helper to pick the right setter for the singular case
function(e){switch(e){case 5126:return n0;// FLOAT
case 35664:return n1;// _VEC2
case 35665:return n2;// _VEC3
case 35666:return n3;// _VEC4
case 35674:return n4;// _MAT2
case 35675:return n5;// _MAT3
case 35676:return n6;// _MAT4
case 5124:case 35670:return n8;// INT, BOOL
case 35667:case 35671:return n7;// _VEC2
case 35668:case 35672:return n9;// _VEC3
case 35669:case 35673:return re;// _VEC4
case 5125:return rt;// UINT
case 36294:return rn;// _VEC2
case 36295:return rr;// _VEC3
case 36296:return ri;// _VEC4
case 35678:case 36198:case 36298:case 36306:case 35682:return ra;case 35679:case 36299:case 36307:return ro;case 35680:case 36300:case 36308:case 36293:return rs;case 36289:case 36303:case 36311:case 36292:return rl}}(t.type);// this.path = activeInfo.name; // DEBUG
}}class rP{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=// Helper to pick the right setter for a pure (bottom-level) array
function(e){switch(e){case 5126:return ru;// FLOAT
case 35664:return rc;// _VEC2
case 35665:return rf;// _VEC3
case 35666:return rh;// _VEC4
case 35674:return rd;// _MAT2
case 35675:return rp;// _MAT3
case 35676:return rm;// _MAT4
case 5124:case 35670:return rg;// INT, BOOL
case 35667:case 35671:return rv;// _VEC2
case 35668:case 35672:return ry;// _VEC3
case 35669:case 35673:return r_;// _VEC4
case 5125:return rx;// UINT
case 36294:return rb;// _VEC2
case 36295:return rS;// _VEC3
case 36296:return rE;// _VEC4
case 35678:case 36198:case 36298:case 36306:case 35682:return rw;case 35679:case 36299:case 36307:return rM;case 35680:case 36300:case 36308:case 36293:return rT;case 36289:case 36303:case 36311:case 36292:return rA}}(t.type);// this.path = activeInfo.name; // DEBUG
}}class rR{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){let r=this.seq;for(let i=0,a=r.length;i!==a;++i){let a=r[i];a.setValue(e,t[a.id],n)}}}// --- Top-level ---
// Parser - builds up the property tree from the path strings
const rL=/(\w+)(\])?(\[|\.)?/g;// extracts
// 	- the identifier (member name or array index)
//  - followed by an optional right bracket (found when array index)
//  - followed by an optional left bracket or dot (type of subscript)
//
// Note: These portions can be read in a non-overlapping fashion and
// allow straightforward parsing of the hierarchy that WebGL encodes
// in the uniform names.
function rO(e,t){e.seq.push(t),e.map[t.id]=t}// Root Container
class rI{constructor(e,t){this.seq=[],this.map={};let n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){let n=e.getActiveUniform(t,r),i=e.getUniformLocation(t,n.name);!function(e,t,n){let r=e.name,i=r.length;for(// reset RegExp object, because of the early exit of a previous run
rL.lastIndex=0;;){let a=rL.exec(r),o=rL.lastIndex,s=a[1],l="]"===a[2],u=a[3];if(l&&(s|=0),void 0===u||"["===u&&o+2===i){// bare name or "pure" bottom-level array "[0]" suffix
rO(n,void 0===u?new rC(s,e,t):new rP(s,e,t));break}{// step into inner node / create it in case it doesn't exist
let e=n.map,t=e[s];void 0===t&&rO(n,t=new rR(s)),n=t}}}(n,i,this)}}setValue(e,t,n,r){let i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){let r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,a=t.length;i!==a;++i){let a=t[i],o=n[a.id];!1!==o.needsUpdate&&a.setValue(e,o.value,r)}}static seqWithValue(e,t){let n=[];for(let r=0,i=e.length;r!==i;++r){let i=e[r];i.id in t&&n.push(i)}return n}}function rU(e,t,n){let r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let rN=0;function rD(e,t,n){let r=e.getShaderParameter(t,e.COMPILE_STATUS),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";let a=/ERROR: 0:(\d+)/.exec(i);if(!a)return i;{// --enable-privileged-webgl-extension
// console.log( '**' + type + '**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );
let r=parseInt(a[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){let n=e.split("\n"),r=[],i=Math.max(t-6,0),a=Math.min(t+6,n.length);for(let e=i;e<a;e++){let i=e+1;r.push(`${i===t?">":" "} ${i}: ${n[e]}`)}return r.join("\n")}(e.getShaderSource(t),r)}}function rk(e){return""!==e}function rF(e,t){let n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function rz(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}// Resolve Includes
const rB=/^[ \t]*#include +<([\w\d./]+)>/gm;function rV(e){return e.replace(rB,rG)}const rH=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function rG(e,t){let n=nu[t];if(void 0===n){let e=rH.get(t);if(void 0!==e)n=nu[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e);else throw Error("Can not resolve #include <"+t+">")}return rV(n)}// Unroll Loops
const rW=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function rj(e){return e.replace(rW,rX)}function rX(e,t,n,r){let i="";for(let e=parseInt(t);e<parseInt(n);e++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return i}//
function rq(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function rY(e,t,n,r){let i,a,o,s,l,u;// TODO Send this event to Three.js DevTools
// console.log( 'WebGLProgram', cacheKey );
let c=e.getContext(),f=n.defines,h=n.vertexShader,d=n.fragmentShader,p=(l="SHADOWMAP_TYPE_BASIC",1===n.shadowMapType?l="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?l="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(l="SHADOWMAP_TYPE_VSM"),l),m=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),g=(u="ENVMAP_MODE_REFLECTION",n.envMap&&302===n.envMapMode&&(u="ENVMAP_MODE_REFRACTION"),u),v=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),y=function(e){let t=e.envMapCubeUVHeight;if(null===t)return null;let n=Math.log2(t)-2,r=1/(3*Math.max(Math.pow(2,n),112));return{texelWidth:r,texelHeight:1/t,maxMip:n}}(n),_=n.isWebGL2?"":function(e){let t=[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.normalMapTangentSpace||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return t.filter(rk).join("\n")}(n),x=function(e){let t=[];for(let n in e){let r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(f),E=c.createProgram(),M=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((i=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x].filter(rk).join("\n")).length>0&&(i+="\n"),(a=[_,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x].filter(rk).join("\n")).length>0&&(a+="\n")):(i=[rq(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+g:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",//
n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",//
n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+p:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif","\n"].filter(rk).join("\n"),a=[_,rq(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+m:"",n.envMap?"#define "+g:"",n.envMap?"#define "+v:"",y?"#define CUBEUV_TEXEL_WIDTH "+y.texelWidth:"",y?"#define CUBEUV_TEXEL_HEIGHT "+y.texelHeight:"",y?"#define CUBEUV_MAX_MIP "+y.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+p:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?nu.tonemapping_pars_fragment:"",0!==n.toneMapping?function(e,t){let n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",nu.colorspace_pars_fragment,function(e,t){let n=function(e){switch(e){case S:return["Linear","( value )"];case b:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(rk).join("\n")),h=rz(h=rF(h=rV(h),n),n),d=rz(d=rF(d=rV(d),n),n),h=rj(h),d=rj(d),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(// GLSL 3.0 conversion for built-in materials and ShaderMaterial
M="#version 300 es\n",i="precision mediump sampler2DArray;\n#define attribute in\n#define varying out\n#define texture2D texture\n"+i,a=["#define varying in",n.glslVersion===w?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===w?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);let T=M+i+h,A=M+a+d,C=rU(c,c.VERTEX_SHADER,T),P=rU(c,c.FRAGMENT_SHADER,A);// check for link errors
if(c.attachShader(E,C),c.attachShader(E,P),void 0!==n.index0AttributeName?c.bindAttribLocation(E,0,n.index0AttributeName):!0===n.morphTargets&&c.bindAttribLocation(E,0,"position"),c.linkProgram(E),e.debug.checkShaderErrors){let t=c.getProgramInfoLog(E).trim(),n=c.getShaderInfoLog(C).trim(),r=c.getShaderInfoLog(P).trim(),o=!0,s=!0;if(!1===c.getProgramParameter(E,c.LINK_STATUS)){if(o=!1,"function"==typeof e.debug.onShaderError)e.debug.onShaderError(c,E,C,P);else{// default error reporting
let e=rD(c,C,"vertex"),n=rD(c,P,"fragment");console.error("THREE.WebGLProgram: Shader Error "+c.getError()+" - VALIDATE_STATUS "+c.getProgramParameter(E,c.VALIDATE_STATUS)+"\n\nProgram Info Log: "+t+"\n"+e+"\n"+n)}}else""!==t?console.warn("THREE.WebGLProgram: Program Info Log:",t):(""===n||""===r)&&(s=!1);s&&(this.diagnostics={runnable:o,programLog:t,vertexShader:{log:n,prefix:i},fragmentShader:{log:r,prefix:a}})}return(// Clean up
// Crashes in iOS9 and iOS10. #18402
// gl.detachShader( program, glVertexShader );
// gl.detachShader( program, glFragmentShader );
c.deleteShader(C),c.deleteShader(P),this.getUniforms=function(){return void 0===o&&(o=new rI(c,E)),o},this.getAttributes=function(){return void 0===s&&(s=function(e,t){let n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){let r=e.getActiveAttrib(t,i),a=r.name,o=1;r.type===e.FLOAT_MAT2&&(o=2),r.type===e.FLOAT_MAT3&&(o=3),r.type===e.FLOAT_MAT4&&(o=4),// console.log( 'THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:', name, i );
n[a]={type:r.type,location:e.getAttribLocation(t,a),locationSize:o}}return n}(c,E)),s},// free resource
this.destroy=function(){r.releaseStatesOfProgram(this),c.deleteProgram(E),this.program=void 0},//
this.type=n.shaderType,this.name=n.shaderName,this.id=rN++,this.cacheKey=t,this.usedTimes=1,this.program=E,this.vertexShader=C,this.fragmentShader=P,this)}let r$=0;class rK{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(r)&&(a.add(r),r.usedTimes++),!1===a.has(i)&&(a.add(i),i.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let e of t)e.usedTimes--,0===e.usedTimes&&this.shaderCache.delete(e.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){let t=this.shaderCache,n=t.get(e);return void 0===n&&(n=new rZ(e),t.set(e,n)),n}}class rZ{constructor(e){this.id=r$++,this.code=e,this.usedTimes=0}}function rJ(e,t,n,r,i,a,o){let s=new eq,l=new rK,u=[],c=i.isWebGL2,f=i.logarithmicDepthBuffer,h=i.vertexTextures,d=i.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(e){return 0===e?"uv":`uv${e}`}return{getParameters:function(a,s,u,g,v){let y,_,x,E;let w=g.fog,M=v.geometry,T=a.isMeshStandardMaterial?g.environment:null,A=(a.isMeshStandardMaterial?n:t).get(a.envMap||T),C=A&&306===A.mapping?A.image.height:null,P=p[a.type];null!==a.precision&&(d=i.getMaxPrecision(a.precision))!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",d,"instead.");//
let R=M.morphAttributes.position||M.morphAttributes.normal||M.morphAttributes.color,L=void 0!==R?R.length:0,O=0;if(void 0!==M.morphAttributes.position&&(O=1),void 0!==M.morphAttributes.normal&&(O=2),void 0!==M.morphAttributes.color&&(O=3),P){let e=nf[P];y=e.vertexShader,_=e.fragmentShader}else y=a.vertexShader,_=a.fragmentShader,l.update(a),x=l.getVertexShaderID(a),E=l.getFragmentShaderID(a);let I=e.getRenderTarget(),U=!0===v.isInstancedMesh,N=!!a.map,D=!!a.matcap,k=!!A,F=!!a.aoMap,z=!!a.lightMap,B=!!a.bumpMap,V=!!a.normalMap,H=!!a.displacementMap,G=!!a.emissiveMap,W=!!a.metalnessMap,j=!!a.roughnessMap,X=a.anisotropy>0,q=a.clearcoat>0,Y=a.iridescence>0,$=a.sheen>0,K=a.transmission>0,Z=X&&!!a.anisotropyMap,J=q&&!!a.clearcoatMap,Q=q&&!!a.clearcoatNormalMap,ee=q&&!!a.clearcoatRoughnessMap,et=Y&&!!a.iridescenceMap,en=Y&&!!a.iridescenceThicknessMap,er=$&&!!a.sheenColorMap,ei=$&&!!a.sheenRoughnessMap,ea=!!a.specularMap,eo=!!a.specularColorMap,es=!!a.specularIntensityMap,el=K&&!!a.transmissionMap,eu=K&&!!a.thicknessMap,ec=!!a.gradientMap,ef=!!a.alphaMap,eh=a.alphaTest>0,ed=!!a.alphaHash,ep=!!a.extensions,em=!!M.attributes.uv1,eg=!!M.attributes.uv2,ev=!!M.attributes.uv3,ey=0;a.toneMapped&&(null===I||!0===I.isXRRenderTarget)&&(ey=e.toneMapping);let e_={isWebGL2:c,shaderID:P,shaderType:a.type,shaderName:a.name,vertexShader:y,fragmentShader:_,defines:a.defines,customVertexShaderID:x,customFragmentShaderID:E,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:d,instancing:U,instancingColor:U&&null!==v.instanceColor,supportsVertexTextures:h,outputColorSpace:null===I?e.outputColorSpace:!0===I.isXRRenderTarget?I.texture.colorSpace:S,map:N,matcap:D,envMap:k,envMapMode:k&&A.mapping,envMapCubeUVHeight:C,aoMap:F,lightMap:z,bumpMap:B,normalMap:V,displacementMap:h&&H,emissiveMap:G,normalMapObjectSpace:V&&1===a.normalMapType,normalMapTangentSpace:V&&0===a.normalMapType,metalnessMap:W,roughnessMap:j,anisotropy:X,anisotropyMap:Z,clearcoat:q,clearcoatMap:J,clearcoatNormalMap:Q,clearcoatRoughnessMap:ee,iridescence:Y,iridescenceMap:et,iridescenceThicknessMap:en,sheen:$,sheenColorMap:er,sheenRoughnessMap:ei,specularMap:ea,specularColorMap:eo,specularIntensityMap:es,transmission:K,transmissionMap:el,thicknessMap:eu,gradientMap:ec,opaque:!1===a.transparent&&1===a.blending,alphaMap:ef,alphaTest:eh,alphaHash:ed,combine:a.combine,//
mapUv:N&&m(a.map.channel),aoMapUv:F&&m(a.aoMap.channel),lightMapUv:z&&m(a.lightMap.channel),bumpMapUv:B&&m(a.bumpMap.channel),normalMapUv:V&&m(a.normalMap.channel),displacementMapUv:H&&m(a.displacementMap.channel),emissiveMapUv:G&&m(a.emissiveMap.channel),metalnessMapUv:W&&m(a.metalnessMap.channel),roughnessMapUv:j&&m(a.roughnessMap.channel),anisotropyMapUv:Z&&m(a.anisotropyMap.channel),clearcoatMapUv:J&&m(a.clearcoatMap.channel),clearcoatNormalMapUv:Q&&m(a.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ee&&m(a.clearcoatRoughnessMap.channel),iridescenceMapUv:et&&m(a.iridescenceMap.channel),iridescenceThicknessMapUv:en&&m(a.iridescenceThicknessMap.channel),sheenColorMapUv:er&&m(a.sheenColorMap.channel),sheenRoughnessMapUv:ei&&m(a.sheenRoughnessMap.channel),specularMapUv:ea&&m(a.specularMap.channel),specularColorMapUv:eo&&m(a.specularColorMap.channel),specularIntensityMapUv:es&&m(a.specularIntensityMap.channel),transmissionMapUv:el&&m(a.transmissionMap.channel),thicknessMapUv:eu&&m(a.thicknessMap.channel),alphaMapUv:ef&&m(a.alphaMap.channel),//
vertexTangents:!!M.attributes.tangent&&(V||X),vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!M.attributes.color&&4===M.attributes.color.itemSize,vertexUv1s:em,vertexUv2s:eg,vertexUv3s:ev,pointsUvs:!0===v.isPoints&&!!M.attributes.uv&&(N||ef),fog:!!w,useFog:!0===a.fog,fogExp2:w&&w.isFogExp2,flatShading:!0===a.flatShading,sizeAttenuation:!0===a.sizeAttenuation,logarithmicDepthBuffer:f,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==M.morphAttributes.position,morphNormals:void 0!==M.morphAttributes.normal,morphColors:void 0!==M.morphAttributes.color,morphTargetsCount:L,morphTextureStride:O,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.length>0,shadowMapType:e.shadowMap.type,toneMapping:ey,useLegacyLights:e._useLegacyLights,decodeVideoTexture:N&&!0===a.map.isVideoTexture&&a.map.colorSpace===b,premultipliedAlpha:a.premultipliedAlpha,doubleSided:2===a.side,flipSided:1===a.side,useDepthPacking:a.depthPacking>=0,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:ep&&!0===a.extensions.derivatives,extensionFragDepth:ep&&!0===a.extensions.fragDepth,extensionDrawBuffers:ep&&!0===a.extensions.drawBuffers,extensionShaderTextureLOD:ep&&!0===a.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()};return e_},getProgramCacheKey:function(t){let n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(let e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(n.push(t.precision),n.push(t.outputColorSpace),n.push(t.envMapMode),n.push(t.envMapCubeUVHeight),n.push(t.mapUv),n.push(t.alphaMapUv),n.push(t.lightMapUv),n.push(t.aoMapUv),n.push(t.bumpMapUv),n.push(t.normalMapUv),n.push(t.displacementMapUv),n.push(t.emissiveMapUv),n.push(t.metalnessMapUv),n.push(t.roughnessMapUv),n.push(t.anisotropyMapUv),n.push(t.clearcoatMapUv),n.push(t.clearcoatNormalMapUv),n.push(t.clearcoatRoughnessMapUv),n.push(t.iridescenceMapUv),n.push(t.iridescenceThicknessMapUv),n.push(t.sheenColorMapUv),n.push(t.sheenRoughnessMapUv),n.push(t.specularMapUv),n.push(t.specularColorMapUv),n.push(t.specularIntensityMapUv),n.push(t.transmissionMapUv),n.push(t.thicknessMapUv),n.push(t.combine),n.push(t.fogExp2),n.push(t.sizeAttenuation),n.push(t.morphTargetsCount),n.push(t.morphAttributeCount),n.push(t.numDirLights),n.push(t.numPointLights),n.push(t.numSpotLights),n.push(t.numSpotLightMaps),n.push(t.numHemiLights),n.push(t.numRectAreaLights),n.push(t.numDirLightShadows),n.push(t.numPointLightShadows),n.push(t.numSpotLightShadows),n.push(t.numSpotLightShadowsWithMaps),n.push(t.shadowMapType),n.push(t.toneMapping),n.push(t.numClippingPlanes),n.push(t.numClipIntersection),n.push(t.depthPacking),s.disableAll(),t.isWebGL2&&s.enable(0),t.supportsVertexTextures&&s.enable(1),t.instancing&&s.enable(2),t.instancingColor&&s.enable(3),t.matcap&&s.enable(4),t.envMap&&s.enable(5),t.normalMapObjectSpace&&s.enable(6),t.normalMapTangentSpace&&s.enable(7),t.clearcoat&&s.enable(8),t.iridescence&&s.enable(9),t.alphaTest&&s.enable(10),t.vertexColors&&s.enable(11),t.vertexAlphas&&s.enable(12),t.vertexUv1s&&s.enable(13),t.vertexUv2s&&s.enable(14),t.vertexUv3s&&s.enable(15),t.vertexTangents&&s.enable(16),t.anisotropy&&s.enable(17),n.push(s.mask),s.disableAll(),t.fog&&s.enable(0),t.useFog&&s.enable(1),t.flatShading&&s.enable(2),t.logarithmicDepthBuffer&&s.enable(3),t.skinning&&s.enable(4),t.morphTargets&&s.enable(5),t.morphNormals&&s.enable(6),t.morphColors&&s.enable(7),t.premultipliedAlpha&&s.enable(8),t.shadowMapEnabled&&s.enable(9),t.useLegacyLights&&s.enable(10),t.doubleSided&&s.enable(11),t.flipSided&&s.enable(12),t.useDepthPacking&&s.enable(13),t.dithering&&s.enable(14),t.transmission&&s.enable(15),t.sheen&&s.enable(16),t.opaque&&s.enable(17),t.pointsUvs&&s.enable(18),t.decodeVideoTexture&&s.enable(19),n.push(s.mask),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){let t;let n=p[e.type];if(n){let e=nf[n];t=t2.clone(e.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){let r;// Check if code has been already compiled
for(let e=0,t=u.length;e<t;e++){let t=u[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new rY(e,n,t,a),u.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){// Remove from unordered set
let t=u.indexOf(e);u[t]=u[u.length-1],u.pop(),// Free WebGL resources
e.destroy()}},releaseShaderCache:function(e){l.remove(e)},// Exposed for resource monitoring & error feedback via renderer.info:
programs:u,dispose:function(){l.dispose()}}}function rQ(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function r0(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function r1(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function r2(){let e=[],t=0,n=[],r=[],i=[];function a(n,r,i,a,o,s){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:a,renderOrder:n.renderOrder,z:o,group:s},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=o,l.group=s),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,o,s,l,u){let c=a(e,t,o,s,l,u);o.transmission>0?r.push(c):!0===o.transparent?i.push(c):n.push(c)},unshift:function(e,t,o,s,l,u){let c=a(e,t,o,s,l,u);o.transmission>0?r.unshift(c):!0===o.transparent?i.unshift(c):n.unshift(c)},finish:function(){// Clear references from inactive renderItems in the list
for(let n=t,r=e.length;n<r;n++){let t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||r0),r.length>1&&r.sort(t||r1),i.length>1&&i.sort(t||r1)}}}function r3(){let e=new WeakMap;return{get:function(t,n){let r;let i=e.get(t);return void 0===i?(r=new r2,e.set(t,[r])):n>=i.length?(r=new r2,i.push(r)):r=i[n],r},dispose:function(){e=new WeakMap}}}function r4(){let e={};return{get:function(t){let n;if(void 0!==e[t.id])return e[t.id];switch(t.type){case"DirectionalLight":n={direction:new eo,color:new tg};break;case"SpotLight":n={position:new eo,direction:new eo,color:new tg,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new eo,color:new tg,distance:0,decay:0};break;case"HemisphereLight":n={direction:new eo,skyColor:new tg,groundColor:new tg};break;case"RectAreaLight":n={color:new tg,position:new eo,halfWidth:new eo,halfHeight:new eo}}return e[t.id]=n,n}}}let r5=0;function r6(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function r8(e,t){let n=new r4,r=function(){let e={};return{get:function(t){let n;if(void 0!==e[t.id])return e[t.id];switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new N};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new N,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let e=0;e<9;e++)i.probe.push(new eo);let a=new eo,o=new eD,s=new eD;return{setup:function(a,o){let s=0,l=0,u=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let c=0,f=0,h=0,d=0,p=0,m=0,g=0,v=0,y=0,_=0;// ordering : [shadow casting + map texturing, map texturing, shadow casting, none ]
a.sort(r6);// artist-friendly light intensity scaling factor
let x=!0===o?Math.PI:1;for(let e=0,t=a.length;e<t;e++){let t=a[e],o=t.color,b=t.intensity,S=t.distance,E=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)s+=o.r*b*x,l+=o.g*b*x,u+=o.b*b*x;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],b);else if(t.isDirectionalLight){let e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*x),t.castShadow){let e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[c]=n,i.directionalShadowMap[c]=E,i.directionalShadowMatrix[c]=t.shadow.matrix,m++}i.directional[c]=e,c++}else if(t.isSpotLight){let e=n.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(o).multiplyScalar(b*x),e.distance=S,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,i.spot[h]=e;let a=t.shadow;if(t.map&&(i.spotLightMap[y]=t.map,y++,// make sure the lightMatrix is up to date
// TODO : do it if required only
a.updateMatrices(t),t.castShadow&&_++),i.spotLightMatrix[h]=a.matrix,t.castShadow){let e=r.get(t);e.shadowBias=a.bias,e.shadowNormalBias=a.normalBias,e.shadowRadius=a.radius,e.shadowMapSize=a.mapSize,i.spotShadow[h]=e,i.spotShadowMap[h]=E,v++}h++}else if(t.isRectAreaLight){let e=n.get(t);e.color.copy(o).multiplyScalar(b),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[d]=e,d++}else if(t.isPointLight){let e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*x),e.distance=t.distance,e.decay=t.decay,t.castShadow){let e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[f]=n,i.pointShadowMap[f]=E,i.pointShadowMatrix[f]=t.shadow.matrix,g++}i.point[f]=e,f++}else if(t.isHemisphereLight){let e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(b*x),e.groundColor.copy(t.groundColor).multiplyScalar(b*x),i.hemi[p]=e,p++}}d>0&&(t.isWebGL2?(// WebGL 2
i.rectAreaLTC1=nc.LTC_FLOAT_1,i.rectAreaLTC2=nc.LTC_FLOAT_2):!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=nc.LTC_FLOAT_1,i.rectAreaLTC2=nc.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=nc.LTC_HALF_1,i.rectAreaLTC2=nc.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=s,i.ambient[1]=l,i.ambient[2]=u;let b=i.hash;(b.directionalLength!==c||b.pointLength!==f||b.spotLength!==h||b.rectAreaLength!==d||b.hemiLength!==p||b.numDirectionalShadows!==m||b.numPointShadows!==g||b.numSpotShadows!==v||b.numSpotMaps!==y)&&(i.directional.length=c,i.spot.length=h,i.rectArea.length=d,i.point.length=f,i.hemi.length=p,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotLightMatrix.length=v+y-_,i.spotLightMap.length=y,i.numSpotLightShadowsWithMaps=_,b.directionalLength=c,b.pointLength=f,b.spotLength=h,b.rectAreaLength=d,b.hemiLength=p,b.numDirectionalShadows=m,b.numPointShadows=g,b.numSpotShadows=v,b.numSpotMaps=y,i.version=r5++)},setupView:function(e,t){let n=0,r=0,l=0,u=0,c=0,f=t.matrixWorldInverse;for(let t=0,h=e.length;t<h;t++){let h=e[t];if(h.isDirectionalLight){let e=i.directional[n];e.direction.setFromMatrixPosition(h.matrixWorld),a.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(f),n++}else if(h.isSpotLight){let e=i.spot[l];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(f),e.direction.setFromMatrixPosition(h.matrixWorld),a.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(f),l++}else if(h.isRectAreaLight){let e=i.rectArea[u];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(f),// extract local rotation of light to derive width/height half vectors
s.identity(),o.copy(h.matrixWorld),o.premultiply(f),s.extractRotation(o),e.halfWidth.set(.5*h.width,0,0),e.halfHeight.set(0,.5*h.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),u++}else if(h.isPointLight){let e=i.point[r];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(f),r++}else if(h.isHemisphereLight){let e=i.hemi[c];e.direction.setFromMatrixPosition(h.matrixWorld),e.direction.transformDirection(f),c++}}},state:i}}function r7(e,t){let n=new r8(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function r9(e,t){let n=new WeakMap;return{get:function(r,i=0){let a;let o=n.get(r);return void 0===o?(a=new r7(e,t),n.set(r,[a])):i>=o.length?(a=new r7(e,t),o.push(a)):a=o[i],a},dispose:function(){n=new WeakMap}}}class ie extends tf{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class it extends tf{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function ir(e,t,n){let r=new na,i=new N,a=new N,o=new et,s=new ie({depthPacking:3201}),l=new it,u={},c=n.maxTextureSize,f={0:1,1:0,2:2},h=new t3({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new N},radius:{value:4}},vertexShader:"void main() {\n	gl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n	const float samples = float( VSM_SAMPLES );\n	float mean = 0.0;\n	float squared_mean = 0.0;\n	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n	for ( float i = 0.0; i < samples; i ++ ) {\n		float uvOffset = uvStart + i * uvStride;\n		#ifdef HORIZONTAL_PASS\n			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n			mean += distribution.x;\n			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n		#else\n			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n			mean += depth;\n			squared_mean += depth * depth;\n		#endif\n	}\n	mean = mean / samples;\n	squared_mean = squared_mean / samples;\n	float std_dev = sqrt( squared_mean - mean * mean );\n	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=h.clone();d.defines.HORIZONTAL_PASS=1;let p=new tO;p.setAttribute("position",new tb(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let m=new tK(p,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1;let v=this.type;function y(t,n,r,i){let a=null,o=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==o)a=o;else if(a=!0===r.isPointLight?l:s,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){// in this case we need a unique material instance reflecting the
// appropriate state
let e=a.uuid,t=n.uuid,r=u[e];void 0===r&&(r={},u[e]=r);let i=r[t];void 0===i&&(i=a.clone(),r[t]=i),a=i}if(a.visible=n.visible,a.wireframe=n.wireframe,3===i?a.side=null!==n.shadowSide?n.shadowSide:n.side:a.side=null!==n.shadowSide?n.shadowSide:f[n.side],a.alphaMap=n.alphaMap,a.alphaTest=n.alphaTest,a.map=n.map,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.clipIntersection=n.clipIntersection,a.displacementMap=n.displacementMap,a.displacementScale=n.displacementScale,a.displacementBias=n.displacementBias,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,!0===r.isPointLight&&!0===a.isMeshDistanceMaterial){let t=e.properties.get(a);t.light=r}return a}this.render=function(n,s,l){if(!1===g.enabled||!1===g.autoUpdate&&!1===g.needsUpdate||0===n.length)return;let u=e.getRenderTarget(),f=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),_=e.state;// Set GL state for depth map.
_.setBlending(0),_.buffers.color.setClear(1,1,1,1),_.buffers.depth.setTest(!0),_.setScissorTest(!1);// check for shadow map type changes
let x=3!==v&&3===this.type,b=3===v&&3!==this.type;// render depth map
for(let u=0,f=n.length;u<f;u++){let f=n[u],p=f.shadow;if(void 0===p){console.warn("THREE.WebGLShadowMap:",f,"has no shadow.");continue}if(!1===p.autoUpdate&&!1===p.needsUpdate)continue;i.copy(p.mapSize);let g=p.getFrameExtents();if(i.multiply(g),a.copy(p.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(a.x=Math.floor(c/g.x),i.x=a.x*g.x,p.mapSize.x=a.x),i.y>c&&(a.y=Math.floor(c/g.y),i.y=a.y*g.y,p.mapSize.y=a.y)),null===p.map||!0===x||!0===b){let e=3!==this.type?{minFilter:1003,magFilter:1003}:{};null!==p.map&&p.map.dispose(),p.map=new er(i.x,i.y,e),p.map.texture.name=f.name+".shadowMap",p.camera.updateProjectionMatrix()}e.setRenderTarget(p.map),e.clear();let v=p.getViewportCount();for(let n=0;n<v;n++){let i=p.getViewport(n);o.set(a.x*i.x,a.y*i.y,a.x*i.z,a.y*i.w),_.viewport(o),p.updateMatrices(f,n),r=p.getFrustum(),function n(i,a,o,s,l){if(!1===i.visible)return;let u=i.layers.test(a.layers);if(u&&(i.isMesh||i.isLine||i.isPoints)&&(i.castShadow||i.receiveShadow&&3===l)&&(!i.frustumCulled||r.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,i.matrixWorld);let n=t.update(i),r=i.material;if(Array.isArray(r)){let t=n.groups;for(let a=0,u=t.length;a<u;a++){let u=t[a],c=r[u.materialIndex];if(c&&c.visible){let t=y(i,c,s,l);e.renderBufferDirect(o,null,n,t,i,u)}}}else if(r.visible){let t=y(i,r,s,l);e.renderBufferDirect(o,null,n,t,i,null)}}let c=i.children;for(let e=0,t=c.length;e<t;e++)n(c[e],a,o,s,l)}(s,l,p.camera,f,this.type)}!0!==p.isPointLightShadow&&3===this.type&&function(n,r){let a=t.update(m);h.defines.VSM_SAMPLES!==n.blurSamples&&(h.defines.VSM_SAMPLES=n.blurSamples,d.defines.VSM_SAMPLES=n.blurSamples,h.needsUpdate=!0,d.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new er(i.x,i.y)),// vertical pass
h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,a,h,m,null),// horizontal pass
d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,a,d,m,null)}(p,l),p.needsUpdate=!1}v=this.type,g.needsUpdate=!1,e.setRenderTarget(u,f,p)}}function ii(e,t,n){let r=n.isWebGL2,i=new function(){let t=!1,n=new et,r=null,i=new et(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,o,s){!0===s&&(t*=o,r*=o,a*=o),n.set(t,r,a,o),!1===i.equals(n)&&(e.clearColor(t,r,a,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},a=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(t){t?z(e.DEPTH_TEST):B(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:default:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL)}r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},o=new function(){let t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,u=null;return{setTest:function(n){t||(n?z(e.STENCIL_TEST):B(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){(r!==t||i!==n||a!==o)&&(e.stencilFunc(t,n,o),r=t,i=n,a=o)},setOp:function(t,n,r){(o!==t||s!==n||l!==r)&&(e.stencilOp(t,n,r),o=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,u=null}}},s=new WeakMap,l=new WeakMap,u={},c={},f=new WeakMap,h=[],d=null,p=!1,m=null,g=null,v=null,y=null,_=null,x=null,b=null,S=!1,E=null,w=null,M=null,T=null,A=null,C=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),P=!1,R=e.getParameter(e.VERSION);-1!==R.indexOf("WebGL")?P=parseFloat(/^WebGL (\d)/.exec(R)[1])>=1:-1!==R.indexOf("OpenGL ES")&&(P=parseFloat(/^OpenGL ES (\d)/.exec(R)[1])>=2);let L=null,O={},I=e.getParameter(e.SCISSOR_BOX),U=e.getParameter(e.VIEWPORT),N=new et().fromArray(I),D=new et().fromArray(U);function k(t,n,i,a){let o=new Uint8Array(4),s=e.createTexture();// 4 is required to match default unpack alignment of 4.
e.bindTexture(t,s),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let s=0;s<i;s++)r&&(t===e.TEXTURE_3D||t===e.TEXTURE_2D_ARRAY)?e.texImage3D(n,0,e.RGBA,1,1,a,0,e.RGBA,e.UNSIGNED_BYTE,o):e.texImage2D(n+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o);return s}let F={};//
function z(t){!0!==u[t]&&(e.enable(t),u[t]=!0)}function B(t){!1!==u[t]&&(e.disable(t),u[t]=!1)}F[e.TEXTURE_2D]=k(e.TEXTURE_2D,e.TEXTURE_2D,1),F[e.TEXTURE_CUBE_MAP]=k(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(F[e.TEXTURE_2D_ARRAY]=k(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),F[e.TEXTURE_3D]=k(e.TEXTURE_3D,e.TEXTURE_3D,1,1)),// init
i.setClear(0,0,0,1),a.setClear(1),o.setClear(0),z(e.DEPTH_TEST),a.setFunc(3),W(!1),j(1),z(e.CULL_FACE),G(0);let V={100:e.FUNC_ADD,101:e.FUNC_SUBTRACT,102:e.FUNC_REVERSE_SUBTRACT};if(r)V[103]=e.MIN,V[104]=e.MAX;else{let e=t.get("EXT_blend_minmax");null!==e&&(V[103]=e.MIN_EXT,V[104]=e.MAX_EXT)}let H={200:e.ZERO,201:e.ONE,202:e.SRC_COLOR,204:e.SRC_ALPHA,210:e.SRC_ALPHA_SATURATE,208:e.DST_COLOR,206:e.DST_ALPHA,203:e.ONE_MINUS_SRC_COLOR,205:e.ONE_MINUS_SRC_ALPHA,209:e.ONE_MINUS_DST_COLOR,207:e.ONE_MINUS_DST_ALPHA};function G(t,n,r,i,a,o,s,l){if(0===t){!0===p&&(B(e.BLEND),p=!1);return}if(!1===p&&(z(e.BLEND),p=!0),5!==t){if(t!==m||l!==S){if((100!==g||100!==_)&&(e.blendEquation(e.FUNC_ADD),g=100,_=100),l)switch(t){case 1:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.ONE,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}v=null,y=null,x=null,b=null,m=t,S=l}return}// custom blending
a=a||n,o=o||r,s=s||i,(n!==g||a!==_)&&(e.blendEquationSeparate(V[n],V[a]),g=n,_=a),(r!==v||i!==y||o!==x||s!==b)&&(e.blendFuncSeparate(H[r],H[i],H[o],H[s]),v=r,y=i,x=o,b=s),m=t,S=!1}//
function W(t){E!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),E=t)}function j(t){0!==t?(z(e.CULL_FACE),t!==w&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):B(e.CULL_FACE),w=t}function X(t,n,r){t?(z(e.POLYGON_OFFSET_FILL),(T!==n||A!==r)&&(e.polygonOffset(n,r),T=n,A=r)):B(e.POLYGON_OFFSET_FILL)}return{buffers:{color:i,depth:a,stencil:o},enable:z,disable:B,bindFramebuffer:function(t,n){return c[t]!==n&&(e.bindFramebuffer(t,n),c[t]=n,r&&(t===e.DRAW_FRAMEBUFFER&&(c[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(c[e.DRAW_FRAMEBUFFER]=n)),!0)},drawBuffers:function(r,i){let a=h,o=!1;if(r){if(void 0===(a=f.get(i))&&(a=[],f.set(i,a)),r.isWebGLMultipleRenderTargets){let t=r.texture;if(a.length!==t.length||a[0]!==e.COLOR_ATTACHMENT0){for(let n=0,r=t.length;n<r;n++)a[n]=e.COLOR_ATTACHMENT0+n;a.length=t.length,o=!0}}else a[0]!==e.COLOR_ATTACHMENT0&&(a[0]=e.COLOR_ATTACHMENT0,o=!0)}else a[0]!==e.BACK&&(a[0]=e.BACK,o=!0);o&&(n.isWebGL2?e.drawBuffers(a):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))},useProgram:function(t){return d!==t&&(e.useProgram(t),d=t,!0)},setBlending:G,setMaterial:function(t,n){2===t.side?B(e.CULL_FACE):z(e.CULL_FACE);let r=1===t.side;n&&(r=!r),W(r),1===t.blending&&!1===t.transparent?G(0):G(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),a.setFunc(t.depthFunc),a.setTest(t.depthTest),a.setMask(t.depthWrite),i.setMask(t.colorWrite);let s=t.stencilWrite;o.setTest(s),s&&(o.setMask(t.stencilWriteMask),o.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),o.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),X(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?z(e.SAMPLE_ALPHA_TO_COVERAGE):B(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:W,setCullFace:j,setLineWidth:function(t){t!==M&&(P&&e.lineWidth(t),M=t)},setPolygonOffset:X,setScissorTest:function(t){t?z(e.SCISSOR_TEST):B(e.SCISSOR_TEST)},activeTexture:// texture
function(t){void 0===t&&(t=e.TEXTURE0+C-1),L!==t&&(e.activeTexture(t),L=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===L?e.TEXTURE0+C-1:L);let i=O[r];void 0===i&&(i={type:void 0,texture:void 0},O[r]=i),(i.type!==t||i.texture!==n)&&(L!==r&&(e.activeTexture(r),L=r),e.bindTexture(t,n||F[t]),i.type=t,i.texture=n)},unbindTexture:function(){let t=O[L];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(t,n){let r=l.get(n);void 0===r&&(r=new WeakMap,l.set(n,r));let i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){let r=l.get(n),i=r.get(t);s.get(n)!==i&&(// bind shader specific block index to global block point
e.uniformBlockBinding(n,i,t.__bindingPointIndex),s.set(n,i))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor://
function(t){!1===N.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),N.copy(t))},viewport:function(t){!1===D.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),D.copy(t))},reset://
function(){// reset state
e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),!0===r&&(e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),// reset internals
u={},L=null,O={},c={},f=new WeakMap,h=[],d=null,p=!1,m=null,g=null,v=null,y=null,_=null,x=null,b=null,S=!1,E=null,w=null,M=null,T=null,A=null,N.set(0,0,e.canvas.width,e.canvas.height),D.set(0,0,e.canvas.width,e.canvas.height),i.reset(),a.reset(),o.reset()}}}function ia(e,t,n,r,i,a,o){let s;let l=i.isWebGL2,u=i.maxTextures,c=i.maxCubemapSize,f=i.maxTextureSize,h=i.maxSamples,d=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,p="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap,g=new WeakMap,v=!1;try{v="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){// Ignore any errors
}function y(e,t){// Use OffscreenCanvas when available. Specially needed in web workers
return v?new OffscreenCanvas(e,t):z("canvas")}function _(e,t,n,r){let i=1;// only perform resize if necessary
if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){// only perform resize for certain image types
if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){let r=t?O:Math.floor,a=r(i*e.width),o=r(i*e.height);void 0===s&&(s=y(a,o));// cube textures can't reuse the same canvas
let l=n?y(a,o):s;l.width=a,l.height=o;let u=l.getContext("2d");return u.drawImage(e,0,0,a,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+o+")."),l}"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+").")}return e}function x(e){return L(e.width)&&L(e.height)}function w(e,t){return e.generateMipmaps&&t&&1003!==e.minFilter&&1006!==e.minFilter}function M(t){e.generateMipmap(t)}function T(n,r,i,a,o=!1){if(!1===l)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let s=r;return r===e.RED&&(i===e.FLOAT&&(s=e.R32F),i===e.HALF_FLOAT&&(s=e.R16F),i===e.UNSIGNED_BYTE&&(s=e.R8)),r===e.RED_INTEGER&&(i===e.UNSIGNED_BYTE&&(s=e.R8UI),i===e.UNSIGNED_SHORT&&(s=e.R16UI),i===e.UNSIGNED_INT&&(s=e.R32UI),i===e.BYTE&&(s=e.R8I),i===e.SHORT&&(s=e.R16I),i===e.INT&&(s=e.R32I)),r===e.RG&&(i===e.FLOAT&&(s=e.RG32F),i===e.HALF_FLOAT&&(s=e.RG16F),i===e.UNSIGNED_BYTE&&(s=e.RG8)),r===e.RGBA&&(i===e.FLOAT&&(s=e.RGBA32F),i===e.HALF_FLOAT&&(s=e.RGBA16F),i===e.UNSIGNED_BYTE&&(s=a===b&&!1===o?e.SRGB8_ALPHA8:e.RGBA8),i===e.UNSIGNED_SHORT_4_4_4_4&&(s=e.RGBA4),i===e.UNSIGNED_SHORT_5_5_5_1&&(s=e.RGB5_A1)),(s===e.R16F||s===e.R32F||s===e.RG16F||s===e.RG32F||s===e.RGBA16F||s===e.RGBA32F)&&t.get("EXT_color_buffer_float"),s}function A(e,t,n){return!0===w(e,n)||e.isFramebufferTexture&&1003!==e.minFilter&&1006!==e.minFilter?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}// Fallback filters for non-power-of-2 textures
function C(t){return 1003===t||1004===t||1005===t?e.NEAREST:e.LINEAR}//
function P(e){let t=e.target;t.removeEventListener("dispose",P),//
function(e){let t=r.get(e);if(void 0===t.__webglInit)return;// check if it's necessary to remove the WebGLTexture object
let n=e.source,i=g.get(n);if(i){let r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&I(e),0===Object.keys(i).length&&g.delete(n)}r.remove(e)}(t),t.isVideoTexture&&m.delete(t)}function R(t){let n=t.target;n.removeEventListener("dispose",R),function(t){let n=t.texture,i=r.get(t),a=r.get(n);if(void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),o.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++){if(Array.isArray(i.__webglFramebuffer[t]))for(let n=0;n<i.__webglFramebuffer[t].length;n++)e.deleteFramebuffer(i.__webglFramebuffer[t][n]);else e.deleteFramebuffer(i.__webglFramebuffer[t]);i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[t])}else{if(Array.isArray(i.__webglFramebuffer))for(let t=0;t<i.__webglFramebuffer.length;t++)e.deleteFramebuffer(i.__webglFramebuffer[t]);else e.deleteFramebuffer(i.__webglFramebuffer);if(i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let t=0;t<i.__webglColorRenderbuffer.length;t++)i.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[t]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let t=0,i=n.length;t<i;t++){let i=r.get(n[t]);i.__webglTexture&&(e.deleteTexture(i.__webglTexture),o.memory.textures--),r.remove(n[t])}r.remove(n),r.remove(t)}(n)}function I(t){let n=r.get(t);e.deleteTexture(n.__webglTexture);let i=t.source,a=g.get(i);delete a[n.__cacheKey],o.memory.textures--}//
let U=0;//
function N(t,i){let a=r.get(t);if(t.isVideoTexture&&function(e){let t=o.render.frame;m.get(e)!==t&&(m.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version){let e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(!1===e.complete)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{H(a,t,i);return}}n.bindTexture(e.TEXTURE_2D,a.__webglTexture,e.TEXTURE0+i)}let D={1e3:e.REPEAT,1001:e.CLAMP_TO_EDGE,1002:e.MIRRORED_REPEAT},k={1003:e.NEAREST,1004:e.NEAREST_MIPMAP_NEAREST,1005:e.NEAREST_MIPMAP_LINEAR,1006:e.LINEAR,1007:e.LINEAR_MIPMAP_NEAREST,1008:e.LINEAR_MIPMAP_LINEAR},F={512:e.NEVER,519:e.ALWAYS,513:e.LESS,515:e.LEQUAL,514:e.EQUAL,518:e.GEQUAL,516:e.GREATER,517:e.NOTEQUAL};function B(n,a,o){if(o?(e.texParameteri(n,e.TEXTURE_WRAP_S,D[a.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,D[a.wrapT]),(n===e.TEXTURE_3D||n===e.TEXTURE_2D_ARRAY)&&e.texParameteri(n,e.TEXTURE_WRAP_R,D[a.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,k[a.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,k[a.minFilter])):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),(n===e.TEXTURE_3D||n===e.TEXTURE_2D_ARRAY)&&e.texParameteri(n,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),(1001!==a.wrapS||1001!==a.wrapT)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,e.TEXTURE_MAG_FILTER,C(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,C(a.minFilter)),1003!==a.minFilter&&1006!==a.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),a.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,F[a.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){let o=t.get("EXT_texture_filter_anisotropic");1003!==a.magFilter&&(1005===a.minFilter||1008===a.minFilter)&&(1015!==a.type||!1!==t.has("OES_texture_float_linear"))&&(!1!==l||1016!==a.type||!1!==t.has("OES_texture_half_float_linear"))&&(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function V(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",P));// create Source <-> WebGLTextures mapping if necessary
let i=n.source,a=g.get(i);void 0===a&&(a={},g.set(i,a));// check if there is already a WebGLTexture object for the given texture parameters
let s=function(e){let t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(s!==t.__cacheKey){void 0===a[s]&&(// create new entry
a[s]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,// when a new instance of WebGLTexture was created, a texture upload is required
// even if the image contents are identical
r=!0),a[s].usedTimes++;// every time the texture cache key changes, it's necessary to check if an instance of
// WebGLTexture can be deleted in order to avoid a memory leak.
let i=a[t.__cacheKey];void 0!==i&&(a[t.__cacheKey].usedTimes--,0===i.usedTimes&&I(n)),// store references to cache key and WebGLTexture object
t.__cacheKey=s,t.__webglTexture=a[s].texture}return r}function H(t,i,o){let s=e.TEXTURE_2D;(i.isDataArrayTexture||i.isCompressedArrayTexture)&&(s=e.TEXTURE_2D_ARRAY),i.isData3DTexture&&(s=e.TEXTURE_3D);let u=V(t,i),c=i.source;n.bindTexture(s,t.__webglTexture,e.TEXTURE0+o);let h=r.get(c);if(c.version!==h.__version||!0===u){let t;n.activeTexture(e.TEXTURE0+o),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE);let r=!l&&(1001!==i.wrapS||1001!==i.wrapT||1003!==i.minFilter&&1006!==i.minFilter)&&!1===x(i.image),d=_(i.image,r,!1,f);d=Y(i,d);let p=x(d)||l,m=a.convert(i.format,i.colorSpace),g=a.convert(i.type),v=T(i.internalFormat,m,g,i.colorSpace,i.isVideoTexture);B(s,i,p);let y=i.mipmaps,b=l&&!0!==i.isVideoTexture,S=void 0===h.__version||!0===u,E=A(i,d,p);if(i.isDepthTexture)// populate depth texture with dummy data
v=e.DEPTH_COMPONENT,l?v=1015===i.type?e.DEPTH_COMPONENT32F:1014===i.type?e.DEPTH_COMPONENT24:1020===i.type?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT16:1015===i.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===i.format&&v===e.DEPTH_COMPONENT&&1012!==i.type&&1014!==i.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=1014,g=a.convert(i.type)),1027===i.format&&v===e.DEPTH_COMPONENT&&(// Depth stencil textures need the DEPTH_STENCIL internal format
// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)
v=e.DEPTH_STENCIL,1020!==i.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=1020,g=a.convert(i.type))),S&&(b?n.texStorage2D(e.TEXTURE_2D,1,v,d.width,d.height):n.texImage2D(e.TEXTURE_2D,0,v,d.width,d.height,0,m,g,null));else if(i.isDataTexture){// use manually created mipmaps if available
// if there are no manual mipmaps
// set 0 level mipmap and then use GL to generate other mipmap levels
if(y.length>0&&p){b&&S&&n.texStorage2D(e.TEXTURE_2D,E,v,y[0].width,y[0].height);for(let r=0,i=y.length;r<i;r++)t=y[r],b?n.texSubImage2D(e.TEXTURE_2D,r,0,0,t.width,t.height,m,g,t.data):n.texImage2D(e.TEXTURE_2D,r,v,t.width,t.height,0,m,g,t.data);i.generateMipmaps=!1}else b?(S&&n.texStorage2D(e.TEXTURE_2D,E,v,d.width,d.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,d.width,d.height,m,g,d.data)):n.texImage2D(e.TEXTURE_2D,0,v,d.width,d.height,0,m,g,d.data)}else if(i.isCompressedTexture){if(i.isCompressedArrayTexture){b&&S&&n.texStorage3D(e.TEXTURE_2D_ARRAY,E,v,y[0].width,y[0].height,d.depth);for(let r=0,a=y.length;r<a;r++)t=y[r],1023!==i.format?null!==m?b?n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,r,0,0,0,t.width,t.height,d.depth,m,t.data,0,0):n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,r,v,t.width,t.height,d.depth,0,t.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):b?n.texSubImage3D(e.TEXTURE_2D_ARRAY,r,0,0,0,t.width,t.height,d.depth,m,g,t.data):n.texImage3D(e.TEXTURE_2D_ARRAY,r,v,t.width,t.height,d.depth,0,m,g,t.data)}else{b&&S&&n.texStorage2D(e.TEXTURE_2D,E,v,y[0].width,y[0].height);for(let r=0,a=y.length;r<a;r++)t=y[r],1023!==i.format?null!==m?b?n.compressedTexSubImage2D(e.TEXTURE_2D,r,0,0,t.width,t.height,m,t.data):n.compressedTexImage2D(e.TEXTURE_2D,r,v,t.width,t.height,0,t.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):b?n.texSubImage2D(e.TEXTURE_2D,r,0,0,t.width,t.height,m,g,t.data):n.texImage2D(e.TEXTURE_2D,r,v,t.width,t.height,0,m,g,t.data)}}else if(i.isDataArrayTexture)b?(S&&n.texStorage3D(e.TEXTURE_2D_ARRAY,E,v,d.width,d.height,d.depth),n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,d.width,d.height,d.depth,m,g,d.data)):n.texImage3D(e.TEXTURE_2D_ARRAY,0,v,d.width,d.height,d.depth,0,m,g,d.data);else if(i.isData3DTexture)b?(S&&n.texStorage3D(e.TEXTURE_3D,E,v,d.width,d.height,d.depth),n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,d.width,d.height,d.depth,m,g,d.data)):n.texImage3D(e.TEXTURE_3D,0,v,d.width,d.height,d.depth,0,m,g,d.data);else if(i.isFramebufferTexture){if(S){if(b)n.texStorage2D(e.TEXTURE_2D,E,v,d.width,d.height);else{let t=d.width,r=d.height;for(let i=0;i<E;i++)n.texImage2D(e.TEXTURE_2D,i,v,t,r,0,m,g,null),t>>=1,r>>=1}}}else // regular Texture (image, video, canvas)
// use manually created mipmaps if available
// if there are no manual mipmaps
// set 0 level mipmap and then use GL to generate other mipmap levels
if(y.length>0&&p){b&&S&&n.texStorage2D(e.TEXTURE_2D,E,v,y[0].width,y[0].height);for(let r=0,i=y.length;r<i;r++)t=y[r],b?n.texSubImage2D(e.TEXTURE_2D,r,0,0,m,g,t):n.texImage2D(e.TEXTURE_2D,r,v,m,g,t);i.generateMipmaps=!1}else b?(S&&n.texStorage2D(e.TEXTURE_2D,E,v,d.width,d.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,m,g,d)):n.texImage2D(e.TEXTURE_2D,0,v,m,g,d);w(i,p)&&M(s),h.__version=c.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}// Render targets
// Setup storage for target texture and bind it to correct framebuffer
function G(t,i,o,s,l,u){let c=a.convert(o.format,o.colorSpace),f=a.convert(o.type),h=T(o.internalFormat,c,f,o.colorSpace),p=r.get(i);if(!p.__hasExternalTextures){let t=Math.max(1,i.width>>u),r=Math.max(1,i.height>>u);l===e.TEXTURE_3D||l===e.TEXTURE_2D_ARRAY?n.texImage3D(l,u,h,t,r,i.depth,0,c,f,null):n.texImage2D(l,u,h,t,r,0,c,f,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),q(i)?d.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,s,l,r.get(o).__webglTexture,0,X(i)):(l===e.TEXTURE_2D||l>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&l<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,s,l,r.get(o).__webglTexture,u),n.bindFramebuffer(e.FRAMEBUFFER,null)}// Setup storage for internal depth/stencil buffers and bind to correct framebuffer
function W(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer){let i=e.DEPTH_COMPONENT16;if(r||q(n)){let t=n.depthTexture;t&&t.isDepthTexture&&(1015===t.type?i=e.DEPTH_COMPONENT32F:1014===t.type&&(i=e.DEPTH_COMPONENT24));let r=X(n);q(n)?d.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,r,i,n.width,n.height):e.renderbufferStorageMultisample(e.RENDERBUFFER,r,i,n.width,n.height)}else e.renderbufferStorage(e.RENDERBUFFER,i,n.width,n.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(n.depthBuffer&&n.stencilBuffer){let i=X(n);r&&!1===q(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,i,e.DEPTH24_STENCIL8,n.width,n.height):q(n)?d.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,i,e.DEPTH24_STENCIL8,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else{let t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<t.length;i++){let o=t[i],s=a.convert(o.format,o.colorSpace),l=a.convert(o.type),u=T(o.internalFormat,s,l,o.colorSpace),c=X(n);r&&!1===q(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,c,u,n.width,n.height):q(n)?d.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,c,u,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,u,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}// Setup GL resources for a non-texture depth buffer
function j(t){let i=r.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(a)throw Error("target.depthTexture not supported in Cube render targets");!// Setup resources for a Depth Texture for a FBO (needs an extension)
function(t,i){let a=i&&i.isWebGLCubeRenderTarget;if(a)throw Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!(i.depthTexture&&i.depthTexture.isDepthTexture))throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),N(i.depthTexture,0);let o=r.get(i.depthTexture).__webglTexture,s=X(i);if(1026===i.depthTexture.format)q(i)?d.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0,s):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0);else if(1027===i.depthTexture.format)q(i)?d.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0,s):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0);else throw Error("Unknown depthTexture format")}(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),W(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),W(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(e.FRAMEBUFFER,null)}function X(e){return Math.min(h,e.samples)}function q(e){let n=r.get(e);return l&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function Y(e,n){let r=e.colorSpace,i=e.format,a=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||1035===e.format||r!==S&&""!==r&&(r===b||r===E?!1===l?!0===t.has("EXT_sRGB")&&1023===i?(e.format=1035,// it's not possible to generate mips in WebGL 1 with this extension
e.minFilter=1006,e.generateMipmaps=!1):n=$.sRGBToLinear(n):(1023!==i||1009!==a)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",r)),n}//
this.allocateTextureUnit=function(){let e=U;return e>=u&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+u),U+=1,e},this.resetTextureUnits=function(){U=0},this.setTexture2D=N,this.setTexture2DArray=function(t,i){let a=r.get(t);if(t.version>0&&a.__version!==t.version){H(a,t,i);return}n.bindTexture(e.TEXTURE_2D_ARRAY,a.__webglTexture,e.TEXTURE0+i)},this.setTexture3D=function(t,i){let a=r.get(t);if(t.version>0&&a.__version!==t.version){H(a,t,i);return}n.bindTexture(e.TEXTURE_3D,a.__webglTexture,e.TEXTURE0+i)},this.setTextureCube=function(t,i){let o=r.get(t);if(t.version>0&&o.__version!==t.version){(function(t,i,o){if(6!==i.image.length)return;let s=V(t,i),u=i.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+o);let f=r.get(u);if(u.version!==f.__version||!0===s){let t;n.activeTexture(e.TEXTURE0+o),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE);let r=i.isCompressedTexture||i.image[0].isCompressedTexture,h=i.image[0]&&i.image[0].isDataTexture,d=[];for(let e=0;e<6;e++)r||h?d[e]=h?i.image[e].image:i.image[e]:d[e]=_(i.image[e],!1,!0,c),d[e]=Y(i,d[e]);let p=d[0],m=x(p)||l,g=a.convert(i.format,i.colorSpace),v=a.convert(i.type),y=T(i.internalFormat,g,v,i.colorSpace),b=l&&!0!==i.isVideoTexture,S=void 0===f.__version||!0===s,E=A(i,p,m);if(B(e.TEXTURE_CUBE_MAP,i,m),r){b&&S&&n.texStorage2D(e.TEXTURE_CUBE_MAP,E,y,p.width,p.height);for(let r=0;r<6;r++){t=d[r].mipmaps;for(let a=0;a<t.length;a++){let o=t[a];1023!==i.format?null!==g?b?n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,a,0,0,o.width,o.height,g,o.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,a,y,o.width,o.height,0,o.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):b?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,a,0,0,o.width,o.height,g,v,o.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,a,y,o.width,o.height,0,g,v,o.data)}}}else{t=i.mipmaps,b&&S&&(t.length>0&&E++,n.texStorage2D(e.TEXTURE_CUBE_MAP,E,y,d[0].width,d[0].height));for(let r=0;r<6;r++)if(h){b?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,0,0,d[r].width,d[r].height,g,v,d[r].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,y,d[r].width,d[r].height,0,g,v,d[r].data);for(let i=0;i<t.length;i++){let a=t[i],o=a.image[r].image;b?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i+1,0,0,o.width,o.height,g,v,o.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i+1,y,o.width,o.height,0,g,v,o.data)}}else{b?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,0,0,g,v,d[r]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,y,g,v,d[r]);for(let i=0;i<t.length;i++){let a=t[i];b?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i+1,0,0,g,v,a.image[r]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i+1,y,g,v,a.image[r])}}}w(i,m)&&M(e.TEXTURE_CUBE_MAP),f.__version=u.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version})(o,t,i);return}n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture,e.TEXTURE0+i)},this.rebindTextures=// rebind framebuffer with external textures
function(t,n,i){let a=r.get(t);void 0!==n&&G(a.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==i&&j(t)},this.setupRenderTarget=// Set up GL resources for the render target
function(t){let s=t.texture,u=r.get(t),c=r.get(s);t.addEventListener("dispose",R),!0!==t.isWebGLMultipleRenderTargets&&(void 0===c.__webglTexture&&(c.__webglTexture=e.createTexture()),c.__version=s.version,o.memory.textures++);let f=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultipleRenderTargets,d=x(t)||l;// Setup framebuffer
if(f){u.__webglFramebuffer=[];for(let t=0;t<6;t++)if(l&&s.mipmaps&&s.mipmaps.length>0){u.__webglFramebuffer[t]=[];for(let n=0;n<s.mipmaps.length;n++)u.__webglFramebuffer[t][n]=e.createFramebuffer()}else u.__webglFramebuffer[t]=e.createFramebuffer()}else{if(l&&s.mipmaps&&s.mipmaps.length>0){u.__webglFramebuffer=[];for(let t=0;t<s.mipmaps.length;t++)u.__webglFramebuffer[t]=e.createFramebuffer()}else u.__webglFramebuffer=e.createFramebuffer();if(h){if(i.drawBuffers){let n=t.texture;for(let t=0,i=n.length;t<i;t++){let i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.")}if(l&&t.samples>0&&!1===q(t)){let r=h?s:[s];u.__webglMultisampledFramebuffer=e.createFramebuffer(),u.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){let i=r[n];u.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,u.__webglColorRenderbuffer[n]);let o=a.convert(i.format,i.colorSpace),s=a.convert(i.type),l=T(i.internalFormat,o,s,i.colorSpace,!0===t.isXRRenderTarget),c=X(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,c,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,u.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(u.__webglDepthRenderbuffer=e.createRenderbuffer(),W(u.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}// Setup color buffer
if(f){n.bindTexture(e.TEXTURE_CUBE_MAP,c.__webglTexture),B(e.TEXTURE_CUBE_MAP,s,d);for(let n=0;n<6;n++)if(l&&s.mipmaps&&s.mipmaps.length>0)for(let r=0;r<s.mipmaps.length;r++)G(u.__webglFramebuffer[n][r],t,s,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,r);else G(u.__webglFramebuffer[n],t,s,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);w(s,d)&&M(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(h){let i=t.texture;for(let a=0,o=i.length;a<o;a++){let o=i[a],s=r.get(o);n.bindTexture(e.TEXTURE_2D,s.__webglTexture),B(e.TEXTURE_2D,o,d),G(u.__webglFramebuffer,t,o,e.COLOR_ATTACHMENT0+a,e.TEXTURE_2D,0),w(o,d)&&M(e.TEXTURE_2D)}n.unbindTexture()}else{let r=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(l?r=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(r,c.__webglTexture),B(r,s,d),l&&s.mipmaps&&s.mipmaps.length>0)for(let n=0;n<s.mipmaps.length;n++)G(u.__webglFramebuffer[n],t,s,e.COLOR_ATTACHMENT0,r,n);else G(u.__webglFramebuffer,t,s,e.COLOR_ATTACHMENT0,r,0);w(s,d)&&M(r),n.unbindTexture()}t.depthBuffer&&j(t)},this.updateRenderTargetMipmap=function(t){let i=x(t)||l,a=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let o=0,s=a.length;o<s;o++){let s=a[o];if(w(s,i)){let i=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=r.get(s).__webglTexture;n.bindTexture(i,a),M(i),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(l&&t.samples>0&&!1===q(t)){let i=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=t.width,o=t.height,s=e.COLOR_BUFFER_BIT,l=[],u=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,c=r.get(t),f=!0===t.isWebGLMultipleRenderTargets;// If MRT we need to remove FBO attachments
if(f)for(let t=0;t<i.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,c.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,c.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,c.__webglFramebuffer);for(let n=0;n<i.length;n++){l.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&l.push(u);let h=void 0!==c.__ignoreDepthValues&&c.__ignoreDepthValues;if(!1===h&&(t.depthBuffer&&(s|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&(s|=e.STENCIL_BUFFER_BIT)),f&&e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,c.__webglColorRenderbuffer[n]),!0===h&&(e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[u]),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[u])),f){let t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,a,o,0,0,a,o,s,e.NEAREST),p&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,l)}// If MRT since pre-blit we removed the FBO we need to reconstruct the attachments
if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),f)for(let t=0;t<i.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,c.__webglColorRenderbuffer[t]);let a=r.get(i[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,c.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,a,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,c.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=j,this.setupFrameBufferTexture=G,this.useMultisampledRTT=q}function io(e,t,n){let r=n.isWebGL2;return{convert:function(n,i=""){let a;let o=i===b||i===E?1:0;if(1009===n)return e.UNSIGNED_BYTE;if(1017===n)return e.UNSIGNED_SHORT_4_4_4_4;if(1018===n)return e.UNSIGNED_SHORT_5_5_5_1;if(1010===n)return e.BYTE;if(1011===n)return e.SHORT;if(1012===n)return e.UNSIGNED_SHORT;if(1013===n)return e.INT;if(1014===n)return e.UNSIGNED_INT;if(1015===n)return e.FLOAT;if(1016===n)return r?e.HALF_FLOAT:null!==(a=t.get("OES_texture_half_float"))?a.HALF_FLOAT_OES:null;if(1021===n)return e.ALPHA;if(1023===n)return e.RGBA;if(1024===n)return e.LUMINANCE;if(1025===n)return e.LUMINANCE_ALPHA;if(1026===n)return e.DEPTH_COMPONENT;if(1027===n)return e.DEPTH_STENCIL;// WebGL 1 sRGB fallback
if(1035===n)return null!==(a=t.get("EXT_sRGB"))?a.SRGB_ALPHA_EXT:null;// WebGL2 formats.
if(1028===n)return e.RED;if(1029===n)return e.RED_INTEGER;if(1030===n)return e.RG;if(1031===n)return e.RG_INTEGER;if(1033===n)return e.RGBA_INTEGER;// S3TC
if(33776===n||33777===n||33778===n||33779===n){if(1===o){if(null===(a=t.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(33776===n)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===n)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===n)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===n)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(a=t.get("WEBGL_compressed_texture_s3tc")))return null;if(33776===n)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===n)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===n)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===n)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}}// PVRTC
if(35840===n||35841===n||35842===n||35843===n){if(null===(a=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(35840===n)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===n)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===n)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===n)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}// ETC1
if(36196===n)return null!==(a=t.get("WEBGL_compressed_texture_etc1"))?a.COMPRESSED_RGB_ETC1_WEBGL:null;// ETC2
if(37492===n||37496===n){if(null===(a=t.get("WEBGL_compressed_texture_etc")))return null;if(37492===n)return 1===o?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===n)return 1===o?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}// ASTC
if(37808===n||37809===n||37810===n||37811===n||37812===n||37813===n||37814===n||37815===n||37816===n||37817===n||37818===n||37819===n||37820===n||37821===n){if(null===(a=t.get("WEBGL_compressed_texture_astc")))return null;if(37808===n)return 1===o?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===n)return 1===o?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===n)return 1===o?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===n)return 1===o?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===n)return 1===o?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===n)return 1===o?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===n)return 1===o?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===n)return 1===o?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===n)return 1===o?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===n)return 1===o?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===n)return 1===o?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===n)return 1===o?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===n)return 1===o?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===n)return 1===o?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}// BPTC
if(36492===n||36494===n||36495===n){if(null===(a=t.get("EXT_texture_compression_bptc")))return null;if(36492===n)return 1===o?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(36494===n)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(36495===n)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}// RGTC
if(36283===n||36284===n||36285===n||36286===n){if(null===(a=t.get("EXT_texture_compression_rgtc")))return null;if(36492===n)return a.COMPRESSED_RED_RGTC1_EXT;if(36284===n)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===n)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===n)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return(//
1020===n?r?e.UNSIGNED_INT_24_8:null!==(a=t.get("WEBGL_depth_texture"))?a.UNSIGNED_INT_24_8_WEBGL:null:void 0!==e[n]?e[n]:null)}}}class is extends t5{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class il extends e8{constructor(){super(),this.isGroup=!0,this.type="Group"}}const iu={type:"move"};class ic{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new il,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new il,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new eo,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new eo),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new il,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new eo,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new eo),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,a=null,o=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){for(let r of(a=!0,e.hand.values())){// Update the joints groups with the XRJoint poses
let e=t.getJointPose(r,n),i=this._getHandJoint(l,r);null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,i.jointRadius=e.radius),i.visible=null!==e}// Custom events
// Check pinchz
let r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],o=r.position.distanceTo(i.position);l.inputState.pinching&&o>.025?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&o<=.015&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&null!==(i=t.getPose(e.gripSpace,n))&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1);null!==o&&(null===(r=t.getPose(e.targetRaySpace,n))&&null!==i&&(r=i),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(iu)))}return null!==o&&(o.visible=null!==r),null!==s&&(s.visible=null!==i),null!==l&&(l.visible=null!==a),this}// private method
_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){let n=new il;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class ih extends ee{constructor(e,t,n,r,i,a,o,s,l,u){if(1026!==(u=void 0!==u?u:1026)&&1027!==u)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&1026===u&&(n=1014),void 0===n&&1027===u&&(n=1020),super(null,r,i,a,o,s,u,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==o?o:1003,this.minFilter=void 0!==s?s:1003,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){let t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class id extends M{constructor(e,t){super();let n=this,r=null,i=1,a=null,o="local-floor",s=1,l=null,u=null,c=null,f=null,h=null,d=null,p=t.getContextAttributes(),m=null,g=null,v=[],y=[],_=new t5;_.layers.enable(1),_.viewport=new et;let x=new t5;x.layers.enable(2),x.viewport=new et;let b=[_,x],S=new is;S.layers.enable(1),S.layers.enable(2);let E=null,w=null;//
function M(e){let t=y.indexOf(e.inputSource);if(-1===t)return;let n=v[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||a),n.dispatchEvent({type:e.type,data:e.inputSource}))}function T(){r.removeEventListener("select",M),r.removeEventListener("selectstart",M),r.removeEventListener("selectend",M),r.removeEventListener("squeeze",M),r.removeEventListener("squeezestart",M),r.removeEventListener("squeezeend",M),r.removeEventListener("end",T),r.removeEventListener("inputsourceschange",A);for(let e=0;e<v.length;e++){let t=y[e];null!==t&&(y[e]=null,v[e].disconnect(t))}E=null,w=null,// restore framebuffer/rendering state
e.setRenderTarget(m),h=null,f=null,c=null,r=null,g=null,//
I.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function A(e){// Notify disconnected
for(let t=0;t<e.removed.length;t++){let n=e.removed[t],r=y.indexOf(n);r>=0&&(y[r]=null,v[r].disconnect(n))}// Notify connected
for(let t=0;t<e.added.length;t++){let n=e.added[t],r=y.indexOf(n);if(-1===r){// Assign input source a controller that currently has no input source
for(let e=0;e<v.length;e++){if(e>=y.length){y.push(n),r=e;break}if(null===y[e]){y[e]=n,r=e;break}}// If all controllers do currently receive input we ignore new ones
if(-1===r)break}let i=v[r];i&&i.connect(n)}}//
this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=v[e];return void 0===t&&(t=new ic,v[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=v[e];return void 0===t&&(t=new ic,v[e]=t),t.getGripSpace()},this.getHand=function(e){let t=v[e];return void 0===t&&(t=new ic,v[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){o=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==f?f:h},this.getBinding=function(){return c},this.getFrame=function(){return d},this.getSession=function(){return r},this.setSession=async function(u){if(null!==(r=u)){if(m=e.getRenderTarget(),r.addEventListener("select",M),r.addEventListener("selectstart",M),r.addEventListener("selectend",M),r.addEventListener("squeeze",M),r.addEventListener("squeezestart",M),r.addEventListener("squeezeend",M),r.addEventListener("end",T),r.addEventListener("inputsourceschange",A),!0!==p.xrCompatible&&await t.makeXRCompatible(),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2){let n={antialias:void 0!==r.renderState.layers||p.antialias,alpha:!0,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:i};h=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:h}),g=new er(h.framebufferWidth,h.framebufferHeight,{format:1023,type:1009,colorSpace:e.outputColorSpace,stencilBuffer:p.stencil})}else{let n=null,a=null,o=null;p.depth&&(o=p.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=p.stencil?1027:1026,a=p.stencil?1020:1014);let s={colorFormat:t.RGBA8,depthFormat:o,scaleFactor:i};f=(c=new XRWebGLBinding(r,t)).createProjectionLayer(s),r.updateRenderState({layers:[f]}),g=new er(f.textureWidth,f.textureHeight,{format:1023,type:1009,depthTexture:new ih(f.textureWidth,f.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:p.stencil,colorSpace:e.outputColorSpace,samples:p.antialias?4:0});let l=e.properties.get(g);l.__ignoreDepthValues=f.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(s),l=null,a=await r.requestReferenceSpace(o),I.setContext(r),I.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode};//
let P=new eo,R=new eo;function L(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;S.near=x.near=_.near=e.near,S.far=x.far=_.far=e.far,(E!==S.near||w!==S.far)&&(// Note that the new renderState won't apply until the next frame. See #18320
r.updateRenderState({depthNear:S.near,depthFar:S.far}),E=S.near,w=S.far);let t=e.parent,n=S.cameras;L(S,t);for(let e=0;e<n.length;e++)L(n[e],t);2===n.length?/**
		 * Assumes 2 cameras that are parallel and share an X-axis, and that
		 * the cameras' projection and world matrices have already been set.
		 * And that near and far planes are identical for both cameras.
		 * Visualization of this technique: https://computergraphics.stackexchange.com/a/4765
		 */function(e,t,n){P.setFromMatrixPosition(t.matrixWorld),R.setFromMatrixPosition(n.matrixWorld);let r=P.distanceTo(R),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],u=(i[9]-1)/i[5],c=(i[8]-1)/i[0],f=(a[8]+1)/a[0],h=r/(-c+f),d=-(h*c);// TODO: Better way to apply this offset?
t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(d),e.translateZ(h),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();// Find the union of the frustum values of the cameras and scale
// the values so that the near plane's position does not change in world space,
// although must now be relative to the new union camera.
let p=o+h,m=s+h,g=o*c-d,v=o*f+(r-d),y=l*s/m*p,_=u*s/m*p;e.projectionMatrix.makePerspective(g,v,y,_,p,m),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}(S,_,x):S.projectionMatrix.copy(_.projectionMatrix),null===t?e.matrix.copy(S.matrixWorld):(e.matrix.copy(t.matrixWorld),e.matrix.invert(),e.matrix.multiply(S.matrixWorld)),e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(S.projectionMatrix),e.projectionMatrixInverse.copy(S.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*C*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)},this.getCamera=function(){return S},this.getFoveation=function(){if(null!==f||null!==h)return s},this.setFoveation=function(e){// 0 = no foveation = full resolution
// 1 = maximum foveation = the edges render at lower resolution
s=e,null!==f&&(f.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)};// Animation Loop
let O=null,I=new no;I.setAnimationLoop(function(t,r){if(u=r.getViewerPose(l||a),d=r,null!==u){let t=u.views;null!==h&&(e.setRenderTargetFramebuffer(g,h.framebuffer),e.setRenderTarget(g));let n=!1;t.length!==S.cameras.length&&(S.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){let i=t[r],a=null;if(null!==h)a=h.getViewport(i);else{let t=c.getViewSubImage(f,i);a=t.viewport,0===r&&(e.setRenderTargetTextures(g,t.colorTexture,f.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(g))}let o=b[r];void 0===o&&((o=new t5).layers.enable(r),o.viewport=new et,b[r]=o),o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.quaternion,o.scale),o.projectionMatrix.fromArray(i.projectionMatrix),o.projectionMatrixInverse.copy(o.projectionMatrix).invert(),o.viewport.set(a.x,a.y,a.width,a.height),0===r&&(S.matrix.copy(o.matrix),S.matrix.decompose(S.position,S.quaternion,S.scale)),!0===n&&S.cameras.push(o)}}//
for(let e=0;e<v.length;e++){let t=y[e],n=v[e];null!==t&&void 0!==n&&n.update(t,r,l||a)}O&&O(t,r),r.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:r}),d=null}),this.setAnimationLoop=function(e){O=e},this.dispose=function(){}}}function ip(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function r(r,i){r.opacity.value=i.opacity,i.color&&r.diffuse.value.copy(i.color),i.emissive&&r.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(r.map.value=i.map,n(i.map,r.mapTransform)),i.alphaMap&&(r.alphaMap.value=i.alphaMap,n(i.alphaMap,r.alphaMapTransform)),i.bumpMap&&(r.bumpMap.value=i.bumpMap,n(i.bumpMap,r.bumpMapTransform),r.bumpScale.value=i.bumpScale,1===i.side&&(r.bumpScale.value*=-1)),i.normalMap&&(r.normalMap.value=i.normalMap,n(i.normalMap,r.normalMapTransform),r.normalScale.value.copy(i.normalScale),1===i.side&&r.normalScale.value.negate()),i.displacementMap&&(r.displacementMap.value=i.displacementMap,n(i.displacementMap,r.displacementMapTransform),r.displacementScale.value=i.displacementScale,r.displacementBias.value=i.displacementBias),i.emissiveMap&&(r.emissiveMap.value=i.emissiveMap,n(i.emissiveMap,r.emissiveMapTransform)),i.specularMap&&(r.specularMap.value=i.specularMap,n(i.specularMap,r.specularMapTransform)),i.alphaTest>0&&(r.alphaTest.value=i.alphaTest);let a=t.get(i).envMap;if(a&&(r.envMap.value=a,r.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,r.reflectivity.value=i.reflectivity,r.ior.value=i.ior,r.refractionRatio.value=i.refractionRatio),i.lightMap){r.lightMap.value=i.lightMap;// artist-friendly light intensity scaling factor
let t=!0===e._useLegacyLights?Math.PI:1;r.lightMapIntensity.value=i.lightMapIntensity*t,n(i.lightMap,r.lightMapTransform)}i.aoMap&&(r.aoMap.value=i.aoMap,r.aoMapIntensity.value=i.aoMapIntensity,n(i.aoMap,r.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,t1(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,i,a,o,s){i.isMeshBasicMaterial?r(e,i):i.isMeshLambertMaterial?r(e,i):i.isMeshToonMaterial?(r(e,i),i.gradientMap&&(e.gradientMap.value=i.gradientMap)):i.isMeshPhongMaterial?(r(e,i),e.specular.value.copy(i.specular),e.shininess.value=Math.max(i.shininess,1e-4)):i.isMeshStandardMaterial?(r(e,i),function(e,r){e.metalness.value=r.metalness,r.metalnessMap&&(e.metalnessMap.value=r.metalnessMap,n(r.metalnessMap,e.metalnessMapTransform)),e.roughness.value=r.roughness,r.roughnessMap&&(e.roughnessMap.value=r.roughnessMap,n(r.roughnessMap,e.roughnessMapTransform));let i=t.get(r).envMap;i&&(e.envMapIntensity.value=r.envMapIntensity)}(e,i),i.isMeshPhysicalMaterial&&(e.ior.value=i.ior,i.sheen>0&&(e.sheenColor.value.copy(i.sheenColor).multiplyScalar(i.sheen),e.sheenRoughness.value=i.sheenRoughness,i.sheenColorMap&&(e.sheenColorMap.value=i.sheenColorMap,n(i.sheenColorMap,e.sheenColorMapTransform)),i.sheenRoughnessMap&&(e.sheenRoughnessMap.value=i.sheenRoughnessMap,n(i.sheenRoughnessMap,e.sheenRoughnessMapTransform))),i.clearcoat>0&&(e.clearcoat.value=i.clearcoat,e.clearcoatRoughness.value=i.clearcoatRoughness,i.clearcoatMap&&(e.clearcoatMap.value=i.clearcoatMap,n(i.clearcoatMap,e.clearcoatMapTransform)),i.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=i.clearcoatRoughnessMap,n(i.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),i.clearcoatNormalMap&&(e.clearcoatNormalMap.value=i.clearcoatNormalMap,n(i.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(i.clearcoatNormalScale),1===i.side&&e.clearcoatNormalScale.value.negate())),i.iridescence>0&&(e.iridescence.value=i.iridescence,e.iridescenceIOR.value=i.iridescenceIOR,e.iridescenceThicknessMinimum.value=i.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=i.iridescenceThicknessRange[1],i.iridescenceMap&&(e.iridescenceMap.value=i.iridescenceMap,n(i.iridescenceMap,e.iridescenceMapTransform)),i.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=i.iridescenceThicknessMap,n(i.iridescenceThicknessMap,e.iridescenceThicknessMapTransform))),i.transmission>0&&(e.transmission.value=i.transmission,e.transmissionSamplerMap.value=s.texture,e.transmissionSamplerSize.value.set(s.width,s.height),i.transmissionMap&&(e.transmissionMap.value=i.transmissionMap,n(i.transmissionMap,e.transmissionMapTransform)),e.thickness.value=i.thickness,i.thicknessMap&&(e.thicknessMap.value=i.thicknessMap,n(i.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=i.attenuationDistance,e.attenuationColor.value.copy(i.attenuationColor)),i.anisotropy>0&&(e.anisotropyVector.value.set(i.anisotropy*Math.cos(i.anisotropyRotation),i.anisotropy*Math.sin(i.anisotropyRotation)),i.anisotropyMap&&(e.anisotropyMap.value=i.anisotropyMap,n(i.anisotropyMap,e.anisotropyMapTransform))),e.specularIntensity.value=i.specularIntensity,e.specularColor.value.copy(i.specularColor),i.specularColorMap&&(e.specularColorMap.value=i.specularColorMap,n(i.specularColorMap,e.specularColorMapTransform)),i.specularIntensityMap&&(e.specularIntensityMap.value=i.specularIntensityMap,n(i.specularIntensityMap,e.specularIntensityMapTransform)))):i.isMeshMatcapMaterial?(r(e,i),i.matcap&&(e.matcap.value=i.matcap)):i.isMeshDepthMaterial?r(e,i):i.isMeshDistanceMaterial?(r(e,i),function(e,n){let r=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),e.nearDistance.value=r.shadow.camera.near,e.farDistance.value=r.shadow.camera.far}(e,i)):i.isMeshNormalMaterial?r(e,i):i.isLineBasicMaterial?(e.diffuse.value.copy(i.color),e.opacity.value=i.opacity,i.map&&(e.map.value=i.map,n(i.map,e.mapTransform)),i.isLineDashedMaterial&&(e.dashSize.value=i.dashSize,e.totalSize.value=i.dashSize+i.gapSize,e.scale.value=i.scale)):i.isPointsMaterial?(e.diffuse.value.copy(i.color),e.opacity.value=i.opacity,e.size.value=i.size*a,e.scale.value=.5*o,i.map&&(e.map.value=i.map,n(i.map,e.uvTransform)),i.alphaMap&&(e.alphaMap.value=i.alphaMap,n(i.alphaMap,e.alphaMapTransform)),i.alphaTest>0&&(e.alphaTest.value=i.alphaTest)):i.isSpriteMaterial?(e.diffuse.value.copy(i.color),e.opacity.value=i.opacity,e.rotation.value=i.rotation,i.map&&(e.map.value=i.map,n(i.map,e.mapTransform)),i.alphaMap&&(e.alphaMap.value=i.alphaMap,n(i.alphaMap,e.alphaMapTransform)),i.alphaTest>0&&(e.alphaTest.value=i.alphaTest)):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1);// #15581
}}}function im(e,t,n,r){let i={},a={},o=[],s=n.isWebGL2?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(e){let t={boundary:0,storage:0// bytes
};return"number"==typeof e?(// float/int
t.boundary=4,t.storage=4):e.isVector2?(// vec2
t.boundary=8,t.storage=8):e.isVector3||e.isColor?(// vec3
t.boundary=16,t.storage=12):e.isVector4?(// vec4
t.boundary=16,t.storage=16):e.isMatrix3?(// mat3 (in STD140 a 3x3 matrix is represented as 3x4)
t.boundary=48,t.storage=48):e.isMatrix4?(// mat4
t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){let n=t.target;n.removeEventListener("dispose",u);let r=o.indexOf(n.__bindingPointIndex);o.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete a[n.id]}return{bind:function(e,t){let n=t.program;r.uniformBlockBinding(e,n)},update:function(n,c){let f=i[n.id];void 0===f&&(function(e){// determine total buffer size according to the STD140 layout
// Hint: STD140 is the only supported layout in WebGL 2
let t=e.uniforms,n=0,r=0;for(let e=0,i=t.length;e<i;e++){let i=t[e],a={boundary:0,storage:0// bytes
},o=Array.isArray(i.value)?i.value:[i.value];for(let e=0,t=o.length;e<t;e++){let t=o[e],n=l(t);a.boundary+=n.boundary,a.storage+=n.storage}//
if(// the following two properties will be used for partial buffer updates
i.__data=new Float32Array(a.storage/Float32Array.BYTES_PER_ELEMENT),i.__offset=n,e>0){r=n%16;let e=16-r;0!==r&&e-a.boundary<0&&(// add padding and adjust offset
n+=16-r,i.__offset=n)}n+=a.storage}// ensure correct final padding
(r=n%16)>0&&(n+=16-r),//
e.__size=n,e.__cache={}}(n),f=function(t){// the setup of an UBO is independent of a particular shader program but global
let n=function(){for(let e=0;e<s;e++)if(-1===o.indexOf(e))return o.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;let r=e.createBuffer(),i=t.__size,a=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,i,a),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}(n),i[n.id]=f,n.addEventListener("dispose",u));// ensure to update the binding points/block indices mapping for this program
let h=c.program;r.updateUBOMapping(n,h);// update UBO once per frame
let d=t.render.frame;a[n.id]!==d&&(function(t){let n=i[t.id],r=t.uniforms,a=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let t=0,n=r.length;t<n;t++){let n=r[t];// partly update the buffer if necessary
if(!0===function(e,t,n){let r=e.value;if(void 0===n[t]){// cache entry does not exist so far
if("number"==typeof r)n[t]=r;else{let e=Array.isArray(r)?r:[r],i=[];for(let t=0;t<e.length;t++)i.push(e[t].clone());n[t]=i}return!0}// compare current value with cached entry
if("number"==typeof r){if(n[t]!==r)return n[t]=r,!0}else{let e=Array.isArray(n[t])?n[t]:[n[t]],i=Array.isArray(r)?r:[r];for(let t=0;t<e.length;t++){let n=e[t];if(!1===n.equals(i[t]))return n.copy(i[t]),!0}}return!1}(n,t,a)){let t=n.__offset,r=Array.isArray(n.value)?n.value:[n.value],i=0;for(let a=0;a<r.length;a++){let o=r[a],s=l(o);"number"==typeof o?(n.__data[0]=o,e.bufferSubData(e.UNIFORM_BUFFER,t+i,n.__data)):o.isMatrix3?(// manually converting 3x3 to 3x4
n.__data[0]=o.elements[0],n.__data[1]=o.elements[1],n.__data[2]=o.elements[2],n.__data[3]=o.elements[0],n.__data[4]=o.elements[3],n.__data[5]=o.elements[4],n.__data[6]=o.elements[5],n.__data[7]=o.elements[0],n.__data[8]=o.elements[6],n.__data[9]=o.elements[7],n.__data[10]=o.elements[8],n.__data[11]=o.elements[0]):(o.toArray(n.__data,i),i+=s.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,n.__data)}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),a[n.id]=d)},dispose:function(){for(let t in i)e.deleteBuffer(i[t]);o=[],i={},a={}}}}class ig{constructor(e={}){let t,n,r,i,a,o,s,l,u,c,f,h,d,p,m,g,v,y,_,x,E,w,M,T,A;let{canvas:C=function(){let e=z("canvas");return e.style.display="block",e}(),context:P=null,depth:R=!0,stencil:L=!0,alpha:I=!1,antialias:U=!1,premultipliedAlpha:D=!0,preserveDrawingBuffer:k=!1,powerPreference:F="default",failIfMajorPerformanceCaveat:B=!1}=e;this.isWebGLRenderer=!0,t=null!==P?P.getContextAttributes().alpha:I;let V=new Uint32Array(4),H=new Int32Array(4),G=null,W=null,j=[],X=[];// public properties
this.domElement=C,// Debug configuration container
this.debug={/**
			 * Enables error checking and reporting when shader programs are being compiled
			 * @type {boolean}
			 */checkShaderErrors:!0,/**
			 * Callback for custom error reporting.
			 * @type {?Function}
			 */onShaderError:null},// clearing
this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,// scene graph
this.sortObjects=!0,// user-defined clipping
this.clippingPlanes=[],this.localClippingEnabled=!1,// physically based shading
this.outputColorSpace=b,// physical lights
this._useLegacyLights=!1,// tone mapping
this.toneMapping=0,this.toneMappingExposure=1;// internal properties
let q=this,Y=!1,$=0,K=0,Z=null,J=-1,Q=null,ee=new et,en=new et,ei=null,ea=new tg(0),es=0,el=C.width,eu=C.height,ec=1,ef=null,eh=null,ed=new et(0,0,el,eu),ep=new et(0,0,el,eu),em=!1,eg=new na,ev=!1,ey=!1,e_=null,ex=new eD,eb=new N,eS=new eo,eE={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ew(){return null===Z?ec:1}// initialize
let eM=P;function eT(e,t){for(let n=0;n<e.length;n++){let r=e[n],i=C.getContext(r,t);if(null!==i)return i}return null}try{if("setAttribute"in C&&C.setAttribute("data-engine","three.js r156"),// event listeners must be registered before WebGL context is created, see #12753
C.addEventListener("webglcontextlost",eP,!1),C.addEventListener("webglcontextrestored",eR,!1),C.addEventListener("webglcontextcreationerror",eL,!1),null===eM){let e=["webgl2","webgl","experimental-webgl"];if(!0===q.isWebGL1Renderer&&e.shift(),eM=eT(e,{alpha:!0,depth:R,stencil:L,antialias:U,premultipliedAlpha:D,preserveDrawingBuffer:k,powerPreference:F,failIfMajorPerformanceCaveat:B}),null===eM){if(eT(e))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.")}}"undefined"!=typeof WebGLRenderingContext&&eM instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===eM.getShaderPrecisionFormat&&(eM.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function eA(){n=new nI(eM),r=new ng(eM,n,e),n.init(r),M=new io(eM,n,r),i=new ii(eM,n,r),a=new nD(eM),o=new rQ,s=new ia(eM,n,i,o,r,M,a),l=new ny(q),u=new nO(q),c=new ns(eM,r),T=new np(eM,n,c,r),f=new nU(eM,c,a,T),h=new nB(eM,f,c,a),x=new nz(eM,r,s),v=new nv(o),d=new rJ(q,l,u,n,r,T,v),p=new ip(q,o),m=new r3,g=new r9(n,r),_=new nd(q,l,u,i,h,t,D),y=new ir(q,h,r),A=new im(eM,a,r,i),E=new nm(eM,n,a,r),w=new nN(eM,n,a,r),a.programs=d.programs,q.capabilities=r,q.extensions=n,q.properties=o,q.renderLists=m,q.shadowMap=y,q.state=i,q.info=a}eA();// xr
let eC=new id(q,eM);// Events
function eP(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Y=!0}function eR(){console.log("THREE.WebGLRenderer: Context Restored."),Y=!1;let e=a.autoReset,t=y.enabled,n=y.autoUpdate,r=y.needsUpdate,i=y.type;eA(),a.autoReset=e,y.enabled=t,y.autoUpdate=n,y.needsUpdate=r,y.type=i}function eL(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function eO(e){let t=e.target;t.removeEventListener("dispose",eO),function(e){let t=o.get(e).programs;void 0!==t&&(t.forEach(function(e){d.releaseProgram(e)}),e.isShaderMaterial&&d.releaseShaderCache(e))}(t),o.remove(t)}this.xr=eC,// API
this.getContext=function(){return eM},this.getContextAttributes=function(){return eM.getContextAttributes()},this.forceContextLoss=function(){let e=n.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){let e=n.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return ec},this.setPixelRatio=function(e){void 0!==e&&(ec=e,this.setSize(el,eu,!1))},this.getSize=function(e){return e.set(el,eu)},this.setSize=function(e,t,n=!0){if(eC.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}el=e,eu=t,C.width=Math.floor(e*ec),C.height=Math.floor(t*ec),!0===n&&(C.style.width=e+"px",C.style.height=t+"px"),this.setViewport(0,0,e,t)},this.getDrawingBufferSize=function(e){return e.set(el*ec,eu*ec).floor()},this.setDrawingBufferSize=function(e,t,n){el=e,eu=t,ec=n,C.width=Math.floor(e*n),C.height=Math.floor(t*n),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(ee)},this.getViewport=function(e){return e.copy(ed)},this.setViewport=function(e,t,n,r){e.isVector4?ed.set(e.x,e.y,e.z,e.w):ed.set(e,t,n,r),i.viewport(ee.copy(ed).multiplyScalar(ec).floor())},this.getScissor=function(e){return e.copy(ep)},this.setScissor=function(e,t,n,r){e.isVector4?ep.set(e.x,e.y,e.z,e.w):ep.set(e,t,n,r),i.scissor(en.copy(ep).multiplyScalar(ec).floor())},this.getScissorTest=function(){return em},this.setScissorTest=function(e){i.setScissorTest(em=e)},this.setOpaqueSort=function(e){ef=e},this.setTransparentSort=function(e){eh=e},// Clearing
this.getClearColor=function(e){return e.copy(_.getClearColor())},this.setClearColor=function(){_.setClearColor.apply(_,arguments)},this.getClearAlpha=function(){return _.getClearAlpha()},this.setClearAlpha=function(){_.setClearAlpha.apply(_,arguments)},this.clear=function(e=!0,t=!0,n=!0){let r=0;if(e){// check if we're trying to clear an integer target
let e=!1;if(null!==Z){let t=Z.texture.format;e=1033===t||1031===t||1029===t}// use the appropriate clear functions to clear the target if it's a signed
// or unsigned integer target
if(e){let e=Z.texture.type,t=_.getClearColor(),n=_.getClearAlpha(),r=t.r,i=t.g,a=t.b;1009===e||1014===e||1012===e||1020===e||1017===e||1018===e?(V[0]=r,V[1]=i,V[2]=a,V[3]=n,eM.clearBufferuiv(eM.COLOR,0,V)):(H[0]=r,H[1]=i,H[2]=a,H[3]=n,eM.clearBufferiv(eM.COLOR,0,H))}else r|=eM.COLOR_BUFFER_BIT}t&&(r|=eM.DEPTH_BUFFER_BIT),n&&(r|=eM.STENCIL_BUFFER_BIT),eM.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},//
this.dispose=function(){C.removeEventListener("webglcontextlost",eP,!1),C.removeEventListener("webglcontextrestored",eR,!1),C.removeEventListener("webglcontextcreationerror",eL,!1),m.dispose(),g.dispose(),o.dispose(),l.dispose(),u.dispose(),h.dispose(),T.dispose(),A.dispose(),d.dispose(),eC.dispose(),eC.removeEventListener("sessionstart",eU),eC.removeEventListener("sessionend",eN),e_&&(e_.dispose(),e_=null),ek.stop()},// Buffer rendering
this.renderBufferDirect=function(e,t,n,a,h,d){let m;null===t&&(t=eE);let g=h.isMesh&&0>h.matrixWorld.determinant(),y=function(e,t,n,a,c){var f;!0!==t.isScene&&(t=eE),s.resetTextureUnits();let h=t.fog,d=a.isMeshStandardMaterial?t.environment:null,m=null===Z?q.outputColorSpace:!0===Z.isXRRenderTarget?Z.texture.colorSpace:S,g=(a.isMeshStandardMaterial?u:l).get(a.envMap||d),y=!0===a.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,_=!!n.attributes.tangent&&(!!a.normalMap||a.anisotropy>0),b=!!n.morphAttributes.position,E=!!n.morphAttributes.normal,w=!!n.morphAttributes.color,M=0;a.toneMapped&&(null===Z||!0===Z.isXRRenderTarget)&&(M=q.toneMapping);let T=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,C=void 0!==T?T.length:0,P=o.get(a),R=W.state.lights;if(!0===ev&&(!0===ey||e!==Q)){let t=e===Q&&a.id===J;// we might want to call this function with some ClippingGroup
// object instead of the material, once it becomes feasible
// (#8465, #8379)
v.setState(a,e,t)}//
let L=!1;a.version===P.__version?P.needsLights&&P.lightsStateVersion!==R.state.version?L=!0:P.outputColorSpace!==m?L=!0:c.isInstancedMesh&&!1===P.instancing?L=!0:c.isInstancedMesh||!0!==P.instancing?c.isSkinnedMesh&&!1===P.skinning?L=!0:c.isSkinnedMesh||!0!==P.skinning?c.isInstancedMesh&&!0===P.instancingColor&&null===c.instanceColor?L=!0:c.isInstancedMesh&&!1===P.instancingColor&&null!==c.instanceColor?L=!0:P.envMap!==g?L=!0:!0===a.fog&&P.fog!==h?L=!0:void 0!==P.numClippingPlanes&&(P.numClippingPlanes!==v.numPlanes||P.numIntersection!==v.numIntersection)?L=!0:P.vertexAlphas!==y?L=!0:P.vertexTangents!==_?L=!0:P.morphTargets!==b?L=!0:P.morphNormals!==E?L=!0:P.morphColors!==w?L=!0:P.toneMapping!==M?L=!0:!0===r.isWebGL2&&P.morphTargetsCount!==C&&(L=!0):L=!0:L=!0:(L=!0,P.__version=a.version);//
let O=P.currentProgram;!0===L&&(O=eV(a,t,c));let I=!1,U=!1,N=!1,D=O.getUniforms(),k=P.uniforms;if(i.useProgram(O.program)&&(I=!0,U=!0,N=!0),a.id!==J&&(J=a.id,U=!0),I||Q!==e){// common camera uniforms
D.setValue(eM,"projectionMatrix",e.projectionMatrix),D.setValue(eM,"viewMatrix",e.matrixWorldInverse);let t=D.map.cameraPosition;void 0!==t&&t.setValue(eM,eS.setFromMatrixPosition(e.matrixWorld)),r.logarithmicDepthBuffer&&D.setValue(eM,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(a.isMeshPhongMaterial||a.isMeshToonMaterial||a.isMeshLambertMaterial||a.isMeshBasicMaterial||a.isMeshStandardMaterial||a.isShaderMaterial)&&D.setValue(eM,"isOrthographic",!0===e.isOrthographicCamera),Q!==e&&(Q=e,// lighting uniforms depend on the camera so enforce an update
// now, in case this material supports lights - or later, when
// the next material that does gets activated:
U=!0,N=!0)}// skinning and morph target uniforms must be set even if material didn't change
// auto-setting of texture unit for bone and morph texture must go before other textures
// otherwise textures used for skinning and morphing can take over texture units reserved for other material textures
if(c.isSkinnedMesh){D.setOptional(eM,c,"bindMatrix"),D.setOptional(eM,c,"bindMatrixInverse");let e=c.skeleton;e&&(r.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),D.setValue(eM,"boneTexture",e.boneTexture,s),D.setValue(eM,"boneTextureSize",e.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let F=n.morphAttributes;// UBOs
if((void 0!==F.position||void 0!==F.normal||void 0!==F.color&&!0===r.isWebGL2)&&x.update(c,n,O),(U||P.receiveShadow!==c.receiveShadow)&&(P.receiveShadow=c.receiveShadow,D.setValue(eM,"receiveShadow",c.receiveShadow)),a.isMeshGouraudMaterial&&null!==a.envMap&&(k.envMap.value=g,k.flipEnvMap.value=g.isCubeTexture&&!1===g.isRenderTargetTexture?-1:1),U&&(D.setValue(eM,"toneMappingExposure",q.toneMappingExposure),P.needsLights&&(f=N,k.ambientLightColor.needsUpdate=f,k.lightProbe.needsUpdate=f,k.directionalLights.needsUpdate=f,k.directionalLightShadows.needsUpdate=f,k.pointLights.needsUpdate=f,k.pointLightShadows.needsUpdate=f,k.spotLights.needsUpdate=f,k.spotLightShadows.needsUpdate=f,k.rectAreaLights.needsUpdate=f,k.hemisphereLights.needsUpdate=f),h&&!0===a.fog&&p.refreshFogUniforms(k,h),p.refreshMaterialUniforms(k,a,ec,eu,e_),rI.upload(eM,P.uniformsList,k,s)),a.isShaderMaterial&&!0===a.uniformsNeedUpdate&&(rI.upload(eM,P.uniformsList,k,s),a.uniformsNeedUpdate=!1),a.isSpriteMaterial&&D.setValue(eM,"center",c.center),// common matrices
D.setValue(eM,"modelViewMatrix",c.modelViewMatrix),D.setValue(eM,"normalMatrix",c.normalMatrix),D.setValue(eM,"modelMatrix",c.matrixWorld),a.isShaderMaterial||a.isRawShaderMaterial){let e=a.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(r.isWebGL2){let n=e[t];A.update(n,O),A.bind(n,O)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return O}(e,t,n,a,h);i.setMaterial(a,g);//
let _=n.index,b=1;if(!0===a.wireframe){if(void 0===(_=f.getWireframeAttribute(n)))return;b=2}//
let M=n.drawRange,C=n.attributes.position,P=M.start*b,R=(M.start+M.count)*b;null!==d&&(P=Math.max(P,d.start*b),R=Math.min(R,(d.start+d.count)*b)),null!==_?(P=Math.max(P,0),R=Math.min(R,_.count)):null!=C&&(P=Math.max(P,0),R=Math.min(R,C.count));let L=R-P;if(L<0||L===1/0)return;//
T.setup(h,a,y,n,_);let O=E;//
if(null!==_&&(m=c.get(_),(O=w).setIndex(m)),h.isMesh)!0===a.wireframe?(i.setLineWidth(a.wireframeLinewidth*ew()),O.setMode(eM.LINES)):O.setMode(eM.TRIANGLES);else if(h.isLine){let e=a.linewidth;void 0===e&&(e=1),i.setLineWidth(e*ew()),h.isLineSegments?O.setMode(eM.LINES):h.isLineLoop?O.setMode(eM.LINE_LOOP):O.setMode(eM.LINE_STRIP)}else h.isPoints?O.setMode(eM.POINTS):h.isSprite&&O.setMode(eM.TRIANGLES);if(h.isInstancedMesh)O.renderInstances(P,L,h.count);else if(n.isInstancedBufferGeometry){let e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);O.renderInstances(P,L,t)}else O.render(P,L)},// Compile
this.compile=function(e,t){function n(e,t,n){!0===e.transparent&&2===e.side&&!1===e.forceSinglePass?(e.side=1,e.needsUpdate=!0,eV(e,t,n),e.side=0,e.needsUpdate=!0,eV(e,t,n),e.side=2):eV(e,t,n)}(W=g.get(e)).init(),X.push(W),e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(W.pushLight(e),e.castShadow&&W.pushShadow(e))}),W.setupLights(q._useLegacyLights),e.traverse(function(t){let r=t.material;if(r){if(Array.isArray(r))for(let i=0;i<r.length;i++){let a=r[i];n(a,e,t)}else n(r,e,t)}}),X.pop(),W=null};// Animation Loop
let eI=null;function eU(){ek.stop()}function eN(){ek.start()}let ek=new no;function eF(e,t,a,o){let l=e.opaque,u=e.transmissive,c=e.transparent;W.setupLightsView(a),!0===ev&&v.setGlobalState(q.clippingPlanes,a),u.length>0&&function(e,t,i,a){let o=r.isWebGL2;null===e_&&(e_=new er(1,1,{generateMipmaps:!0,type:n.has("EXT_color_buffer_half_float")?1016:1009,minFilter:1008,samples:o?4:0})),q.getDrawingBufferSize(eb),o?e_.setSize(eb.x,eb.y):e_.setSize(O(eb.x),O(eb.y));//
let l=q.getRenderTarget();q.setRenderTarget(e_),q.getClearColor(ea),(es=q.getClearAlpha())<1&&q.setClearColor(16777215,.5),q.clear();// Turn off the features which can affect the frag color for opaque objects pass.
// Otherwise they are applied twice in opaque objects pass and transmission objects pass.
let u=q.toneMapping;q.toneMapping=0,ez(e,i,a),s.updateMultisampleRenderTarget(e_),s.updateRenderTargetMipmap(e_);let c=!1;for(let e=0,n=t.length;e<n;e++){let n=t[e],r=n.object,o=n.geometry,s=n.material,l=n.group;if(2===s.side&&r.layers.test(a.layers)){let e=s.side;s.side=1,s.needsUpdate=!0,eB(r,i,a,o,s,l),s.side=e,s.needsUpdate=!0,c=!0}}!0===c&&(s.updateMultisampleRenderTarget(e_),s.updateRenderTargetMipmap(e_)),q.setRenderTarget(l),q.setClearColor(ea,es),q.toneMapping=u}(l,u,t,a),o&&i.viewport(ee.copy(o)),l.length>0&&ez(l,t,a),u.length>0&&ez(u,t,a),c.length>0&&ez(c,t,a),// Ensure depth buffer writing is enabled so it can be cleared on next render
i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),i.setPolygonOffset(!1)}function ez(e,t,n){let r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,a=e.length;i<a;i++){let a=e[i],o=a.object,s=a.geometry,l=null===r?a.material:r,u=a.group;o.layers.test(n.layers)&&eB(o,t,n,s,l,u)}}function eB(e,t,n,r,i,a){e.onBeforeRender(q,t,n,r,i,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(q,t,n,r,e,a),!0===i.transparent&&2===i.side&&!1===i.forceSinglePass?(i.side=1,i.needsUpdate=!0,q.renderBufferDirect(n,t,r,i,e,a),i.side=0,i.needsUpdate=!0,q.renderBufferDirect(n,t,r,i,e,a),i.side=2):q.renderBufferDirect(n,t,r,i,e,a),e.onAfterRender(q,t,n,r,i,a)}function eV(e,t,n){!0!==t.isScene&&(t=eE);let r=o.get(e),i=W.state.lights,a=W.state.shadowsArray,s=i.state.version,c=d.getParameters(e,i.state,a,t,n),f=d.getProgramCacheKey(c),h=r.programs;// always update environment and fog - changing these trigger an getProgram call, but it's possible that the program doesn't change
r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?u:l).get(e.envMap||r.environment),void 0===h&&(// new material
e.addEventListener("dispose",eO),h=new Map,r.programs=h);let p=h.get(f);if(void 0!==p){if(r.currentProgram===p&&r.lightsStateVersion===s)return eH(e,c),p}else c.uniforms=d.getUniforms(e),e.onBuild(n,c,q),e.onBeforeCompile(c,q),p=d.acquireProgram(c,f),h.set(f,p),r.uniforms=c.uniforms;let m=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(m.clippingPlanes=v.uniform),eH(e,c),// store the light setup it was created for
r.needsLights=e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights,r.lightsStateVersion=s,r.needsLights&&(// wire up the material to this renderer's lighting state
m.ambientLightColor.value=i.state.ambient,m.lightProbe.value=i.state.probe,m.directionalLights.value=i.state.directional,m.directionalLightShadows.value=i.state.directionalShadow,m.spotLights.value=i.state.spot,m.spotLightShadows.value=i.state.spotShadow,m.rectAreaLights.value=i.state.rectArea,m.ltc_1.value=i.state.rectAreaLTC1,m.ltc_2.value=i.state.rectAreaLTC2,m.pointLights.value=i.state.point,m.pointLightShadows.value=i.state.pointShadow,m.hemisphereLights.value=i.state.hemi,m.directionalShadowMap.value=i.state.directionalShadowMap,m.directionalShadowMatrix.value=i.state.directionalShadowMatrix,m.spotShadowMap.value=i.state.spotShadowMap,m.spotLightMatrix.value=i.state.spotLightMatrix,m.spotLightMap.value=i.state.spotLightMap,m.pointShadowMap.value=i.state.pointShadowMap,m.pointShadowMatrix.value=i.state.pointShadowMatrix);let g=p.getUniforms(),y=rI.seqWithValue(g.seq,m);return r.currentProgram=p,r.uniformsList=y,p}function eH(e,t){let n=o.get(e);n.outputColorSpace=t.outputColorSpace,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}ek.setAnimationLoop(function(e){eI&&eI(e)}),"undefined"!=typeof self&&ek.setContext(self),this.setAnimationLoop=function(e){eI=e,eC.setAnimationLoop(e),null===e?ek.stop():ek.start()},eC.addEventListener("sessionstart",eU),eC.addEventListener("sessionend",eN),// Rendering
this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(!0===Y)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===eC.enabled&&!0===eC.isPresenting&&(!0===eC.cameraAutoUpdate&&eC.updateCamera(t),t=eC.getCamera()),!0===e.isScene&&e.onBeforeRender(q,e,t,Z),(W=g.get(e,X.length)).init(),X.push(W),ex.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),eg.setFromProjectionMatrix(ex),ey=this.localClippingEnabled,ev=v.init(this.clippingPlanes,ey),(G=m.get(e,j.length)).init(),j.push(G),function e(t,n,r,i){if(!1===t.visible)return;let a=t.layers.test(n.layers);if(a){if(t.isGroup)r=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(n);else if(t.isLight)W.pushLight(t),t.castShadow&&W.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||eg.intersectsSprite(t)){i&&eS.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ex);let e=h.update(t),n=t.material;n.visible&&G.push(t,e,n,r,eS.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(!t.frustumCulled||eg.intersectsObject(t))){let e=h.update(t),n=t.material;if(i&&(void 0!==t.boundingSphere?(null===t.boundingSphere&&t.computeBoundingSphere(),eS.copy(t.boundingSphere.center)):(null===e.boundingSphere&&e.computeBoundingSphere(),eS.copy(e.boundingSphere.center)),eS.applyMatrix4(t.matrixWorld).applyMatrix4(ex)),Array.isArray(n)){let i=e.groups;for(let a=0,o=i.length;a<o;a++){let o=i[a],s=n[o.materialIndex];s&&s.visible&&G.push(t,e,s,r,eS.z,o)}}else n.visible&&G.push(t,e,n,r,eS.z,null)}}let o=t.children;for(let t=0,a=o.length;t<a;t++)e(o[t],n,r,i)}(e,t,0,q.sortObjects),G.finish(),!0===q.sortObjects&&G.sort(ef,eh),//
this.info.render.frame++,!0===ev&&v.beginShadows();let n=W.state.shadowsArray;if(y.render(n,e,t),!0===ev&&v.endShadows(),!0===this.info.autoReset&&this.info.reset(),//
_.render(G,e),// render scene
W.setupLights(q._useLegacyLights),t.isArrayCamera){let n=t.cameras;for(let t=0,r=n.length;t<r;t++){let r=n[t];eF(G,e,r,r.viewport)}}else eF(G,e,t);null!==Z&&(// resolve multisample renderbuffers to a single-sample texture if necessary
s.updateMultisampleRenderTarget(Z),// Generate mipmap if we're using any kind of mipmap filtering
s.updateRenderTargetMipmap(Z)),!0===e.isScene&&e.onAfterRender(q,e,t),// _gl.finish();
T.resetDefaultState(),J=-1,Q=null,X.pop(),W=X.length>0?X[X.length-1]:null,j.pop(),G=j.length>0?j[j.length-1]:null},this.getActiveCubeFace=function(){return $},this.getActiveMipmapLevel=function(){return K},this.getRenderTarget=function(){return Z},this.setRenderTargetTextures=function(e,t,r){o.get(e.texture).__webglTexture=t,o.get(e.depthTexture).__webglTexture=r;let i=o.get(e);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===r,i.__autoAllocateDepthBuffer||!0!==n.has("WEBGL_multisampled_render_to_texture")||(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){let n=o.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){Z=e,$=t,K=n;let a=!0,l=null,u=!1,c=!1;if(e){let f=o.get(e);void 0!==f.__useDefaultFramebuffer?(// We need to make sure to rebind the framebuffer.
i.bindFramebuffer(eM.FRAMEBUFFER,null),a=!1):void 0===f.__webglFramebuffer?s.setupRenderTarget(e):f.__hasExternalTextures&&s.rebindTextures(e,o.get(e.texture).__webglTexture,o.get(e.depthTexture).__webglTexture);let h=e.texture;(h.isData3DTexture||h.isDataArrayTexture||h.isCompressedArrayTexture)&&(c=!0);let d=o.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(l=Array.isArray(d[t])?d[t][n]:d[t],u=!0):l=r.isWebGL2&&e.samples>0&&!1===s.useMultisampledRTT(e)?o.get(e).__webglMultisampledFramebuffer:Array.isArray(d)?d[n]:d,ee.copy(e.viewport),en.copy(e.scissor),ei=e.scissorTest}else ee.copy(ed).multiplyScalar(ec).floor(),en.copy(ep).multiplyScalar(ec).floor(),ei=em;let f=i.bindFramebuffer(eM.FRAMEBUFFER,l);if(f&&r.drawBuffers&&a&&i.drawBuffers(e,l),i.viewport(ee),i.scissor(en),i.setScissorTest(ei),u){let r=o.get(e.texture);eM.framebufferTexture2D(eM.FRAMEBUFFER,eM.COLOR_ATTACHMENT0,eM.TEXTURE_CUBE_MAP_POSITIVE_X+t,r.__webglTexture,n)}else if(c){let r=o.get(e.texture),i=t||0;eM.framebufferTextureLayer(eM.FRAMEBUFFER,eM.COLOR_ATTACHMENT0,r.__webglTexture,n||0,i)}J=-1},this.readRenderTargetPixels=function(e,t,a,s,l,u,c){if(!(e&&e.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let f=o.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==c&&(f=f[c]),f){i.bindFramebuffer(eM.FRAMEBUFFER,f);try{let i=e.texture,o=i.format,c=i.type;if(1023!==o&&M.convert(o)!==eM.getParameter(eM.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let f=1016===c&&(n.has("EXT_color_buffer_half_float")||r.isWebGL2&&n.has("EXT_color_buffer_float"));if(1009!==c&&M.convert(c)!==eM.getParameter(eM.IMPLEMENTATION_COLOR_READ_TYPE)&&// Edge and Chrome Mac < 52 (#9513)
!(1015===c&&(r.isWebGL2||n.has("OES_texture_float")||n.has("WEBGL_color_buffer_float")))&&// Chrome Mac >= 52 and Firefox
!f){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}t>=0&&t<=e.width-s&&a>=0&&a<=e.height-l&&eM.readPixels(t,a,s,l,M.convert(o),M.convert(c),u)}finally{// restore framebuffer of current render target if necessary
let e=null!==Z?o.get(Z).__webglFramebuffer:null;i.bindFramebuffer(eM.FRAMEBUFFER,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){let r=Math.pow(2,-n),a=Math.floor(t.image.width*r),o=Math.floor(t.image.height*r);s.setTexture2D(t,0),eM.copyTexSubImage2D(eM.TEXTURE_2D,n,0,0,e.x,e.y,a,o),i.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){let a=t.image.width,o=t.image.height,l=M.convert(n.format),u=M.convert(n.type);s.setTexture2D(n,0),// As another texture upload may have changed pixelStorei
// parameters, make sure they are correct for the dstTexture
eM.pixelStorei(eM.UNPACK_FLIP_Y_WEBGL,n.flipY),eM.pixelStorei(eM.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),eM.pixelStorei(eM.UNPACK_ALIGNMENT,n.unpackAlignment),t.isDataTexture?eM.texSubImage2D(eM.TEXTURE_2D,r,e.x,e.y,a,o,l,u,t.image.data):t.isCompressedTexture?eM.compressedTexSubImage2D(eM.TEXTURE_2D,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,l,t.mipmaps[0].data):eM.texSubImage2D(eM.TEXTURE_2D,r,e.x,e.y,l,u,t.image),0===r&&n.generateMipmaps&&eM.generateMipmap(eM.TEXTURE_2D),i.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r,a=0){let o;if(q.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let l=e.max.x-e.min.x+1,u=e.max.y-e.min.y+1,c=e.max.z-e.min.z+1,f=M.convert(r.format),h=M.convert(r.type);if(r.isData3DTexture)s.setTexture3D(r,0),o=eM.TEXTURE_3D;else if(r.isDataArrayTexture)s.setTexture2DArray(r,0),o=eM.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}eM.pixelStorei(eM.UNPACK_FLIP_Y_WEBGL,r.flipY),eM.pixelStorei(eM.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),eM.pixelStorei(eM.UNPACK_ALIGNMENT,r.unpackAlignment);let d=eM.getParameter(eM.UNPACK_ROW_LENGTH),p=eM.getParameter(eM.UNPACK_IMAGE_HEIGHT),m=eM.getParameter(eM.UNPACK_SKIP_PIXELS),g=eM.getParameter(eM.UNPACK_SKIP_ROWS),v=eM.getParameter(eM.UNPACK_SKIP_IMAGES),y=n.isCompressedTexture?n.mipmaps[0]:n.image;eM.pixelStorei(eM.UNPACK_ROW_LENGTH,y.width),eM.pixelStorei(eM.UNPACK_IMAGE_HEIGHT,y.height),eM.pixelStorei(eM.UNPACK_SKIP_PIXELS,e.min.x),eM.pixelStorei(eM.UNPACK_SKIP_ROWS,e.min.y),eM.pixelStorei(eM.UNPACK_SKIP_IMAGES,e.min.z),n.isDataTexture||n.isData3DTexture?eM.texSubImage3D(o,a,t.x,t.y,t.z,l,u,c,f,h,y.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),eM.compressedTexSubImage3D(o,a,t.x,t.y,t.z,l,u,c,f,y.data)):eM.texSubImage3D(o,a,t.x,t.y,t.z,l,u,c,f,h,y),eM.pixelStorei(eM.UNPACK_ROW_LENGTH,d),eM.pixelStorei(eM.UNPACK_IMAGE_HEIGHT,p),eM.pixelStorei(eM.UNPACK_SKIP_PIXELS,m),eM.pixelStorei(eM.UNPACK_SKIP_ROWS,g),eM.pixelStorei(eM.UNPACK_SKIP_IMAGES,v),0===a&&r.generateMipmaps&&eM.generateMipmap(o),i.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?s.setTextureCube(e,0):e.isData3DTexture?s.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?s.setTexture2DArray(e,0):s.setTexture2D(e,0),i.unbindTexture()},this.resetState=function(){$=0,K=0,Z=null,i.reset(),T.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return 2e3}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===b?3001:3e3}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=3001===e?b:S}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}(class extends ig{}).prototype.isWebGL1Renderer=!0;class iv{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new tg(e),this.density=t}clone(){return new iv(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class iy extends e8{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class i_ extends tf{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new tg(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const ix=/*@__PURE__*/new eD,ib=/*@__PURE__*/new eN,iS=/*@__PURE__*/new eA,iE=/*@__PURE__*/new eo;class iw extends e8{constructor(e=new tO,t=new i_){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){let n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),iS.copy(n.boundingSphere),iS.applyMatrix4(r),iS.radius+=i,!1===e.ray.intersectsSphere(iS))return;//
ix.copy(r).invert(),ib.copy(e.ray).applyMatrix4(ix);let o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=n.index,u=n.attributes,c=u.position;if(null!==l){let n=Math.max(0,a.start),i=Math.min(l.count,a.start+a.count);for(let a=n;a<i;a++){let n=l.getX(a);iE.fromBufferAttribute(c,n),iM(iE,n,s,r,e,t,this)}}else{let n=Math.max(0,a.start),i=Math.min(c.count,a.start+a.count);for(let a=n;a<i;a++)iE.fromBufferAttribute(c,a),iM(iE,a,s,r,e,t,this)}}updateMorphTargets(){let e=this.geometry,t=e.morphAttributes,n=Object.keys(t);if(n.length>0){let e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){let n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}}function iM(e,t,n,r,i,a,o){let s=ib.distanceSqToPoint(e);if(s<n){let n=new eo;ib.closestPointToPoint(e,n),n.applyMatrix4(r);let l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;a.push({distance:l,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,object:o})}}/**
 * Extensible curve object.
 *
 * Some common of curve methods:
 * .getPoint( t, optionalTarget ), .getTangent( t, optionalTarget )
 * .getPointAt( u, optionalTarget ), .getTangentAt( u, optionalTarget )
 * .getPoints(), .getSpacedPoints()
 * .getLength()
 * .updateArcLengths()
 *
 * This following curves inherit from THREE.Curve:
 *
 * -- 2D curves --
 * THREE.ArcCurve
 * THREE.CubicBezierCurve
 * THREE.EllipseCurve
 * THREE.LineCurve
 * THREE.QuadraticBezierCurve
 * THREE.SplineCurve
 *
 * -- 3D curves --
 * THREE.CatmullRomCurve3
 * THREE.CubicBezierCurve3
 * THREE.LineCurve3
 * THREE.QuadraticBezierCurve3
 *
 * A series of curves can be represented as a THREE.CurvePath.
 *
 **/class iT{constructor(){this.type="Curve",this.arcLengthDivisions=200}// Virtual base class method to overwrite and implement in subclasses
//	- t [0 .. 1]
getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}// Get point at relative position in curve according to arc length
// - u [0 .. 1]
getPointAt(e,t){let n=this.getUtoTmapping(e);return this.getPoint(n,t)}// Get sequence of points using getPoint( t )
getPoints(e=5){let t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}// Get sequence of points using getPointAt( u )
getSpacedPoints(e=5){let t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}// Get total curve arc length
getLength(){let e=this.getLengths();return e[e.length-1]}// Get list of cumulative segment lengths
getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],n,r=this.getPoint(0),i=0;t.push(0);for(let a=1;a<=e;a++)t.push(i+=(n=this.getPoint(a/e)).distanceTo(r)),r=n;return this.cacheArcLengths=t,t;// { sums: cache, sum: sum }; Sum is in the last element.
}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant
getUtoTmapping(e,t){let n;let r=this.getLengths(),i=0,a=r.length;n=t||e*r[a-1];// binary search for the index with largest value smaller than target u distance
let o=0,s=a-1,l;for(;o<=s;)if((l=r[i=Math.floor(o+(s-o)/2)]-n)<0)o=i+1;else if(l>0)s=i-1;else{s=i;break;// DONE
}if(r[i=s]===n)return i/(a-1);// we could get finer grain at lengths, or use simple interpolation between two points
let u=r[i],c=r[i+1],f=(i+(n-u)/(c-u))/(a-1);return f}// Returns a unit vector tangent at t
// In case any sub curve does not implement its tangent derivation,
// 2 points a small delta apart will be used to find its gradient
// which seems to give a reasonable approximation
getTangent(e,t){let n=e-1e-4,r=e+1e-4;n<0&&(n=0),r>1&&(r=1);let i=this.getPoint(n),a=this.getPoint(r),o=t||(i.isVector2?new N:new eo);return o.copy(a).sub(i).normalize(),o}getTangentAt(e,t){let n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){// see http://www.cs.indiana.edu/pub/techreports/TR425.pdf
let n=new eo,r=[],i=[],a=[],o=new eo,s=new eD;// compute the tangent vectors for each segment on the curve
for(let t=0;t<=e;t++){let n=t/e;r[t]=this.getTangentAt(n,new eo)}// select an initial normal vector perpendicular to the first tangent vector,
// and in the direction of the minimum tangent xyz component
i[0]=new eo,a[0]=new eo;let l=Number.MAX_VALUE,u=Math.abs(r[0].x),c=Math.abs(r[0].y),f=Math.abs(r[0].z);u<=l&&(l=u,n.set(1,0,0)),c<=l&&(l=c,n.set(0,1,0)),f<=l&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),a[0].crossVectors(r[0],i[0]);// compute the slowly-varying normal and binormal vectors for each segment on the curve
for(let t=1;t<=e;t++){if(i[t]=i[t-1].clone(),a[t]=a[t-1].clone(),o.crossVectors(r[t-1],r[t]),o.length()>Number.EPSILON){o.normalize();let e=Math.acos(R(r[t-1].dot(r[t]),-1,1));// clamp for floating pt errors
i[t].applyMatrix4(s.makeRotationAxis(o,e))}a[t].crossVectors(r[t],i[t])}// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same
if(!0===t){let t=Math.acos(R(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)// twist a little...
i[n].applyMatrix4(s.makeRotationAxis(r[n],t*n)),a[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class iA extends iT{constructor(e=0,t=0,n=1,r=1,i=0,a=2*Math.PI,o=!1,s=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=a,this.aClockwise=o,this.aRotation=s}getPoint(e,t){let n=t||new N,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;// ensures that deltaAngle is 0 .. 2 PI
for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);let o=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){let e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=s-this.aX,r=l-this.aY;// Rotate the point about the center of the ellipse.
s=n*e-r*t+this.aX,l=n*t+r*e+this.aY}return n.set(s,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}/**
 * Centripetal CatmullRom Curve - which is useful for avoiding
 * cusps and self-intersections in non-uniform catmull rom curves.
 * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf
 *
 * curve.type accepts centripetal(default), chordal and catmullrom
 * curve.tension is used for catmullrom which defaults to 0.5
 *//*
Based on an optimized c++ solution in
 - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/
 - http://ideone.com/NoEbVM

This CubicPoly class could be used for reusing some variables and calculations,
but for three.js curve use, it could be possible inlined and flatten into a single function call
which can be placed in CurveUtils.
*/function iC(){let e=0,t=0,n=0,r=0;/*
	 * Compute coefficients for a cubic polynomial
	 *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3
	 * such that
	 *   p(0) = x0, p(1) = x1
	 *  and
	 *   p'(0) = t0, p'(1) = t1.
	 */function i(i,a,o,s){e=i,t=o,n=-3*i+3*a-2*o-s,r=2*i-2*a+o+s}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,o,s){// compute tangents when parameterized in [t1,t2]
let l=(t-e)/a-(n-e)/(a+o)+(n-t)/o,u=(n-t)/o-(r-t)/(o+s)+(r-n)/s;i(t,n,// rescale tangents for parametrization in [0,1]
l*=o,u*=o)},calc:function(i){let a=i*i;return e+t*i+n*a+r*(a*i)}}}//
const iP=/*@__PURE__*/new eo,iR=/*@__PURE__*/new iC,iL=/*@__PURE__*/new iC,iO=/*@__PURE__*/new iC;/**
 * Bezier Curves formulas obtained from
 * https://en.wikipedia.org/wiki/B%C3%A9zier_curve
 */function iI(e,t,n,r,i){let a=(r-t)*.5,o=(i-n)*.5,s=e*e;return(2*n-2*r+a+o)*(e*s)+(-3*n+3*r-2*a-o)*s+a*e+n}function iU(e,t,n,r){return(//
function(e,t){let n=1-e;return n*n*t}(e,t)+2*(1-e)*e*n+e*e*r)}function iN(e,t,n,r,i){return(//
function(e,t){let n=1-e;return n*n*n*t}(e,t)+function(e,t){let n=1-e;return 3*n*n*e*t}(e,n)+3*(1-e)*e*e*r+e*e*e*i)}class iD extends iT{constructor(e=new N,t=new N,n=new N,r=new N){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new N){let n=this.v0,r=this.v1,i=this.v2,a=this.v3;return t.set(iN(e,n.x,r.x,i.x,a.x),iN(e,n.y,r.y,i.y,a.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ik extends iT{constructor(e=new N,t=new N){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new N){return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}// Line curve is linear, so we can overwrite default getPointAt
getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new N){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class iF extends iT{constructor(e=new N,t=new N,n=new N){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new N){let n=this.v0,r=this.v1,i=this.v2;return t.set(iU(e,n.x,r.x,i.x),iU(e,n.y,r.y,i.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class iz extends iT{constructor(e=new eo,t=new eo,n=new eo){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new eo){let n=this.v0,r=this.v1,i=this.v2;return t.set(iU(e,n.x,r.x,i.x),iU(e,n.y,r.y,i.y),iU(e,n.z,r.z,i.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class iB extends iT{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new N){let n=this.points,r=(n.length-1)*e,i=Math.floor(r),a=r-i,o=n[0===i?i:i-1],s=n[i],l=n[i>n.length-2?n.length-1:i+1],u=n[i>n.length-3?n.length-1:i+2];return t.set(iI(a,o.x,s.x,l.x,u.x),iI(a,o.y,s.y,l.y,u.y)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(n.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){let n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(new N().fromArray(n))}return this}}var iV=/*#__PURE__*/Object.freeze({__proto__:null,ArcCurve:class extends iA{constructor(e,t,n,r,i,a){super(e,t,n,n,r,i,a),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class extends iT{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new eo){let n,r;let i=this.points,a=i.length,o=(a-(this.closed?0:1))*e,s=Math.floor(o),l=o-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/a)+1)*a:0===l&&s===a-1&&(s=a-2,l=1),this.closed||s>0?n=i[(s-1)%a]:(// extrapolate first point
iP.subVectors(i[0],i[1]).add(i[0]),n=iP);let u=i[s%a],c=i[(s+1)%a];if(this.closed||s+2<a?r=i[(s+2)%a]:(// extrapolate last point
iP.subVectors(i[a-1],i[a-2]).add(i[a-1]),r=iP),"centripetal"===this.curveType||"chordal"===this.curveType){// init Centripetal / Chordal Catmull-Rom
let e="chordal"===this.curveType?.5:.25,t=Math.pow(n.distanceToSquared(u),e),i=Math.pow(u.distanceToSquared(c),e),a=Math.pow(c.distanceToSquared(r),e);i<1e-4&&(i=1),t<1e-4&&(t=i),a<1e-4&&(a=i),iR.initNonuniformCatmullRom(n.x,u.x,c.x,r.x,t,i,a),iL.initNonuniformCatmullRom(n.y,u.y,c.y,r.y,t,i,a),iO.initNonuniformCatmullRom(n.z,u.z,c.z,r.z,t,i,a)}else"catmullrom"===this.curveType&&(iR.initCatmullRom(n.x,u.x,c.x,r.x,this.tension),iL.initCatmullRom(n.y,u.y,c.y,r.y,this.tension),iO.initCatmullRom(n.z,u.z,c.z,r.z,this.tension));return t.set(iR.calc(l),iL.calc(l),iO.calc(l)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){let n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){let n=e.points[t];this.points.push(new eo().fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},CubicBezierCurve:iD,CubicBezierCurve3:class extends iT{constructor(e=new eo,t=new eo,n=new eo,r=new eo){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new eo){let n=this.v0,r=this.v1,i=this.v2,a=this.v3;return t.set(iN(e,n.x,r.x,i.x,a.x),iN(e,n.y,r.y,i.y,a.y),iN(e,n.z,r.z,i.z,a.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},EllipseCurve:iA,LineCurve:ik,LineCurve3:class extends iT{constructor(e=new eo,t=new eo){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new eo){return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}// Line curve is linear, so we can overwrite default getPointAt
getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new eo){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:iF,QuadraticBezierCurve3:iz,SplineCurve:iB});/**************************************************************
 *	Curved Path - a curve path is simply a array of connected
 *  curves, but retains the api of a curve
 **************************************************************/class iH extends iT{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){// Add a line curve if start and end of lines are not connected
let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new ik(t,e))}// To get accurate point with reference to
// entire path distance at time t,
// following has to be done:
// 1. Length of each sub path have to be known
// 2. Locate and identify type of curve
// 3. Get t for the curve
// 4. Return curve.getPointAt(t')
getPoint(e,t){let n=e*this.getLength(),r=this.getCurveLengths(),i=0;// To think about boundaries points.
for(;i<r.length;){if(r[i]>=n){let e=r[i]-n,a=this.curves[i],o=a.getLength(),s=0===o?0:1-e/o;return a.getPointAt(s,t)}i++}return null;// loop where sum != 0, sum > d , sum+1 <d
}// We cannot use the default THREE.Curve getPoint() with getLength() because in
// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath
// getPoint() depends on getLength
getLength(){let e=this.getCurveLengths();return e[e.length-1]}// cacheLengths must be recalculated.
updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}// Compute lengths and cache them
// We cannot overwrite getLengths() because UtoT mapping uses it.
getCurveLengths(){// We use cache values if curves and cache array are same length
if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;// Get length of sub-curve
// Push sums into cached array
let e=[],t=0;for(let n=0,r=this.curves.length;n<r;n++)e.push(t+=this.curves[n].getLength());return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t;let n=[];for(let r=0,i=this.curves;r<i.length;r++){let a=i[r],o=a.isEllipseCurve?2*e:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o);for(let e=0;e<s.length;e++){let r=s[e];t&&t.equals(r)||(n.push(r),t=r);// ensures no consecutive points are duplicates
}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){let n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){let n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){let n=e.curves[t];this.curves.push(new iV[n.type]().fromJSON(n))}return this}}class iG extends iH{constructor(e){super(),this.type="Path",this.currentPoint=new N,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let n=new ik(this.currentPoint.clone(),new N(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){let i=new iF(this.currentPoint.clone(),new N(e,t),new N(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,a){let o=new iD(this.currentPoint.clone(),new N(e,t),new N(n,r),new N(i,a));return this.curves.push(o),this.currentPoint.set(i,a),this}splineThru(e/*Array of Vector*/){let t=[this.currentPoint.clone()].concat(e),n=new iB(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,a){let o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,r,i,a),this}absarc(e,t,n,r,i,a){return this.absellipse(e,t,n,n,r,i,a),this}ellipse(e,t,n,r,i,a,o,s){let l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,n,r,i,a,o,s),this}absellipse(e,t,n,r,i,a,o,s){let l=new iA(e,t,n,r,i,a,o,s);if(this.curves.length>0){// if a previous curve is present, attempt to join
let e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);let u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class iW extends tO{constructor(e=[new N(0,-.5),new N(.5,0),new N(0,.5)],t=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),// clamp phiLength so it's in range of [ 0, 2PI ]
r=R(r,0,2*Math.PI);// buffers
let i=[],a=[],o=[],s=[],l=[],u=1/t,c=new eo,f=new N,h=new eo,d=new eo,p=new eo,m=0,g=0;// pre-compute normals for initial "meridian"
for(let t=0;t<=e.length-1;t++)switch(t){case 0:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,h.x=1*g,h.y=-m,h.z=0*g,p.copy(h),h.normalize(),s.push(h.x,h.y,h.z);break;case e.length-1:s.push(p.x,p.y,p.z);break;default:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,h.x=1*g,h.y=-m,h.z=0*g,d.copy(h),h.x+=p.x,h.y+=p.y,h.z+=p.z,h.normalize(),s.push(h.x,h.y,h.z),p.copy(d)}// generate vertices, uvs and normals
for(let i=0;i<=t;i++){let h=n+i*u*r,d=Math.sin(h),p=Math.cos(h);for(let n=0;n<=e.length-1;n++){// vertex
c.x=e[n].x*d,c.y=e[n].y,c.z=e[n].x*p,a.push(c.x,c.y,c.z),// uv
f.x=i/t,f.y=n/(e.length-1),o.push(f.x,f.y);// normal
let r=s[3*n+0]*d,u=s[3*n+1],h=s[3*n+0]*p;l.push(r,u,h)}}// indices
for(let n=0;n<t;n++)for(let t=0;t<e.length-1;t++){let r=t+n*e.length,a=r+e.length,o=r+e.length+1,s=r+1;// faces
i.push(r,a,s),i.push(o,s,a)}// build geometry
this.setIndex(i),this.setAttribute("position",new tw(a,3)),this.setAttribute("uv",new tw(o,2)),this.setAttribute("normal",new tw(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new iW(e.points,e.segments,e.phiStart,e.phiLength)}}class ij extends iW{constructor(e=1,t=1,n=4,r=8){let i=new iG;i.absarc(0,-t/2,e,1.5*Math.PI,0),i.absarc(0,t/2,e,0,.5*Math.PI),super(i.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new ij(e.radius,e.length,e.capSegments,e.radialSegments)}}class iX extends tO{constructor(e=1,t=32,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);// buffers
let i=[],a=[],o=[],s=[],l=new eo,u=new N;// center point
a.push(0,0,0),o.push(0,0,1),s.push(.5,.5);for(let i=0,c=3;i<=t;i++,c+=3){let f=n+i/t*r;// vertex
l.x=e*Math.cos(f),l.y=e*Math.sin(f),a.push(l.x,l.y,l.z),// normal
o.push(0,0,1),// uvs
u.x=(a[c]/e+1)/2,u.y=(a[c+1]/e+1)/2,s.push(u.x,u.y)}// indices
for(let e=1;e<=t;e++)i.push(e,e+1,0);// build geometry
this.setIndex(i),this.setAttribute("position",new tw(a,3)),this.setAttribute("normal",new tw(o,3)),this.setAttribute("uv",new tw(s,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new iX(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class iq extends tO{constructor(e=1,t=1,n=1,r=32,i=1,a=!1,o=0,s=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s};let l=this;r=Math.floor(r),i=Math.floor(i);// buffers
let u=[],c=[],f=[],h=[],d=0,p=[],m=n/2,g=0;function v(n){// save the index of the first center vertex
let i=d,a=new N,p=new eo,v=0,y=!0===n?e:t,_=!0===n?1:-1;// first we generate the center vertex data of the cap.
// because the geometry needs one set of uvs per face,
// we must generate a center vertex per face/segment
for(let e=1;e<=r;e++)// vertex
c.push(0,m*_,0),// normal
f.push(0,_,0),// uv
h.push(.5,.5),// increase index
d++;// save the index of the last center vertex
let x=d;// now we generate the surrounding vertices, normals and uvs
for(let e=0;e<=r;e++){let t=e/r,n=t*s+o,i=Math.cos(n),l=Math.sin(n);// vertex
p.x=y*l,p.y=m*_,p.z=y*i,c.push(p.x,p.y,p.z),// normal
f.push(0,_,0),// uv
a.x=.5*i+.5,a.y=.5*l*_+.5,h.push(a.x,a.y),// increase index
d++}// generate indices
for(let e=0;e<r;e++){let t=i+e,r=x+e;!0===n?u.push(r,r+1,t):u.push(r+1,r,t),v+=3}// add a group to the geometry. this will ensure multi material support
l.addGroup(g,v,!0===n?1:2),// calculate new start value for groups
g+=v}// generate geometry
(function(){let a=new eo,v=new eo,y=0,_=(t-e)/n;// generate vertices, normals and uvs
for(let l=0;l<=i;l++){let u=[],g=l/i,y=g*(t-e)+e;for(let e=0;e<=r;e++){let t=e/r,i=t*s+o,l=Math.sin(i),p=Math.cos(i);// vertex
v.x=y*l,v.y=-g*n+m,v.z=y*p,c.push(v.x,v.y,v.z),// normal
a.set(l,_,p).normalize(),f.push(a.x,a.y,a.z),// uv
h.push(t,1-g),// save index of vertex in respective row
u.push(d++)}// now save vertices of the row in our index array
p.push(u)}// generate indices
for(let e=0;e<r;e++)for(let t=0;t<i;t++){// we use the index array to access the correct indices
let n=p[t][e],r=p[t+1][e],i=p[t+1][e+1],a=p[t][e+1];// faces
u.push(n,r,a),u.push(r,i,a),// update group counter
y+=6}// add a group to the geometry. this will ensure multi material support
l.addGroup(g,y,0),// calculate new start value for groups
g+=y})(),!1===a&&(e>0&&v(!0),t>0&&v(!1)),// build geometry
this.setIndex(u),this.setAttribute("position",new tw(c,3)),this.setAttribute("normal",new tw(f,3)),this.setAttribute("uv",new tw(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new iq(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class iY extends iq{constructor(e=1,t=1,n=32,r=1,i=!1,a=0,o=2*Math.PI){super(0,e,t,n,r,i,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:o}}static fromJSON(e){return new iY(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class i$ extends tO{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};// default buffer data
let i=[],a=[];function o(e){i.push(e.x,e.y,e.z)}function s(t,n){let r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function l(e,t,n,r){r<0&&1===e.x&&(a[t]=e.x-1),0===n.x&&0===n.z&&(a[t]=r/2/Math.PI+.5)}// Angle around the Y axis, counter-clockwise when looking from above.
function u(e){return Math.atan2(e.z,-e.x)}// the subdivision creates the vertex buffer data
// helper functions
(function(e){let n=new eo,r=new eo,i=new eo;// iterate over all faces and apply a subdivision with the given detail value
for(let a=0;a<t.length;a+=3)// get the vertices of the face
s(t[a+0],n),s(t[a+1],r),s(t[a+2],i),// perform subdivision
function(e,t,n,r){let i=r+1,a=[];// construct all of the vertices for this subdivision
for(let r=0;r<=i;r++){a[r]=[];let o=e.clone().lerp(n,r/i),s=t.clone().lerp(n,r/i),l=i-r;for(let e=0;e<=l;e++)0===e&&r===i?a[r][e]=o:a[r][e]=o.clone().lerp(s,e/l)}// construct all of the faces
for(let e=0;e<i;e++)for(let t=0;t<2*(i-e)-1;t++){let n=Math.floor(t/2);t%2==0?(o(a[e][n+1]),o(a[e+1][n]),o(a[e][n])):(o(a[e][n+1]),o(a[e+1][n+1]),o(a[e+1][n]))}}(n,r,i,e)})(r),// all vertices should lie on a conceptual sphere with a given radius
function(e){let t=new eo;// iterate over the entire buffer and apply the radius to each vertex
for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),// finally, create the uv data
function(){let e=new eo;for(let t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];let n=u(e)/2/Math.PI+.5,r=Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5;a.push(n,1-r)}(function(){let e=new eo,t=new eo,n=new eo,r=new eo,o=new N,s=new N,c=new N;for(let f=0,h=0;f<i.length;f+=9,h+=6){e.set(i[f+0],i[f+1],i[f+2]),t.set(i[f+3],i[f+4],i[f+5]),n.set(i[f+6],i[f+7],i[f+8]),o.set(a[h+0],a[h+1]),s.set(a[h+2],a[h+3]),c.set(a[h+4],a[h+5]),r.copy(e).add(t).add(n).divideScalar(3);let d=u(r);l(o,h+0,e,d),l(s,h+2,t,d),l(c,h+4,n,d)}})(),function(){// handle case when face straddles the seam, see #3269
for(let e=0;e<a.length;e+=6){// uv data of a single face
let t=a[e+0],n=a[e+2],r=a[e+4],i=Math.max(t,n,r),o=Math.min(t,n,r);i>.9&&o<.1&&(t<.2&&(a[e+0]+=1),n<.2&&(a[e+2]+=1),r<.2&&(a[e+4]+=1))}}()}(),// build non-indexed geometry
this.setAttribute("position",new tw(i,3)),this.setAttribute("normal",new tw(i.slice(),3)),this.setAttribute("uv",new tw(a,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i$(e.vertices,e.indices,e.radius,e.details)}}class iK extends i${constructor(e=1,t=0){let n=(1+Math.sqrt(5))/2,r=1/n,i=[// (1, 1, 1)
-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,// (0, 1/, )
0,-r,-n,0,-r,n,0,r,-n,0,r,n,// (1/, , 0)
-r,-n,0,-r,n,0,r,-n,0,r,n,0,// (, 0, 1/)
-n,0,-r,n,0,-r,-n,0,r,n,0,r];super(i,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new iK(e.radius,e.detail)}}class iZ extends iG{constructor(e){super(e),this.uuid=P(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}// get points of shape and holes (keypoints based on segments parameter)
extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){let n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){let n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){let n=e.holes[t];this.holes.push(new iG().fromJSON(n))}return this}}/**
 * Port from https://github.com/mapbox/earcut (v2.2.4)
 */const iJ={triangulate:function(e,t,n=2){let r,i,a,o,s,l,u;let c=t&&t.length,f=c?t[0]*n:e.length,h=iQ(e,0,f,n,!0),d=[];if(!h||h.next===h.prev)return d;// if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox
if(c&&(h=// link every hole into the outer loop, producing a single-ring polygon without holes
function(e,t,n,r){let i,a,o,s,l;let u=[];for(i=0,a=t.length;i<a;i++)o=t[i]*r,s=i<a-1?t[i+1]*r:e.length,(l=iQ(e,o,s,r,!1))===l.next&&(l.steiner=!0),u.push(// find the leftmost node of a polygon ring
function(e){let t=e,n=e;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==e)return n}(l));// process holes from left to right
for(u.sort(i1),i=0;i<u.length;i++)n=// find a bridge between vertices that connects hole with an outer ring and link it
function(e,t){let n=// David Eberly's algorithm for finding a bridge between hole and outer polygon
function(e,t){let n=t,r=-1/0,i,a=e.x,o=e.y;// find a segment intersected by a ray from the hole's leftmost point to the left;
// segment's endpoint with lesser x will be potential connection point
do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){let e=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=a&&e>r&&(r=e,i=n.x<n.next.x?n:n.next,e===a))return i;// hole touches outer segment; pick leftmost endpoint
}n=n.next}while(n!==t)if(!i)return null;// look for points inside the triangle of hole point, segment intersection and endpoint;
// if there are no points found, we have a valid connection;
// otherwise choose the point of the minimum angle with the ray as connection point
let s=i,l=i.x,u=i.y,c=1/0,f;n=i;do{var h,d;a>=n.x&&n.x>=l&&a!==n.x&&i3(o<u?a:r,o,l,u,o<u?r:a,o,n.x,n.y)&&(f=Math.abs(o-n.y)/(a-n.x),i9(n,e)&&(f<c||f===c&&(n.x>i.x||n.x===i.x&&(h=i,d=n,0>i4(h.prev,h,d.prev)&&0>i4(d.next,h,h.next))))&&(i=n,c=f)),n=n.next}while(n!==s)return i}(e,t);if(!n)return t;let r=ae(n,e);return(// filter collinear points around the cuts
i0(r,r.next),i0(n,n.next))}(u[i],n);return n}(e,t,h,n)),e.length>80*n){r=a=e[0],i=o=e[1];for(let t=n;t<f;t+=n)s=e[t],l=e[t+1],s<r&&(r=s),l<i&&(i=l),s>a&&(a=s),l>o&&(o=l);u=0!==// minX, minY and invSize are later used to transform coords into integers for z-order calculation
(u=Math.max(a-r,o-i))?32767/u:0}return(// main ear slicing loop which triangulates a polygon (given as a linked list)
function e(t,n,r,i,a,o,s){if(!t)return;!s&&o&&// interlink polygon nodes in z-order
function(e,t,n,r){let i=e;do 0===i.z&&(i.z=i2(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e)i.prevZ.nextZ=null,i.prevZ=null,// Simon Tatham's linked list merge sort algorithm
// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html
function(e){let t,n,r,i,a,o,s,l,u=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,u*=2}while(o>1)}(i)}(t,i,a,o);let l=t,u,c;// iterate through ears, slicing them one by one
for(;t.prev!==t.next;){if(u=t.prev,c=t.next,o?function(e,t,n,r){let i=e.prev,a=e.next;if(i4(i,e,a)>=0)return!1;// reflex, can't be an ear
let o=i.x,s=e.x,l=a.x,u=i.y,c=e.y,f=a.y,h=o<s?o<l?o:l:s<l?s:l,d=u<c?u<f?u:f:c<f?c:f,p=o>s?o>l?o:l:s>l?s:l,m=u>c?u>f?u:f:c>f?c:f,g=i2(h,d,t,n,r),v=i2(p,m,t,n,r),y=e.prevZ,_=e.nextZ;// look for points inside the triangle in both directions
for(;y&&y.z>=g&&_&&_.z<=v;){if(y.x>=h&&y.x<=p&&y.y>=d&&y.y<=m&&y!==i&&y!==a&&i3(o,u,s,c,l,f,y.x,y.y)&&i4(y.prev,y,y.next)>=0||(y=y.prevZ,_.x>=h&&_.x<=p&&_.y>=d&&_.y<=m&&_!==i&&_!==a&&i3(o,u,s,c,l,f,_.x,_.y)&&i4(_.prev,_,_.next)>=0))return!1;_=_.nextZ}// look for remaining points in decreasing z-order
for(;y&&y.z>=g;){if(y.x>=h&&y.x<=p&&y.y>=d&&y.y<=m&&y!==i&&y!==a&&i3(o,u,s,c,l,f,y.x,y.y)&&i4(y.prev,y,y.next)>=0)return!1;y=y.prevZ}// look for remaining points in increasing z-order
for(;_&&_.z<=v;){if(_.x>=h&&_.x<=p&&_.y>=d&&_.y<=m&&_!==i&&_!==a&&i3(o,u,s,c,l,f,_.x,_.y)&&i4(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}(t,i,a,o):// check whether a polygon node forms a valid ear with adjacent nodes
function(e){let t=e.prev,n=e.next;if(i4(t,e,n)>=0)return!1;// reflex, can't be an ear
// now make sure we don't have other points inside the potential ear
let r=t.x,i=e.x,a=n.x,o=t.y,s=e.y,l=n.y,u=r<i?r<a?r:a:i<a?i:a,c=o<s?o<l?o:l:s<l?s:l,f=r>i?r>a?r:a:i>a?i:a,h=o>s?o>l?o:l:s>l?s:l,d=n.next;for(;d!==t;){if(d.x>=u&&d.x<=f&&d.y>=c&&d.y<=h&&i3(r,o,i,s,a,l,d.x,d.y)&&i4(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}(t)){// cut off the triangle
n.push(u.i/r|0),n.push(t.i/r|0),n.push(c.i/r|0),an(t),// skipping the next vertex leads to less sliver triangles
t=c.next,l=c.next;continue}// if we looped through the whole remaining polygon and can't find any more ears
if((t=c)===l){s?1===s?e(t=// go through all polygon nodes and cure small local self-intersections
function(e,t,n){let r=e;do{let i=r.prev,a=r.next.next;!i5(i,a)&&i6(i,r,r.next,a)&&i9(i,a)&&i9(a,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(a.i/n|0),// remove two nodes involved
an(r),an(r.next),r=e=a),r=r.next}while(r!==e)return i0(r)}(i0(t),n,r),n,r,i,a,o,2):2===s&&// try splitting polygon into two and triangulate them independently
function(t,n,r,i,a,o){// look for a valid diagonal that divides the polygon into two
let s=t;do{let t=s.next.next;for(;t!==s.prev;){var l,u;if(s.i!==t.i&&(l=s,u=t,l.next.i!==u.i&&l.prev.i!==u.i&&!// check if a polygon diagonal intersects any polygon segments
function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&i6(n,n.next,e,t))return!0;n=n.next}while(n!==e)return!1}(l,u)&&// dones't intersect other edges
(i9(l,u)&&i9(u,l)&&// check if the middle point of a polygon diagonal is inside the polygon
function(e,t){let n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==e)return r}(l,u)&&// locally visible
(i4(l.prev,l,u.prev)||i4(l,u.prev,u))||// does not create opposite-facing sectors
i5(l,u)&&i4(l.prev,l,l.next)>0&&i4(u.prev,u,u.next)>0))){// split the polygon in two by the diagonal
let l=ae(s,t);// filter colinear points around the cuts
s=i0(s,s.next),l=i0(l,l.next),// run earcut on each half
e(s,n,r,i,a,o,0),e(l,n,r,i,a,o,0);return}t=t.next}s=s.next}while(s!==t)}(t,n,r,i,a,o):e(i0(t),n,r,i,a,o,1);break}}}(h,d,n,r,i,u,0),d)}};// create a circular doubly linked list from polygon points in the specified winding order
function iQ(e,t,n,r,i){let a,o;if(i===function(e,t,n,r){let i=0;for(let a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}(e,t,n,r)>0)for(a=t;a<n;a+=r)o=at(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=at(a,e[a],e[a+1],o);return o&&i5(o,o.next)&&(an(o),o=o.next),o}// eliminate colinear or duplicate points
function i0(e,t){if(!e)return e;t||(t=e);let n=e,r;do if(r=!1,!n.steiner&&(i5(n,n.next)||0===i4(n.prev,n,n.next))){if(an(n),(n=t=n.prev)===n.next)break;r=!0}else n=n.next;while(r||n!==t)return t}function i1(e,t){return e.x-t.x}// z-order of a point given coords and inverse of the longer side of data bbox
function i2(e,t,n,r,i){return(e=((e=((e=((e=(// coords are transformed into non-negative 15-bit integer range
(e=(e-n)*i|0)|e<<8)&16711935)|e<<4)&252645135)|e<<2)&858993459)|e<<1)&1431655765)|(t=((t=((t=((t=((t=(t-r)*i|0)|t<<8)&16711935)|t<<4)&252645135)|t<<2)&858993459)|t<<1)&1431655765)<<1}// check if a point lies within a convex triangle
function i3(e,t,n,r,i,a,o,s){return(i-o)*(t-s)>=(e-o)*(a-s)&&(e-o)*(r-s)>=(n-o)*(t-s)&&(n-o)*(a-s)>=(i-o)*(r-s)}// signed area of a triangle
function i4(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}// check if two points are equal
function i5(e,t){return e.x===t.x&&e.y===t.y}// check if two segments intersect
function i6(e,t,n,r){let i=i7(i4(e,t,n)),a=i7(i4(e,t,r)),o=i7(i4(n,r,e)),s=i7(i4(n,r,t));return!!(i!==a&&o!==s||0===i&&i8(e,n,t)||0===a&&i8(e,r,t)||0===o&&i8(n,e,r)||0===s&&i8(n,t,r))}// for collinear points p, q, r, check if point q lies on segment pr
function i8(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function i7(e){return e>0?1:e<0?-1:0}// check if a polygon diagonal is locally inside the polygon
function i9(e,t){return 0>i4(e.prev,e,e.next)?i4(e,t,e.next)>=0&&i4(e,e.prev,t)>=0:0>i4(e,t,e.prev)||0>i4(e,e.next,t)}// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;
// if one belongs to the outer ring and another to a hole, it merges it into a single ring
function ae(e,t){let n=new ar(e.i,e.x,e.y),r=new ar(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}// create a node and optionally link it with previous one (in a circular doubly linked list)
function at(e,t,n,r){let i=new ar(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function an(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ar(e,t,n){// vertex index in coordinates array
this.i=e,// vertex coordinates
this.x=t,this.y=n,// previous and next vertex nodes in a polygon ring
this.prev=null,this.next=null,// z-order curve value
this.z=0,// previous and next nodes in z-order
this.prevZ=null,this.nextZ=null,// indicates whether this is a steiner point
this.steiner=!1}class ai{// calculate area of the contour polygon
static area(e){let t=e.length,n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return .5*n}static isClockWise(e){return 0>ai.area(e)}static triangulateShape(e,t){let n=[],r=[],i=[];// flat array of vertices like [ x0,y0, x1,y1, x2,y2, ... ]
aa(e),ao(n,e);//
let a=e.length;t.forEach(aa);for(let e=0;e<t.length;e++)r.push(a),a+=t[e].length,ao(n,t[e]);//
let o=iJ.triangulate(n,r);//
for(let e=0;e<o.length;e+=3)i.push(o.slice(e,e+3));return i}}function aa(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function ao(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}/**
 * Creates extruded geometry from a path shape.
 *
 * parameters = {
 *
 *  curveSegments: <int>, // number of points on the curves
 *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too
 *  depth: <float>, // Depth to extrude the shape
 *
 *  bevelEnabled: <bool>, // turn on bevel
 *  bevelThickness: <float>, // how deep into the original shape bevel goes
 *  bevelSize: <float>, // how far from shape outline (including bevelOffset) is bevel
 *  bevelOffset: <float>, // how far from shape outline does bevel start
 *  bevelSegments: <int>, // number of bevel layers
 *
 *  extrudePath: <THREE.Curve> // curve to extrude shape along
 *
 *  UVGenerator: <Object> // object that provides UV generator functions
 *
 * }
 */class as extends tO{constructor(e=new iZ([new N(.5,.5),new N(-.5,.5),new N(-.5,-.5),new N(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];let n=this,r=[],i=[];for(let a=0,o=e.length;a<o;a++){let o=e[a];!// functions
function(e){let a,o,s,l;let u=[],c=void 0!==t.curveSegments?t.curveSegments:12,f=void 0!==t.steps?t.steps:1,h=void 0!==t.depth?t.depth:1,d=void 0===t.bevelEnabled||t.bevelEnabled,p=void 0!==t.bevelThickness?t.bevelThickness:.2,m=void 0!==t.bevelSize?t.bevelSize:p-.1,g=void 0!==t.bevelOffset?t.bevelOffset:0,v=void 0!==t.bevelSegments?t.bevelSegments:3,y=t.extrudePath,_=void 0!==t.UVGenerator?t.UVGenerator:al,x,b=!1;y&&(x=y.getSpacedPoints(f),b=!0,d=!1,// SETUP TNB variables
// TODO1 - have a .isClosed in spline?
a=y.computeFrenetFrames(f,!1),// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);
o=new eo,s=new eo,l=new eo),d||(v=0,p=0,m=0,g=0);// Variables initialization
let S=e.extractPoints(c),E=S.shape,w=S.holes,M=!ai.isClockWise(E);if(M){E=E.reverse();// Maybe we should also check if holes are in the opposite direction, just to be safe ...
for(let e=0,t=w.length;e<t;e++){let t=w[e];ai.isClockWise(t)&&(w[e]=t.reverse())}}let T=ai.triangulateShape(E,w),A=E;for(let e=0,t=w.length;e<t;e++){let t=w[e];E=E.concat(t)}function C(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,n)}let P=E.length,R=T.length;// Find directions for point movement
function L(e,t,n){let r,i,a;// good reading for geometry algorithms (here: line-line intersection)
// http://geomalgorithms.com/a05-_intersect-1.html
let o=e.x-t.x,s=e.y-t.y,l=n.x-e.x,u=n.y-e.y,c=o*o+s*s,f=o*u-s*l;if(Math.abs(f)>Number.EPSILON){// not collinear
// length of vectors for normalizing
let f=Math.sqrt(c),h=Math.sqrt(l*l+u*u),d=t.x-s/f,p=t.y+o/f,m=n.x-u/h,g=n.y+l/h,v=((m-d)*u-(g-p)*l)/(o*u-s*l);// vector from inPt to intersection point
r=d+o*v-e.x,i=p+s*v-e.y;// Don't normalize!, otherwise sharp corners become ugly
//  but prevent crazy spikes
let y=r*r+i*i;if(y<=2)return new N(r,i);a=Math.sqrt(y/2)}else{// handle special case of collinear edges
let e=!1;// assumes: opposite
o>Number.EPSILON?l>Number.EPSILON&&(e=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(s)===Math.sign(u)&&(e=!0),e?(// console.log("Warning: lines are a straight sequence");
r=-s,i=o,a=Math.sqrt(c)):(// console.log("Warning: lines are a straight spike");
r=o,i=s,a=Math.sqrt(c/2))}return new N(r/a,i/a)}let O=[];for(let e=0,t=A.length,n=t-1,r=e+1;e<t;e++,n++,r++)n===t&&(n=0),r===t&&(r=0),//  (j)---(i)---(k)
// console.log('i,j,k', i, j , k)
O[e]=L(A[e],A[n],A[r]);let I=[],U,D=O.concat();for(let e=0,t=w.length;e<t;e++){let t=w[e];U=[];for(let e=0,n=t.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),//  (j)---(i)---(k)
U[e]=L(t[e],t[r],t[i]);I.push(U),D=D.concat(U)}// Loop bevelSegments, 1 for the front, 1 for the back
for(let e=0;e<v;e++){//for ( b = bevelSegments; b > 0; b -- ) {
let t=e/v,n=p*Math.cos(t*Math.PI/2),r=m*Math.sin(t*Math.PI/2)+g;// contract shape
for(let e=0,t=A.length;e<t;e++){let t=C(A[e],O[e],r);z(t.x,t.y,-n)}// expand holes
for(let e=0,t=w.length;e<t;e++){let t=w[e];U=I[e];for(let e=0,i=t.length;e<i;e++){let i=C(t[e],U[e],r);z(i.x,i.y,-n)}}}let k=m+g;// Back facing vertices
for(let e=0;e<P;e++){let t=d?C(E[e],D[e],k):E[e];b?(// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );
s.copy(a.normals[0]).multiplyScalar(t.x),o.copy(a.binormals[0]).multiplyScalar(t.y),l.copy(x[0]).add(s).add(o),z(l.x,l.y,l.z)):z(t.x,t.y,0)}// Add stepped vertices...
// Including front facing vertices
for(let e=1;e<=f;e++)for(let t=0;t<P;t++){let n=d?C(E[t],D[t],k):E[t];b?(// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );
s.copy(a.normals[e]).multiplyScalar(n.x),o.copy(a.binormals[e]).multiplyScalar(n.y),l.copy(x[e]).add(s).add(o),z(l.x,l.y,l.z)):z(n.x,n.y,h/f*e)}// Add bevel segments planes
//for ( b = 1; b <= bevelSegments; b ++ ) {
for(let e=v-1;e>=0;e--){let t=e/v,n=p*Math.cos(t*Math.PI/2),r=m*Math.sin(t*Math.PI/2)+g;// contract shape
for(let e=0,t=A.length;e<t;e++){let t=C(A[e],O[e],r);z(t.x,t.y,h+n)}// expand holes
for(let e=0,t=w.length;e<t;e++){let t=w[e];U=I[e];for(let e=0,i=t.length;e<i;e++){let i=C(t[e],U[e],r);b?z(i.x,i.y+x[f-1].y,x[f-1].x+n):z(i.x,i.y,h+n)}}}function F(e,t){let i=e.length;for(;--i>=0;){let a=i,o=i-1;o<0&&(o=e.length-1);//console.log('b', i,j, i-1, k,vertices.length);
for(let e=0,i=f+2*v;e<i;e++){let i=P*e,s=P*(e+1),l=t+a+i,u=t+o+i,c=t+o+s,f=t+a+s;!function(e,t,i,a){V(e),V(t),V(a),V(t),V(i),V(a);let o=r.length/3,s=_.generateSideWallUV(n,r,o-6,o-3,o-2,o-1);H(s[0]),H(s[1]),H(s[3]),H(s[1]),H(s[2]),H(s[3])}(l,u,c,f)}}}function z(e,t,n){u.push(e),u.push(t),u.push(n)}function B(e,t,i){V(e),V(t),V(i);let a=r.length/3,o=_.generateTopUV(n,r,a-3,a-2,a-1);H(o[0]),H(o[1]),H(o[2])}function V(e){r.push(u[3*e+0]),r.push(u[3*e+1]),r.push(u[3*e+2])}function H(e){i.push(e.x),i.push(e.y)}/* Faces */// Top and bottom faces
/////  Internal functions
(function(){let e=r.length/3;if(d){let e=0*P;// steps + 1
// Bottom faces
for(let t=0;t<R;t++){let n=T[t];B(n[2]+e,n[1]+e,n[0]+e)}e=P*(f+2*v);// Top faces
for(let t=0;t<R;t++){let n=T[t];B(n[0]+e,n[1]+e,n[2]+e)}}else{// Bottom faces
for(let e=0;e<R;e++){let t=T[e];B(t[2],t[1],t[0])}// Top faces
for(let e=0;e<R;e++){let t=T[e];B(t[0]+P*f,t[1]+P*f,t[2]+P*f)}}n.addGroup(e,r.length/3-e,0)})(),// Sides faces
// Create faces for the z-sides of the shape
function(){let e=r.length/3,t=0;F(A,0),t+=A.length;for(let e=0,n=w.length;e<n;e++){let n=w[e];F(n,t),//, true
t+=n.length}n.addGroup(e,r.length/3-e,1)}()}(o)}// build geometry
this.setAttribute("position",new tw(r,3)),this.setAttribute("uv",new tw(i,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,r=e.length;t<r;t++){let r=e[t];n.shapes.push(r.uuid)}else n.shapes.push(e.uuid);return n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}(t,n,e)}static fromJSON(e,t){let n=[];for(let r=0,i=e.shapes.length;r<i;r++){let i=t[e.shapes[r]];n.push(i)}let r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=new iV[r.type]().fromJSON(r)),new as(n,e.options)}}const al={generateTopUV:function(e,t,n,r,i){let a=t[3*n],o=t[3*n+1],s=t[3*r],l=t[3*r+1],u=t[3*i],c=t[3*i+1];return[new N(a,o),new N(s,l),new N(u,c)]},generateSideWallUV:function(e,t,n,r,i,a){let o=t[3*n],s=t[3*n+1],l=t[3*n+2],u=t[3*r],c=t[3*r+1],f=t[3*r+2],h=t[3*i],d=t[3*i+1],p=t[3*i+2],m=t[3*a],g=t[3*a+1],v=t[3*a+2];return Math.abs(s-c)<Math.abs(o-u)?[new N(o,1-l),new N(u,1-f),new N(h,1-p),new N(m,1-v)]:[new N(s,1-l),new N(c,1-f),new N(d,1-p),new N(g,1-v)]}};class au extends i${constructor(e=1,t=0){let n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];super(r,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new au(e.radius,e.detail)}}class ac extends i${constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ac(e.radius,e.detail)}}class af extends tO{constructor(e=.5,t=1,n=32,r=1,i=0,a=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},n=Math.max(3,n),r=Math.max(1,r);// buffers
let o=[],s=[],l=[],u=[],c=e,f=(t-e)/r,h=new eo,d=new N;// generate vertices, normals and uvs
for(let e=0;e<=r;e++){for(let e=0;e<=n;e++){// values are generate from the inside of the ring to the outside
let r=i+e/n*a;// vertex
h.x=c*Math.cos(r),h.y=c*Math.sin(r),s.push(h.x,h.y,h.z),// normal
l.push(0,0,1),// uv
d.x=(h.x/t+1)/2,d.y=(h.y/t+1)/2,u.push(d.x,d.y)}// increase the radius for next row of vertices
c+=f}// indices
for(let e=0;e<r;e++){let t=e*(n+1);for(let e=0;e<n;e++){let r=e+t,i=r+n+1,a=r+n+2,s=r+1;// faces
o.push(r,i,s),o.push(i,a,s)}}// build geometry
this.setIndex(o),this.setAttribute("position",new tw(s,3)),this.setAttribute("normal",new tw(l,3)),this.setAttribute("uv",new tw(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new af(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class ah extends tO{constructor(e=new iZ([new N(0,.5),new N(-.5,-.5),new N(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};// buffers
let n=[],r=[],i=[],a=[],o=0,s=0;// allow single and array values for "shapes" parameter
if(!1===Array.isArray(e))l(e);else for(let t=0;t<e.length;t++)l(e[t]),this.addGroup(o,s,t),o+=s,s=0;// helper functions
function l(e){let o=r.length/3,l=e.extractPoints(t),u=l.shape,c=l.holes;!1===ai.isClockWise(u)&&(u=u.reverse());for(let e=0,t=c.length;e<t;e++){let t=c[e];!0===ai.isClockWise(t)&&(c[e]=t.reverse())}let f=ai.triangulateShape(u,c);// join vertices of inner and outer paths to a single array
for(let e=0,t=c.length;e<t;e++){let t=c[e];u=u.concat(t)}// vertices, normals, uvs
for(let e=0,t=u.length;e<t;e++){let t=u[e];r.push(t.x,t.y,0),i.push(0,0,1),a.push(t.x,t.y)}// indices
for(let e=0,t=f.length;e<t;e++){let t=f[e],r=t[0]+o,i=t[1]+o,a=t[2]+o;n.push(r,i,a),s+=3}}// build geometry
this.setIndex(n),this.setAttribute("position",new tw(r,3)),this.setAttribute("normal",new tw(i,3)),this.setAttribute("uv",new tw(a,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON(),t=this.parameters.shapes;return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){let r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(t,e)}static fromJSON(e,t){let n=[];for(let r=0,i=e.shapes.length;r<i;r++){let i=t[e.shapes[r]];n.push(i)}return new ah(n,e.curveSegments)}}class ad extends tO{constructor(e=1,t=32,n=16,r=0,i=2*Math.PI,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));let s=Math.min(a+o,Math.PI),l=0,u=[],c=new eo,f=new eo,h=[],d=[],p=[],m=[];// generate vertices, normals and uvs
for(let h=0;h<=n;h++){let g=[],v=h/n,y=0;0===h&&0===a?y=.5/t:h===n&&s===Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){let s=n/t;// vertex
c.x=-e*Math.cos(r+s*i)*Math.sin(a+v*o),c.y=e*Math.cos(a+v*o),c.z=e*Math.sin(r+s*i)*Math.sin(a+v*o),d.push(c.x,c.y,c.z),// normal
f.copy(c).normalize(),p.push(f.x,f.y,f.z),// uv
m.push(s+y,1-v),g.push(l++)}u.push(g)}// indices
for(let e=0;e<n;e++)for(let r=0;r<t;r++){let t=u[e][r+1],i=u[e][r],o=u[e+1][r],l=u[e+1][r+1];(0!==e||a>0)&&h.push(t,i,l),(e!==n-1||s<Math.PI)&&h.push(i,o,l)}// build geometry
this.setIndex(h),this.setAttribute("position",new tw(d,3)),this.setAttribute("normal",new tw(p,3)),this.setAttribute("uv",new tw(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ad(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class ap extends i${constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ap(e.radius,e.detail)}}class am extends tO{constructor(e=1,t=.4,n=12,r=48,i=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);// buffers
let a=[],o=[],s=[],l=[],u=new eo,c=new eo,f=new eo;// generate vertices, normals and uvs
for(let a=0;a<=n;a++)for(let h=0;h<=r;h++){let d=h/r*i,p=a/n*Math.PI*2;// vertex
c.x=(e+t*Math.cos(p))*Math.cos(d),c.y=(e+t*Math.cos(p))*Math.sin(d),c.z=t*Math.sin(p),o.push(c.x,c.y,c.z),// normal
u.x=e*Math.cos(d),u.y=e*Math.sin(d),f.subVectors(c,u).normalize(),s.push(f.x,f.y,f.z),// uv
l.push(h/r),l.push(a/n)}// generate indices
for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){// indices
let n=(r+1)*e+t-1,i=(r+1)*(e-1)+t-1,o=(r+1)*(e-1)+t,s=(r+1)*e+t;// faces
a.push(n,i,s),a.push(i,o,s)}// build geometry
this.setIndex(a),this.setAttribute("position",new tw(o,3)),this.setAttribute("normal",new tw(s,3)),this.setAttribute("uv",new tw(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new am(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class ag extends tO{constructor(e=1,t=.4,n=64,r=8,i=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},n=Math.floor(n),r=Math.floor(r);// buffers
let o=[],s=[],l=[],u=[],c=new eo,f=new eo,h=new eo,d=new eo,p=new eo,m=new eo,g=new eo;// generate vertices, normals and uvs
for(let o=0;o<=n;++o){// the radian "u" is used to calculate the position on the torus curve of the current tubular segment
let y=o/n*i*Math.PI*2;// now we calculate two points. P1 is our current position on the curve, P2 is a little farther ahead.
// these points are used to create a special "coordinate space", which is necessary to calculate the correct vertex positions
v(y,i,a,e,h),v(y+.01,i,a,e,d),// calculate orthonormal basis
m.subVectors(d,h),g.addVectors(d,h),p.crossVectors(m,g),g.crossVectors(p,m),// normalize B, N. T can be ignored, we don't use it
p.normalize(),g.normalize();for(let e=0;e<=r;++e){// now calculate the vertices. they are nothing more than an extrusion of the torus curve.
// because we extrude a shape in the xy-plane, there is no need to calculate a z-value.
let i=e/r*Math.PI*2,a=-t*Math.cos(i),d=t*Math.sin(i);// now calculate the final vertex position.
// first we orient the extrusion with our basis vectors, then we add it to the current position on the curve
c.x=h.x+(a*g.x+d*p.x),c.y=h.y+(a*g.y+d*p.y),c.z=h.z+(a*g.z+d*p.z),s.push(c.x,c.y,c.z),// normal (P1 is always the center/origin of the extrusion, thus we can use it to calculate the normal)
f.subVectors(c,h).normalize(),l.push(f.x,f.y,f.z),// uv
u.push(o/n),u.push(e/r)}}// generate indices
for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){// indices
let n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),a=(r+1)*e+t,s=(r+1)*(e-1)+t;// faces
o.push(n,i,s),o.push(i,a,s)}// this function calculates the current position on the torus curve
function v(e,t,n,r,i){let a=Math.cos(e),o=Math.sin(e),s=n/t*e,l=Math.cos(s);i.x=r*(2+l)*.5*a,i.y=r*(2+l)*o*.5,i.z=r*Math.sin(s)*.5}// build geometry
this.setIndex(o),this.setAttribute("position",new tw(s,3)),this.setAttribute("normal",new tw(l,3)),this.setAttribute("uv",new tw(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ag(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class av extends tO{constructor(e=new iz(new eo(-1,-1,0),new eo(-1,1,0),new eo(1,1,0)),t=64,n=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};let a=e.computeFrenetFrames(t,i);// expose internals
this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;// helper variables
let o=new eo,s=new eo,l=new N,u=new eo,c=[],f=[],h=[],d=[];function p(i){// we use getPointAt to sample evenly distributed points from the given path
u=e.getPointAt(i/t,u);// retrieve corresponding normal and binormal
let l=a.normals[i],h=a.binormals[i];// generate normals and vertices for the current segment
for(let e=0;e<=r;e++){let t=e/r*Math.PI*2,i=Math.sin(t),a=-Math.cos(t);// normal
s.x=a*l.x+i*h.x,s.y=a*l.y+i*h.y,s.z=a*l.z+i*h.z,s.normalize(),f.push(s.x,s.y,s.z),// vertex
o.x=u.x+n*s.x,o.y=u.y+n*s.y,o.z=u.z+n*s.z,c.push(o.x,o.y,o.z)}}// create buffer data
// functions
(function(){for(let e=0;e<t;e++)p(e);// if the geometry is not closed, generate the last row of vertices and normals
// at the regular position on the given path
//
// if the geometry is closed, duplicate the first row of vertices and normals (uvs will differ)
p(!1===i?t:0),// uvs are generated in a separate function.
// this makes it easy compute correct values for closed geometries
function(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)l.x=e/t,l.y=n/r,h.push(l.x,l.y)}(),// finally create faces
function(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){let n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),a=(r+1)*e+t,o=(r+1)*(e-1)+t;// faces
d.push(n,i,o),d.push(i,a,o)}}()})(),// build geometry
this.setIndex(d),this.setAttribute("position",new tw(c,3)),this.setAttribute("normal",new tw(f,3)),this.setAttribute("uv",new tw(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){// This only works for built-in curves (e.g. CatmullRomCurve3).
// User defined curves or instances of CurvePath will not be deserialized.
return new av(new iV[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}// same as Array.prototype.slice, but also works on typed arrays
function ay(e,t,n){return ax(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}// converts an array to a specific type
function a_(e,t,n){return e&&// let 'undefined' and 'null' pass
(n||e.constructor!==t)?"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e):e}function ax(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}/**
 * Abstract base class of interpolants over parametric samples.
 *
 * The parameter domain is one dimensional, typically the time or a path
 * along a curve defined by the data.
 *
 * The sample values can have any dimensionality and derived classes may
 * apply special interpretations to the data.
 *
 * This class provides the interval seek in a Template Method, deferring
 * the actual interpolation to derived classes.
 *
 * Time complexity is O(1) for linear access crossing at most two points
 * and O(log N) for random access, where N is the number of positions.
 *
 * References:
 *
 * 		http://www.oodesign.com/template-method-pattern.html
 *
 */class ab{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];r:{i:{let a;a:{//- See http://jsperf.com/comparison-to-undefined/3
//- slower code:
//-
//- 				if ( t >= t1 || t1 === undefined ) {
o:if(!(e<r)){for(let a=n+2;;){if(void 0===r){if(e<i)break o;return(// after end
n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1))}if(n===a)break;// this loop
if(i=r,e<(r=t[++n]))break i}// prepare binary search on the right side of the index
a=t.length;break a}//- slower code:
//-					if ( t < t0 || t0 === undefined ) {
if(!(e>=i)){// looping?
let o=t[1];e<o&&(n=2,i=o);// linear reverse scan
for(let a=n-2;;){if(void 0===i)return(// before start
this._cachedIndex=0,this.copySampleValue_(0));if(n===a)break;// this loop
if(r=i,e>=(i=t[--n-1]))break i}// prepare binary search on the left side of the index
a=n,n=0;break a}break r}// linear scan
// binary search
for(;n<a;){let r=n+a>>>1;e<t[r]?a=r:n=r+1}// check boundary cases, again
if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}// seek
this._cachedIndex=n,this.intervalChanged_(n,i,r)}// validate_interval
return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){// copies a sample value to the result buffer
let t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let e=0;e!==r;++e)t[e]=n[i+e];return t}// Template methods for derived classes:
interpolate_(){throw Error("call to abstract method");// implementations shall return this.resultBuffer
}intervalChanged_(){// empty
}}/**
 * Fast and simple cubic spline interpolant.
 *
 * It was derived from a Hermitian construction setting the first derivative
 * at each sample position to the linear slope between neighboring positions
 * over their parameter interval.
 */class aS extends ab{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,n){let r=this.parameterPositions,i=e-2,a=e+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:// f'(t0) = 0
i=e,o=2*t-n;break;case 2402:// use the other end of the curve
i=r.length-2,o=t+r[i]-r[i+1];break;default:// f''(t0) = 0 a.k.a. Natural Spline
i=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:// f'(tN) = 0
a=e,s=2*n-t;break;case 2402:// use the other end of the curve
a=1,s=n+r[1]-r[0];break;default:// f''(tN) = 0, a.k.a. Natural Spline
a=e-1,s=t}let l=(n-t)*.5,u=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-n),this._offsetPrev=i*u,this._offsetNext=a*u}interpolate_(e,t,n,r){let i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=this._offsetPrev,c=this._offsetNext,f=this._weightPrev,h=this._weightNext,d=(n-t)/(r-t),p=d*d,m=p*d,g=-f*m+2*f*p-f*d,v=(1+f)*m+(-1.5-2*f)*p+(-.5+f)*d+1,y=(-1-h)*m+(1.5+h)*p+.5*d,_=h*m-h*p;// combine data linearly
for(let e=0;e!==o;++e)i[e]=g*a[u+e]+v*a[l+e]+y*a[s+e]+_*a[c+e];return i}}class aE extends ab{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){let i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=(n-t)/(r-t),c=1-u;for(let e=0;e!==o;++e)i[e]=a[l+e]*c+a[s+e]*u;return i}}/**
 *
 * Interpolant that evaluates to the sample value at the position preceding
 * the parameter.
 */class aw extends ab{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e/*, t0, t, t1 */){return this.copySampleValue_(e-1)}}class aM{constructor(e,t,n,r){if(void 0===e)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=a_(t,this.TimeBufferType),this.values=a_(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}// Serialization (in static context, because of constructor invocation
// and automatic invocation of .toJSON):
static toJSON(e){let t;let n=e.constructor;// derived classes can define a static toJSON method
if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{// by default, we assume the data can be serialized as-is
t={name:e.name,times:a_(e.times,Array),values:a_(e.values,Array)};let n=e.getInterpolation();n!==e.DefaultInterpolation&&(t.interpolation=n)}return t.type=e.ValueTypeName,t}InterpolantFactoryMethodDiscrete(e){return new aw(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new aE(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new aS(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){let t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){// fall back to default, unless the default itself is messed up
if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(t);// fatal, in this case
}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}// move all keyframes either forwards or backwards in time
shift(e){if(0!==e){let t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}// scale all keyframe times by a factor (useful for frame <-> seconds conversions)
scale(e){if(1!==e){let t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}// removes keyframes before and after animation without changing any values within the range [startTime, endTime].
// IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values
trim(e,t){let n=this.times,r=n.length,i=0,a=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(i=(a=Math.max(a,1))-1);let e=this.getValueSize();this.times=ay(n,i,a),this.values=ay(this.values,i*e,a*e)}return this}// ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable
validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let t=0;t!==i;t++){let r=n[t];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,r),e=!1;break}if(null!==a&&a>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,r,a),e=!1;break}a=r}if(void 0!==r&&ax(r))for(let t=0,n=r.length;t!==n;++t){let n=r[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e}// removes equivalent sequential keys as common in morph target sequences
// (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)
optimize(){// times or values may be shared with other tracks, so overwriting is unsafe
let e=ay(this.times),t=ay(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),i=e.length-1,a=1;for(let o=1;o<i;++o){let i=!1,s=e[o],l=e[o+1];// remove adjacent keyframes scheduled at the same time
if(s!==l&&(1!==o||s!==e[0])){if(r)i=!0;else{// remove unnecessary keyframes same as their neighbors
let e=o*n,r=e-n,a=e+n;for(let o=0;o!==n;++o){let n=t[e+o];if(n!==t[r+o]||n!==t[a+o]){i=!0;break}}}}// in-place compaction
if(i){if(o!==a){e[a]=e[o];let r=o*n,i=a*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++a}}// flush last keyframe (compaction looks ahead)
if(i>0){e[a]=e[i];for(let e=i*n,r=a*n,o=0;o!==n;++o)t[r+o]=t[e+o];++a}return a!==e.length?(this.times=ay(e,0,a),this.values=ay(t,0,a*n)):(this.times=e,this.values=t),this}clone(){let e=ay(this.times,0),t=ay(this.values,0),n=this.constructor,r=new n(this.name,e,t);return(// Interpolant argument to constructor is not saved, so copy the factory method directly.
r.createInterpolant=this.createInterpolant,r)}}aM.prototype.TimeBufferType=Float32Array,aM.prototype.ValueBufferType=Float32Array,aM.prototype.DefaultInterpolation=2301;/**
 * A Track of Boolean keyframe values.
 */class aT extends aM{}aT.prototype.ValueTypeName="bool",aT.prototype.ValueBufferType=Array,aT.prototype.DefaultInterpolation=2300,aT.prototype.InterpolantFactoryMethodLinear=void 0,aT.prototype.InterpolantFactoryMethodSmooth=void 0,/**
 * A Track of keyframe values that represent color.
 */(class extends aM{}).prototype.ValueTypeName="color",/**
 * A Track of numeric keyframe values.
 */(class extends aM{}).prototype.ValueTypeName="number";/**
 * Spherical linear unit quaternion interpolant.
 */class aA extends ab{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){let i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t),l=e*o;for(let e=l+o;l!==e;l+=4)ea.slerpFlat(i,0,a,l-o,a,l,s);return i}}/**
 * A Track of quaternion keyframe values.
 */class aC extends aM{InterpolantFactoryMethodLinear(e){return new aA(this.times,this.values,this.getValueSize(),e)}}aC.prototype.ValueTypeName="quaternion",// ValueBufferType is inherited
aC.prototype.DefaultInterpolation=2301,aC.prototype.InterpolantFactoryMethodSmooth=void 0;/**
 * A Track that interpolates Strings
 */class aP extends aM{}aP.prototype.ValueTypeName="string",aP.prototype.ValueBufferType=Array,aP.prototype.DefaultInterpolation=2300,aP.prototype.InterpolantFactoryMethodLinear=void 0,aP.prototype.InterpolantFactoryMethodSmooth=void 0,/**
 * A Track of vectored keyframe values.
 */(class extends aM{}).prototype.ValueTypeName="vector";const aR={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&// console.log( 'THREE.Cache', 'Adding key:', key );
(this.files[e]=t)},get:function(e){if(!1!==this.enabled)// console.log( 'THREE.Cache', 'Checking key:', key );
return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},aL=/*@__PURE__*/new class{constructor(e,t,n){let r;let i=this,a=!1,o=0,s=0,l=[];// Refer to #5689 for the reason why we don't set .onStart
// in the constructor
this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===a&&void 0!==i.onStart&&i.onStart(e,o,s),a=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,s),o===s&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){let t=l.indexOf(e);return -1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){let n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}};class aO{constructor(e){this.manager=void 0!==e?e:aL,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let n=this;return new Promise(function(r,i){n.load(e,r,t,i)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}aO.DEFAULT_MATERIAL_NAME="__DEFAULT";class aI extends aO{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);let i=this,a=aR.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;let o=z("img");function s(){u(),aR.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){u(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function u(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o}}class aU extends aO{constructor(e){super(e)}load(e,t,n,r){let i=new ee,a=new aI(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)},n,r),i}}// Characters [].:/ are reserved for track binding syntax.
const aN="\\[\\]\\.:\\/",aD=RegExp("["+aN+"]","g"),ak="[^"+aN+"]",aF="[^"+aN.replace("\\.","")+"]",az=/*@__PURE__*//((?:WC+[\/:])*)/.source.replace("WC",ak),aB=/*@__PURE__*//(WCOD+)?/.source.replace("WCOD",aF),aV=/*@__PURE__*//(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ak),aH=/*@__PURE__*//\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ak),aG=RegExp("^"+az+aB+aV+aH+"$"),aW=["material","materials","bones","map"];// Note: This class uses a State pattern on a per-method basis:
// 'bind' sets 'this.getValue' / 'setValue' and shadows the
// prototype version of these methods with one that represents
// the bound state. When the property is not found, the methods
// become no-ops.
class aj{constructor(e,t,n){this.path=t,this.parsedPath=n||aj.parseTrackName(t),this.node=aj.findNode(e,this.parsedPath.nodeName),this.rootNode=e,// initial state of these methods that calls 'bind'
this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new aj.Composite(e,t,n):new aj(e,t,n)}/**
	 * Replaces spaces with underscores and removes unsupported characters from
	 * node names, to ensure compatibility with parseTrackName().
	 *
	 * @param {string} name Node name to be sanitized.
	 * @return {string}
	 */static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(aD,"")}static parseTrackName(e){let t=aG.exec(e);if(null===t)throw Error("PropertyBinding: Cannot parse trackName: "+e);let n={// directoryName: matches[ 1 ], // (tschw) currently unused
nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){let e=n.nodeName.substring(r+1);-1!==aW.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;// search into skeleton bones.
if(e.skeleton){let n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}// search into node subtree.
if(e.children){let n=function(e){for(let r=0;r<e.length;r++){let i=e[r];if(i.name===t||i.uuid===t)return i;let a=n(i.children);if(a)return a}return null},r=n(e.children);if(r)return r}return null}// these are used to "bind" a nonexistent property
_getValue_unavailable(){}_setValue_unavailable(){}// Getters
_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}// Direct
_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}// EntireArray
_setValue_array(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}// ArrayElement
_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}// HasToFromArray
_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}// create getter / setter pair for a property in the scene graph
bind(){let e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;// ensure there is a value node
if(e||(e=aj.findNode(this.rootNode,t.nodeName),this.node=e),// set fail state so we can just 'return' on error
this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let r=t.objectIndex;// special cases were we need to reach deeper into the hierarchy to get the face materials....
switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}// potential future optimization: skip this if propertyIndex is already an integer
// and convert the integer string to a true integer.
e=e.skeleton.bones;// support resolving morphTarget names into indices.
for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(void 0===e[n]){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(void 0!==r){if(void 0===e[r]){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[r]}}// resolve property
let a=e[r];if(void 0===a){let n=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e);return}// determine versioning scheme
let o=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?o=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(o=this.Versioning.MatrixWorldNeedsUpdate);// determine how the property gets bound
let s=this.BindingType.Direct;if(void 0!==i){// access a sub element of the property array (only primitives are supported right now)
if("morphTargetInfluences"===r){// potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.
// support resolving morphTarget names into indices.
if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=i}else void 0!==a.fromArray&&void 0!==a.toArray?(// must use copy for Object3D.Euler/Quaternion
s=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(s=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;// select getter / setter
this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][o]}unbind(){this.node=null,// back to the prototype version of getValue / setValue
// note: avoiding to mutate the shape of 'this' via 'delete'
this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}aj.Composite=class{constructor(e,t,n){let r=n||aj.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();// bind all binding
let n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){let n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},aj.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},aj.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},aj.prototype.GetterByBindingType=[aj.prototype._getValue_direct,aj.prototype._getValue_array,aj.prototype._getValue_arrayElement,aj.prototype._getValue_toArray],aj.prototype.SetterByBindingTypeAndVersioning=[[// Direct
aj.prototype._setValue_direct,aj.prototype._setValue_direct_setNeedsUpdate,aj.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[// EntireArray
aj.prototype._setValue_array,aj.prototype._setValue_array_setNeedsUpdate,aj.prototype._setValue_array_setMatrixWorldNeedsUpdate],[// ArrayElement
aj.prototype._setValue_arrayElement,aj.prototype._setValue_arrayElement_setNeedsUpdate,aj.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[// HasToFromArray
aj.prototype._setValue_fromArray,aj.prototype._setValue_fromArray_setNeedsUpdate,aj.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1),"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"156"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="156");var y=p("acw62"),aX={},aq={};Object.defineProperty(aq,"__esModule",{value:!0}),aq.createReactPlayer=void 0;var aY=om(p("acw62")),a$=on(p("bc5yV")),aK=on(p("jk22o")),aZ=on(p("ai2Pb")),aJ=p("fri5W"),aQ={};Object.defineProperty(aQ,"__esModule",{value:!0}),aQ.parseStartTime=function(e){return a7(e,a4)},aQ.parseEndTime=function(e){return a7(e,a5)}// http://stackoverflow.com/a/38622545
,aQ.randomString=function(){return Math.random().toString(36).substr(2,5)},aQ.queryString=function(e){return Object.keys(e).map(function(t){return"".concat(t,"=").concat(e[t])}).join("&")},aQ.getSDK=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:a0.default,a=a9(t);return a&&r(a)?Promise.resolve(a):new Promise(function(r,a){// If we are already loading the SDK, add the resolve and reject
// functions to the existing array of requests
if(oe[e]){oe[e].push({resolve:r,reject:a});return}oe[e]=[{resolve:r,reject:a}];var o=function(t){// When loaded, resolve all pending request promises
oe[e].forEach(function(e){return e.resolve(t)})};if(n){var s=window[n];window[n]=function(){s&&s(),o(a9(t))}}i(e,function(r){r?(// Loading the SDK failed  reject all requests and
// reset the array of requests for this SDK
oe[e].forEach(function(e){return e.reject(r)}),oe[e]=null):n||o(a9(t))})})},aQ.getConfig=function(e,t){return(0,a1.default)(t.config,e.config)},aQ.omit=function(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=(t=[]).concat.apply(t,r),o={},s=Object.keys(e),l=0;l<s.length;l++){var u=s[l];-1===a.indexOf(u)&&(o[u]=e[u])}return o},aQ.callPlayer=function(e){var t;// Util method for calling a method on this.player
// but guard against errors and console.warn instead
if(!this.player||!this.player[e]){var n="ReactPlayer: ".concat(this.constructor.displayName," player could not call %c").concat(e,"%c  ");return this.player?this.player[e]||(n+="The method was not available"):n+="The player was not available",console.warn(n,"font-weight: bold",""),null}for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return(t=this.player)[e].apply(t,i)},aQ.isMediaStream=function(e){return"undefined"!=typeof window&&void 0!==window.MediaStream&&e instanceof window.MediaStream},aQ.isBlobUrl=function(e){return/^blob:/.test(e)},aQ.supportsWebKitPresentationMode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.createElement("video"),t=!1===/iPhone|iPod/.test(navigator.userAgent);return e.webkitSupportsPresentationMode&&"function"==typeof e.webkitSetPresentationMode&&t};var a0=a2(p("ccybn")),a1=a2(p("bc5yV"));function a2(e){return e&&e.__esModule?e:{default:e}}function a3(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var a4=/[?&#](?:start|t)=([0-9hms]+)/,a5=/[?&#]end=([0-9hms]+)/,a6=/(\d+)(h|m|s)/g,a8=/^\d+$/;// and return the start time in seconds
function a7(e,t){if(!(e instanceof Array)){var n=e.match(t);if(n){var r=n[1];if(r.match(a6))return function(e){for(var t=0,n=a6.exec(e);null!==n;){var r,i=function(e){if(Array.isArray(e))return e}(r=n)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}(r,3)||function(e,t){if(e){if("string"==typeof e)return a3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a3(e,t)}}(r,3)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=i[1],o=i[2];"h"===o&&(t+=3600*parseInt(a,10)),"m"===o&&(t+=60*parseInt(a,10)),"s"===o&&(t+=parseInt(a,10)),n=a6.exec(e)}return t}(r);if(a8.test(r))return parseInt(r)}}}function a9(e){return window[e]?window[e]:window.exports&&window.exports[e]?window.exports[e]:window.module&&window.module.exports&&window.module.exports[e]?window.module.exports[e]:null}// Util function to load an external SDK
// or return the SDK if it is already loaded
var oe={},ot=on(p("lTdXI"));function on(e){return e&&e.__esModule?e:{default:e}}function or(e){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function oa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oi(Object(n),!0).forEach(function(t){od(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oi(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function oo(){return(oo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function os(e){return function(e){if(Array.isArray(e))return ol(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ol(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ol(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ol(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ou(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oc(e,t){return(oc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function of(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oh(e){return(oh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function od(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function op(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return op=function(){return e},e}function om(e){if(e&&e.__esModule)return e;if(null===e||"object"!==or(e)&&"function"!=typeof e)return{default:e};var t=op();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}var og=/*#__PURE__*/(0,aY.lazy)(function(){return Promise.resolve().then(function(){return p("7Iwfb")}).then(function(e){return om(e)})}),ov="undefined"!=typeof window&&window.document,oy=Object.keys(aJ.propTypes),o_=ov?aY.Suspense:function(){return null},ox=[];aq.createReactPlayer=function(e,t){var n,r;return r=n=/*#__PURE__*/function(n){(function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oc(e,t)})(s,n);var r,i,a,o=(r=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t,n=oh(s);if(r){var i=oh(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return(e=t)&&("object"===or(e)||"function"==typeof e)?e:of(this)});function s(){var n;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,s);for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return od(of(n=o.call.apply(o,[this].concat(i))),"state",{showPreview:!!n.props.light}),od(of(n),"references",{wrapper:function(e){n.wrapper=e},player:function(e){n.player=e}}),od(of(n),"handleClickPreview",function(){n.setState({showPreview:!1})}),od(of(n),"showPreview",function(){n.setState({showPreview:!0})}),od(of(n),"getDuration",function(){return n.player?n.player.getDuration():null}),od(of(n),"getCurrentTime",function(){return n.player?n.player.getCurrentTime():null}),od(of(n),"getSecondsLoaded",function(){return n.player?n.player.getSecondsLoaded():null}),od(of(n),"getInternalPlayer",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"player";return n.player?n.player.getInternalPlayer(e):null}),od(of(n),"seekTo",function(e,t){if(!n.player)return null;n.player.seekTo(e,t)}),od(of(n),"handleReady",function(){n.props.onReady(of(n))}),od(of(n),"getActivePlayer",(0,aK.default)(function(n){for(var r=0,i=[].concat(ox,os(e));r<i.length;r++){var a=i[r];if(a.canPlay(n))return a}return t||null})),od(of(n),"getConfig",(0,aK.default)(function(e,t){var r=n.props.config;return a$.default.all([aJ.defaultProps.config,aJ.defaultProps.config[t]||{},r,r[t]||{}])})),od(of(n),"getAttributes",(0,aK.default)(function(e){return(0,aQ.omit)(n.props,oy)})),od(of(n),"renderActivePlayer",function(e){if(!e)return null;var t=n.getActivePlayer(e);if(!t)return null;var r=n.getConfig(e,t.key);return /*#__PURE__*/aY.default.createElement(ot.default,oo({},n.props,{key:t.key,ref:n.references.player,config:r,activePlayer:t.lazyPlayer||t,onReady:n.handleReady}))}),n}return i=[{key:"shouldComponentUpdate",value:function(e,t){return!(0,aZ.default)(this.props,e)||!(0,aZ.default)(this.state,t)}},{key:"componentDidUpdate",value:function(e){var t=this.props.light;!e.light&&t&&this.setState({showPreview:!0}),e.light&&!t&&this.setState({showPreview:!1})}},{key:"renderPreview",value:function(e){if(!e)return null;var t=this.props,n=t.light,r=t.playIcon;return /*#__PURE__*/aY.default.createElement(og,{url:e,light:n,playIcon:r,onClick:this.handleClickPreview})}},{key:"render",value:function(){var e=this.props,t=e.url,n=e.style,r=e.width,i=e.height,a=e.wrapper,o=this.state.showPreview,s=this.getAttributes(t);return /*#__PURE__*/aY.default.createElement(a,oo({ref:this.references.wrapper,style:oa(oa({},n),{},{width:r,height:i})},s),/*#__PURE__*/aY.default.createElement(o_,{fallback:null},o?this.renderPreview(t):this.renderActivePlayer(t)))}}],ou(s.prototype,i),a&&ou(s,a),s}(aY.Component),od(n,"displayName","ReactPlayer"),od(n,"propTypes",aJ.propTypes),od(n,"defaultProps",aJ.defaultProps),od(n,"addCustomPlayer",function(e){ox.push(e)}),od(n,"removeCustomPlayers",function(){ox.length=0}),od(n,"canPlay",function(t){for(var n=0,r=[].concat(ox,os(e));n<r.length;n++)if(r[n].canPlay(t))return!0;return!1}),od(n,"canEnablePIP",function(t){for(var n=0,r=[].concat(ox,os(e));n<r.length;n++){var i=r[n];if(i.canEnablePIP&&i.canEnablePIP(t))return!0}return!1}),r};var ob=aq.createReactPlayer,oS={};Object.defineProperty(oS,"__esModule",{value:!0}),oS.default=void 0;var oE=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==oW(e)&&"function"!=typeof e)return{default:e};var t=oG();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(p("acw62")),ow={};function oM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(ow,"__esModule",{value:!0}),ow.canPlay=ow.FLV_EXTENSIONS=ow.DASH_EXTENSIONS=ow.HLS_EXTENSIONS=ow.VIDEO_EXTENSIONS=ow.AUDIO_EXTENSIONS=ow.MATCH_URL_VIDYARD=ow.MATCH_URL_MIXCLOUD=ow.MATCH_URL_DAILYMOTION=ow.MATCH_URL_TWITCH_CHANNEL=ow.MATCH_URL_TWITCH_VIDEO=ow.MATCH_URL_WISTIA=ow.MATCH_URL_STREAMABLE=ow.MATCH_URL_FACEBOOK_WATCH=ow.MATCH_URL_FACEBOOK=ow.MATCH_URL_VIMEO=ow.MATCH_URL_SOUNDCLOUD=ow.MATCH_URL_YOUTUBE=void 0;var oT=/(?:youtu\.be\/|youtube(?:-nocookie)?\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//;ow.MATCH_URL_YOUTUBE=oT;var oA=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/;ow.MATCH_URL_SOUNDCLOUD=oA;var oC=/vimeo\.com\/.+/;ow.MATCH_URL_VIMEO=oC;var oP=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/;ow.MATCH_URL_FACEBOOK=oP;var oR=/^https?:\/\/fb\.watch\/.+$/;ow.MATCH_URL_FACEBOOK_WATCH=oR;var oL=/streamable\.com\/([a-z0-9]+)$/;ow.MATCH_URL_STREAMABLE=oL;var oO=/(?:wistia\.com|wi\.st)\/(?:medias|embed)\/(.*)$/;ow.MATCH_URL_WISTIA=oO;var oI=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/;ow.MATCH_URL_TWITCH_VIDEO=oI;var oU=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/;ow.MATCH_URL_TWITCH_CHANNEL=oU;var oN=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?$/;ow.MATCH_URL_DAILYMOTION=oN;var oD=/mixcloud\.com\/([^/]+\/[^/]+)/;ow.MATCH_URL_MIXCLOUD=oD;var ok=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-]+)/;ow.MATCH_URL_VIDYARD=ok;var oF=/\.(m4a|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i;ow.AUDIO_EXTENSIONS=oF;var oz=/\.(mp4|og[gv]|webm|mov|m4v)($|\?)/i;ow.VIDEO_EXTENSIONS=oz;var oB=/\.(m3u8)($|\?)/i;ow.HLS_EXTENSIONS=oB;var oV=/\.(mpd)($|\?)/i;ow.DASH_EXTENSIONS=oV;var oH=/\.(flv)($|\?)/i;function oG(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return oG=function(){return e},e}function oW(e){return(oW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function oX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oj(Object(n),!0).forEach(function(t){oQ(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oj(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function oq(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return oY(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oY(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oY(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function o$(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oK(e,t){return(oK=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oZ(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oJ(e){return(oJ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oQ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ow.FLV_EXTENSIONS=oH,ow.canPlay={youtube:function(e){return e instanceof Array?e.every(function(e){return oT.test(e)}):oT.test(e)},soundcloud:function(e){return oA.test(e)&&!oF.test(e)},vimeo:function(e){return oC.test(e)&&!oz.test(e)&&!oB.test(e)},facebook:function(e){return oP.test(e)||oR.test(e)},streamable:function(e){return oL.test(e)},wistia:function(e){return oO.test(e)},twitch:function(e){return oI.test(e)||oU.test(e)},dailymotion:function(e){return oN.test(e)},mixcloud:function(e){return oD.test(e)},vidyard:function(e){return ok.test(e)},file:function e(t){if(t instanceof Array){var n,r=function(e,t){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return oM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oM(e,t)}}(e))){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a,o=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if("string"==typeof i&&e(i)||e(i.src))return!0}}catch(e){r.e(e)}finally{r.f()}return!1}return!!((0,aQ.isMediaStream)(t)||(0,aQ.isBlobUrl)(t))||oF.test(t)||oz.test(t)||oB.test(t)||oV.test(t)||oH.test(t)}};var o0=/[?&](?:list|channel)=([a-zA-Z0-9_-]+)/,o1=/user\/([a-zA-Z0-9_-]+)\/?/,o2=/youtube-nocookie\.com/,o3=/*#__PURE__*/function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oK(e,t)}(a,e);var t,n,r,i=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n,r=oJ(a);if(t){var i=oJ(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(e=n)&&("object"===oW(e)||"function"==typeof e)?e:oZ(this)});function a(){var e;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return oQ(oZ(e=i.call.apply(i,[this].concat(n))),"callPlayer",aQ.callPlayer),oQ(oZ(e),"parsePlaylist",function(t){return t instanceof Array?{listType:"playlist",playlist:t.map(e.getID).join(",")}:o0.test(t)?{listType:"playlist",list:oq(t.match(o0),2)[1].replace(/^UC/,"UU")}:o1.test(t)?{listType:"user_uploads",list:oq(t.match(o1),2)[1]}:{}}),oQ(oZ(e),"onStateChange",function(t){var n=t.data,r=e.props,i=r.onPlay,a=r.onPause,o=r.onBuffer,s=r.onBufferEnd,l=r.onEnded,u=r.onReady,c=r.loop,f=r.config,h=f.playerVars,d=f.onUnstarted,p=window.YT.PlayerState,m=p.UNSTARTED,g=p.PLAYING,v=p.PAUSED,y=p.BUFFERING,_=p.ENDED,x=p.CUED;if(n===m&&d(),n===g&&(i(),s()),n===v&&a(),n===y&&o(),n===_){var b=!!e.callPlayer("getPlaylist");// Only loop manually if not playing a playlist
c&&!b&&(h.start?e.seekTo(h.start):e.play()),l()}n===x&&u()}),oQ(oZ(e),"mute",function(){e.callPlayer("mute")}),oQ(oZ(e),"unmute",function(){e.callPlayer("unMute")}),oQ(oZ(e),"ref",function(t){e.container=t}),e}return n=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this)}},{key:"getID",value:function(e){return!e||e instanceof Array||o0.test(e)?null:e.match(ow.MATCH_URL_YOUTUBE)[1]}},{key:"load",value:function(e,t){var n=this,r=this.props,i=r.playing,a=r.muted,o=r.playsinline,s=r.controls,l=r.loop,u=r.config,c=r.onError,f=u.playerVars,h=u.embedOptions,d=this.getID(e);if(t){if(o0.test(e)||o1.test(e)||e instanceof Array){this.player.loadPlaylist(this.parsePlaylist(e));return}this.player.cueVideoById({videoId:d,startSeconds:(0,aQ.parseStartTime)(e)||f.start,endSeconds:(0,aQ.parseEndTime)(e)||f.end});return}(0,aQ.getSDK)("https://www.youtube.com/iframe_api","YT","onYouTubeIframeAPIReady",function(e){return e.loaded}).then(function(t){n.container&&(n.player=new t.Player(n.container,oX({width:"100%",height:"100%",videoId:d,playerVars:oX(oX({autoplay:i?1:0,mute:a?1:0,controls:s?1:0,start:(0,aQ.parseStartTime)(e),end:(0,aQ.parseEndTime)(e),origin:window.location.origin,playsinline:o?1:0},n.parsePlaylist(e)),f),events:{onReady:function(){l&&n.player.setLoop(!0),n.props.onReady()},onStateChange:n.onStateChange,onError:function(e){return c(e.data)}},host:o2.test(e)?"https://www.youtube-nocookie.com":void 0},h)))},c),h.events&&console.warn("Using `embedOptions.events` will likely break things. Use ReactPlayers callback props instead, eg onReady, onPlay, onPause")}},{key:"play",value:function(){this.callPlayer("playVideo")}},{key:"pause",value:function(){this.callPlayer("pauseVideo")}},{key:"stop",value:function(){document.body.contains(this.callPlayer("getIframe"))&&this.callPlayer("stopVideo")}},{key:"seekTo",value:function(e){this.callPlayer("seekTo",e),this.props.playing||this.pause()}},{key:"setVolume",value:function(e){this.callPlayer("setVolume",100*e)}},{key:"setPlaybackRate",value:function(e){this.callPlayer("setPlaybackRate",e)}},{key:"setLoop",value:function(e){this.callPlayer("setLoop",e)}},{key:"getDuration",value:function(){return this.callPlayer("getDuration")}},{key:"getCurrentTime",value:function(){return this.callPlayer("getCurrentTime")}},{key:"getSecondsLoaded",value:function(){return this.callPlayer("getVideoLoadedFraction")*this.getDuration()}},{key:"render",value:function(){var e=this.props.display;return /*#__PURE__*/oE.default.createElement("div",{style:{width:"100%",height:"100%",display:e}},/*#__PURE__*/oE.default.createElement("div",{ref:this.ref}))}}],o$(a.prototype,n),r&&o$(a,r),a}(oE.Component);oS.default=o3,oQ(o3,"displayName","YouTube"),oQ(o3,"canPlay",ow.canPlay.youtube);var o4=oS.default;aX=ob([{key:"youtube",canPlay:o4.canPlay,lazyPlayer:o4}]);var o5=p("f1q41"),o6=p("jfanT"),o8={};o8=p("9cCWX");var y=p("acw62"),o7={};//
o7=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;// Test for A's keys different from B.
for(var s=Object.prototype.hasOwnProperty.bind(t),l=0;l<a.length;l++){var u=a[l];if(!s(u))return!1;var c=e[u],f=t[u];if(!1===(i=n?n.call(r,c,f,u):void 0)||void 0===i&&c!==f)return!1}return!0};var o9=function(e){function t(e,t,r){var i=t.trim().split(p);t=i;var a=i.length,o=e.length;switch(o){case 0:case 1:var s=0;for(e=0===o?"":e[0]+" ";s<a;++s)t[s]=n(e,t[s],r).trim();break;default:var l=s=0;for(t=[];s<a;++s)for(var u=0;u<o;++u)t[l++]=n(e[u]+" ",i[s],r).trim()}return t}function n(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(m,"$1"+e.trim());case 58:return e.trim()+t.replace(m,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(m,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function r(e,t,n,a){var o=e+";",s=2*t+3*n+4*a;if(944===s){e=o.indexOf(":",9)+1;var l=o.substring(e,o.length-1).trim();return l=o.substring(0,e).trim()+l+";",1===P||2===P&&i(l,1)?"-webkit-"+l+l:l}if(0===P||2===P&&!i(o,1))return o;switch(s){case 1015:return 97===o.charCodeAt(10)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:if(45===o.charCodeAt(8))return"-webkit-"+o+o;if(0<o.indexOf("image-set(",11))return o.replace(M,"$1-webkit-$2")+o;break;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(l=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+l+o;case 1005:return h.test(o)?o.replace(f,":-webkit-")+o.replace(f,":-moz-")+o:o;case 1e3:switch(t=(l=o.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(t)){case 226:l=o.replace(_,"tb");break;case 232:l=o.replace(_,"tb-rl");break;case 220:l=o.replace(_,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+l+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(t=(o=e).length-10,s=(l=(33===o.charCodeAt(t)?o.substring(0,t):o).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:o=o.replace(l,"-webkit-"+l)+";"+o;break;case 207:case 102:o=o.replace(l,"-webkit-"+(102<s?"inline-":"")+"box")+";"+o.replace(l,"-webkit-"+l)+";"+o.replace(l,"-ms-"+l+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return l=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+l+"-ms-flex-"+l+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(S,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","").replace(S,"")+o}break;case 973:case 989:if(45!==o.charCodeAt(3)||122===o.charCodeAt(4))break;case 931:case 953:if(!0===w.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?r(e.replace("stretch","fill-available"),t,n,a).replace(":fill-available",":stretch"):o.replace(l,"-webkit-"+l)+o.replace(l,"-moz-"+l.replace("fill-",""))+o;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===n+a&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(d,"$1-webkit-$2")+o}return o}function i(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),I(2!==t?r:r.replace(E,"$1"),n,t)}function a(e,t){var n=r(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(b," or ($1)").substring(4):"("+t+")"}function o(e,t,n,r,i,a,o,s,u,c){for(var f,h=0,d=t;h<O;++h)switch(f=L[h].call(l,e,d,n,r,i,a,o,s,u,c)){case void 0:case!1:case!0:case null:break;default:d=f}if(d!==t)return d}function s(e){return void 0!==(e=e.prefix)&&(I=null,e?"function"!=typeof e?P=1:(P=2,I=e):P=0),s}function l(e,n){var s=e;if(33>s.charCodeAt(0)&&(s=s.trim()),s=[s],0<O){var l=o(-1,n,s,s,A,T,0,0,0,0);void 0!==l&&"string"==typeof l&&(n=l)}var f=function e(n,s,l,f,h){for(var d,p,m,_,b,S=0,E=0,w=0,M=0,L=0,I=0,N=m=d=0,D=0,k=0,F=0,z=0,B=l.length,V=B-1,H="",G="",W="",j="";D<B;){if(p=l.charCodeAt(D),D===V&&0!==E+M+w+S&&(0!==E&&(p=47===E?10:47),M=w=S=0,B++,V++),0===E+M+w+S){if(D===V&&(0<k&&(H=H.replace(c,"")),0<H.trim().length)){switch(p){case 32:case 9:case 59:case 13:case 10:break;default:H+=l.charAt(D)}p=59}switch(p){case 123:for(d=(H=H.trim()).charCodeAt(0),m=1,z=++D;D<B;){switch(p=l.charCodeAt(D)){case 123:m++;break;case 125:m--;break;case 47:switch(p=l.charCodeAt(D+1)){case 42:case 47:e:{for(N=D+1;N<V;++N)switch(l.charCodeAt(N)){case 47:if(42===p&&42===l.charCodeAt(N-1)&&D+2!==N){D=N+1;break e}break;case 10:if(47===p){D=N+1;break e}}D=N}}break;case 91:p++;case 40:p++;case 34:case 39:for(;D++<V&&l.charCodeAt(D)!==p;);}if(0===m)break;D++}if(m=l.substring(z,D),0===d&&(d=(H=H.replace(u,"").trim()).charCodeAt(0)),64===d){switch(0<k&&(H=H.replace(c,"")),p=H.charCodeAt(1)){case 100:case 109:case 115:case 45:k=s;break;default:k=R}if(z=(m=e(s,k,m,p,h+1)).length,0<O&&(b=o(3,m,k=t(R,H,F),s,A,T,z,p,h,f),H=k.join(""),void 0!==b&&0===(z=(m=b.trim()).length)&&(p=0,m="")),0<z)switch(p){case 115:H=H.replace(x,a);case 100:case 109:case 45:m=H+"{"+m+"}";break;case 107:m=(H=H.replace(g,"$1 $2"))+"{"+m+"}",m=1===P||2===P&&i("@"+m,3)?"@-webkit-"+m+"@"+m:"@"+m;break;default:m=H+m,112===f&&(G+=m,m="")}else m=""}else m=e(s,t(s,H,F),m,f,h+1);W+=m,m=F=k=N=d=0,H="",p=l.charCodeAt(++D);break;case 125:case 59:if(1<(z=(H=(0<k?H.replace(c,""):H).trim()).length))switch(0===N&&(45===(d=H.charCodeAt(0))||96<d&&123>d)&&(z=(H=H.replace(" ",":")).length),0<O&&void 0!==(b=o(1,H,s,n,A,T,G.length,f,h,f))&&0===(z=(H=b.trim()).length)&&(H="\x00\x00"),d=H.charCodeAt(0),p=H.charCodeAt(1),d){case 0:break;case 64:if(105===p||99===p){j+=H+l.charAt(D);break}default:58!==H.charCodeAt(z-1)&&(G+=r(H,d,p,H.charCodeAt(2)))}F=k=N=d=0,H="",p=l.charCodeAt(++D)}}switch(p){case 13:case 10:47===E?E=0:0===1+d&&107!==f&&0<H.length&&(k=1,H+="\x00"),0<O*U&&o(0,H,s,n,A,T,G.length,f,h,f),T=1,A++;break;case 59:case 125:if(0===E+M+w+S){T++;break}default:switch(T++,_=l.charAt(D),p){case 9:case 32:if(0===M+S+E)switch(L){case 44:case 58:case 9:case 32:_="";break;default:32!==p&&(_=" ")}break;case 0:_="\\0";break;case 12:_="\\f";break;case 11:_="\\v";break;case 38:0===M+E+S&&(k=F=1,_="\f"+_);break;case 108:if(0===M+E+S+C&&0<N)switch(D-N){case 2:112===L&&58===l.charCodeAt(D-3)&&(C=L);case 8:111===I&&(C=I)}break;case 58:0===M+E+S&&(N=D);break;case 44:0===E+w+M+S&&(k=1,_+="\r");break;case 34:case 39:0===E&&(M=M===p?0:0===M?p:M);break;case 91:0===M+E+w&&S++;break;case 93:0===M+E+w&&S--;break;case 41:0===M+E+S&&w--;break;case 40:0===M+E+S&&(0===d&&(2*L+3*I==533||(d=1)),w++);break;case 64:0===E+w+M+S+N+m&&(m=1);break;case 42:case 47:if(!(0<M+S+w))switch(E){case 0:switch(2*p+3*l.charCodeAt(D+1)){case 235:E=47;break;case 220:z=D,E=42}break;case 42:47===p&&42===L&&z+2!==D&&(33===l.charCodeAt(z+2)&&(G+=l.substring(z,D+1)),_="",E=0)}}0===E&&(H+=_)}I=L,L=p,D++}if(0<(z=G.length)){if(k=s,0<O&&void 0!==(b=o(2,G,k,n,A,T,z,f,h,f))&&0===(G=b).length)return j+G+W;if(G=k.join(",")+"{"+G+"}",0!=P*C){switch(2!==P||i(G,2)||(C=0),C){case 111:G=G.replace(y,":-moz-$1")+G;break;case 112:G=G.replace(v,"::-webkit-input-$1")+G.replace(v,"::-moz-$1")+G.replace(v,":-ms-input-$1")+G}C=0}}return j+G+W}(R,s,n,0,0);return 0<O&&void 0!==(l=o(-2,f,s,s,A,T,f.length,0,0,0))&&(f=l),C=0,T=A=1,f}var u=/^\0+/g,c=/[\0\r\f]/g,f=/: */g,h=/zoo|gra/,d=/([,: ])(transform)/g,p=/,\r+?/g,m=/([\t\r\n ])*\f?&/g,g=/@(k\w+)\s*(\S*)\s*/,v=/::(place)/g,y=/:(read-only)/g,_=/[svh]\w+-[tblr]{2}/,x=/\(\s*(.*)\s*\)/g,b=/([\s\S]*?);/g,S=/-self|flex-/g,E=/[^]*?(:[rp][el]a[\w-]+)[^]*/,w=/stretch|:\s*\w+\-(?:conte|avail)/,M=/([^-])(image-set\()/,T=1,A=1,C=0,P=1,R=[],L=[],O=0,I=null,U=0;return l.use=function e(t){switch(t){case void 0:case null:O=L.length=0;break;default:if("function"==typeof t)L[O++]=t;else if("object"==typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else U=0|!!t}return e},l.set=s,void 0!==e&&s(e),l},se={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,// SVG-related properties
fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},st=p("7dGEo"),sn={},sr={};sr=p("dNL7g");/**
 * Copyright 2015, Yahoo! Inc.
 * Copyrights licensed under the New BSD License. See the accompanying LICENSE file for terms.
 */var si={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},sa={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},so={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ss={};function sl(e){return(// React v16.11 and below
sr.isMemo(e)?so:ss[e.$$typeof]||si)}ss[sr.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ss[sr.Memo]=so;var su=Object.defineProperty,sc=Object.getOwnPropertyNames,sf=Object.getOwnPropertySymbols,sh=Object.getOwnPropertyDescriptor,sd=Object.getPrototypeOf,sp=Object.prototype;sn=function e(t,n,r){if("string"!=typeof n){// don't hoist over string (html) components
if(sp){var i=sd(n);i&&i!==sp&&e(t,i,r)}var a=sc(n);sf&&(a=a.concat(sf(n)));for(var o=sl(t),s=sl(n),l=0;l<a.length;++l){var u=a[l];if(!sa[u]&&!(r&&r[u])&&!(s&&s[u])&&!(o&&o[u])){var c=sh(n,u);try{// Avoid failures from read-only properties
su(t,u,c)}catch(e){}}}}return t};var sm={};function sg(){throw Error("setTimeout has not been defined")}function sv(){throw Error("clearTimeout has not been defined")}function sy(e){if(o===setTimeout)return setTimeout(e,0);// if setTimeout wasn't available but was latter defined
if((o===sg||!o)&&setTimeout)return o=setTimeout,setTimeout(e,0);try{// when when somebody has screwed with setTimeout but no I.E. maddness
return o(e,0)}catch(t){try{// When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
return o.call(null,e,0)}catch(t){// same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
return o.call(this,e,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:sg}catch(e){o=sg}try{s="function"==typeof clearTimeout?clearTimeout:sv}catch(e){s=sv}}();var s_=[],sx=!1,sb=-1;function sS(){sx&&l&&(sx=!1,l.length?s_=l.concat(s_):sb=-1,s_.length&&sE())}function sE(){if(!sx){var e=sy(sS);sx=!0;for(var t=s_.length;t;){for(l=s_,s_=[];++sb<t;)l&&l[sb].run();sb=-1,t=s_.length}l=null,sx=!1,function(e){if(s===clearTimeout)return clearTimeout(e);// if clearTimeout wasn't available but was latter defined
if((s===sv||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{// When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
return s.call(null,e)}catch(t){// same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
// Some versions of I.E. have different rules for clearTimeout vs setTimeout
return s.call(this,e)}}}(e)}}// v8 likes predictible objects
function sw(e,t){this.fun=e,this.array=t}function sM(){}function sT(){return(sT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}sm.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];s_.push(new sw(e,t)),1!==s_.length||sx||sy(sE)},sw.prototype.run=function(){this.fun.apply(null,this.array)},sm.title="browser",sm.browser=!0,sm.env={},sm.argv=[],sm.version="",sm.versions={},sm.on=sM,sm.addListener=sM,sm.once=sM,sm.off=sM,sm.removeListener=sM,sm.removeAllListeners=sM,sm.emit=sM,sm.prependListener=sM,sm.prependOnceListener=sM,sm.listeners=function(e){return[]},sm.binding=function(e){throw Error("process.binding is not supported")},sm.cwd=function(){return"/"},sm.chdir=function(e){throw Error("process.chdir is not supported")},sm.umask=function(){return 0};var sA=function(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n},sC=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,o8.typeOf)(e)},sP=Object.freeze([]),sR=Object.freeze({});function sL(e){return"function"==typeof e}function sO(e){return e.displayName||e.name||"Component"}function sI(e){return e&&"string"==typeof e.styledComponentId}var sU="data-styled",sN="undefined"!=typeof window&&"HTMLElement"in window,sD="boolean"==typeof SC_DISABLE_SPEEDY&&SC_DISABLE_SPEEDY||!1,sk=function(){return"undefined"!=typeof __webpack_nonce__?__webpack_nonce__:null};function sF(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var sz=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(sU))return r}}(n),a=void 0!==i?i.nextSibling:null;r.setAttribute(sU,"active"),r.setAttribute("data-styled-version","5.2.0");var o=sk();return o&&r.setAttribute("nonce",o),n.insertBefore(r,a),r},sB=function(){function e(e){var t=this.element=sz(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}sF(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),sV=function(){function e(e){var t=this.element=sz(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),sH=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),sG=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)(i<<=1)<0&&sF(16,""+e);this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var a=r;a<i;a++)this.groupSizes[a]=0}for(var o=this.indexOfGroup(e+1),s=0,l=t.length;s<l;s++)this.tag.insertRule(o,t[s])&&(this.groupSizes[e]++,o++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,a=r;a<i;a++)t+=this.tag.getRule(a)+"/*!sc*/\n";return t},e}(),sW=new Map,sj=new Map,sX=1,sq=function(e){if(sW.has(e))return sW.get(e);var t=sX++;return sW.set(e,t),sj.set(t,e),t},sY=function(e,t){t>=sX&&(sX=t+1),sW.set(e,t),sj.set(t,e)},s$="style["+sU+'][data-styled-version="5.2.0"]',sK=RegExp("^"+sU+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),sZ=function(e,t,n){for(var r,i=n.split(","),a=0,o=i.length;a<o;a++)(r=i[a])&&e.registerName(t,r)},sJ=function(e,t){for(var n=t.innerHTML.split("/*!sc*/\n"),r=[],i=0,a=n.length;i<a;i++){var o=n[i].trim();if(o){var s=o.match(sK);if(s){var l=0|parseInt(s[1],10),u=s[2];0!==l&&(sY(u,l),sZ(e,u,s[3]),e.getTag().insertRules(l,r)),r.length=0}else r.push(o)}}},sQ=sN,s0={isServer:!sN,useCSSOMInjection:!sD},s1=function(){function e(e,t,n){void 0===e&&(e=s0),void 0===t&&(t={}),this.options=sT({},s0,{},e),this.gs=t,this.names=new Map(n),!this.options.isServer&&sN&&sQ&&(sQ=!1,function(e){for(var t=document.querySelectorAll(s$),n=0,r=t.length;n<r;n++){var i=t[n];i&&"active"!==i.getAttribute(sU)&&(sJ(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this))}e.registerId=function(e){return sq(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(sT({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){var e,t,n,r,i;return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,i=t.target,e=n?new sH(i):r?new sB(i):new sV(i),new sG(e)))},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(sq(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(sq(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(sq(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=0;i<n;i++){var a,o=(a=i,sj.get(a));if(void 0!==o){var s=e.names.get(o),l=t.getGroup(i);if(void 0!==s&&0!==l.length){var u=sU+".g"+i+'[id="'+o+'"]',c="";void 0!==s&&s.forEach(function(e){e.length>0&&(c+=e+",")}),r+=""+l+u+'{content:"'+c+'"}/*!sc*/\n'}}}return r}(this)},e}(),s2=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},s3=function(e){return s2(5381,e)},s4=/^\s*\/\/.*$/gm,s5=[":","[",".","#"];function s6(e){var t,n,r,i,a=void 0===e?sR:e,o=a.options,s=void 0===o?sR:o,l=a.plugins,u=void 0===l?sP:l,c=new o9(s),f=[],h=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,i,a,o,s,l,u,c,f){switch(n){case 1:if(0===c&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===u)return r+"/*|*/";break;case 3:switch(u){case 102:case 112:return e(i[0]+r),"";default:return r+(0===f?"/*|*/":"")}case -2:r.split("/*|*/}").forEach(t)}}}(function(e){f.push(e)}),d=function(e,r,a){return 0===r&&s5.includes(a[n.length])||a.match(i)?e:"."+t};function p(e,a,o,s){void 0===s&&(s="&");var l=e.replace(s4,""),u=a&&o?o+" "+a+" { "+l+" }":l;return t=s,r=RegExp("\\"+(n=a)+"\\b","g"),i=RegExp("(\\"+n+"\\b){2,}"),c(o||!a?"":a,u)}return c.use([].concat(u,[function(e,t,i){2===e&&i.length&&i[0].lastIndexOf(n)>0&&(i[0]=i[0].replace(r,d))},h,function(e){if(-2===e){var t=f;return f=[],t}}])),p.hash=u.length?u.reduce(function(e,t){return t.name||sF(15),s2(e,t.name)},5381).toString():"",p}var s8=/*@__PURE__*/f(y).createContext(),s7=(s8.Consumer,/*@__PURE__*/f(y).createContext()),s9=(s7.Consumer,new s1),le=s6();function lt(){return(0,y.useContext)(s8)||s9}function ln(e){var t=(0,y.useState)(e.stylisPlugins),n=t[0],r=t[1],i=lt(),a=(0,y.useMemo)(function(){var t=i;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t},[e.disableCSSOMInjection,e.sheet,e.target]),o=(0,y.useMemo)(function(){return s6({options:{prefix:!e.disableVendorPrefixes},plugins:n})},[e.disableVendorPrefixes,n]);return(0,y.useEffect)(function(){/*@__PURE__*/f(o7)(n,e.stylisPlugins)||r(e.stylisPlugins)},[e.stylisPlugins]),/*@__PURE__*/f(y).createElement(s8.Provider,{value:a},/*@__PURE__*/f(y).createElement(s7.Provider,{value:o},e.children))}var lr=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=le);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return sF(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=le),this.name+e.hash},e}(),li=/([A-Z])/,la=RegExp(li,"g"),lo=/^ms-/,ls=function(e){return"-"+e.toLowerCase()};function ll(e){return li.test(e)?e.replace(la,ls).replace(lo,"-ms-"):e}var lu=function(e){return null==e||!1===e||""===e};function lc(e,t,n,r){if(Array.isArray(e)){for(var i,a=[],o=0,s=e.length;o<s;o+=1)""!==(i=lc(e[o],t,n,r))&&(Array.isArray(i)?a.push.apply(a,i):a.push(i));return a}return lu(e)?"":sI(e)?"."+e.styledComponentId:sL(e)?"function"!=typeof e||e.prototype&&e.prototype.isReactComponent||!t?e:lc(e(t),t,n,r):e instanceof lr?n?(e.inject(n,r),e.getName(r)):e:sC(e)?function e(t,n){var r,i=[];for(var a in t)t.hasOwnProperty(a)&&!lu(t[a])&&(sC(t[a])?i.push.apply(i,e(t[a],a)):sL(t[a])?i.push(ll(a)+":",t[a],";"):i.push(ll(a)+": "+(null==(r=t[a])||"boolean"==typeof r||""===r?"":"number"!=typeof r||0===r||a in se?String(r).trim():r+"px")+";"));return n?[n+" {"].concat(i,["}"]):i}(e):e.toString()}function lf(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return sL(e)||sC(e)?lc(sA(sP,[e].concat(n))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:lc(sA(e,n))}var lh=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},ld=/(a)(d)/gi,lp=function(e){return String.fromCharCode(e+(e>25?39:97))};function lm(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=lp(t%52)+n;return(lp(t%52)+n).replace(ld,"$1-$2")}function lg(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(sL(n)&&!sI(n))return!1}return!0}var lv=s3("5.2.0"),ly=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&lg(e),this.componentId=t,this.baseHash=s2(lv,t),this.baseStyle=n,s1.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,i=[];if(this.baseStyle&&i.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash){if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))i.push(this.staticRulesId);else{var a=lc(this.rules,e,t,n).join(""),o=lm(s2(this.baseHash,a.length)>>>0);if(!t.hasNameForId(r,o)){var s=n(a,"."+o,void 0,r);t.insertRules(r,o,s)}i.push(o),this.staticRulesId=o}}else{for(var l=this.rules.length,u=s2(this.baseHash,n.hash),c="",f=0;f<l;f++){var h=this.rules[f];if("string"==typeof h)c+=h;else if(h){var d=lc(h,e,t,n),p=Array.isArray(d)?d.join(""):d;u=s2(u,p+f),c+=p}}if(c){var m=lm(u>>>0);if(!t.hasNameForId(r,m)){var g=n(c,"."+m,void 0,r);t.insertRules(r,m,g)}i.push(m)}}return i.join(" ")},e}(),l_=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,lx=/(^-|-$)/g;function lb(e){return e.replace(l_,"-").replace(lx,"")}function lS(e){return"string"==typeof e}var lE=/*@__PURE__*/f(y).createContext();lE.Consumer;var lw={},lM=function(e){return function e(t,n,r){if(void 0===r&&(r=sR),!(0,o8.isValidElementType)(n))return sF(1,String(n));var i=function(){return t(n,r,lf.apply(void 0,arguments))};return i.withConfig=function(i){return e(t,n,sT({},r,{},i))},i.attrs=function(i){return e(t,n,sT({},r,{attrs:Array.prototype.concat(r.attrs,i).filter(Boolean)}))},i}(function e(t,n,r){var i=sI(t),a=!lS(t),o=n.displayName,s=void 0===o?lS(t)?"styled."+t:"Styled("+sO(t)+")":o,l=n.componentId,u=void 0===l?(g=n.displayName,v=n.parentComponentId,lw[_="string"!=typeof g?"sc":lb(g)]=(lw[_]||0)+1,x=_+"-"+lm(s3("5.2.0"+_+lw[_])>>>0),v?v+"-"+x:x):l,c=n.attrs,h=void 0===c?sP:c,d=n.displayName&&n.componentId?lb(n.displayName)+"-"+n.componentId:n.componentId||u,p=i&&t.attrs?Array.prototype.concat(t.attrs,h).filter(Boolean):h,m=n.shouldForwardProp;i&&t.shouldForwardProp&&(m=m?function(e,r){return t.shouldForwardProp(e,r)&&n.shouldForwardProp(e,r)}:t.shouldForwardProp);var g,v,_,x,b,S=new ly(r,d,i?t.componentStyle:void 0),E=function(e,t){return function(e,t,n){var r,i,a,o,s,l,u,c,f=e.attrs,h=e.componentStyle,d=e.defaultProps,p=e.foldedComponentIds,m=e.shouldForwardProp,g=e.styledComponentId,v=e.target,_=(r=(0,y.useContext)(lE),void 0===(i=d)&&(i=sR),void 0===(a=t.theme!==i.theme&&t.theme||r||i.theme||sR)&&(a=sR),o=sT({},t,{theme:a}),s={},f.forEach(function(e){var t,n,r,i=e;for(t in sL(i)&&(i=i(o)),i)o[t]=s[t]="className"===t?(n=s[t],r=i[t],n&&r?n+" "+r:n||r):i[t]}),[o,s]),x=_[0],b=_[1],S=(l=f.length>0,u=lt(),c=(0,y.useContext)(s7)||le,h.isStatic&&!l?h.generateAndInjectStyles(sR,u,c):h.generateAndInjectStyles(x,u,c)),E=b.$as||t.$as||b.as||t.as||v,w=lS(E),M=b!==t?sT({},t,{},b):t,T=m||w&&st.default,A={};for(var C in M)"$"!==C[0]&&"as"!==C&&("forwardedAs"===C?A.as=M[C]:T&&!T(C,st.default)||(A[C]=M[C]));return t.style&&b.style!==t.style&&(A.style=sT({},t.style,{},b.style)),A.className=Array.prototype.concat(p,g,S!==g?S:null,t.className,b.className).filter(Boolean).join(" "),A.ref=n,(0,y.createElement)(E,A)}(b,e,t)};return E.displayName=s,(b=/*@__PURE__*/f(y).forwardRef(E)).attrs=p,b.componentStyle=S,b.displayName=s,b.shouldForwardProp=m,b.foldedComponentIds=i?Array.prototype.concat(t.foldedComponentIds,t.styledComponentId):sP,b.styledComponentId=d,b.target=i?t.target:t,b.withComponent=function(t){var i=n.componentId,a=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(i[n]=e[n]);return i}(n,["componentId"]),o=i&&i+"-"+(lS(t)?t:lb(sO(t)));return e(t,sT({},a,{attrs:p,componentId:o}),r)},Object.defineProperty(b,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=i?function e(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<r.length;a++){var o=r[a];if(lh(o))for(var s in o)"__proto__"!==s&&"constructor"!==s&&"prototype"!==s&&function(t,n,r){var i=t[r];lh(n)&&lh(i)?e(i,n):t[r]=n}(t,o[s],s)}return t}({},t.defaultProps,e):e}}),b.toString=function(){return"."+b.styledComponentId},a&&/*@__PURE__*/f(sn)(b,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,self:!0,styledComponentId:!0,target:!0,withComponent:!0}),b},e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach(function(e){lM[e]=lM(e)}),(r=(function(e,t){this.rules=e,this.componentId=t,this.isStatic=lg(e),s1.registerId(this.componentId+1)}).prototype).createStyles=function(e,t,n,r){var i=r(lc(this.rules,t,n,r).join(""),""),a=this.componentId+e;n.insertRules(a,a,i)},r.removeStyles=function(e,t){t.clearRules(this.componentId+e)},r.renderStyles=function(e,t,n,r){e>2&&s1.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)},(i=(function(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString(),n=sk();return"<style "+[n&&'nonce="'+n+'"',sU+'="true"','data-styled-version="5.2.0"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?sF(2):e._emitSheetCSS()},this.getStyleElement=function(){if(e.sealed)return sF(2);var t,n=((t={})[sU]="",t["data-styled-version"]="5.2.0",t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),r=sk();return r&&(n.nonce=r),[/*@__PURE__*/f(y).createElement("style",sT({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new s1({isServer:!0}),this.sealed=!1}).prototype).collectStyles=function(e){return this.sealed?sF(2):/*@__PURE__*/f(y).createElement(ln,{sheet:this.instance},e)},i.interleaveWithNodeStream=function(e){return sF(3)};var y=p("acw62");const lT=lM.button`
  cursor: pointer;
  border: none;
  margin: 0;
  padding: 0;
  width: auto;
  overflow: visible;

  background: transparent;

  /* inherit font & color from ancestor */
  color: inherit;
  font: inherit;

  /* Normalize line-height. Cannot be changed from normal in Firefox 4+. */
  line-height: normal;

  /* Corrects font smoothing for webkit */
  -webkit-font-smoothing: inherit;
  -moz-osx-font-smoothing: inherit;

  /* Corrects inability to style clickable input types in iOS */
  -webkit-appearance: none;

  /* Remove excess padding and border in Firefox 4+ */
  &::-moz-focus-inner {
    border: 0;
    padding: 0;
  }
  &:focus {
    outline: none;
  }
`,lA=lM.ul`
  list-style: none;
  padding: 0;
  margin: 0;
`;function lC(e){return Object.entries(e).filter(([,e])=>!!e).map(([e])=>e).join(" ")}var y=p("acw62");const lP=lM.div`
  color: #fff;
  background: rgba(18, 18, 18, 0.8);
  border-radius: 20px;
  padding: 16px;
`;function lR(){return /*@__PURE__*/f(y).createElement(lU,null,/*@__PURE__*/f(y).createElement(lk,null,/*@__PURE__*/f(y).createElement(lN,null,"Keyboard controls"),/*@__PURE__*/f(y).createElement(lD,null,"UI"),/*@__PURE__*/f(y).createElement(lI,null,/*@__PURE__*/f(y).createElement("li",null,/*@__PURE__*/f(y).createElement(lF,null,"[Mouse Move]")," Change camera position",/*@__PURE__*/f(y).createElement(lO,null),/*@__PURE__*/f(y).createElement(lF,null,"[L]")," Lock camera position"),/*@__PURE__*/f(y).createElement("li",null,/*@__PURE__*/f(y).createElement(lF,null,"[C]")," Center and lock camera position",/*@__PURE__*/f(y).createElement(lO,null),/*@__PURE__*/f(y).createElement(lF,null,"[F/G]")," Change FOV"),/*@__PURE__*/f(y).createElement("li",null,/*@__PURE__*/f(y).createElement(lF,null,"[H]")," Toggle cursor",/*@__PURE__*/f(y).createElement(lO,null),/*@__PURE__*/f(y).createElement(lF,null,"[F11]")," Toggle fullscreen")),/*@__PURE__*/f(y).createElement(lD,null,"Simulation"),/*@__PURE__*/f(y).createElement(lI,null,/*@__PURE__*/f(y).createElement("li",null,/*@__PURE__*/f(y).createElement(lF,null,"[Up/Down or W/S]")," Change speed",/*@__PURE__*/f(y).createElement(lO,null),/*@__PURE__*/f(y).createElement(lF,null,"[Left/Right or A/D]")," Change rotation"),/*@__PURE__*/f(y).createElement("li",null,/*@__PURE__*/f(y).createElement(lF,null,"[</>]")," Change level/subset count",/*@__PURE__*/f(y).createElement(lO,null),/*@__PURE__*/f(y).createElement(lF,null,"[O/P]")," Change particle count"),/*@__PURE__*/f(y).createElement("li",null,/*@__PURE__*/f(y).createElement(lF,null,"[R]")," Reset all settings"))),/*@__PURE__*/f(y).createElement(lk,null,/*@__PURE__*/f(y).createElement(lN,null,"About"),/*@__PURE__*/f(y).createElement("p",null,"Barry Martin's Hopalong Orbits Visualizer"),/*@__PURE__*/f(y).createElement("br",null),/*@__PURE__*/f(y).createElement("p",null,"These orbits are generated iterating this simple formula:"),/*@__PURE__*/f(y).createElement("p",null,/*@__PURE__*/f(y).createElement(lz,null,"(x, y) -> (y - sign(x)*sqrt(abs(b*x - c)), a -x )")),/*@__PURE__*/f(y).createElement("p",null,"where a, b, c are random parameters. This is known as the 'Hopalong Attractor'."),/*@__PURE__*/f(y).createElement("br",null),/*@__PURE__*/f(y).createElement("p",null,/*@__PURE__*/f(y).createElement("span",null,"This is a "),/*@__PURE__*/f(y).createElement("a",{href:"http://www.chromeexperiments.com/detail/webgl-attractors-trip",...lL},"Chrome Experiment")),/*@__PURE__*/f(y).createElement("p",null,/*@__PURE__*/f(y).createElement("span",null,"3D rendering is done using WebGL and "),/*@__PURE__*/f(y).createElement("a",{href:"http://github.com/mrdoob/three.js",...lL},"three.js")),/*@__PURE__*/f(y).createElement("hr",null),/*@__PURE__*/f(y).createElement("p",null,/*@__PURE__*/f(y).createElement("span",null,"Originally created by "),/*@__PURE__*/f(y).createElement("a",{href:"https://iacopoapps.appspot.com/hopalongwebgl/",...lL},"Iacopo Sassarini")),/*@__PURE__*/f(y).createElement("p",null,/*@__PURE__*/f(y).createElement("span",null,"Updated and modernised by "),/*@__PURE__*/f(y).createElement("a",{href:"https://samleatherdale.github.io",...lL},"Sam Leatherdale"))))}const lL={target:"_blank",rel:"noopener"},lO=lM.span`
  margin-right: 24px;
`,lI=lM(lA)`
  > * + * {
    margin-top: 2px;
  }
`,lU=lM.article`
  > * + * {
    margin-top: 24px;
  }
`,lN=lM.h2`
  margin: 0 0 8px;
  font-size: 24px;
`,lD=lM.h3`
  margin: 16px 0 8px;
  font-size: 18px;
  text-decoration: underline;
`,lk=lM(lP)`
  p,
  li {
    line-height: 1.5;
  }
`,lF=lM.code`
  display: inline-block;
  background-color: black;
  padding: 4px 8px;
  border-radius: 4px;
`,lz=lM(lF)`
  margin: 8px 0;
`;var y=p("acw62");const lB=lM(lT).attrs(({type:e})=>({type:e||"button"}))`
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid white;
  border-radius: 4px;
  padding: 8px 16px;
  font-size: 16px;
  width: ${({fullWidth:e})=>e&&"100%"};

  &,
  &:focus {
    background-color: transparent;
    color: white;
  }

  &:hover:not(:focus),
  &.active {
    background-color: white;
    color: black;
  }

  &.hide {
    display: none;
  }
`,lV=lM(lB)`
  width: ${32}px;
  height: ${32}px;
  font-size: 24px;
  padding: 4px;
`;for(var y=(p("acw62"),p("acw62")),lH="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),lG=new Uint8Array(16),lW=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,lj=[],lX=0;lX<256;++lX)lj.push((lX+256).toString(16).substr(1));//create your forceUpdate hook
var lq=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(lj[e[t+0]]+lj[e[t+1]]+lj[e[t+2]]+lj[e[t+3]]+"-"+lj[e[t+4]]+lj[e[t+5]]+"-"+lj[e[t+6]]+lj[e[t+7]]+"-"+lj[e[t+8]]+lj[e[t+9]]+"-"+lj[e[t+10]]+lj[e[t+11]]+lj[e[t+12]]+lj[e[t+13]]+lj[e[t+14]]+lj[e[t+15]]).toLowerCase();// of the following:
// - One or more input array values don't map to a hex octet (leading to
// "undefined" in the uuid)
// - Invalid input values for the RFC `version` or `variant` fields
if(!("string"==typeof n&&lW.test(n)))throw TypeError("Stringified UUID is invalid");return n},lY=function(e,t,n){var r=(e=e||{}).random||(e.rng||function(){if(!lH)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return lH(lG)})();// Per 4.4, set bits for version and `clock_seq_hi_and_reserved`
if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return lq(r)};function l$(){let[e]=(0,y.useState)(lY());return e}function lK({label:e,checked:t,onChange:n}){let r=l$();return /*@__PURE__*/f(y).createElement(lZ,null,/*@__PURE__*/f(y).createElement(lJ,{htmlFor:r},e),/*@__PURE__*/f(y).createElement(lQ,{id:r,type:"checkbox",checked:t,onChange:e=>n(e.currentTarget.checked)}))}const lZ=lM.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
`,lJ=lM.label`
  flex: 1 1 auto;
  text-align: center;
  color: white;
  font-size: 18px;
`,lQ=lM.input`
  flex-shrink: 0;
  width: 30px;
  height: 30px;
`;var y=(p("acw62"),p("acw62"),p("acw62")),l0={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l1=y.createContext&&y.createContext(l0),l2=function(){return(l2=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},l3=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&(n[r[i]]=e[r[i]]);return n};function l4(e){return function(t){return y.createElement(l5,l2({attr:l2({},e.attr)},t),function e(t){return t&&t.map(function(t,n){return y.createElement(t.tag,l2({key:n},t.attr),e(t.child))})}(e.child))}}function l5(e){var t=function(t){var n,r=e.size||t.size||"1em";t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className);var i=e.attr,a=e.title,o=l3(e,["attr","title"]);return y.createElement("svg",l2({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,o,{className:n,style:l2({color:e.color||t.color},t.style,e.style),height:r,width:r,xmlns:"http://www.w3.org/2000/svg"}),a&&y.createElement("title",null,a),e.children)};return void 0!==l1?y.createElement(l1.Consumer,null,function(e){return t(e)}):t(l0)}function l6(e){return l4({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"}}]})(e)}function l8(e){return l4({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500 384c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v308h436zM372.7 159.5L288 216l-85.3-113.7c-5.1-6.8-15.5-6.3-19.9 1L96 248v104h384l-89.9-187.8c-3.2-6.5-11.4-8.7-17.4-4.7z"}}]})(e)}function l7(e){return l4({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"}}]})(e)}function l9(e){return l4({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M200 288H88c-21.4 0-32.1 25.8-17 41l32.9 31-99.2 99.3c-6.2 6.2-6.2 16.4 0 22.6l25.4 25.4c6.2 6.2 16.4 6.2 22.6 0L152 408l31.1 33c15.1 15.1 40.9 4.4 40.9-17V312c0-13.3-10.7-24-24-24zm112-64h112c21.4 0 32.1-25.9 17-41l-33-31 99.3-99.3c6.2-6.2 6.2-16.4 0-22.6L481.9 4.7c-6.2-6.2-16.4-6.2-22.6 0L360 104l-31.1-33C313.8 55.9 288 66.6 288 88v112c0 13.3 10.7 24 24 24zm96 136l33-31.1c15.1-15.1 4.4-40.9-17-40.9H312c-13.3 0-24 10.7-24 24v112c0 21.4 25.9 32.1 41 17l31-32.9 99.3 99.3c6.2 6.2 16.4 6.2 22.6 0l25.4-25.4c6.2-6.2 6.2-16.4 0-22.6L408 360zM183 71.1L152 104 52.7 4.7c-6.2-6.2-16.4-6.2-22.6 0L4.7 30.1c-6.2 6.2-6.2 16.4 0 22.6L104 152l-33 31.1C55.9 198.2 66.6 224 88 224h112c13.3 0 24-10.7 24-24V88c0-21.3-25.9-32-41-16.9z"}}]})(e)}function ue(e){return l4({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500 224h-30.364C455.724 130.325 381.675 56.276 288 42.364V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v30.364C130.325 56.276 56.276 130.325 42.364 224H12c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h30.364C56.276 381.675 130.325 455.724 224 469.636V500c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12v-30.364C381.675 455.724 455.724 381.675 469.636 288H500c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12zM288 404.634V364c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v40.634C165.826 392.232 119.783 346.243 107.366 288H148c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-40.634C119.768 165.826 165.757 119.783 224 107.366V148c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12v-40.634C346.174 119.768 392.217 165.757 404.634 224H364c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h40.634C392.232 346.174 346.243 392.217 288 404.634zM288 256c0 17.673-14.327 32-32 32s-32-14.327-32-32c0-17.673 14.327-32 32-32s32 14.327 32 32z"}}]})(e)}function ut(e){return l4({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 344v112a23.94 23.94 0 0 1-24 24H312c-21.39 0-32.09-25.9-17-41l36.2-36.2L224 295.6 116.77 402.9 153 439c15.09 15.1 4.39 41-17 41H24a23.94 23.94 0 0 1-24-24V344c0-21.4 25.89-32.1 41-17l36.19 36.2L184.46 256 77.18 148.7 41 185c-15.1 15.1-41 4.4-41-17V56a23.94 23.94 0 0 1 24-24h112c21.39 0 32.09 25.9 17 41l-36.2 36.2L224 216.4l107.23-107.3L295 73c-15.09-15.1-4.39-41 17-41h112a23.94 23.94 0 0 1 24 24v112c0 21.4-25.89 32.1-41 17l-36.19-36.2L263.54 256l107.28 107.3L407 327.1c15.1-15.2 41-4.5 41 16.9z"}}]})(e)}function un(e){return l4({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M423.5 0C339.5.3 272 69.5 272 153.5V224H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48h-48v-71.1c0-39.6 31.7-72.5 71.3-72.9 40-.4 72.7 32.1 72.7 72v80c0 13.3 10.7 24 24 24h32c13.3 0 24-10.7 24-24v-80C576 68 507.5-.3 423.5 0z"}}]})(e)}function ur(e){return l4({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"}}]})(e)}function ui(e){return l4({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"}}]})(e)}function ua(e){return l4({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"}}]})(e)}function uo(e){return l4({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(e)}var o6=p("jfanT"),us=({header:e,children:t})=>{let[n,r]=(0,y.useState)(!1);return /*@__PURE__*/f(y).createElement("div",null,/*@__PURE__*/f(y).createElement(ul,{onClick:()=>r(e=>!e)},/*@__PURE__*/f(y).createElement(uu,null,e),/*@__PURE__*/f(y).createElement(o6.motion.div,{animate:{rotate:n?90:0}},/*@__PURE__*/f(y).createElement(l7,{size:24}))),/*@__PURE__*/f(y).createElement(uc,{className:lC({hide:!n})},t))};const ul=lM.header`
  cursor: pointer;
  display: flex;
  justify-content: center;
  align-items: center;
`,uu=lM.h2`
  font-size: 18px;
  margin-right: 8px;
`,uc=lM.div`
  margin-top: 16px;
  &.hide {
    display: none;
  }
`;var y=p("acw62");const uf=lM.input`
  color: white;
  background-color: transparent;
  border: 2px solid white;
  outline: none;
  border-radius: 4px;
`;function uh({value:e,min:t,max:n,label:r,onChange:i}){let a=l$(),o=e=>i(function(e){let t=parseInt(e,10);return isNaN(t)||""===e?0:t}(e.currentTarget.value));return /*@__PURE__*/f(y).createElement(ud,null,/*@__PURE__*/f(y).createElement(up,{htmlFor:a},r),/*@__PURE__*/f(y).createElement(um,null,/*@__PURE__*/f(y).createElement(ug,{type:"range",value:e,min:t,max:n,onChange:o}),/*@__PURE__*/f(y).createElement(uv,{id:a,type:"number",value:e.toString(),min:t,onChange:o})))}const ud=lM.div`
  display: flex;
  flex-direction: column;
  align-items: center;
`,up=lM.label`
  text-align: center;
  color: white;
  font-size: 18px;
  margin-bottom: 8px;
`,um=lM.div`
  display: flex;
  align-items: center;
  width: 100%;
`,ug=lM.input`
  flex: 1 1 auto;
`,uv=lM(uf)`
  width: 45px;
  margin-left: 8px;
`;function uy({settings:e,onChange:t,onReset:n}){let[r,i]=(0,y.useState)(!1),a={speed:[200,400],rotationSpeed:[100,200],cameraFov:[120,180],points:[50,100],subsetCount:[10,20],levelCount:[10,20]},o=([e,t])=>r?t:e,s=e=>{t(e)};return /*@__PURE__*/f(y).createElement(u_,null,/*@__PURE__*/f(y).createElement(ux,null,/*@__PURE__*/f(y).createElement(uS,null,/*@__PURE__*/f(y).createElement(uh,{min:0,max:o(a.speed),label:"Speed",value:4*e.speed,onChange:e=>s({speed:e/4})})),/*@__PURE__*/f(y).createElement(uS,null,/*@__PURE__*/f(y).createElement(uh,{min:-o(a.rotationSpeed),max:o(a.rotationSpeed),label:"Rotation speed",value:Math.floor(-2e3*e.rotationSpeed),onChange:e=>s({rotationSpeed:-(e/2e3)})})),/*@__PURE__*/f(y).createElement(uS,null,/*@__PURE__*/f(y).createElement(uh,{min:0,max:o(a.cameraFov),label:"Camera FOV",value:e.cameraFov,onChange:e=>s({cameraFov:e})}))),/*@__PURE__*/f(y).createElement(lB,{fullWidth:!0,onClick:n},"Reset Defaults"),/*@__PURE__*/f(y).createElement(us,{header:"Advanced Settings"},/*@__PURE__*/f(y).createElement(ub,null,/*@__PURE__*/f(y).createElement(uS,null,/*@__PURE__*/f(y).createElement(uh,{min:1,max:o(a.points),label:"Particle count (thousands)",value:Math.floor(.001*e.pointsPerSubset),onChange:e=>s({pointsPerSubset:e/.001})})),/*@__PURE__*/f(y).createElement(uS,null,/*@__PURE__*/f(y).createElement(uh,{min:1,max:o(a.subsetCount),label:"Subset count",value:e.subsetCount,onChange:e=>s({subsetCount:e})})),/*@__PURE__*/f(y).createElement(uS,null,/*@__PURE__*/f(y).createElement(uh,{min:1,max:o(a.levelCount),label:"Level count",value:e.levelCount,onChange:e=>s({levelCount:e})})),/*@__PURE__*/f(y).createElement(uS,{title:"Increases maximums for sliders"},/*@__PURE__*/f(y).createElement(lK,{checked:r,onChange:i,label:"\uD83E\uDD2F Increase all limits"})))))}const u_=lM.div`
  width: 100%;
  max-width: 320px;
  display: grid;
  grid-template-columns: 1fr;
  row-gap: 42px;
`,ux=lM(lA)`
  display: grid;
  grid-template-columns: 1fr;
  row-gap: 16px;
`,ub=lM(ux)`
  padding: 16px 8px;
  border: 1px solid white;
  border-radius: 4px;
`,uS=lM.li``;function uE({settingsProps:e}){let t;let[n,r]=(0,y.useState)("Settings");switch(n){case"About":t=/*@__PURE__*/f(y).createElement(lR,null);break;case"Settings":t=/*@__PURE__*/f(y).createElement(uy,e)}return /*@__PURE__*/f(y).createElement(uw,null,/*@__PURE__*/f(y).createElement(uM,null,["Settings","About"].map(e=>/*@__PURE__*/f(y).createElement(uT,{key:e,className:lC({active:n===e}),onClick:()=>r(e)},e))),/*@__PURE__*/f(y).createElement(uA,null,t))}(a=u||(u={})).SETTINGS="Settings",a.ABOUT="About";const uw=lM.div`
  padding: 0 16px 32px;
  font-size: 13px;
  font-weight: bold;
  color: white;
`,uM=lM.header`
  display: flex;
  justify-content: center;
  margin: 20px 0 32px;
`,uT=lM(lT)`
  padding: 8px 16px;
  font-size: 16px;
  border: 1px solid white;
  color: white;

  &:hover,
  &.active {
    background-color: white;
    color: black;
  }
`,uA=lM.main`
  display: flex;
  flex-direction: column;
  align-items: center;
`;var y=p("acw62");function uC({menuOpen:e,statsOpen:t,mouseLocked:n,isPlaying:r,onCenter:i,updateMenuOpen:a,updateStatsOpen:o,updateMouseLocked:s,updateIsPlaying:l}){let u=!!document.fullscreenElement,c=function(){let[,e]=(0,y.useState)(0);// integer state
return()=>e(e=>++e);// update the state to force render
}();return /*@__PURE__*/f(y).createElement("nav",null,/*@__PURE__*/f(y).createElement(uP,null,/*@__PURE__*/f(y).createElement(uR,null,/*@__PURE__*/f(y).createElement(lV,{className:lC({active:e}),onClick:a},e?/*@__PURE__*/f(y).createElement(uo,null):/*@__PURE__*/f(y).createElement(l6,null))),/*@__PURE__*/f(y).createElement(uR,null,/*@__PURE__*/f(y).createElement(lV,{className:lC({active:u}),onClick:()=>{document.fullscreenElement?document.exitFullscreen().then(c):document.documentElement.requestFullscreen().then(c)}},u?/*@__PURE__*/f(y).createElement(l9,null):/*@__PURE__*/f(y).createElement(ut,null))),/*@__PURE__*/f(y).createElement(uR,null,/*@__PURE__*/f(y).createElement(lV,{className:lC({active:n}),onClick:s},n?/*@__PURE__*/f(y).createElement(ur,null):/*@__PURE__*/f(y).createElement(un,null))),/*@__PURE__*/f(y).createElement(uR,null,/*@__PURE__*/f(y).createElement(lV,{className:lC({active:r}),onClick:l},r?/*@__PURE__*/f(y).createElement(ui,null):/*@__PURE__*/f(y).createElement(ua,null))),/*@__PURE__*/f(y).createElement(uR,null,/*@__PURE__*/f(y).createElement(lV,{onClick:i},/*@__PURE__*/f(y).createElement(ue,null))),/*@__PURE__*/f(y).createElement(uR,null,/*@__PURE__*/f(y).createElement(lV,{className:lC({active:t,hide:!e}),onClick:o},/*@__PURE__*/f(y).createElement(l8,null)))))}const uP=lM.ul`
  display: flex;
  list-style: none;
  margin: 0;
  padding: 8px;
`,uR=lM.li`
  &:not(:first-child) {
    margin-left: 8px;
  }
`;var y=p("acw62");function uL({stats:e}){let t=(0,y.useRef)(null);return(0,y.useEffect)(()=>{t.current&&t.current.appendChild(e.dom);// eslint-disable-next-line react-hooks/exhaustive-deps
},[]),/*@__PURE__*/f(y).createElement(uO,{ref:t})}const uO=lM.div`
  > * {
    position: static !important;
  }
`;function uI({stats:e,settings:t,onSettingsChange:n,onCenter:r,onReset:i}){let a;let[o,s]=(0,y.useState)(!0),[l,u]=(0,y.useState)(!1),[c,h]=(0,y.useState)(!1),d=e=>!e,p=(0,o5.throttle)(()=>{s(!0),window.clearTimeout(a),g()},250),m=()=>s(!1),g=()=>{a=window.setTimeout(m,2e3)};(0,y.useEffect)(()=>{document.addEventListener("mousemove",p),document.addEventListener("touchmove",p),g()});let{mouseLocked:v,isPlaying:_,...x}=t,b=/*@__PURE__*/f(y).createElement(uC,{menuOpen:l,statsOpen:c,mouseLocked:v,isPlaying:_,updateMenuOpen:()=>u(d),updateStatsOpen:()=>h(d),updateMouseLocked:()=>n({mouseLocked:!v}),updateIsPlaying:()=>n({isPlaying:!_}),onCenter:r});return /*@__PURE__*/f(y).createElement(/*@__PURE__*/f(y).Fragment,null,/*@__PURE__*/f(y).createElement(uk,null,/*@__PURE__*/f(y).createElement(/*@__PURE__*/f(aX),{url:"https://www.youtube.com/watch?v=tKi9Z-f6qX4",playing:_})),/*@__PURE__*/f(y).createElement(o6.motion.div,{animate:{opacity:o?1:0}},!l&&/*@__PURE__*/f(y).createElement(uU,null,b)),l&&/*@__PURE__*/f(y).createElement(uN,{open:l},b,/*@__PURE__*/f(y).createElement(uE,{settingsProps:{settings:x,onChange:n,onReset:i}})),/*@__PURE__*/f(y).createElement(uD,{open:c},/*@__PURE__*/f(y).createElement(uL,{stats:e})))}const uU=lM.div`
  position: absolute;
  z-index: ${7};
  top: 0;
  left: 0;
`,uN=lM.div`
  position: absolute;
  display: ${({open:e})=>e?"block":"none"};
  z-index: ${5};
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  overflow-y: auto;
`,uD=lM.div`
  position: absolute;
  display: ${({open:e})=>e?"block":"none"};
  z-index: ${6};
  top: 4px;
  right: 4px;
  background-color: rgba(0, 0, 0, 0.5);
`,uk=lM.div`
  width: 1px;
  height: 1px;
  opacity: 0;
  pointer-events: none;
`;/*
 * AUTHOR: Iacopo Sassarini
 * Updated by Sam Leatherdale
 */var uF={};function uz(e,t,n){let[r,i,a]=/*@__PURE__*/f(uF)(e,t,n,"hsv").hsl();return[r,i,a]}uF=function(){for(var e=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e<t?t:e>n?n:e},t={},n=0,r=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];n<r.length;n+=1){var i=r[n];t["[object "+i+"]"]=i.toLowerCase()}var a=function(e){return t[Object.prototype.toString.call(e)]||"object"},o=Math.PI,s={clip_rgb:function(t){t._clipped=!1,t._unclipped=t.slice(0);for(var n=0;n<=3;n++)n<3?((t[n]<0||t[n]>255)&&(t._clipped=!0),t[n]=e(t[n],0,255)):3===n&&(t[n]=e(t[n],0,1));return t},limit:e,type:a,unpack:function(e,t){return(// if called with more than 3 arguments, we return the arguments
(void 0===t&&(t=null),e.length>=3)?Array.prototype.slice.call(e):"object"==a(e[0])&&t?t.split("").filter(function(t){return void 0!==e[0][t]}).map(function(t){return e[0][t]}):e[0])},last:function(e){if(e.length<2)return null;var t=e.length-1;return"string"==a(e[t])?e[t].toLowerCase():null},TWOPI:2*o,PITHIRD:o/3,DEG2RAD:o/180,RAD2DEG:180/o},l={format:{},autodetect:[]},u=s.last,c=s.clip_rgb,f=s.type,h=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if("object"===f(e[0])&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];// last argument could be the mode
var n=u(e),r=!1;if(!n){r=!0,l.sorted||(l.autodetect=l.autodetect.sort(function(e,t){return t.p-e.p}),l.sorted=!0);// auto-detect format
for(var i=0,a=l.autodetect;i<a.length;i+=1){var o=a[i];if(n=o.test.apply(o,e))break}}if(l.format[n]){var s=l.format[n].apply(null,r?e:e.slice(0,-1));this._rgb=c(s)}else throw Error("unknown format: "+e);3===this._rgb.length&&this._rgb.push(1)};h.prototype.toString=function(){return"function"==f(this.hex)?this.hex():"["+this._rgb.join(",")+"]"};var d=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(d.Color,[null].concat(e)))};d.Color=h,d.version="2.1.0";var p=s.unpack,m=Math.max,g=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=p(e,"rgb"),r=n[0],i=n[1],a=n[2],o=1-m(r/=255,m(i/=255,a/=255)),s=o<1?1/(1-o):0;return[(1-r-o)*s,(1-i-o)*s,(1-a-o)*s,o]},v=s.unpack,y=s.unpack,_=s.type;h.prototype.cmyk=function(){return g(this._rgb)},d.cmyk=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(h,[null].concat(e,["cmyk"])))},l.format.cmyk=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=v(e,"cmyk"))[0],r=e[1],i=e[2],a=e[3],o=e.length>4?e[4]:1;return 1===a?[0,0,0,o]:[n>=1?0:255*(1-n)*(1-a),r>=1?0:255*(1-r)*(1-a),i>=1?0:255*(1-i)*(1-a),o]},l.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if("array"===_(e=y(e,"cmyk"))&&4===e.length)return"cmyk"}});var x=s.unpack,b=s.last,S=function(e){return Math.round(100*e)/100},E=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=x(e,"hsla"),r=b(e)||"lsa";return n[0]=S(n[0]||0),n[1]=S(100*n[1])+"%",n[2]=S(100*n[2])+"%","hsla"===r||n.length>3&&n[3]<1?(n[3]=n.length>3?n[3]:1,r="hsla"):n.length=3,r+"("+n.join(",")+")"},w=s.unpack,M=function(){for(var e,t,n=[],r=arguments.length;r--;)n[r]=arguments[r];var i=(n=w(n,"rgba"))[0],a=n[1],o=n[2],s=Math.min(i/=255,a/=255,o/=255),l=Math.max(i,a,o),u=(l+s)/2;return(l===s?(e=0,t=Number.NaN):e=u<.5?(l-s)/(l+s):(l-s)/(2-l-s),i==l?t=(a-o)/(l-s):a==l?t=2+(o-i)/(l-s):o==l&&(t=4+(i-a)/(l-s)),(t*=60)<0&&(t+=360),n.length>3&&void 0!==n[3])?[t,e,u,n[3]]:[t,e,u]},T=s.unpack,A=s.last,C=Math.round,P=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=T(e,"rgba"),r=A(e)||"rgb";return"hsl"==r.substr(0,3)?E(M(n),r):(n[0]=C(n[0]),n[1]=C(n[1]),n[2]=C(n[2]),("rgba"===r||n.length>3&&n[3]<1)&&(n[3]=n.length>3?n[3]:1,r="rgba"),r+"("+n.slice(0,"rgb"===r?3:4).join(",")+")")},R=s.unpack,L=Math.round,O=function(){for(var e,t,n,r,i=[],a=arguments.length;a--;)i[a]=arguments[a];var o=(i=R(i,"hsl"))[0],s=i[1],l=i[2];if(0===s)t=n=r=255*l;else{var u=[0,0,0],c=[0,0,0],f=l<.5?l*(1+s):l+s-l*s,h=2*l-f,d=o/360;u[0]=d+1/3,u[1]=d,u[2]=d-1/3;for(var p=0;p<3;p++)u[p]<0&&(u[p]+=1),u[p]>1&&(u[p]-=1),6*u[p]<1?c[p]=h+(f-h)*6*u[p]:2*u[p]<1?c[p]=f:3*u[p]<2?c[p]=h+(f-h)*(2/3-u[p])*6:c[p]=h;t=(e=[L(255*c[0]),L(255*c[1]),L(255*c[2])])[0],n=e[1],r=e[2]}return i.length>3?[t,n,r,i[3]]:[t,n,r,1]},I=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,U=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,N=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,D=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,k=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,F=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,z=Math.round,B=function(e){if(e=e.toLowerCase().trim(),l.format.named)try{return l.format.named(e)}catch(e){// eslint-disable-next-line
}// rgb(250,20,0)
if(t=e.match(I)){for(var t,n=t.slice(1,4),r=0;r<3;r++)n[r]=+n[r];return n[3]=1,n}// rgba(250,20,0,0.4)
if(t=e.match(U)){for(var i=t.slice(1,5),a=0;a<4;a++)i[a]=+i[a];return i}// rgb(100%,0%,0%)
if(t=e.match(N)){for(var o=t.slice(1,4),s=0;s<3;s++)o[s]=z(2.55*o[s]);return o[3]=1,o}// rgba(100%,0%,0%,0.4)
if(t=e.match(D)){for(var u=t.slice(1,5),c=0;c<3;c++)u[c]=z(2.55*u[c]);return u[3]=+u[3],u}// hsl(0,100%,50%)
if(t=e.match(k)){var f=t.slice(1,4);f[1]*=.01,f[2]*=.01;var h=O(f);return h[3]=1,h}// hsla(0,100%,50%,0.5)
if(t=e.match(F)){var d=t.slice(1,4);d[1]*=.01,d[2]*=.01;var p=O(d);return p[3]=+t[4],p}};B.test=function(e){return I.test(e)||U.test(e)||N.test(e)||D.test(e)||k.test(e)||F.test(e)};var V=s.type;h.prototype.css=function(e){return P(this._rgb,e)},d.css=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(h,[null].concat(e,["css"])))},l.format.css=B,l.autodetect.push({p:5,test:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(!t.length&&"string"===V(e)&&B.test(e))return"css"}});var H=s.unpack;l.format.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=H(e,"rgba");return n[0]*=255,n[1]*=255,n[2]*=255,n},d.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(h,[null].concat(e,["gl"])))},h.prototype.gl=function(){var e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]};var G=s.unpack,W=function(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];var r=G(t,"rgb"),i=r[0],a=r[1],o=r[2],s=Math.min(i,a,o),l=Math.max(i,a,o),u=l-s;return 0===u?e=Number.NaN:(i===l&&(e=(a-o)/u),a===l&&(e=2+(o-i)/u),o===l&&(e=4+(i-a)/u),(e*=60)<0&&(e+=360)),[e,100*u/255,s/(255-u)*100]},j=s.unpack,X=Math.floor,q=s.unpack,Y=s.type;h.prototype.hcg=function(){return W(this._rgb)},d.hcg=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(h,[null].concat(e,["hcg"])))},l.format.hcg=function(){for(var e,t,n,r,i,a,o,s,l,u=[],c=arguments.length;c--;)u[c]=arguments[c];var f=(u=j(u,"hcg"))[0],h=u[1],d=u[2];d*=255;var p=255*h;if(0===h)o=s=l=d;else{360===f&&(f=0),f>360&&(f-=360),f<0&&(f+=360);var m=X(f/=60),g=f-m,v=d*(1-h),y=v+p*(1-g),_=v+p*g,x=v+p;switch(m){case 0:o=(e=[x,_,v])[0],s=e[1],l=e[2];break;case 1:o=(t=[y,x,v])[0],s=t[1],l=t[2];break;case 2:o=(n=[v,x,_])[0],s=n[1],l=n[2];break;case 3:o=(r=[v,y,x])[0],s=r[1],l=r[2];break;case 4:o=(i=[_,v,x])[0],s=i[1],l=i[2];break;case 5:o=(a=[x,v,y])[0],s=a[1],l=a[2]}}return[o,s,l,u.length>3?u[3]:1]},l.autodetect.push({p:1,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if("array"===Y(e=q(e,"hcg"))&&3===e.length)return"hcg"}});var $=s.unpack,K=s.last,Z=Math.round,J=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=$(e,"rgba"),r=n[0],i=n[1],a=n[2],o=n[3],s=K(e)||"auto";void 0===o&&(o=1),"auto"===s&&(s=o<1?"rgba":"rgb");var l="000000"+((r=Z(r))<<16|(i=Z(i))<<8|(a=Z(a))).toString(16);//#.toUpperCase();
l=l.substr(l.length-6);var u="0"+Z(255*o).toString(16);switch(u=u.substr(u.length-2),s.toLowerCase()){case"rgba":return"#"+l+u;case"argb":return"#"+u+l;default:return"#"+l}},Q=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,ee=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,et=function(e){if(e.match(Q)){(4===e.length||7===e.length)&&(e=e.substr(1)),3===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var t=parseInt(e,16);return[t>>16,t>>8&255,255&t,1]}// match rgba hex format, eg #FF000077
if(e.match(ee)){(5===e.length||9===e.length)&&(e=e.substr(1)),4===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);var n=parseInt(e,16),r=Math.round((255&n)/255*100)/100;return[n>>24&255,n>>16&255,n>>8&255,r]}// we used to check for css colors here
// if _input.css? and rgb = _input.css hex
//     return rgb
throw Error("unknown hex color: "+e)},en=s.type;h.prototype.hex=function(e){return J(this._rgb,e)},d.hex=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(h,[null].concat(e,["hex"])))},l.format.hex=et,l.autodetect.push({p:4,test:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(!t.length&&"string"===en(e)&&[3,4,5,6,7,8,9].indexOf(e.length)>=0)return"hex"}});var er=s.unpack,ei=s.TWOPI,ea=Math.min,eo=Math.sqrt,es=Math.acos,el=function(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];/*
        borrowed from here:
        http://hummer.stanford.edu/museinfo/doc/examples/humdrum/keyscape2/rgb2hsi.cpp
        */var r=er(t,"rgb"),i=r[0],a=r[1],o=r[2],s=ea(i/=255,a/=255,o/=255),l=(i+a+o)/3,u=l>0?1-s/l:0;return 0===u?e=NaN:(e=es(e=(i-a+(i-o))/2/eo((i-a)*(i-a)+(i-o)*(a-o))),o>a&&(e=ei-e),e/=ei),[360*e,u,l]},eu=s.unpack,ec=s.limit,ef=s.TWOPI,eh=s.PITHIRD,ed=Math.cos,ep=s.unpack,em=s.type;h.prototype.hsi=function(){return el(this._rgb)},d.hsi=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(h,[null].concat(e,["hsi"])))},l.format.hsi=function(){for(var e,t,n,r=[],i=arguments.length;i--;)r[i]=arguments[i];var a=/*
        borrowed from here:
        http://hummer.stanford.edu/museinfo/doc/examples/humdrum/keyscape2/hsi2rgb.cpp
        */(r=eu(r,"hsi"))[0],o=r[1],s=r[2];return isNaN(a)&&(a=0),isNaN(o)&&(o=0),a>360&&(a-=360),a<0&&(a+=360),(a/=360)<1/3?t=1-((n=(1-o)/3)+(e=(1+o*ed(ef*a)/ed(eh-ef*a))/3)):a<2/3?(a-=1/3,n=1-((e=(1-o)/3)+(t=(1+o*ed(ef*a)/ed(eh-ef*a))/3))):(a-=2/3,e=1-((t=(1-o)/3)+(n=(1+o*ed(ef*a)/ed(eh-ef*a))/3))),[255*(e=ec(s*e*3)),255*(t=ec(s*t*3)),255*(n=ec(s*n*3)),r.length>3?r[3]:1]},l.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if("array"===em(e=ep(e,"hsi"))&&3===e.length)return"hsi"}});var eg=s.unpack,ev=s.type;h.prototype.hsl=function(){return M(this._rgb)},d.hsl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(h,[null].concat(e,["hsl"])))},l.format.hsl=O,l.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if("array"===ev(e=eg(e,"hsl"))&&3===e.length)return"hsl"}});var ey=s.unpack,e_=Math.min,ex=Math.max,eb=function(){for(var e,t,n=[],r=arguments.length;r--;)n[r]=arguments[r];var i=(n=ey(n,"rgb"))[0],a=n[1],o=n[2],s=e_(i,a,o),l=ex(i,a,o),u=l-s;return 0===l?(e=Number.NaN,t=0):(t=u/l,i===l&&(e=(a-o)/u),a===l&&(e=2+(o-i)/u),o===l&&(e=4+(i-a)/u),(e*=60)<0&&(e+=360)),[e,t,l/255]},eS=s.unpack,eE=Math.floor,ew=s.unpack,eM=s.type;h.prototype.hsv=function(){return eb(this._rgb)},d.hsv=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(h,[null].concat(e,["hsv"])))},l.format.hsv=function(){for(var e,t,n,r,i,a,o,s,l,u=[],c=arguments.length;c--;)u[c]=arguments[c];var f=(u=eS(u,"hsv"))[0],h=u[1],d=u[2];if(d*=255,0===h)o=s=l=d;else{360===f&&(f=0),f>360&&(f-=360),f<0&&(f+=360);var p=eE(f/=60),m=f-p,g=d*(1-h),v=d*(1-h*m),y=d*(1-h*(1-m));switch(p){case 0:o=(e=[d,y,g])[0],s=e[1],l=e[2];break;case 1:o=(t=[v,d,g])[0],s=t[1],l=t[2];break;case 2:o=(n=[g,d,y])[0],s=n[1],l=n[2];break;case 3:o=(r=[g,v,d])[0],s=r[1],l=r[2];break;case 4:o=(i=[y,g,d])[0],s=i[1],l=i[2];break;case 5:o=(a=[d,g,v])[0],s=a[1],l=a[2]}}return[o,s,l,u.length>3?u[3]:1]},l.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if("array"===eM(e=ew(e,"hsv"))&&3===e.length)return"hsv"}});var eT={// Corresponds roughly to RGB brighter/darker
Kn:18,// D65 standard referent
Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},eA=s.unpack,eC=Math.pow,eP=function(e){return(e/=255)<=.04045?e/12.92:eC((e+.055)/1.055,2.4)},eR=function(e){return e>eT.t3?eC(e,1/3):e/eT.t2+eT.t0},eL=function(){for(var e,t,n,r=[],i=arguments.length;i--;)r[i]=arguments[i];var a=eA(r,"rgb"),o=(e=a[0],t=a[1],n=a[2],[eR((.4124564*(e=eP(e))+.3575761*(t=eP(t))+.1804375*(n=eP(n)))/eT.Xn),eR((.2126729*e+.7151522*t+.072175*n)/eT.Yn),eR((.0193339*e+.119192*t+.9503041*n)/eT.Zn)]),s=o[0],l=o[1],u=o[2],c=116*l-16;return[c<0?0:c,500*(s-l),200*(l-u)]},eO=s.unpack,eI=Math.pow,eU=function(e){return 255*(e<=.00304?12.92*e:1.055*eI(e,1/2.4)-.055)},eN=function(e){return e>eT.t1?e*e*e:eT.t2*(e-eT.t0)},eD=function(){for(var e,t,n,r=[],i=arguments.length;i--;)r[i]=arguments[i];var a=(r=eO(r,"lab"))[0],o=r[1],s=r[2];return t=(a+16)/116,e=isNaN(o)?t:t+o/500,n=isNaN(s)?t:t-s/200,t=eT.Yn*eN(t),[eU(3.2404542*(e=eT.Xn*eN(e))-1.5371385*t-.4985314*(n=eT.Zn*eN(n))),eU(-.969266*e+1.8760108*t+.041556*n),eU(.0556434*e-.2040259*t+1.0572252*n),r.length>3?r[3]:1]},ek=s.unpack,eF=s.type;h.prototype.lab=function(){return eL(this._rgb)},d.lab=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(h,[null].concat(e,["lab"])))},l.format.lab=eD,l.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if("array"===eF(e=ek(e,"lab"))&&3===e.length)return"lab"}});var ez=s.unpack,eB=s.RAD2DEG,eV=Math.sqrt,eH=Math.atan2,eG=Math.round,eW=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=ez(e,"lab"),r=n[0],i=n[1],a=n[2],o=eV(i*i+a*a),s=(eH(a,i)*eB+360)%360;return 0===eG(1e4*o)&&(s=Number.NaN),[r,o,s]},ej=s.unpack,eX=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=ej(e,"rgb"),r=eL(n[0],n[1],n[2]);return eW(r[0],r[1],r[2])},eq=s.unpack,eY=s.DEG2RAD,e$=Math.sin,eK=Math.cos,eZ=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];/*
        Convert from a qualitative parameter h and a quantitative parameter l to a 24-bit pixel.
        These formulas were invented by David Dalrymple to obtain maximum contrast without going
        out of gamut if the parameters are in the range 0-1.

        A saturation multiplier was added by Gregor Aisch
        */var n=eq(e,"lch"),r=n[0],i=n[1],a=n[2];return isNaN(a)&&(a=0),[r,eK(a*=eY)*i,e$(a)*i]},eJ=s.unpack,eQ=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=eZ((e=eJ(e,"lch"))[0],e[1],e[2]),r=eD(n[0],n[1],n[2]);return[r[0],r[1],r[2],e.length>3?e[3]:1]},e0=s.unpack,e1=s.unpack,e2=s.type;h.prototype.lch=function(){return eX(this._rgb)},h.prototype.hcl=function(){return eX(this._rgb).reverse()},d.lch=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(h,[null].concat(e,["lch"])))},d.hcl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(h,[null].concat(e,["hcl"])))},l.format.lch=eQ,l.format.hcl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=e0(e,"hcl").reverse();return eQ.apply(void 0,n)},["lch","hcl"].forEach(function(e){return l.autodetect.push({p:2,test:function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if("array"===e2(t=e1(t,e))&&3===t.length)return e}})});var e3={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},e4=s.type;h.prototype.name=function(){for(var e=J(this._rgb,"rgb"),t=0,n=Object.keys(e3);t<n.length;t+=1){var r=n[t];if(e3[r]===e)return r.toLowerCase()}return e},l.format.named=function(e){if(e3[e=e.toLowerCase()])return et(e3[e]);throw Error("unknown color name: "+e)},l.autodetect.push({p:5,test:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(!t.length&&"string"===e4(e)&&e3[e.toLowerCase()])return"named"}});var e5=s.unpack,e6=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=e5(e,"rgb");return(n[0]<<16)+(n[1]<<8)+n[2]},e8=s.type,e7=s.type;h.prototype.num=function(){return e6(this._rgb)},d.num=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(h,[null].concat(e,["num"])))},l.format.num=function(e){if("number"==e8(e)&&e>=0&&e<=16777215)return[e>>16,e>>8&255,255&e,1];throw Error("unknown num color: "+e)},l.autodetect.push({p:5,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(1===e.length&&"number"===e7(e[0])&&e[0]>=0&&e[0]<=16777215)return"num"}});var e9=s.unpack,te=s.type,tt=Math.round;h.prototype.rgb=function(e){return(void 0===e&&(e=!0),!1===e)?this._rgb.slice(0,3):this._rgb.slice(0,3).map(tt)},h.prototype.rgba=function(e){return void 0===e&&(e=!0),this._rgb.slice(0,4).map(function(t,n){return n<3?!1===e?t:tt(t):t})},d.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(h,[null].concat(e,["rgb"])))},l.format.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=e9(e,"rgba");return void 0===n[3]&&(n[3]=1),n},l.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if("array"===te(e=e9(e,"rgba"))&&(3===e.length||4===e.length&&"number"==te(e[3])&&e[3]>=0&&e[3]<=1))return"rgb"}});/*
     * Based on implementation by Neil Bartlett
     * https://github.com/neilbartlett/color-temperature
     */var tn=Math.log,tr=function(e){var t,n,r,i=e/100;return i<66?(t=255,n=-155.25485562709179-.44596950469579133*(n=i-2)+104.49216199393888*tn(n),r=i<20?0:-254.76935184120902+.8274096064007395*(r=i-10)+115.67994401066147*tn(r)):(t=351.97690566805693+.114206453784165*(t=i-55)-40.25366309332127*tn(t),n=325.4494125711974+.07943456536662342*(n=i-50)-28.0852963507957*tn(n),r=255),[t,n,r,1]},ti=s.unpack,ta=Math.round,to=function(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=ti(t,"rgb"),i=r[0],a=r[2],o=1e3,s=4e4;s-o>.4;){var l=tr(e=(s+o)*.5);l[2]/l[0]>=a/i?s=e:o=e}return ta(e)};h.prototype.temp=h.prototype.kelvin=h.prototype.temperature=function(){return to(this._rgb)},d.temp=d.kelvin=d.temperature=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(h,[null].concat(e,["temp"])))},l.format.temp=l.format.kelvin=l.format.temperature=tr;var ts=s.type;h.prototype.alpha=function(e,t){return(void 0===t&&(t=!1),void 0!==e&&"number"===ts(e))?t?(this._rgb[3]=e,this):new h([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3]},h.prototype.clipped=function(){return this._rgb._clipped||!1},h.prototype.darken=function(e){void 0===e&&(e=1);var t=this.lab();return t[0]-=eT.Kn*e,new h(t,"lab").alpha(this.alpha(),!0)},h.prototype.brighten=function(e){return void 0===e&&(e=1),this.darken(-e)},h.prototype.darker=h.prototype.darken,h.prototype.brighter=h.prototype.brighten,h.prototype.get=function(e){var t=e.split("."),n=t[0],r=t[1],i=this[n]();if(!r)return i;var a=n.indexOf(r);if(a>-1)return i[a];throw Error("unknown channel "+r+" in mode "+n)};var tl=s.type,tu=Math.pow;h.prototype.luminance=function(e){if(void 0!==e&&"number"===tl(e)){if(0===e)return new h([0,0,0,this._rgb[3]],"rgb");if(1===e)return new h([255,255,255,this._rgb[3]],"rgb");// compute new color using...
var t=this.luminance(),n=20,r=function(t,i){var a=t.interpolate(i,.5,"rgb"),o=a.luminance();return!(1e-7>Math.abs(e-o))&&n--?o>e?r(t,a):r(a,i):a},i=(t>e?r(new h([0,0,0]),this):r(this,new h([255,255,255]))).rgb();return new h(i.concat([this._rgb[3]]))}return tc.apply(void 0,this._rgb.slice(0,3))};var tc=function(e,t,n){return .2126*// relative luminance
// see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef
(e=tf(e))+.7152*(t=tf(t))+.0722*(n=tf(n))},tf=function(e){return(e/=255)<=.03928?e/12.92:tu((e+.055)/1.055,2.4)},th={},td=s.type,tp=function(e,t,n){void 0===n&&(n=.5);for(var r=[],i=arguments.length-3;i-- >0;)r[i]=arguments[i+3];var a=r[0]||"lrgb";if(th[a]||r.length||(a=Object.keys(th)[0]),!th[a])throw Error("interpolation mode "+a+" is not defined");return"object"!==td(e)&&(e=new h(e)),"object"!==td(t)&&(t=new h(t)),th[a](e,t,n).alpha(e.alpha()+n*(t.alpha()-e.alpha()))};h.prototype.mix=h.prototype.interpolate=function(e,t){void 0===t&&(t=.5);for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return tp.apply(void 0,[this,e,t].concat(n))},h.prototype.premultiply=function(e){void 0===e&&(e=!1);var t=this._rgb,n=t[3];return e?(this._rgb=[t[0]*n,t[1]*n,t[2]*n,n],this):new h([t[0]*n,t[1]*n,t[2]*n,n],"rgb")},h.prototype.saturate=function(e){void 0===e&&(e=1);var t=this.lch();return t[1]+=eT.Kn*e,t[1]<0&&(t[1]=0),new h(t,"lch").alpha(this.alpha(),!0)},h.prototype.desaturate=function(e){return void 0===e&&(e=1),this.saturate(-e)};var tm=s.type;h.prototype.set=function(e,t,n){void 0===n&&(n=!1);var r=e.split("."),i=r[0],a=r[1],o=this[i]();if(!a)return o;var s=i.indexOf(a);if(s>-1){if("string"==tm(t))switch(t.charAt(0)){case"+":case"-":o[s]+=+t;break;case"*":o[s]*=+t.substr(1);break;case"/":o[s]/=+t.substr(1);break;default:o[s]=+t}else if("number"===tm(t))o[s]=t;else throw Error("unsupported value for Color.set");var l=new h(o,i);return n?(this._rgb=l._rgb,this):l}throw Error("unknown channel "+a+" in mode "+i)},// register interpolator
th.rgb=function(e,t,n){var r=e._rgb,i=t._rgb;return new h(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"rgb")};var tg=Math.sqrt,tv=Math.pow;// register interpolator
th.lrgb=function(e,t,n){var r=e._rgb,i=r[0],a=r[1],o=r[2],s=t._rgb,l=s[0],u=s[1],c=s[2];return new h(tg(tv(i,2)*(1-n)+tv(l,2)*n),tg(tv(a,2)*(1-n)+tv(u,2)*n),tg(tv(o,2)*(1-n)+tv(c,2)*n),"rgb")},// register interpolator
th.lab=function(e,t,n){var r=e.lab(),i=t.lab();return new h(r[0]+n*(i[0]-r[0]),r[1]+n*(i[1]-r[1]),r[2]+n*(i[2]-r[2]),"lab")};var ty=function(e,t,n,r){var i,a,o,s,l,u,c,f,d,p,m,g,v,y;return"hsl"===r?(o=e.hsl(),s=t.hsl()):"hsv"===r?(o=e.hsv(),s=t.hsv()):"hcg"===r?(o=e.hcg(),s=t.hcg()):"hsi"===r?(o=e.hsi(),s=t.hsi()):("lch"===r||"hcl"===r)&&(r="hcl",o=e.hcl(),s=t.hcl()),"h"===r.substr(0,1)&&(l=(i=o)[0],c=i[1],d=i[2],u=(a=s)[0],f=a[1],p=a[2]),isNaN(l)||isNaN(u)?isNaN(l)?isNaN(u)?g=Number.NaN:(g=u,(1==d||0==d)&&"hsv"!=r&&(m=f)):(g=l,(1==p||0==p)&&"hsv"!=r&&(m=c)):(y=u>l&&u-l>180?u-(l+360):u<l&&l-u>180?u+360-l:u-l,g=l+n*y),void 0===m&&(m=c+n*(f-c)),v=d+n*(p-d),new h([g,m,v],r)},t_=function(e,t,n){return ty(e,t,n,"lch")};// register interpolator
th.lch=t_,th.hcl=t_,// register interpolator
th.num=function(e,t,n){var r=e.num(),i=t.num();return new h(r+n*(i-r),"num")},// register interpolator
th.hcg=function(e,t,n){return ty(e,t,n,"hcg")},// register interpolator
th.hsi=function(e,t,n){return ty(e,t,n,"hsi")},// register interpolator
th.hsl=function(e,t,n){return ty(e,t,n,"hsl")},// register interpolator
th.hsv=function(e,t,n){return ty(e,t,n,"hsv")};var tx=s.clip_rgb,tb=Math.pow,tS=Math.sqrt,tE=Math.PI,tw=Math.cos,tM=Math.sin,tT=Math.atan2,tA=function(e,t){for(var n=e.length,r=[0,0,0,0],i=0;i<e.length;i++){var a=e[i],o=t[i]/n,s=a._rgb;r[0]+=tb(s[0],2)*o,r[1]+=tb(s[1],2)*o,r[2]+=tb(s[2],2)*o,r[3]+=s[3]*o}return r[0]=tS(r[0]),r[1]=tS(r[1]),r[2]=tS(r[2]),r[3]>.9999999&&(r[3]=1),new h(tx(r))},tC=s.type,tP=Math.pow,tR=function(e){// constructor
var t="rgb",n=d("#ccc"),r=0,i=[0,1],a=[],o=[0,0],s=!1,l=[],u=!1,c=0,f=1,h=!1,p={},m=!0,g=1,v=function(e){if("string"===tC(e=e||["#fff","#000"])&&d.brewer&&d.brewer[e.toLowerCase()]&&(e=d.brewer[e.toLowerCase()]),"array"===tC(e)){1===e.length&&(e=[e[0],e[0]]),// make a copy of the colors
e=e.slice(0);// convert to chroma classes
for(var t=0;t<e.length;t++)e[t]=d(e[t]);// auto-fill color position
a.length=0;for(var n=0;n<e.length;n++)a.push(n/(e.length-1))}return S(),l=e},y=function(e){if(null!=s){for(var t=s.length-1,n=0;n<t&&e>=s[n];)n++;return n-1}return 0},_=function(e){return e},x=function(e){return e},b=function(e,r){if(null==r&&(r=!1),isNaN(e)||null===e)return n;if(r)u=e;else if(s&&s.length>2){// find the class
var i,u;u=y(e)/(s.length-2)}else u=f!==c?(e-c)/(f-c):1;// domain map
u=x(u),r||(u=_(u)),1!==g&&(u=tP(u,g));var h=Math.floor(1e4*(u=Math.min(1,Math.max(0,u=o[0]+u*(1-o[0]-o[1])))));if(m&&p[h])i=p[h];else{if("array"===tC(l))for(var v=0;v<a.length;v++){var b=a[v];if(u<=b||u>=b&&v===a.length-1){i=l[v];break}if(u>b&&u<a[v+1]){u=(u-b)/(a[v+1]-b),i=d.interpolate(l[v],l[v+1],u,t);break}}else"function"===tC(l)&&(i=l(u));m&&(p[h]=i)}return i},S=function(){return p={}};v(e);// public interface
var E=function(e){var t=d(b(e));return u&&t[u]?t[u]():t};return E.classes=function(e){if(null!=e){if("array"===tC(e))s=e,i=[e[0],e[e.length-1]];else{var t=d.analyze(i);s=0===e?[t.min,t.max]:d.limits(t,"e",e)}return E}return s},E.domain=function(e){if(!arguments.length)return i;c=e[0],f=e[e.length-1],a=[];var t=l.length;if(e.length===t&&c!==f)for(var n=0,r=Array.from(e);n<r.length;n+=1){var o=r[n];a.push((o-c)/(f-c))}else{for(var s=0;s<t;s++)a.push(s/(t-1));if(e.length>2){// set domain map
var u=e.map(function(t,n){return n/(e.length-1)}),h=e.map(function(e){return(e-c)/(f-c)});h.every(function(e,t){return u[t]===e})||(x=function(e){if(e<=0||e>=1)return e;for(var t=0;e>=h[t+1];)t++;var n=(e-h[t])/(h[t+1]-h[t]);return u[t]+n*(u[t+1]-u[t])})}}return i=[c,f],E},E.mode=function(e){return arguments.length?(t=e,S(),E):t},E.range=function(e,t){return v(e,t),E},E.out=function(e){return u=e,E},E.spread=function(e){return arguments.length?(r=e,E):r},E.correctLightness=function(e){return null==e&&(e=!0),h=e,S(),_=h?function(e){for(var t=b(0,!0).lab()[0],n=b(1,!0).lab()[0],r=t>n,i=b(e,!0).lab()[0],a=t+(n-t)*e,o=i-a,s=0,l=1,u=20;Math.abs(o)>.01&&u-- >0;)r&&(o*=-1),o<0?(s=e,e+=(l-e)*.5):(l=e,e+=(s-e)*.5),o=(i=b(e,!0).lab()[0])-a;return e}:function(e){return e},E},E.padding=function(e){return null!=e?("number"===tC(e)&&(e=[e,e]),o=e,E):o},E.colors=function(t,n){arguments.length<2&&(n="hex");var r=[];if(0==arguments.length)r=l.slice(0);else if(1===t)r=[E(.5)];else if(t>1){var a=i[0],o=i[1]-a;r=(function(e,t,n){for(var r=[],i=e<t,a=n?i?t+1:t-1:t,o=e;i?o<a:o>a;i?o++:o--)r.push(o);return r})(0,t,!1).map(function(e){return E(a+e/(t-1)*o)})}else{e=[];var u=[];if(s&&s.length>2)for(var c=1,f=s.length,h=1<=f;h?c<f:c>f;h?c++:c--)u.push((s[c-1]+s[c])*.5);else u=i;r=u.map(function(e){return E(e)})}return d[n]&&(r=r.map(function(e){return e[n]()})),r},E.cache=function(e){return null!=e?(m=e,E):m},E.gamma=function(e){return null!=e?(g=e,E):g},E.nodata=function(e){return null!=e?(n=d(e),E):n},E},tL=function(e){if(2===(e=e.map(function(e){return new h(e)})).length)a=// linear interpolation
(t=e.map(function(e){return e.lab()}))[0],o=t[1],i=function(e){var t=[0,1,2].map(function(t){return a[t]+e*(o[t]-a[t])});return new h(t,"lab")};else if(3===e.length)a=// quadratic bezier interpolation
(n=e.map(function(e){return e.lab()}))[0],o=n[1],s=n[2],i=function(e){var t=[0,1,2].map(function(t){return(1-e)*(1-e)*a[t]+2*(1-e)*e*o[t]+e*e*s[t]});return new h(t,"lab")};else if(4===e.length)a=(r=e.map(function(e){return e.lab()}))[0],o=r[1],s=r[2],l=r[3],i=function(e){var t=[0,1,2].map(function(t){return(1-e)*(1-e)*(1-e)*a[t]+3*(1-e)*(1-e)*e*o[t]+3*(1-e)*e*e*s[t]+e*e*e*l[t]});return new h(t,"lab")};else if(5===e.length){var t,n,r,i,a,o,s,l,u=tL(e.slice(0,3)),c=tL(e.slice(2,5));i=function(e){return e<.5?u(2*e):c((e-.5)*2)}}return i},tO=function(e,t,n){if(!tO[n])throw Error("unknown blend mode "+n);return tO[n](e,t)},tI=function(e){return function(t,n){var r=d(n).rgb(),i=d(t).rgb();return d.rgb(e(r,i))}},tU=function(e){return function(t,n){var r=[];return r[0]=e(t[0],n[0]),r[1]=e(t[1],n[1]),r[2]=e(t[2],n[2]),r}};// # add = (a,b) ->
// #     if (a + b > 255) then 255 else a + b
tO.normal=tI(tU(function(e){return e})),tO.multiply=tI(tU(function(e,t){return e*t/255})),tO.screen=tI(tU(function(e,t){return 255*(1-(1-e/255)*(1-t/255))})),tO.overlay=tI(tU(function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))})),tO.darken=tI(tU(function(e,t){return e>t?t:e})),tO.lighten=tI(tU(function(e,t){return e>t?e:t})),tO.dodge=tI(tU(function(e,t){return 255===e?255:(e=255*(t/255)/(1-e/255))>255?255:e})),tO.burn=tI(tU(function(e,t){return 255*(1-(1-t/255)/(e/255))}));// add lowercase aliases for case-insensitive matches
for(var tN=s.type,tD=s.clip_rgb,tk=s.TWOPI,tF=Math.pow,tz=Math.sin,tB=Math.cos,tV=Math.floor,tH=Math.random,tG=Math.log,tW=Math.pow,tj=Math.floor,tX=Math.abs,tq=function(e,t){void 0===t&&(t=null);var n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===a(e)&&(e=Object.values(e)),e.forEach(function(e){t&&"object"===a(e)&&(e=e[t]),null==e||isNaN(e)||(n.values.push(e),n.sum+=e,e<n.min&&(n.min=e),e>n.max&&(n.max=e),n.count+=1)}),n.domain=[n.min,n.max],n.limits=function(e,t){return tY(n,e,t)},n},tY=function(e,t,n){void 0===t&&(t="equal"),void 0===n&&(n=7),"array"==a(e)&&(e=tq(e));var r=e.min,i=e.max,o=e.values.sort(function(e,t){return e-t});if(1===n)return[r,i];var s=[];if("c"===t.substr(0,1)&&(s.push(r),s.push(i)),"e"===t.substr(0,1)){s.push(r);for(var l=1;l<n;l++)s.push(r+l/n*(i-r));s.push(i)}else if("l"===t.substr(0,1)){if(r<=0)throw Error("Logarithmic scales are only possible for values > 0");var u=Math.LOG10E*tG(r),c=Math.LOG10E*tG(i);s.push(r);for(var f=1;f<n;f++)s.push(tW(10,u+f/n*(c-u)));s.push(i)}else if("q"===t.substr(0,1)){s.push(r);for(var h=1;h<n;h++){var d=(o.length-1)*h/n,p=tj(d);if(p===d)s.push(o[p]);else{var m=d-p;s.push(o[p]*(1-m)+o[p+1]*m)}}s.push(i)}else if("k"===t.substr(0,1)){var g,v=o.length,y=Array(v),_=Array(n),x=!0,b=0,S=null;// get seed values
(S=[]).push(r);for(var E=1;E<n;E++)S.push(r+E/n*(i-r));for(S.push(i);x;){// assignment step
for(var w=0;w<n;w++)_[w]=0;for(var M=0;M<v;M++)for(var T=o[M],A=Number.MAX_VALUE,C=void 0,P=0;P<n;P++){var R=tX(S[P]-T);R<A&&(A=R,C=P),_[C]++,y[M]=C}for(var L=Array(n),O=0;O<n;O++)L[O]=null;for(var I=0;I<v;I++)null===L[g=y[I]]?L[g]=o[I]:L[g]+=o[I];for(var U=0;U<n;U++)L[U]*=1/_[U];// check convergence
x=!1;for(var N=0;N<n;N++)if(L[N]!==S[N]){x=!0;break}S=L,++b>200&&(x=!1)}for(var D={},k=0;k<n;k++)D[k]=[];for(var F=0;F<v;F++)D[g=y[F]].push(o[F]);for(var z=[],B=0;B<n;B++)z.push(D[B][0]),z.push(D[B][D[B].length-1]);z=z.sort(function(e,t){return e-t}),s.push(z[0]);for(var V=1;V<z.length;V+=2){var H=z[V];isNaN(H)||-1!==s.indexOf(H)||s.push(H)}}return s},t$={analyze:tq,limits:tY},tK=Math.sqrt,tZ=Math.atan2,tJ=Math.abs,tQ=Math.cos,t0=Math.PI,t1={// sequential
OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],// diverging
Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],// qualitative
Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},t2=0,t3=Object.keys(t1);t2<t3.length;t2+=1){var t4=t3[t2];t1[t4.toLowerCase()]=t1[t4]}return(// feel free to comment out anything to rollup
// a smaller chroma.js built
// io --> convert colors
// operators --> modify existing Colors
// interpolators
// generators -- > create new colors
d.average=function(e,t,n){void 0===t&&(t="lrgb"),void 0===n&&(n=null);var r=e.length;n||(n=Array.from(Array(r)).map(function(){return 1}));// normalize weights
var i=r/n.reduce(function(e,t){return e+t});if(n.forEach(function(e,t){n[t]*=i}),// convert colors to Color objects
e=e.map(function(e){return new h(e)}),"lrgb"===t)return tA(e,n);// initial color
for(var a=e.shift(),o=a.get(t),s=[],l=0,u=0,c=0;c<o.length;c++)if(o[c]=(o[c]||0)*n[0],s.push(isNaN(o[c])?0:n[0]),"h"===t.charAt(c)&&!isNaN(o[c])){var f=o[c]/180*tE;l+=tw(f)*n[0],u+=tM(f)*n[0]}var d=a.alpha()*n[0];e.forEach(function(e,r){var i=e.get(t);d+=e.alpha()*n[r+1];for(var a=0;a<o.length;a++)if(!isNaN(i[a])){if(s[a]+=n[r+1],"h"===t.charAt(a)){var c=i[a]/180*tE;l+=tw(c)*n[r+1],u+=tM(c)*n[r+1]}else o[a]+=i[a]*n[r+1]}});for(var p=0;p<o.length;p++)if("h"===t.charAt(p)){for(var m=tT(u/s[p],l/s[p])/tE*180;m<0;)m+=360;for(;m>=360;)m-=360;o[p]=m}else o[p]=o[p]/s[p];return d/=r,new h(o,t).alpha(d>.99999?1:d,!0)},d.bezier=function(e){var t=tL(e);return t.scale=function(){return tR(t)},t},d.blend=tO,d.cubehelix=function(e,t,n,r,i){void 0===e&&(e=300),void 0===t&&(t=-1.5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=[0,1]);var a,o=0;"array"===tN(i)?a=i[1]-i[0]:(a=0,i=[i,i]);var s=function(s){var l=tk*((e+120)/360+t*s),u=tF(i[0]+a*s,r),c=(0!==o?n[0]+s*o:n)*u*(1-u)/2,f=tB(l),h=tz(l);return d(tD([255*(u+c*(-.14861*f+1.78277*h)),255*(u+c*(-.29227*f-.90649*h)),255*(u+c*(1.97294*f)),1]))};return s.start=function(t){return null==t?e:(e=t,s)},s.rotations=function(e){return null==e?t:(t=e,s)},s.gamma=function(e){return null==e?r:(r=e,s)},s.hue=function(e){return null==e?n:("array"===tN(n=e)?0==(o=n[1]-n[0])&&(n=n[1]):o=0,s)},s.lightness=function(e){return null==e?i:("array"===tN(e)?(i=e,a=e[1]-e[0]):(i=[e,e],a=0),s)},s.scale=function(){return d.scale(s)},s.hue(n),s},d.mix=d.interpolate=tp,d.random=function(){for(var e="#",t=0;t<6;t++)e+="0123456789abcdef".charAt(tV(16*tH()));return new h(e,"hex")},d.scale=tR,// other utility methods
d.analyze=t$.analyze,d.contrast=function(e,t){// WCAG contrast ratio
// see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef
e=new h(e),t=new h(t);var n=e.luminance(),r=t.luminance();return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)},d.deltaE=function(e,t,n,r){void 0===n&&(n=1),void 0===r&&(r=1),// Delta E (CMC)
// see http://www.brucelindbloom.com/index.html?Eqn_DeltaE_CMC.html
e=new h(e),t=new h(t);for(var i=Array.from(e.lab()),a=i[0],o=i[1],s=i[2],l=Array.from(t.lab()),u=l[0],c=l[1],f=l[2],d=tK(o*o+s*s),p=tK(c*c+f*f),m=.0638*d/(1+.0131*d)+.638,g=d<1e-6?0:180*tZ(s,o)/t0;g<0;)g+=360;for(;g>=360;)g-=360;var v=g>=164&&g<=345?.56+tJ(.2*tQ(t0*(g+168)/180)):.36+tJ(.4*tQ(t0*(g+35)/180)),y=d*d*d*d,_=tK(y/(y+1900)),x=d-p,b=o-c,S=s-f,E=(a-u)/(n*(a<16?.511:.040975*a/(1+.01765*a))),w=x/(r*m),M=m*(_*v+1-_);return tK(E*E+w*w+(b*b+S*S-x*x)/(M*M))},d.distance=function(e,t,n){void 0===n&&(n="lab"),// Delta E (CIE 1976)
// see http://www.brucelindbloom.com/index.html?Equations.html
e=new h(e),t=new h(t);var r=e.get(n),i=t.get(n),a=0;for(var o in r){var s=(r[o]||0)-(i[o]||0);a+=s*s}return Math.sqrt(a)},d.limits=t$.limits,d.valid=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];try{return new(Function.prototype.bind.apply(h,[null].concat(e))),!0}catch(e){return!1}},// scale
d.scales={cool:function(){return tR([d.hsl(180,1,.9),d.hsl(250,.7,.4)])},hot:function(){return tR(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")}},// colors
d.colors=e3,d.brewer=t1,d)}();const uB=function(e,t,n){let{width:r,height:i}=e,{x:a,y:o}=t,s=uj(-n.axes[0]),l=s/50,u=uj(-n.axes[1]),c=function(...e){return Math.sqrt(e.reduce((e,t)=>e+Math.pow(t,2),0))}(s,u),f=uW(0,function(e,t=2){return Math.sign(e)*Math.pow(t,Math.abs(e))}(4*c)*Math.sign(u)),h=uj(n.axes[2]),d=10*uX(h),p=uW(-r/2,d+a,r/2),m=uj(n.axes[3]),g=10*uX(m),v=uW(-i/2,g+o,i/2);return{speed:f,rotationSpeed:l,x:p,y:v}};function uV(e){let{bigRightButtonIndex:t,bigLeftButtonIndex:n,smallRightButtonIndex:r,smallLeftButtonIndex:i}=e;return function(e,a,o){let{width:s,height:l}=e,{x:u,y:c}=a,f=o.buttons[t],h=o.buttons[n],d=f.pressed?8:h.pressed?4:2,p=o.buttons[r],m=o.buttons[i],g=p.pressed&&m.pressed?0:p.pressed?-.02:m.pressed?.02:0,v=p.pressed&&m.pressed?4:1,y=uj(o.axes[0]),_=10*uX(y),x=uW(-s/2,_+u,s/2),b=uj(o.axes[1]),S=10*uX(b),E=uW(-l/2,S+c,l/2);return{speed:d*v,rotationSpeed:g,x:x,y:E}}}const uH={bigRightButtonIndex:1,bigLeftButtonIndex:0,smallRightButtonIndex:3,smallLeftButtonIndex:2},uG={bigRightButtonIndex:0,bigLeftButtonIndex:3,smallRightButtonIndex:1,smallLeftButtonIndex:2};// Helpers
function uW(e,t,n=1/0){return Math.max(e,Math.min(t,n))}function uj(e,t=.1){return Math.abs(e)<t?0:e-t}function uX(e){return Math.sqrt(Math.abs(e))*Math.sign(e)}class uq{constructor({settings:e,canvas:t,texture:n,stats:r,onSettingsUpdate:i}){// Orbit parameters
this.orbitParams={a:0,b:0,c:0,d:0,e:0},this.hueValues=[],this.mouseX=0,this.mouseY=0,this.windowHalfX=window.innerWidth/2,this.windowHalfY=window.innerHeight/2,// Orbit data
this.orbit={subsets:[],xMin:0,xMax:0,yMin:0,yMax:0,scaleX:0,scaleY:0},this.particleSets=[],this.destroyed=!1,/*@__PURE__*/f(g)(this),this.speed=e.speed||8,this.rotationSpeed=e.rotationSpeed||.005,this.numSubsets=e.subsetCount||7,this.numLevels=e.levelCount||7,this.numPointsSubset=e.pointsPerSubset||4e3,this.mouseLocked=e.mouseLocked||!1,this.controllerConnected=!1,this.texture=n,this.stats=r,this.initOrbit(this.numSubsets,this.numPointsSubset),this.init(t),this.animate(),this.onSettingsUpdate=i,this.fireSettingsChange()}destroy(){window.clearInterval(this.updateIntervalKey),this.renderer.dispose(),this.destroyed=!0}initOrbit(e,t){// Initialize data points
this.orbit.subsets=[];for(let n=0;n<e;n++){let e=[];for(let n=0;n<t;n++)e[n]={x:0,y:0,vertex:new eo(0,0,0)};this.orbit.subsets.push(e)}}init(e){// Setup renderer and effects
this.renderer=new ig({canvas:e,antialias:!1,powerPreference:"high-performance"}),this.renderer.setClearColor(0),this.renderer.setClearAlpha(1),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio||1),this.camera=new t5(60,window.innerWidth/window.innerHeight,1,4500),this.camera.position.set(0,0,750),this.scene=new iy,this.scene.fog=new iv(0,.001),this.generateOrbit(this.numSubsets,this.numPointsSubset),this.generateHues(this.numSubsets);// Create particle systems
for(let e=0;e<this.numLevels;e++)for(let t=0;t<this.numSubsets;t++)this.generateParticleSet(e,t);this.addEventListeners(),this.onWindowResize(),// Schedule orbit regeneration
this.updateIntervalKey=window.setInterval(this.updateOrbit,3e3)}setLevelSubsetCount(e){let{levelCount:t,pointsPerSubset:n,subsetCount:r}=e;console.log("setLevelSubsetCount",e),this.numLevels=t||this.numLevels,this.numSubsets=r||this.numSubsets,this.numPointsSubset=n||this.numPointsSubset,(void 0!==r||void 0!==n)&&(this.initOrbit(this.numSubsets,this.numPointsSubset),this.updateOrbit());let i=new Set;// Delete any particle sets that are no longer needed
this.particleSets=this.particleSets.filter(({myLevel:e,particles:t,mySubset:n})=>{let r=e<this.numLevels&&n<this.numSubsets;return r?i.add(`${e}-${n}`):this.scene.remove(t),r});// Generate any new particle sets
for(let e=0;e<this.numLevels;e++)for(let t=0;t<this.numSubsets;t++)i.has(`${e}-${t}`)||this.generateParticleSet(e,t);this.fireSettingsChange()}generateParticleSet(e,t){// Updating from Geometry to BufferGeometry
// https://github.com/mrdoob/three.js/pull/21031
// https://discourse.threejs.org/t/three-geometry-will-be-removed-from-core-with-r125/22401
let n=this.orbit.subsets[t].map(({vertex:e})=>e),r=new tO;r.setFromPoints(n);// Updating from ParticleSystem to points
// https://github.com/mrdoob/three.js/issues/4065
let i=new i_({size:5,map:this.texture,blending:2,depthTest:!1,transparent:!1});i.color.setHSL(...uz(this.hueValues[t],.8,1));let a=new iw(r,i);a.position.x=0,a.position.y=0,a.position.z=-600*e-600*t/this.numSubsets+750,this.scene.add(a),this.particleSets.push({myMaterial:i,myLevel:e,mySubset:t,needsUpdate:!1,particles:a})}addEventListeners(){// Setup listeners
document.addEventListener("mousemove",this.onDocumentMouseMove,!1),document.addEventListener("touchstart",this.onDocumentTouchStart,!1),document.addEventListener("touchmove",this.onDocumentTouchMove,!1),document.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("gamepadconnected",this.onControllerConnected,!1),window.addEventListener("gamepaddisconnected",this.onControllerDisconnected,!1),window.addEventListener("resize",this.onWindowResize,!1)}animate(){this.destroyed||(requestAnimationFrame(this.animate),this.stats.begin(),this.render(),this.stats.end())}render(){// update particle positions
// for (let i = 0; i < this.scene.children.length; i++) {
for(let e of(this.camera.position.x>=-200&&this.camera.position.x<=200&&(this.camera.position.x+=(this.getMouseX()-this.camera.position.x)*.05,this.camera.position.x<-200&&(this.camera.position.x=-200),this.camera.position.x>200&&(this.camera.position.x=200)),this.camera.position.y>=-200&&this.camera.position.y<=200&&(this.camera.position.y+=(-this.getMouseY()-this.camera.position.y)*.05,this.camera.position.y<-200&&(this.camera.position.y=-200),this.camera.position.y>200&&(this.camera.position.y=200)),this.camera.lookAt(this.scene.position),this.particleSets)){let{particles:t,myMaterial:n,mySubset:r}=e;// if the particle level has passed the fade distance
if(t.position.z+=this.speed,t.rotation.z+=this.rotationSpeed,t.position.z>this.camera.position.z&&(// move the particle level back in front of the camera
t.position.z=-(600*(this.numLevels-1)),e.needsUpdate)){// update the geometry and color
let i=this.orbit.subsets[r].map(({vertex:e})=>e),a=e.particles.geometry;a.setFromPoints(i),t.geometry.attributes.position.needsUpdate=!0,n.color.setHSL(...uz(this.hueValues[r],.8,1)),e.needsUpdate=!1}}this.renderer.render(this.scene,this.camera)}///////////////////////////////////////////////
// Hopalong Orbit Generator
///////////////////////////////////////////////
updateOrbit(){for(let e of(this.generateOrbit(this.numSubsets,this.numPointsSubset),this.generateHues(this.numSubsets),this.particleSets.values()))e.needsUpdate=!0}generateHues(e){this.hueValues=Array(e).fill(0).map(()=>Math.random())}generateOrbit(e,t){this.prepareOrbit();let{a:n,b:r,c:i,d:a,e:o}=this.orbitParams,s=this.orbit.subsets,l=0,u=0,c=0,f=0;for(let a=0;a<e;a++){// Use a different starting point for each orbit subset
let e=.005*a*(.5-Math.random()),o=.005*a*(.5-Math.random()),d=s[a];for(let a=0;a<t;a++){var h;// Iteration formula (generalization of the Barry Martin's original one)
let[t,s]=[o-Math.sqrt(Math.abs(r*(h=e)-i))*Math.sign(h),n-h];e=t,o=s,d[a].x=e,d[a].y=o,e<l?l=e:e>u&&(u=e),o<c?c=o:o>f&&(f=o)}}let d=3e3/(u-l),p=3e3/(f-c);this.orbit.xMin=l,this.orbit.xMax=u,this.orbit.yMin=c,this.orbit.yMax=f,this.orbit.scaleX=d,this.orbit.scaleY=p;// Normalize and update vertex data
for(let e=0;e<this.numSubsets;e++){let n=s[e];for(let e=0;e<t;e++)n[e].vertex.setX(d*(n[e].x-l)-1500),n[e].vertex.setY(p*(n[e].y-c)-1500)}}prepareOrbit(){this.shuffleParams(),this.orbit.xMin=0,this.orbit.xMax=0,this.orbit.yMin=0,this.orbit.yMax=0}shuffleParams(){this.orbitParams={a:-30+60*Math.random(),b:.2+1.6*Math.random(),c:5+12*Math.random(),d:0+10*Math.random(),e:0+12*Math.random()}}///////////////////////////////////////////////
// Event listeners
///////////////////////////////////////////////
onDocumentMouseMove(e){this.mouseLocked||(this.mouseX=e.clientX-this.windowHalfX,this.mouseY=e.clientY-this.windowHalfY)}onDocumentTouchStart(e){this.mouseLocked||1!=e.touches.length||(this.mouseX=e.touches[0].pageX-this.windowHalfX,this.mouseY=e.touches[0].pageY-this.windowHalfY)}onDocumentTouchMove(e){this.mouseLocked||1!=e.touches.length||(this.mouseX=e.touches[0].pageX-this.windowHalfX,this.mouseY=e.touches[0].pageY-this.windowHalfY)}setMouseLock(e){void 0===e?this.mouseLocked=!this.mouseLocked:this.mouseLocked=e,this.fireSettingsChange()}recenterCamera(){this.camera.position.x=0,this.camera.position.y=0,this.mouseX=0,this.mouseY=0,this.setMouseLock(!0)}getMouseX(){return this.mouseX}getMouseY(){return this.mouseY}applySettings(e){let{speed:t,rotationSpeed:n,mouseLocked:r,cameraFov:i}=e;void 0!==t&&(this.speed=t),void 0!==n&&(this.rotationSpeed=n),void 0!==r&&(this.mouseLocked=r),void 0!==i&&this.setCameraFOV(i);let{levelCount:a,subsetCount:o,pointsPerSubset:s}=e,l={levelCount:a,subsetCount:o,pointsPerSubset:s};Object.values(l).some(e=>void 0!==e)&&this.setLevelSubsetCount(l)}fireSettingsChange(){this.onSettingsUpdate(this.getSettings())}getSettings(){let{speed:e,rotationSpeed:t,mouseLocked:n}=this;return{speed:e,rotationSpeed:t,mouseLocked:n,cameraFov:this.camera.fov,levelCount:this.numLevels,subsetCount:this.numSubsets,pointsPerSubset:this.numPointsSubset}}changeFov(e){let t=this.camera.fov+e;this.setCameraFOV(t)}changeSpeed(e){let t=this.speed+e;t>=0?this.speed=t:this.speed=0,this.fireSettingsChange()}changeRotationSpeed(e){this.rotationSpeed+=e,this.fireSettingsChange()}changeLevelSubset(e){this.setLevelSubsetCount({levelCount:this.numLevels+e,subsetCount:this.numSubsets+e})}changePointsPerSubset(e){this.setLevelSubsetCount({pointsPerSubset:this.numPointsSubset+e})}resetDefaults(){this.speed=8,this.rotationSpeed=.005,this.camera.fov=60,this.mouseLocked=!1,this.setLevelSubsetCount({levelCount:7,subsetCount:7,pointsPerSubset:4e3}),this.fireSettingsChange()}getBounds(){return{width:2*this.windowHalfX,height:2*this.windowHalfY}}getCurrentMovement(){return{speed:this.speed,rotationSpeed:this.rotationSpeed,x:this.mouseX,y:this.mouseY}}applyMovement(e){this.speed=e.speed,this.rotationSpeed=e.rotationSpeed,this.mouseX=e.x,this.mouseY=e.y}updateGamepadMovement(e){let t=e.id.includes("SPEEDLINK COMPETITION PRO (Vendor: ")?uV(uH):e.id.includes("SPEEDLINK COMPETITION PRO Game Controller for Android")?uV(uG):uB,n=this.getBounds(),r=this.getCurrentMovement(),i=t(n,r,e);this.applyMovement(i),this.fireSettingsChange()}controllerLoop(){let[e]=navigator.getGamepads();this.controllerConnected&&e&&(this.updateGamepadMovement(e),requestAnimationFrame(this.controllerLoop))}stopMovement(){this.speed=0,this.rotationSpeed=0}initGamepadMode(){this.controllerConnected=!0,this.stopMovement(),this.recenterCamera(),requestAnimationFrame(this.controllerLoop)}exitGamepadMode(){this.controllerConnected=!1}onControllerConnected(e){this.controllerConnected=!0,this.initGamepadMode()}onControllerDisconnected(e){this.controllerConnected=!1}onKeyDown(e){let{key:t}=e,n=1===t.length?t.toUpperCase():t,r={F:()=>this.changeFov(2),G:()=>this.changeFov(-2),".":()=>this.changeLevelSubset(1),",":()=>this.changeLevelSubset(-1),P:()=>this.changePointsPerSubset(1e3),O:()=>this.changePointsPerSubset(-1e3),H:()=>document.body.classList.toggle("hideCursor"),C:()=>this.recenterCamera()};if(n in r){r[n]();return}if(this.controllerConnected)return;let i={ArrowUp:()=>this.changeSpeed(.25),W:()=>this.changeSpeed(1),ArrowDown:()=>this.changeSpeed(-.25),S:()=>this.changeSpeed(-1),ArrowLeft:()=>this.changeRotationSpeed(5e-4),A:()=>this.changeRotationSpeed(.002),ArrowRight:()=>this.changeRotationSpeed(-.0005),D:()=>this.changeRotationSpeed(-.002),R:()=>this.resetDefaults(),L:()=>this.setMouseLock()};n in i&&i[n]()}onWindowResize(){this.windowHalfX=window.innerWidth/2,this.windowHalfY=window.innerHeight/2,this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setViewport(0,0,window.innerWidth,window.innerHeight)}setCameraFOV(e){this.camera.fov=e,this.camera.updateProjectionMatrix(),this.fireSettingsChange()}}var uY={};uY=new URL("poppi_logo_inverted.06249243.png",import.meta.url).toString();/**
 * @author alteredq / http://alteredqualia.com/
 * @author mr.doob / http://mrdoob.com/
 */class u${constructor(){this.canvas=!!window.CanvasRenderingContext2D,this.webgl=this.detectWebgl(),this.workers=!!window.Worker,this.fileapi=!!(window.File&&window.FileReader&&window.FileList&&window.Blob)}detectWebgl(){try{return!!window.WebGLRenderingContext&&!!document.createElement("canvas").getContext("experimental-webgl")}catch(e){return!1}}getWebGLErrorMessage(){let e=document.createElement("div");return e.style.fontFamily="monospace",e.style.fontSize="13px",e.style.textAlign="center",e.style.background="#eee",e.style.color="#000",e.style.padding="1em",e.style.width="475px",e.style.margin="5em auto 0",this.webgl||(e.innerHTML=`Your ${window.WebGLRenderingContext?"graphics card":"browser"} does not seem to support <a href="https://get.webgl.org/get-a-webgl-implementation/">WebGL</a>.<br />
Find out how to get it <a href="https://get.webgl.org/">here</a>.`),e}addGetWebGLMessage(e={}){e=e||{};let t=void 0!==e.parent?e.parent:document.body,n=void 0!==e.id?e.id:"oldie",r=this.getWebGLErrorMessage();r.id=n,t.appendChild(r)}}class uK{constructor(){this.texture=new aU().load(/*@__PURE__*/f(uY)),this.stats=new/*@__PURE__*/(f(x)),this.settings={pointsPerSubset:4e3,levelCount:7,subsetCount:7,speed:8,rotationSpeed:.005,cameraFov:60,isPlaying:!1,mouseLocked:!1},/*@__PURE__*/f(g)(this),this.createHopalong()}createHopalong(e={}){this.hopalong&&this.hopalong.destroy();let t=document.getElementById("render-canvas");if("object"!=typeof t||!(t instanceof HTMLCanvasElement))throw Error("Unable to find canvas.");this.hopalong=new uq({settings:e,canvas:t,texture:this.texture,stats:this.stats,onSettingsUpdate:e=>this.renderReact(e)})}renderReact(e){let t=document.getElementById("react-root");if(!t)throw Error("Unable to find React root.");(0,_.render)(/*@__PURE__*/f(y).createElement(uI,{stats:this.stats,settings:{...this.settings,...e},onSettingsChange:this.applySettings,onCenter:()=>this.hopalong.recenterCamera(),onReset:()=>this.hopalong.resetDefaults()}),t)}applySettings(e){let{isPlaying:t,...n}=e;this.hopalong.applySettings(n);let r={...this.settings,...this.hopalong.getSettings(),isPlaying:t??this.settings.isPlaying};this.settings=r,this.renderReact(r)}}document.addEventListener("DOMContentLoaded",()=>{let e=new u$;e.webgl||e.addGetWebGLMessage(),new uK});//# sourceMappingURL=index.6f1b843d.js.map

//# sourceMappingURL=index.6f1b843d.js.map
